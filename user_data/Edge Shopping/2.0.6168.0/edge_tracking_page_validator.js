!function(){"use strict";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{d2:function(){return oe}});function t(e){return!e||!e.trim()}let r=function(e){return e[e.ApplyCouponsMessage=1]="ApplyCouponsMessage",e[e.AutoApplyCompletedMessage=2]="AutoApplyCompletedMessage",e[e.CheckoutPageMessage=3]="CheckoutPageMessage",e[e.CloseOverlayMessage=4]="CloseOverlayMessage",e[e.ClosedPopupMessage=5]="ClosedPopupMessage",e[e.CountElementsResponse=6]="CountElementsResponse",e[e.CreateOverlayMessage=7]="CreateOverlayMessage",e[e.CreatePopupMessage=8]="CreatePopupMessage",e[e.CreatePriceComparisonMessage=9]="CreatePriceComparisonMessage",e[e.EdgeApplyCouponsMessage=10]="EdgeApplyCouponsMessage",e[e.EmptyResponse=11]="EmptyResponse",e[e.ErrorResponse=12]="ErrorResponse",e[e.GetCompetingPricesMessage=13]="GetCompetingPricesMessage",e[e.GetCompetingPricesResponse=14]="GetCompetingPricesResponse",e[e.GetTextValueResponse=15]="GetTextValueResponse",e[e.GetUIStateMessage=16]="GetUIStateMessage",e[e.GetUIStateResponse=17]="GetUIStateResponse",e[e.MoveProgressBarMessage=18]="MoveProgressBarMessage",e[e.ShowResultMessage=19]="ShowResultMessage",e[e.TelemetryMessage=20]="TelemetryMessage",e[e.UpdateCurrentCouponMessage=21]="UpdateCurrentCouponMessage",e[e.OpalMessage=22]="OpalMessage",e[e.ProductPageMessage=23]="ProductPageMessage",e[e.ProductPageResponse=24]="ProductPageResponse",e[e.EdgeCreateOverlayMessage=25]="EdgeCreateOverlayMessage",e[e.EdgeShowResultMessage=26]="EdgeShowResultMessage",e[e.VerifySelectorsMessage=27]="VerifySelectorsMessage",e[e.VerifySelectorsResponse=28]="VerifySelectorsResponse",e[e.AutoApplyCancelledMessage=29]="AutoApplyCancelledMessage",e[e.ContentInitMessage=30]="ContentInitMessage",e[e.ClearDataMessage=31]="ClearDataMessage",e[e.DOMMutationMessage=32]="DOMMutationMessage",e[e.UpdateCurrencyMessage=33]="UpdateCurrencyMessage",e[e.CheckoutProgressMessage=34]="CheckoutProgressMessage",e[e.ECCreateOverlayMessage=35]="ECCreateOverlayMessage",e[e.ECShowResultMessage=36]="ECShowResultMessage",e[e.ECFieldErrorMessage=37]="ECFieldErrorMessage",e[e.ECCreateUpdatePaymentOverlayMessage=38]="ECCreateUpdatePaymentOverlayMessage",e[e.PrintableGroceryCouponsMessage=39]="PrintableGroceryCouponsMessage",e[e.WalletDrawerCreateOverlayMessage=40]="WalletDrawerCreateOverlayMessage",e[e.WalletDrawerCloseMessage=41]="WalletDrawerCloseMessage",e[e.BackgroundAutoApplyCancelledMessage=42]="BackgroundAutoApplyCancelledMessage",e[e.GetChcekedValueResponse=43]="GetChcekedValueResponse",e[e.SelectorSuccessResponse=44]="SelectorSuccessResponse",e[e.SelectorExtractionMessage=45]="SelectorExtractionMessage",e[e.SelectorExtractionResponse=46]="SelectorExtractionResponse",e[e.ShopRunnerOverlayMessage=47]="ShopRunnerOverlayMessage",e[e.GetFieldValueResponse=48]="GetFieldValueResponse",e[e.GoodRxMessage=49]="GoodRxMessage",e[e.UserAgreementStatusMessage=50]="UserAgreementStatusMessage",e[e.GetTabDataFromBackgroundMessage=51]="GetTabDataFromBackgroundMessage",e[e.GetTabDataFromBackgroundResponse=52]="GetTabDataFromBackgroundResponse",e[e.GetFileContentFromResourcesMessage=53]="GetFileContentFromResourcesMessage",e[e.GetFileContentFromResourcesResponse=54]="GetFileContentFromResourcesResponse",e[e.AutoApplyNotificationSafariMessage=55]="AutoApplyNotificationSafariMessage",e[e.InstantAddToCartMessage=56]="InstantAddToCartMessage",e[e.SetStorageValueMessage=57]="SetStorageValueMessage",e[e.GetStorageValueMessage=58]="GetStorageValueMessage",e[e.GetStorageValueResponse=59]="GetStorageValueResponse",e[e.CouponsClippingNotificationSafariMessage=60]="CouponsClippingNotificationSafariMessage",e[e.RunQuerySelectorAllOnBodyMessage=61]="RunQuerySelectorAllOnBodyMessage",e[e.RunQuerySelectorAllOnBodyResponse=62]="RunQuerySelectorAllOnBodyResponse",e[e.BackgroundExecuteCouponsClippingMessage=63]="BackgroundExecuteCouponsClippingMessage",e[e.ContentExecuteCouponsClippingMessage=64]="ContentExecuteCouponsClippingMessage",e[e.ContentExecuteCouponsClippingResponse=65]="ContentExecuteCouponsClippingResponse",e[e.WalletDrawerSkipCouponMessage=66]="WalletDrawerSkipCouponMessage",e[e.GetSafariLatestVersion=67]="GetSafariLatestVersion",e[e.GetSafariLatestVersionResponse=68]="GetSafariLatestVersionResponse",e[e.SuccessInstantAddToCartMessage=69]="SuccessInstantAddToCartMessage",e[e.RenderSafariTagInDomMessage=70]="RenderSafariTagInDomMessage",e[e.DomFlyoutMessage=71]="DomFlyoutMessage",e}({}),n=function(e){return e[e.PlainString=0]="PlainString",e[e.JsonString=1]="JsonString",e}({}),o=function(e){return e.Opal="Opal",e.Extension="Extension",e.SafariExtension="SafariExtension",e.SafariIOSExtension="SafariIOSExtension",e.Edge="Edge",e.EdgeMobile="EdgeMobile",e.Sapphire="Sapphire",e.RBC="RBC",e.EdgeAndroid="EdgeAndroid",e.EdgeiOS="EdgeiOS",e.EdgeDiscover="EdgeDiscover",e}({});let s=function(e){return e.Zero="=0",e.One="=1",e.OneString="one",e.Few="few",e.Many="many",e.Other="other",e}({});const i=[o.EdgeMobile,o.EdgeAndroid,o.EdgeiOS];o.Edge;let a=function(e){return e.ORDERED="Ordered",e.SHIPPED="Shipped",e.DELIVERED="Delivered",e.RETURNED="Returned",e.CANCELED="Canceled",e.ERROR="Error",e}({});new Set(["amazon.com","amazon.ca","amazon.co.uk","amazon.co.jp","alibaba.com"]),new Map(Object.entries({"etsy.com":"receipt_id","target.com":"referenceId","tmall.com":"bizOrderId"}));let p=function(e){return e.DELIVERED_REGEX="(delivered|配達しました|已完成|交易成功)",e.SHIPPED_REGEX="(arriv|(^((?!not).)*ship)|到着|正在出库)",e.RETURNED_REGEX="(return|戻る|返金)",e.CANCELED_REGEX="(cancel|closed|キャンセル|已取消|交易关闭)",e}({});const c="DUMMY_SELECTOR",l="COMPONENT_TO_FOCUS_IN_SHORELINE",g=(Object.keys({"bestbuy.com":{policyDays:15,supportPageUrl:"https://www.bestbuy.com/site/help-topics/price-match-guarantee/pcmcat290300050002.c?id=pcmcat290300050002"},"costco.com":{policyDays:30,supportPageUrl:"https://customerservice.costco.com/app/answers/detail/a_id/628/~/price-adjustment---costco.com-orders",useCartAtPathname:"/checkoutcartdisplayview"},"kohls.com":{policyDays:14,supportPageUrl:"https://cs.kohls.com/app/answers/detail/a_id/90/~/price-match-policy"},"target.com":{policyDays:14,supportPageUrl:"https://help.target.com/help/subcategoryarticle?childcat=Price+Match+Guarantee&parentcat=Policies+%26+Guidelines&searchQuery=search+help",useCartAtPathname:"/cart"},"dickssportinggoods.com":{policyDays:14,supportPageUrl:"https://www.dickssportinggoods.com/s/price-match-policy",useCartAtPathname:"/orderitemdisplay"},"jcpenney.com":{policyDays:14,supportPageUrl:"https://www.jcpenney.com/m/customer-service/our-lowest-price-guarantee"},"macys.com":{policyDays:10,supportPageUrl:"https://customerservice-macys.com/articles/how-can-i-get-a-price-adjustment",useCartAtPathname:"/my-bag",hasCsrError:!0},"ashleyfurniture.com":{policyDays:30,supportPageUrl:"https://www.ashleyfurniture.com/price-match/"},"gap.com":{policyDays:14,supportPageUrl:"https://www.gap.com/customerService/info.do?cid=1192378"},"staples.com":{policyDays:14,supportPageUrl:"https://www.staples.com/sbd/cre/marketing/pmg/index.html"}}),"2.069");let u=null;const d="test-shopping-localstorage";function h(e){let t=null;return S()&&(t=window.localStorage.getItem(e)),t}function S(){try{if(null!==u)return u;"undefined"!=typeof window&&window?.localStorage&&(window.localStorage.setItem(d,d),window.localStorage.getItem(d),window.localStorage.removeItem(d),u=!0)}catch(e){u=!1}return u}class m{static Sleep(e){return new Promise((t=>setTimeout(t,e)))}static StringifyMap(e,t){return t instanceof Map?{dataType:"Map",value:Array.from(t.entries())}:t}static parseBool(e){return"true"===e||!0===e}static ParseMap(e,t){return"object"==typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t}static async WaitForCondition(e,t,r){const n=(new Date).getTime();for(;!await e()&&n+t>(new Date).getTime();)await m.Sleep(r??100);return await e()}static async WaitUntilCondition(e,t){const r=(new Date).getTime();for(;r+t>(new Date).getTime();){if(await e())return!0;await m.Sleep(100)}return!1}static async WaitForSyncCondition(e,t){const r=(new Date).getTime();for(;r+t>(new Date).getTime();){if(e())return!0;await m.Sleep(100)}return!1}static IsValidDataField(e){return null!=e&&e.length>0&&"null"!==e}static IsPageMatch(e,t,r,n){let o=!1;if(m.IsValidDataField(e)&&(o=m.IsOnPage(e,r)),m.IsValidDataField(t))try{!n&&location.href?.toLocaleLowerCase()?.includes(r.toLocaleLowerCase())&&"chrome-untrusted://shopping/"!==location.href&&(n=location.href?.toLocaleLowerCase()),o=m.IsPageRegexMatch(t,n??r)}catch{}return o}static IsPageRegexMatch(e,t){if(m.IsValidDataField(e)){return new RegExp(e).test(t.toLowerCase())}return!1}static IsOnPage(e,t){if(m.IsValidDataField(e)){const r=e.toLowerCase().replace(/\s+/g,"").split(","),n=t.toLowerCase();let o=!1;for(const e of r)if(n.indexOf(e)>=0){o=!0;break}return o}return!1}static ObserveUntil(e,t){const r=new MutationObserver((async()=>{e()&&(r.disconnect(),t())}));r.observe(document.body,{attributeFilter:["offsetWidth","offsetHeight"],childList:!0,subtree:!0})}static async MeasureExecutionTime(e,t){const r=performance.now();await e();return performance.now()-r}static DeepAssign(e,t){return Object.keys(t).forEach((r=>{"object"==typeof t[r]?(e[r]||Object.assign(e,{[r]:{}}),m.DeepAssign(e[r],t[r])):Object.assign(e,{[r]:t[r]})})),e}static scrollToModuleIfTargeted(e,t){h(l)===t&&setTimeout((()=>{e?.scrollIntoView({behavior:"smooth",block:"start"}),localStorage.removeItem(l)}),500)}}var E=m;function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function f(e){var t=function(e,t){if("object"!==C(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===C(t)?t:String(t)}function v(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let y=function(e){return e.sanConfirmationMessage="msShoppingExp0",e.onlineSelectorExtraction="msShoppingExp1",e.couponRedesignExperiment="msShoppingExp2",e.PCDouble="msShoppingExp3",e.PCOutOfStock="msShoppingExp4",e.newPriceHistoryInsights="msShoppingExp5",e.newNotificationManagementUI="msShoppingExp6",e.shopRunnerFlag="msShoppingExp8",e.manualCoupon="msShoppingExp9",e.startShoppingRelatedProducts="msShoppingExp11",e.singleScrollingShoreline="msShoppingExp12",e.dealczarBackend="msShoppingExp13",e.sanConsent="msShoppingExp14",e.pcClickoutReverse="msShoppingExp15",e.optionalCheckoutPageUrl="msShoppingExp16",e.autosVinExtraction="msShoppingExp17",e.domMutationEnabled="msShoppingExp18",e.newPriceHistoryGraph="msShoppingExp20",e.fetchFromCDN="msShoppingExp21",e.disableChatChips="msShoppingExp22",e.snoozeWithOptions="msShoppingExp23",e.searchInPane="msShoppingExp24",e.calculatedCutOffPriceFiltering="msShoppingExp25",e.pcbAddressBar="msShoppingExp29",e.checkoutSkuCashbackEstimation="msShoppingExp31",e.spbInstantAutoActivate="msShoppingExp33",e.productTracking="msShoppingExp34",e.amazongiftCardExp="msShoppingExp35",e.suggestedCouponEnhancement="msShoppingExp36",e.autosApi="msShoppingExp37",e.pcboutofflownotification="msShoppingExp38",e.dynamicRanking="msShoppingExp39",e.trendingRecommendations="msShoppingExp40",e.groceryAnonymous="msShoppingExp41",e.buyingGuideMultiLine="msShoppingExp43",e.spbPdpWithActivated="msShoppingExp44",e.sanConsentStringUpdate="msShoppingExp45",e.autosJatoDeals="msShoppingExp46",e.startShoppingVisualSearch="msShoppingExp47",e.similarOffers="msShoppingExp49",e.alertSettings="msShoppingExp50",e.codexScenarios="msShoppingExp51",e.shorelineinboxcoupons="msShoppingExp52",e.spbPdpCashBack="msShoppingExp53",e.intersperseNativeAds="msShoppingExp54",e.sidepaneCashback="msShoppingExp55",e.spbAutoActivationOnSearch="msShoppingExp56",e.abandonedCartTracking="msShoppingExp57",e.startShoppingMomentInTimeModule="msShoppingExp58",e.triviaIcon="msShoppingExp59",e.groceryOffersSearch="msShoppingExp60",e.spbAndQtOnMainSearchBar="msShoppingExp61",e.rewardNotification="msShoppingExp62",e.discoverShopping="msShoppingExp63",e.ptShorterCooldown="msShoppingExp64",e.ptLongerDismiss="msShoppingExp65",e.spbCheckoutAutoActivation="msShoppingExp66",e.domMutationExpansion="msShoppingExp67",e.temporalShoppingOnDiscover="msShoppingExp68",e.computeJourneyStage="msShoppingExp69",e.footerExperiments="msShoppingExp70",e.couponsConfidence="msShoppingExp71",e.ProductBestCouponConsent="msShoppingExp72",e.lowCouponExpectationExpansion="msShoppingExp73",e.spbExpiryMicroNotif="msShoppingExp74",e.chatChipsOrder1="msShoppingExp75",e.chatChipsOrder3="msShoppingExp76",e.spbHomePage="msShoppingExp77",e.enrollToRebateBonus="msShoppingExp78",e.instantAddToCart="msShoppingExp79",e.autoActivateInstantAtc="msShoppingExp80",e.searchFeature="msShoppingExp99",e.sustainability="msShoppingExp100",e.startShoppingCategoryAds="msShoppingExp101",e.startShoppingNativeAds="msShoppingExp110",e.incentiveCampaign="msShoppingExp10000",e.autoOpenControllerScript="msEdgeShoppingAutoOpenControllerScript",e.autoOpenControllerMask="msEdgeShoppingServerSideAutoShow",e.autoShowControlForFeature="msEdgeShoppingAutoShowControlForFeature",e.autofillAutoPopup="msAutofillAutoPopup",e.backgroundAutoApply="msEdgeShoppingBackgroundAutoApply",e.bannerShowCashback="msEdgeShoppingBannerRebates",e.bannerShowCoupons="msEdgeShoppingBannerCoupons",e.bannerShowPriceComparison="msEdgeShoppingBannerPriceCompare",e.bannerShowPriceHistory="msEdgeShoppingBannerPriceHistory",e.categoryDeals="msEdgeShoppingPwiloNotificationsCategoryDeals",e.clarity="msEdgeShoppingClarityEnabled",e.clarityWithCookies="msEdgeShoppingClarityEnabledWithCookies",e.clientUrlNavigation="msEdgeShoppingClientUrlNavigation",e.coloredHeader="msShoppingColoredHeader",e.couponsUX="msEdgeShoppingCouponsUXExperimentation",e.expressCheckout="msEdgeShoppingExpressCheckout",e.expressCheckoutFillDetails="msEdgeShoppingExpressCheckoutFillDetails",e.injectConfirmationScriptUponPurchaseCompletion="msEdgeShoppingAllowInjectConfirmationScriptNextNavigation",e.microNotification="msEdgeShoppingNotifications",e.rebatesSsoFlow="msEdgeShoppingRebatesV2Enroll",e.msWalletBNPL="msWalletBNPL",e.muidNotifications="msEdgeShoppingPwiloNotifications",e.myShopping="msEdgeShoppingMyShopping",e.pcBannerUXExperimentation1="msEdgeShoppingPCBannerUXExperimentation1",e.pcBannerUXExperimentation2="msEdgeShoppingPCBannerUXExperimentation2",e.pcBannerUXExperimentation3="msEdgeShoppingPCBannerUXExperimentation3",e.pcBannerUXExperimentation4="msEdgeShoppingPCBannerUXExperimentation4",e.pcBannerUXExperimentation5="msEdgeShoppingPCBannerUXExperimentation5",e.pcBannerUXExperimentation6="msEdgeShoppingPCBannerUXExperimentation6",e.priceDropNotification="msEdgeShoppingServerNotifications",e.ProductPageBackgroundAutoApply="msEdgeShoppingBackgroundAutoApplyForPDPAndHomePage",e.pwiloOnOpenProcessing="msEdgeShoppingPwiloNotificationsOnOpenProcess",e.rewardFlyout="msEdgeShoppingRewards",e.serverSideRenderingEnabled="msEdgeServerSideShopping",e.showAmazonOtherSellers="msEdgeShoppingOtherSeller",e.showNudgeTipsOverlay="msShoppingExpNudge",e.showPaymentOptions="msZipPayVirtualCard",e.showPaymentOptionsOnProductPage="msEdgeShoppingProductFlyoutWallet",e.showProductHistory="msWebAssistQuery",e.showWalletFooter="msEnableWallet",e.signinRebates="msEdgeShoppingRebatesSignUp",e.signinRewards="msEdgeShoppingRewardsSignUp",e.snoozeAutoshow="msEdgeShoppingAutoShowMuteForFeature",e.socialCoupons="msEdgeShoppingExclusiveCoupons",e.socialCouponsAutoShow="msEdgeShoppingExclusiveCouponsAutoShow",e.socialSharingUpdate="msShoppingSocialSharingUpdate",e.rebatesOrganicNew="msEdgeShoppingRebatesAutoShowNewUser",e.rebatesGuidedSwitch="msEdgeShoppingRebatesGuidedSwitch",e.paneOpenWithTab1="msEdgeShoppingMainTab1",e.paneOpenWithTab2="msEdgeShoppingMainTab2",e.paneOpenWithTab3="msEdgeShoppingMainTab3",e.enableWinCart="msEdgeShoppingWinCart",e.axShopping="msEnableAXShoppingNavigation",e.shoppingOnDiscover="msEdgeShoppingOnDiscover",e.pcOfferLevel="msShoppingAutoShowPriceComparisonOfferLevel",e.discoverPdpTopPriority="msDiscoverPdpTopPriority",e.limitPdpNotificationsOnLowStages="msLimitPdpNotificationsOnLowStages",e.clientRequests="msEdgeShoppingGenericDealsService",e.shoppingSettingsInPane="msEdgeShoppingSettingsInPane",e.shoppingSettingsInPaneNotificationBottomToggle="msEdgeShoppingSettingsInPaneNotificationBottomToggle",e.edgeShoppingRebatesForAADAccounts="msEdgeShoppingRebatesForAADAccounts",e.autoShowBGAA="msEdgeShoppingAutoShowBackgroundAutoApply",e.shoppingCjkProductUpsell="msEdgeShoppingCJKProductUpsell",e.pcAutoshowAvailable="msEdgeShoppingAutoShowPriceComparisonAvailable",e.travel1="msEdgeShoppingTravel1",e.travel2="msEdgeShoppingTravel2",e.travel3="msEdgeShoppingTravel3",e.travel4="msEdgeShoppingTravel4",e.travel5="msEdgeShoppingTravel5",e.travel6="msEdgeShoppingTravel6",e.CouponsPersonalization="edgeServerUX.shopping.couponsPersonalization",e.PhPersonalization="edgeServerUX.shopping.phPersonalization",e.CashbackPersonalization="edgeServerUX.shopping.cashbackPersonalization",e.cashBackOfferDetails="edgeServerUX.shopping.cashbackOfferDetails",e.cashBackDelayedEnrollmentEdgeFlow="edgeServerUX.shopping.cashBackDelayedEnrollmentEdgeFlow",e.CouponMessageFiltering="edgeServerUX.shopping.couponMessageFiltering",e.ShoppingTrips="edgeServerUX.shopping.shoppingTrips",e.ServerSideSearchInPane="edgeServerUX.shopping.searchInPane",e.showInboxCouponsUpsellMicronotification="edgeServerUX.shopping.inboxCouponsUpsellMicronotification",e.campaign="edgeServerUX.shopping.campaign",e.wishlistModule="edgeServerUX.shopping.wishlistModule",e.wishlistModuleRev="edgeServerUX.shopping.wishlistModuleRev",e.campaignAwareness="edgeServerUX.shopping.campaignAwareness",e.cbAnimationVar1="edgeServerUX.shopping.cbAnimationVar1",e.cbAnimationVar4="edgeServerUX.shopping.cbAnimationVar4",e.compositeNotificationsPriceHistoryPlusCoupons="edgeServerUX.shopping.compositeNotificationsPriceHistoryPlusCoupons",e.compositeNotificationsPriceHistoryPlusCouponsV2="edgeServerUX.shopping.compositeNotificationsPriceHistoryPlusCouponsV2",e.cashbackPdpPlusCouponsNotification="edgeServerUX.shopping.compositeNotificationsCashbackPdpPlusCoupons",e.cashbackPdpPlusCouponsNotificationV2="edgeServerUX.shopping.compositeNotificationsV2UX",e.cashbackPdpPlusPriceDropNotification="edgeServerUX.shopping.compositeNotificationsPriceHistoryPlusCashback",e.cashbackPdpPlusPriceDropNotificationV2="edgeServerUX.shopping.compositeNotificationsPriceHistoryPlusCashbackV2",e.lowerPricePdpPlusCashbackPlusCoupons="edgeServerUX.shopping.compositeNotificationsLowerPricePdpPlusCashbackPlusCoupons",e.lowerPricePdpPlusCashbackPlusCouponsV2="edgeServerUX.shopping.compositeNotificationsLowerPricePdpPlusCashbackPlusCouponsV2",e.acTrackingToggle="edgeServerUX.shopping.acTrackingToggle",e.ptConciseUi="edgeServerUX.shopping.ptConciseUi",e.BingL2BRQ="edgeServerUX.shopping.BingL2BRQ",e.SeeAllClickout="edgeServerUX.shopping.SeeAllClickout",e.cartExtractionFromBody="edgeServerUX.shopping.cartExtractionFromBody",e.PTRecentVwd="edgeServerUX.shopping.PTRecentVwd",e.autosMyGarageEntryPoint="edgeServerUX.shopping.autosMyGarageEntryPoint",e.autosMyGarageEntryPointV2="edgeServerUX.shopping.autosMyGarageEntryPointV2",e.spbAddToCart="edgeServerUX.shopping.addToCartVariation",e.couponRedesignCompressed="edgeServerUX.shopping.couponRedesignCompressed",e.couponRedesignExpanded="edgeServerUX.shopping.couponRedesignExpanded",e.lostUsersCashBack="edgeServerUX.shopping.lostUsersCashback",e.lostUsersCouponClipping="edgeServerUX.shopping.lostUsersCouponClipping",e.inboxSavings="edgeServerUX.shopping.inboxSavings",e.rakutenJPClipping="edgeServerUX.shopping.rakutenJP",e.triviaOnCouponsExperiments="edgeServerUX.shopping.triviaOnCouponsExperiments",e.triviaOnCashbackExperiments="edgeServerUX.shopping.triviaOnCashbackExperiments",e.CouponsPipelineV2="shopping.couponsV2Pipeline",e.PTOutOfStockVariations="edgeServerUX.shopping.PTOutOfStockVariations",e.zeroSuccessSkip="edgeServerUX.shopping.zeroSuccessSkip",e.spbSearchAutoActivation="edgeServerUX.shopping.spbSearchAutoActivation",e.postPurchaseTracking="edgeServerUX.shopping.postPurchaseTracking",e.PTPriceDropMicroNotification="edgeServerUX.shopping.priceDropMicronotification",e.PTEmail="edgeServerUX.shopping.ptEmailConsent",e.pdpStorewideCashbackEstimation="edgeServerUX.shopping.pdpStorewideCashbackEstimation",e.blockLowPerformanceNotifications="edgeServerUX.shopping.blockLowPerformanceNotifications",e.instantAddToCartExperiment="edgeServerUX.shopping.InstantATC",e.packageTrackingMicroNotification="edgeServerUX.shopping.packageTrackingMicroNotification",e.pcbAmazonSearch="edgeServerUX.shopping.pcbAmazonSearch",e.suppressAutoApply="edgeServerUX.shopping.suppressAutoApply",e.cbSplitModules="edgeServerUX.shopping.SeparateCashBackModules",e.inboxCouponsAAFailureUpsell="edgeServerUX.shopping.inboxCouponsAAFailureUpsell",e.inboxCouponsAASuccessUpsell="edgeServerUX.shopping.inboxCouponsAASuccessUpsell",e.mobileCashbackModule="edgeServerUX.shopping.mobileCashbackModule",e.mobileProductModules="edgeServerUX.shopping.mobileProductModules",e.suppressAAAutoApplyThreshold="edgeServerUX.shopping.AAAutoApplyFailureThreshold",e.suppressAADomainSuccessThreshold="edgeServerUX.shopping.AADomainSuccessThreshold",e.ptCouponsCashbackNotification="edgeServerUX.shoppping.ptCouponsCashbackNotification",e.journeyStageTelemetry="edgeServerUX.shopping.journeyStageTelemetry",e.revampedPriceComparison="edgeServerUX.shopping.revampedPriceComparison",e.qtCartPageAutoActivation="edgeServerUX.shopping.qtAutoActivation",e.discoverChatChips="edgeServerUX.shopping.discoverChatChips",e.discoverNotification="edgeServerUX.shopping.discoverNotification",e.discoverNotification50="edgeServerUX.shopping.discoverNotification50",e.discoverNotification100="edgeServerUX.shopping.discoverNotification100",e.discoverNotification500="edgeServerUX.shopping.discoverNotification500",e.travelCheaperFlights="edgeServerUX.shopping.travelCheaperFlights",e.travelCheaperFlightsListView="edgeServerUX.shopping.travelCheaperFlightsListView",e.travelExecuteAutoOpenService="edgeServerUX.shopping.travelExecuteAutoOpenService",e.travelRenderCheaperFlightsNotification="edgeServerUX.shopping.travelRenderCheaperFlightsNotification",e.travelCheaperFlightsModule="edgeServerUX.shopping.travelCheaperFlightsModule",e.pageDetection="edgeServerUX.shopping.pageDetection",e.disableJourneyStageComputation="edgeServerUX.shopping.disableJourneyStageComputation",e.userInsights="edgeServerUX.shopping.userInsights",e.expertInsights="edgeServerUX.shopping.expertInsights",e.ptAbandonedCartNotificationToggle="edgeServerUX.shopping.ptAbandonedCartNotificationToggle",e.productSummaryCardEnabled="edgeServerUX.shopping.productSummaryCardTestExp99",e.productSummaryCardEnabledSticky="edgeServerUX.shopping.productSummaryCardStickyTestExp99",e.productSummaryInsights="edgeServerUX.shopping.productSummaryInsightsInShoppingPane",e.cbMerchantAbTesting="edgeServerUX.shopping.merchantAbTesting",e.cbMerchantAbTestingControl="edgeServerUX.shopping.merchantAbTestingCf",e.showSpbOffersOnShorelineOpen="edgeServerUX.shopping.showSpbOffersOnShorelineOpen",e.showSpbOffersOnShorelineOpenV2="edgeServerUX.shopping.showSpbOffersOnShorelineOpenV2",e.aaNoDontShowAgain="edgeServerUX.shopping.aaNoDontShowAgain",e.aaEarlyReturn="edgeServerUX.shopping.aaEarlyReturn",e.articlesCashbackNotification="edgeServerUX.shopping.artCashNotif",e.suppressLowCTR="edgeServerUX.shopping.suppressLowCTR",e.couponBackgroundDarkCode="edgeServerUX.shopping.couponBackgroundDarkCode",e.couponBackgroundLightCode="edgeServerUX.shopping.couponBackgroundLightCode",e.couponLightCode="edgeServerUX.shopping.couponLightCode",e.couponDarkCode="edgeServerUX.shopping.couponDarkCode",e.cashbackEUMarkets="edgeServerUX.shopping.cashbackEUMarkets",e.autoSuppressNegativeBGAA="edgeServerUX.shopping.autoSupperssNegativeBGAA",e.bgaaNoSnoozeTime="edgeServerUX.shopping.bgaaNoSnoozeTime",e.ptIntlExpand="edgeServerUX.shopping.ptIntlExpand",e.newHeader="edgeServerUX.shopping.newHeader",e.loggingThrottle="edgeServerUX.shopping.loggingThrottle",e.sellerIconCovIncr="edgeServerUX.shopping.sellerIconCovIncr",e.sendCheckoutValid="edgeServerUX.shopping.sendCheckoutValid",e.pdpSelectorExtraction="edgeServerUX.shopping.pdpSelectorExtraction",e.pcSeeMore="edgeServerUX.shopping.pcSeeMore",e}({});var x=class{constructor(){v(this,"name",void 0),v(this,"supported",void 0),v(this,"variant",void 0),v(this,"multipleVariants",void 0)}};var R=class{constructor(){v(this,"value",void 0),v(this,"params",void 0)}};let P=function(e){return e.msShoppingTestExp1="msShoppingTestExp1",e.msShoppingTestExp2="msShoppingTestExp2",e.msShoppingTestExp3="msShoppingTestExp3",e.msShoppingTestExp4="msShoppingTestExp4",e.msShoppingTestExp5="msShoppingTestExp5",e.msShoppingTestExp6="msShoppingTestExp6",e.msShoppingTestExp7="msShoppingTestExp7",e.msShoppingTestExp8="msShoppingTestExp8",e.msShoppingTestExp9="msShoppingTestExp9",e.msShoppingTestExp10="msShoppingTestExp10",e.msShoppingTestExp11="msShoppingTestExp11",e.msShoppingTestExp12="msShoppingTestExp12",e.msShoppingTestExp13="msShoppingTestExp13",e.msShoppingTestExp14="msShoppingTestExp14",e.msShoppingTestExp15="msShoppingTestExp15",e.msShoppingTestExp16="msShoppingTestExp16",e.msShoppingTestExp17="msShoppingTestExp17",e.msShoppingTestExp18="msShoppingTestExp18",e.msShoppingTestExp99="msShoppingTestExp99",e}({});const A=new class{constructor(){v(this,"experiments",new Map),v(this,"serviceExperiments",new Map),v(this,"experimentsSet",new Set),v(this,"serviceExperimentsSet",new Set),v(this,"enablePCBannerUX",!1),v(this,"expRawData",void 0)}Create(e,t){this.experiments=new Map,this.serviceExperiments=new Map,this.experimentsSet=new Set,this.serviceExperimentsSet=new Set,"string"==typeof e?this.CreateFromJsonStr(e):this.CreateClientFeatures(e),t&&("string"==typeof t?this.CreateServiceFeaturesFromJsonStr(t):this.CreateServiceFeaturesFromJsonObj(t))}GetEnabledFeaturesMap(){return this.experiments??new Map}GetExpRawData(){return this.expRawData}isExperimentActive(e){return this.experimentsSet.has(e)||this.serviceExperimentsSet.has(e)}getServiceExperimentValue(e){return this.serviceExperiments.get(e)?.value}getServiceExperimentParams(e){return this.serviceExperiments.get(e)?.params}isTestFlagActive(e){return this.experimentsSet.has(e.toString())||this.serviceExperimentsSet.has(e.toString())}setShowPCBannerUX(e,t,r,n){this.enablePCBannerUX=void 0!==e&&e||void 0!==t&&t&&void 0!==r&&r.CompetingPrices&&r.CompetingPrices.length>0&&void 0!==n&&n}isPCBannerUXExperimentActive(){return(this.experimentsSet.has(y.pcBannerUXExperimentation1)||this.experimentsSet.has(y.pcBannerUXExperimentation2)||this.experimentsSet.has(y.pcBannerUXExperimentation3)||this.experimentsSet.has(y.pcBannerUXExperimentation4)||this.experimentsSet.has(y.pcBannerUXExperimentation5)||this.experimentsSet.has(y.pcBannerUXExperimentation6))&&this.enablePCBannerUX}newFlyoutHeaderActive(){return this.experimentsSet.has(y.newHeader)}isVariantActive(e,t){return!!this.isExperimentActive(e)&&this.experiments.get(e)?.variant===t}isMultipleVariantActive(e,t,r){if(this.isExperimentActive(e)){const n=this.experiments.get(e);if(!n)return!1;if(n.variant===r)return!0;if(n.multipleVariants&&n.multipleVariants.length>0){if(-1!==n.multipleVariants.findIndex((e=>e.key===t&&e.value===r)))return!0}}return!1}getVariantValue(e,r,n){return parseInt(e.find((e=>e.key===r&&!t(e.value)))?.value??n.toString(),void 0)}getVariantStringValue(e,r,n){return e.find((e=>e.key===r&&!t(e.value)))?.value??n}getMultipleVariants(e){return this.isExperimentActive(e)?this.experiments.get(e)?.multipleVariants??[]:[]}getVariantName(e){const t=this.experiments.get(e);if(this.isExperimentActive(e)&&t&&t.variant)return t.variant}createServiceFeaturesFromMap(e){const t=new Map;e&&e.length>0&&e.forEach((e=>{const r=new R,n=e[0];"object"==typeof e[1]?(r.value=e[1].value,r.params=new Map(Object.entries(e[1].params))):(r.value=e[1],r.params=new Map),t.set(n,r),"false"!==r.value&&this.serviceExperimentsSet.add(n)})),this.serviceExperiments=t}CreateClientFeatures(e){this.expRawData=e;const t=new Map;if(e&&e.length>0){const r=Object.values(y),n=Object.values(P);e.forEach((e=>{const o=new x;o.name=e.name,o.supported=!1,e.params?.length>1?o.multipleVariants=e.params:e.params?.length>0&&(o.variant=e.params[0].value),(r.includes(e.name)||n.includes(e.name))&&(o.supported=!0,this.experimentsSet.add(e.name)),t.set(o.name,o)}))}this.experiments=t}CreateFromJsonStr(e){try{if(e){const t=JSON.parse(e);this.CreateClientFeatures(t)}}catch(e){}}CreateServiceFeaturesFromJsonStr(e){if(!e)return;const t=JSON.parse(e);this.CreateServiceFeaturesFromJsonObj(t)}CreateServiceFeaturesFromJsonObj(e){e&&this.createServiceFeaturesFromMap(Object.entries(e))}};const T=new class{constructor(){v(this,"appName",void 0),this.appName=o.Edge}SetAppName(e){this.appName=e}GetAppName(){return this.appName}};class N{static GetBuildVersion(){try{const e=navigator.userAgent.match(/Edg(?:A|iOS)?\/([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)/);if(e&&2===e.length)return e[1];throw Error("Invalid build version.")}catch(e){}}static IsBuildVersionSupported(e){const t=N.GetBuildVersion();if(void 0===t)return!1;const r=N.CompareBuildVersions(t,e);return void 0!==r&&r>=0}static CompareBuildVersions(e,t){if(e&&t){const r=e.split("."),n=t.split(".");if(4!==r.length||4!==n.length)return;for(let e=0;e<4;e++){const t=parseInt(r[e],10),o=parseInt(n[e],10);if(isNaN(t)||isNaN(o))return;if(t>o)return 1;if(o>t)return-1}return 0}}static IsOtherSellersExpActive(e){return"walmart.com"===e||A.isExperimentActive(y.showAmazonOtherSellers)}static GetClientName(){try{if(-1!==navigator.userAgent.toLowerCase().indexOf("android"))return o.EdgeAndroid;if(/iPad|iPhone|iPod/.test(navigator.userAgent))return o.EdgeiOS}catch(e){throw Error("Error getting client name")}return T.GetAppName()}static IsMobile(){return[o.EdgeAndroid,o.EdgeiOS].includes(N.GetClientName())}}v(N,"enabledServiceFlights","");var b=N;var O=class{static uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}constructor(e){v(this,"Type",void 0),v(this,"ID",void 0),this.Type=e,this.ID=""}toString(){return JSON.stringify(this)}};var w=class extends O{constructor(e,t,n){super(r.ErrorResponse),v(this,"ErrorMsg",void 0),v(this,"ErrorName",void 0),v(this,"ErrorPageType",void 0),this.ErrorMsg=e,this.ErrorName=t,this.ErrorPageType=n}};let D=function(e){return e.currency="placeholderCurrency",e}({});class M{static GetInternationalSupportedMarkets(){return M.internationalSupportedMarkets}static GetPriceStringAsNumber(e){if(!e)return 0;if(e.indexOf("-")>-1){const t=e.substring(0,e.indexOf("-")),r=e.substring(e.indexOf("-")+1);e=r<t?r:t}e=(e=e.replace(/\([^)]*\)/g,"")).replace(/[^0-9\.,]+/g,"");try{!1===M.IsUsCurrencyFormat(e)&&(e=M.SwapCommaAndPeriod(e))}catch{}return e=e.replace(/[,]+/g,""),parseFloat(e)}static IsUsCurrencyFormat(e){const t=e.lastIndexOf(","),r=e.lastIndexOf(".");return!(r>-1&&t>-1&&t>r)&&(!(r>-1&&e.length-r-1>2)&&(!(t>-1&&e.length-t-1<=2)&&(-1!==t||-1!==r||(e=e.trim(),!/\s/.test(e)))))}static ValidateCurrencySymbol(e){return e&&!t(e)&&M.IsCurrencyValid(e)?e:"$"}static ValidateCurrencySymbolWithoutDefault(e){return e&&!t(e)&&M.IsCurrencyValid(e)?e:""}static GetCurrencyFromMarket(e){return M.marketCurrencyMap.get(e)}static GetCurrencyCodeFromSymbol(e){return M.symbolCurrencyCodeMap.get(e)}static GetSymbolFromCurrencyCode(e){return M.currencySymbolCodeMap.get(e?.toLocaleUpperCase())??"$"}static GetOverridenCurrencyValue(e){return e?M.GetCurrencyFromMarket(e)??"$":"$"}static GetStandardizedCurrency(e,t){return!("$"===e&&"en-us"!==t)&&M.IsCurrencyValid(e)?e:M.GetOverridenCurrencyValue(t)}static IsCurrencyValid(e){return!(!e||!M.currencySet)&&M.currencySet.has(e)}static IsCurrencyCode(e){return M.currencyCodeSet.has(e)??!1}static ExtractCurrencyString(e,t){const r=e.replace(/[0-9,. ]/g,"").trim();for(const e of M.currencySet)if(r.includes(e))return e;return t?M.ValidateCurrencySymbolWithoutDefault(r):M.ValidateCurrencySymbol(r)}static GetEscapedCurrency(e){return e.replace(/([^A-Za-z])/g,"\\$1")}static BreakDownPrice(e,t){let r,n,o;t&&(r=M.ExtractCurrencyString(e),e=e.replace(r,"").trim());const s=(M.IsUsCurrencyFormat(e)?/([0-9,]+)[.]*([0-9]*)/:/([0-9.\s]+)[,]*([0-9]*)/).exec(e);return s&&3===s.length?(n=s[1],o=s[2],t?r?{dollars:n,cents:o,currency:r}:e:{dollars:n,cents:o}):e}static SwapCommaAndPeriod(e){return e.replace(/[,.]/g,(e=>","===e?".":","))}}v(M,"currencySet",new Set(["USD","INR","GBP","CAD","EUR","AUD","JPY","BRL","MXN","US$","CA$","AU$","MX$","C$","A$","R$","₹","£","￡","€","¥","￥","NZ$","NZD","元","CNY","₩","KRW","₽","RUB","Rp","IDR","₱","PHP","đ","₫","VND","฿","THB","NT$","TWD","£E","EGP","kr.","DKK","Fr.","CHF","zł","PLN","dr.","SEK","RM","MYR","NOK","S$","SGD","Kč","CZK","TL","TRY","COL$","COP","Rs","R","ZAR","kr","CLP","SG$","$","SAR","AED"])),v(M,"internationalSupportedMarkets",["en-us","en-gb","en-ca","en-au","en-in","fr-fr","de-de","ja-jp","it-it","nl-nl","es-es","en-nz","pt-br","zh-cn","es-mx","ko-kr","ru-ru","id-id","fil-ph","vi-vn","th-th","zh-tw","ar-eg","de-at","da-dk","de-ch","pl-pl","sv-se","en-my","no-no","en-sg","fi-fi","fr-be","cs-cz","tr-tr","es-co","en-za","en-sa"]),v(M,"marketCurrencyMap",new Map([["en-us","$"],["en-gb","£"],["en-ca","CA$"],["en-au","AU$"],["en-in","₹"],["fr-fr","€"],["de-de","€"],["ja-jp","¥"],["it-it","€"],["nl-nl","€"],["es-es","€"],["en-nz","NZ$"],["pt-br","R$"],["zh-cn","元"],["es-mx","MX$"],["ko-kr"," ₩"],["ru-ru","₽"],["id-id","Rp"],["fil-ph","₱"],["vi-vn","đ"],["th-th","฿"],["zh-tw","NT$"],["ar-eg","EGP"],["de-at","€"],["da-dk","kr."],["de-ch","Fr."],["pl-pl","zł"],["sv-se","kr"],["en-my","RM"],["no-no","NOK"],["en-sg","S$"],["fi-fi","€"],["fr-be","€"],["cs-cz","Kč"],["tr-tr","TL"],["es-co","COL$"],["en-za","R"],["en-sa","SAR"],["en-eg","EGP"],["ar-ae","AED"]])),v(M,"currencyCodeSet",new Set(["USD","INR","GBP","EUR","NZD","BRL","CAD","AUD","JPY","CNY","MXN","KRW","RUB","IDR","PHP","VND","THB","TWD","EGP","DKK","CHF","PLN","SEK","MYR","NOK","SGD","CZK","TRY","COP","ZAR","CLP","SAR","AED"])),v(M,"symbolCurrencyCodeMap",new Map([["$","USD"],["₹","INR"],["£","GBP"],["€","EUR"],["NZ$","NZD"],["R$","BRL"],["CA$","CAD"],["C$","CAD"],["A$","AUD"],["AU$","AUD"],["¥","JPY"],["￥","JPY"],["元","CNY"],["MX$","MXN"],["￡","GBP"],["₩","KRW"],["₽","RUB"],["Rp","IDR"],["₱","PHP"],["đ","VND"],["₫","VND"],["฿","THB"],["NT$","TWD"],["EGP","EGP"],["kr.","DKK"],["Fr.","CHF"],["zł","PLN"],["dr.","SEK"],["RM","MYR"],["NOK","NOK"],["S$","SGD"],["Kč","CZK"],["TL","TRY"],["COL$","COP"],["R","ZAR"],["kr","DKK"],["SG$","SGD"],["SAR","SAR"],["AED","AED"]])),v(M,"currencySymbolCodeMap",new Map([["USD","$"],["INR","₹"],["GBP","£"],["EUR","€"],["NZD","NZ$"],["BRL","R$"],["CAD","CA$"],["AUD","AU$"],["JPY","¥"],["CNY","元"],["MXN","MX$"],["GBP","￡"],["KRW","₩"],["RUB","₽"],["IDR","Rp"],["PHP","₱"],["VND","đ"],["THB","฿"],["TWD","NT$"],["EGP","EGP"],["DKK","kr."],["CHF","Fr."],["PLN","zł"],["SEK","dr."],["MYR","RM"],["NOK","NOK"],["SGD","S$"],["CZK","Kč"],["TRY","TL"],["COP","COL$"],["ZAR","R"],["SAR","SAR"],["AED","AED"]]));var U=M;class k{static capitalizeWords(e){return e.toLowerCase().replace(/(^|\s)\S/g,(function(e){return e.toUpperCase()}))}static capitalizeFirstLetter(e){return 0===e.length?e:e[0].toUpperCase()+e.slice(1)}static GenerateErrorMessage(e,t,r){let n=e??"";return r&&(n+="\r\nDOM element path: '"+r+"'"),n+="\r\nFriendly name: '"+t+"'",n}static GetBackgroundAAKeyName(){return"BackgroundAutoApplyData_"+k.GetDomainName()}static GetL2DomainName(){const e=k.GetDomainName(),t=e.split(".");return t.length>2?t[t.length-2]+"."+t[t.length-1]:e}static GetDomainName(){return k.GetDomainNameFromHostname(window.location.hostname)}static GetProcessedString(e,t,r){if(r&&(r===o.Opal||r===o.EdgeMobile||r===o.Sapphire||r===o.RBC)){if(t===n.PlainString)return k.EscapePlainString(e);if(t===n.JsonString)return k.EscapeJsonString(e)}return e}static EscapeJsonString(e){return e?e.replace(/\"|'/g,'\\"'):e}static GetStorageObject(e,t=!1){try{if(!e||"null"===e)return null;if(e.value&&(e=e.value),"string"==typeof e){if(t){const t=JSON.parse(e,E.ParseMap);return t.value?JSON.parse(t.value,E.ParseMap):t}const r=JSON.parse(e);return r.value?JSON.parse(r.value):r}return e}catch(e){return null}}static IsInframe(){try{return window.self!==window.top}catch(e){return!0}}static GenerateErrorResponse(e,t){return new w(k.GetProcessedString(e,n.JsonString,t))}static ThrowError(e,t){const r=new Error(t);throw r.name=e,r}static GetPageUrl(){return window.location.toString()}static GetPageTitle(){return document.title}static CreateStyleElement(e){const t=document.createElement("style");return t.textContent=e,t}static GetDomainNameFromHostname(e){if(!e)return"";const t=e.toLowerCase().match(/(w){3}.?\./);return t&&null!=t.index&&t[0]?e.substring(t.index+t[0].length):e}static GetMarket(e,t){return e||(t||"en-us")}static ReplaceValueInKey(e,t,...r){let n="",o=Array.prototype.slice.call(arguments);return o=o.slice(1),t?(n=t=t.replace(/\$(.|$|\n)/g,(e=>void 0!==o[e[1]]?"$$"===e?"$":o[e[1]]:"$2")),n):n}static ReplaceStringsPlaceholders(e,t){const r=this.GetCurrency(t);return e.replace(D.currency,r)}static ReplaceStringsPlaceholdersWithRequiredSpaces(e,t){const r=this.GetCurrency(t),n=this.isAlpha(r)?`${r} `:r;return e.replace(D.currency,n)}static GetICUPluralString(e,t,r){const n=e?.split("plural,")[1];let o="";if(n){const e=/([^\s]+)\s+\{([^\}]+)\}/g;let i=e.exec(n);for(;i;){if(i.length>2&&i[1].trim()===t){o=i[2];break}i=e.exec(n)}t===s.Other&&null!=r&&(o=o.replace("#",r.toString()))}return o}static ReplaceElementInKey(e,t,...r){const n=t.split("*br*");if(n.length>1)k.ReplaceBreaksInKey(n,e,...r);else{if(window?.trustedTypes){const t=window.trustedTypes.emptyHTML;e.innerHTML=t}const n=t.split(/\$\d/),o=n.length,s=r.length;for(let t=0;t<o;t++){if(n[t]=k.ReplaceStringsPlaceholders(n[t]),0===t)e.textContent=n[t];else if(t===s){const r=1===n.slice(t).length,o=document.createTextNode(k.ReconstructStringWithKeys(n.slice(t),r));e.appendChild(o)}else{const r=document.createTextNode(n[t]);e.appendChild(r)}if(t===o-1||t===s)return t;e.appendChild(r[t])}}return 0}static SafeJSONParse(e){try{return JSON.parse(e)}catch(e){return null}}static IsAffiliateCoupon(e,t){try{return new URL(e.offerUrl).hostname!==t&&e.attribution!==t}catch(e){return!1}}static IsKeyboardClick(e){return!(!e||0!==e.offsetX||0!==e.offsetY)}static GetBingUrlFromBingNavChain(e){if(e)try{const t=JSON.parse(e);for(const e of t)if(e.includes("bing.com"))return e}catch(e){}}static UrlHasParam(e,t,r){try{if(!e)return!1;const n=new URL(e);return n.searchParams.get(t)===r}catch(e){return!1}}static AddQuerySuffixToUrl(e,t){return e?e.includes("?")?e+"&"+t:e+"?"+t:""}static ReplaceBreaksInKey(e,t,...r){const n=e.length;let o=0;for(let s=0;s<n;s++){if(e[s].includes("$"))if(0===s)o=k.ReplaceElementInKey(t,e[s],...r);else if(2===e[s].trim()?.length)t.append([...r][o]),o+=1;else{const n=document.createElement("DIV");o+=k.ReplaceElementInKey(n,e[s],...[...r].slice(o)),t.appendChild(n)}else{const r=document.createElement("p");r.style.margin="0px",r.style.display="inline-block",r.textContent=e[s],t.append(r)}if(s!==n-1){const e=document.createElement("br");e.setAttribute("aria-hidden","true"),t.appendChild(e)}}}static ReconstructStringWithKeys(e,t){return 0===e.length?"":1===e.length?t?e[0]:"$1"+e[0]:e[0]+k.ReconstructStringWithKeys(e.slice(1),!1)}static EscapePlainString(e){return e?e.replace(/"|'/g,'\\"'):e}static GetCurrency(e){e||(e="en-us");let t=U.GetCurrencyFromMarket(e);return t||(t="$"),t}static isAlpha(e){return/^[a-zA-Z]+$/.test(e)}}var I=k;class G extends Error{constructor(e){super(e),Object.setPrototypeOf(this,G.prototype)}}class F{static HasVisibleElement(e){return F.CountVisibleElements(e)>0}static CountVisibleElements(e){if(!E.IsValidDataField(e))return 0;const t=e.split(";");for(const e of t){const t=F.CountVisibleElementsSingleSel(e);if(t>0)return t}return 0}static RunQuerySelectorAll(e,t){if(!E.IsValidDataField(e))return[];const r=e.split("<");let n;n=t?t.querySelectorAll(r[0]):document.querySelectorAll(r[0]);for(const e of r.slice(1)){const t=n[0]?.shadowRoot;if(!t)return[];n=t.querySelectorAll(e)}return n}static IsElementVisible(e){return e&&e.offsetWidth>0&&e.offsetHeight>0}static GetFirstVisibleElement(e,t){if(!E.IsValidDataField(e))return;const r=e.split(";");for(const e of r)try{const r=F.RunQuerySelectorAll(e,t);for(const e of r)if(F.IsElementVisible(e))return e}catch(e){}}static GetAllVisibleElements(e){if(!E.IsValidDataField(e))return[];const t=e.split(";"),r=[];for(const e of t){const t=F.RunQuerySelectorAll(e);for(const e of t)F.IsElementVisible(e)&&r.push(e)}return r}static GetTextValue(e,t){const r=e.split(";"),n=r[0],o=F.GetFirstVisibleElement(n,t);if(!o)return"";let s=o,i=s.innerText;if(1===r.length)s=F.NormalizeIfSuperscripted(o),i=s.innerText;else{const e=s.cloneNode(!0);let o=r[1];const a=F.GetFirstVisibleElement(o,s)??F.GetFirstVisibleElement(o,t);let p="";if(a&&a.innerText){if(p="."+a.innerText,s.contains(a)){const t=F.GetFirstMatchingElement(o,e);if(t?.innerText)e.removeChild(t);else{o.startsWith(n)&&(o=o.slice(n.length));const t=this.GetFirstMatchingElement(o,e);t?.innerText&&e.removeChild(t)}i=e?.innerText?e.innerText:i}i+=p}if(r.length>2){for(const t of r.slice(2)){const r=this.GetFirstMatchingElement(t,e);r?.innerText&&e.removeChild(r)}i=e?.innerText?e.innerText:i}i+=p}return F.StripInvalidJSONCharacters(i)}static GetItemizedData(e,t,r){let n="";if(e&&""!==e){const o=F.RunQuerySelectorAll(e,r);for(const e of o)e&&e.textContent&&(n+=e.textContent?.trim()+t)}return n}static StripInvalidJSONCharacters(e){return e.replace(/\n/gi,"")}static NormalizeIfSuperscripted(e){if(e&&e.innerHTML){if(e.innerHTML.toLowerCase().indexOf("</sup>")>-1)try{const t=e.cloneNode(!0),r=t.childNodes.length;for(let e=0;e<r;e++){const r=t.childNodes[e];if("SUP"===r.tagName){let e=r.innerText;const n=/[0-9\.]+/g.exec(e);if(null!==n)return e="."+n[0],r.innerText=e,t}}}catch(t){return e}}return e}static GetFirstMatchingElement(e,t){if(!E.IsValidDataField(e))return;const r=e.split(";");for(const e of r){const r=F.RunQuerySelectorAll(e,t);for(const e of r)if(e)return e}}static GetAllMatchingElements(e){if(!E.IsValidDataField(e))return[];const t=e.split(";"),r=[];for(const e of t)try{const t=F.RunQuerySelectorAll(e);for(const e of t)e&&r.push(e)}catch(e){}return r}static CountVisibleElementsSingleSel(e){if(!E.IsValidDataField(e))return 0;const t=F.RunQuerySelectorAll(e);let r=0;for(const e of t)F.IsElementVisible(e)&&r++;return r}}var X=F;var V=class{constructor(){v(this,"orderDate",void 0),v(this,"totalCost",void 0),v(this,"orderNumber",void 0),v(this,"orderDetailsPage",void 0),v(this,"listOfProducts",void 0),v(this,"orderStatus",void 0),v(this,"orderSummary",void 0),v(this,"trackPackageButtonSelector",void 0)}};class B{constructor(){v(this,"email",void 0),v(this,"orderNumber",void 0),v(this,"phoneNumber",void 0),v(this,"trackingUrl",void 0)}static create(e){const t=new B;return e&&(t.email=e.email,t.orderNumber=e.orderNumber,t.phoneNumber=e.phoneNumber,t.trackingUrl=e.trackingUrl),t}}var _=B;class L{constructor(){v(this,"productImageSelector",void 0),v(this,"productUrlSelector",void 0)}static create(e){const t=new L;return e&&(t.productImageSelector=e.productImageSelector,t.productUrlSelector=e.productUrlSelector),t}}var H=L;class ${constructor(){v(this,"trackPackageButtonSelector",void 0),v(this,"orderSummarySelector",void 0),v(this,"productContainerSelector",void 0),v(this,"productContentSelector",void 0)}static create(e){const t=new $;if(e){t.trackPackageButtonSelector=e.trackPackageButtonSelector,t.orderSummarySelector=e.orderSummarySelector,t.productContainerSelector=e.productContainerSelector;const r=e.productContentSelector;r&&(t.productContentSelector=H.create(r))}return t}}var K=$;class W{constructor(){v(this,"orderDateSelector",void 0),v(this,"totalCostSelector",void 0),v(this,"orderNumberSelector",void 0),v(this,"orderDetailsPageSelector",void 0),v(this,"shipmentContainerSelector",void 0),v(this,"shipmentContentSelector",void 0)}static create(e){const t=new W;if(e){t.orderDateSelector=e.orderDateSelector,t.totalCostSelector=e.totalCostSelector,t.orderNumberSelector=e.orderNumberSelector,t.orderDetailsPageSelector=e.orderDetailsPageSelector,t.shipmentContainerSelector=e.shipmentContainerSelector;const r=e.shipmentContentSelector;r&&(t.shipmentContentSelector=K.create(r))}return t}}var z=W;class J{constructor(){v(this,"trackingUrl",void 0),v(this,"clickToOpenOrderSelector",void 0),v(this,"orderContainerSelector",void 0),v(this,"orderContentSelector",void 0)}static create(e){const t=new J;if(e){t.trackingUrl=e.trackingUrl,t.clickToOpenOrderSelector=e.clickToOpenOrderSelector,t.orderContainerSelector=e.orderContainerSelector;const r=e.orderContentSelector;r&&(t.orderContentSelector=z.create(r))}return t}}var j=J;class Y{constructor(){v(this,"impressionId",void 0),v(this,"domain",void 0),v(this,"packageTrackingSelectors",void 0)}static create(e){const t=new Y;if(e){t.impressionId=e.impressionId,t.domain=e.domain??I.GetDomainName();const r=e.packageTrackingSelectors;r&&(t.packageTrackingSelectors=r.map((e=>j.create(e))))}return t}}var Z=Y;var Q=class{constructor(){v(this,"productImageUrl",void 0),v(this,"productName",void 0),v(this,"productUrl",void 0)}};class q{initialize(e){e.splice(0,2);try{this.initializeRuntime(e)}catch(e){return!1}return!0}raiseMessageFromHost(e){const t=e.shift();if(t)try{this.handleMessages(e,t)}catch(e){}}postMessageToHost(e,t){try{this.getNativeHandler().sendMessageToHost(e,t)}catch(e){}}}const ee=new class extends q{initializeRuntime(e){throw new Error("This should never be called.")}handleMessages(e,t){if("GetTrackingPageData"===t)try{"interactive"===document.readyState||"complete"===document.readyState?window.getTrackingPageData(e):window.addEventListener&&window.addEventListener("DOMContentLoaded",(t=>{window.checkAndGetTrackingPageData(e)}))}catch(e){}}getNativeHandler(){return trackingPageValidatorNativeHandler}};class te{static getTextContentFromHtmlElement(e){if(!e)return"";if(e.hasChildNodes()){let t="";for(const r of e.childNodes)if(r.nodeType===Node.TEXT_NODE&&r.textContent){const e=r.textContent.trim();e&&(t+=e)}if(t)return t}const t=e.textContent||e.innerText;return t?t.trim():""}static getOrderStatusFromTextInput(e){if(!e)return a.ERROR;const t="i";return new RegExp(p.DELIVERED_REGEX,t).test(e)?a.DELIVERED:new RegExp(p.SHIPPED_REGEX,t).test(e)?a.SHIPPED:new RegExp(p.RETURNED_REGEX,t).test(e)?a.RETURNED:new RegExp(p.CANCELED_REGEX,t).test(e)?a.CANCELED:a.ORDERED}static isExpiredDeliveryDate(e){if(e&&e.toLowerCase().includes("cancel"))return oe.CANCELED_ORDER;const t=this.getOrderStatusFromTextInput(e),r=t===a.ERROR||t===a.SHIPPED||t===a.ORDERED;if(!e||isNaN(Date.parse(e))||r)return!1;const n=e.match(/\d{4}$/gs);null!=n&&0!==n.length||(e+=" "+(new Date).getFullYear());const o=new Date(Date.parse(e));return(Date.now()-o.getTime())/864e5>2&&oe.EXPIRED_DELIVERY_DATE}static getOrderDateForSpecialWebsites(e,t){const r=te.getTextContentFromHtmlElement(t);switch(e){case"etsy.com":if(r.startsWith("On")||r.startsWith("on"))return r.substring(2).trim();break;case"alibaba.com":if(r.startsWith("|"))return r.substring(1).trim()}return r}static getOrderDetailsPageForSpecialWebsites(e,t){return"walmart.com"===e.domain?`${e.domain}/orders/${t}`:""}static getOrderNumberForSpecialWebsites(e,t){const r=te.getTextContentFromHtmlElement(t);switch(e){case"etsy.com":if(t)return t.getAttribute("data-receipt-id")??"";break;case"walmart.com":return te.getFirstRegexMatchOrDefaultString(r,/(?<=Order#\s\s*).*?(?=\s*(\|\sTotal))/gs);default:return r.startsWith("#")?r.substring(1).trim():r}return""}static getTotalCostForSpecialWebsites(e,t){switch(e){case"walmart.com":return te.getFirstRegexMatchOrDefaultString(t,/(?<=Total\s\$\s*)\d+\.\d+/gs);case"ebay.com":return te.getFirstRegexMatchOrDefaultString(t,/(?<=\$)\d+\.\d+/gs);default:return t}}static getFirstRegexMatchOrDefaultString(e,t){const r=e.match(t);return null!=r&&r.length>0?r[0]:e}static getHrefFromHtmlElement(e){return e?e.getAttribute("href"):""}}var re=te;let ne=function(e){return e.INVALID_TRACKING_PAGE_ERROR="InvalidTrackingPageError",e.TRACKING_PAGE_DATA="TrackingPageData",e.TRACKING_PAGE_ERROR="TrackingPageError",e.TRACKING_PAGE_PARSING_ERROR="TrackingPageParsingError",e.TRACKING_PAGE_SCRIPT_ERROR="TrackingPageScriptError",e}({}),oe=function(e){return e.NO_ORDER_CONTAINER_SELECTOR="orderContainerSelector is null",e.NO_ORDER_CONTAINERS="No order containers found",e.NO_SHIPMENT_CONTAINER_SELECTOR="shipmentContainerSelector is null",e.NO_ORDER_NUMBER="No order number found",e.NOT_ORDER_TO_EXTRACT="Not the order to extract",e.NO_ORDER_DATE="No order date found",e.NOT_VALID_ORDER_FOR_TRACKING_PAGE_FRE="Not a valid order for tracking page FRE",e.NO_SHIPMENT_CONTAINERS="No shipment containers found",e.CANCELED_ORDER="Order is canceled",e.EXPIRED_DELIVERY_DATE="Expired delivery date",e.NO_PRODUCT_CONTAINERS="No product containers found",e.INVALID_PRODUCT_DETAILS="Invalid product details",e}({}),se="",ie=!1,ae="",pe=[];async function ce(e){let r="";try{se=e[2],ie="true"===e[3].toLowerCase(),ae="",pe=[];const n=JSON.parse(e[0]),o=Z.create(n),s=JSON.parse(e[1]),i=s?s.filter((e=>!t(e?.orderNumber??""))).map((e=>_.create(e))):[];r=o?.impressionId??"",await E.WaitForCondition((async()=>function(e){const t=e?.packageTrackingSelectors;if(!t){throw new G("Empty or null package tracking selectors")}const r=I.GetPageUrl();let n=!1;for(const e of t)if(e.trackingUrl&&r.includes(e.trackingUrl)){n=!0;break}if(!n){throw new G("Invalid Order Page URL")}return!0}(o)),5e3).then((async()=>{await async function(e,r,n){let o=new Set;n?.length&&(o=new Set(n.map((e=>e.orderNumber))));const s=await async function(e,r){const n=[],o=e?.packageTrackingSelectors;if(!o)return n;for(const s of o){const o=s?.clickToOpenOrderSelector??"";if(!t(o)){const t=X.RunQuerySelectorAll(o),r=new Promise((e=>{const t={attributes:!0,childList:!0,subtree:!0},r=new MutationObserver((()=>{}));r.observe(document,t),setTimeout((()=>{r.disconnect(),e()}),1500)}));let n="homedepot.com"===e?.domain?1:0;for(;n<t.length;n++)t[n].click();await r}const i=s?.orderContainerSelector??"";if(t(i)){pe.push(oe.NO_ORDER_CONTAINER_SELECTOR);continue}const a=X.RunQuerySelectorAll(i);if(a?.length)for(const o of a){const i=s?.orderContentSelector?.shipmentContainerSelector;if(!i){pe.push(oe.NO_SHIPMENT_CONTAINER_SELECTOR);continue}const a=s?.orderContentSelector?.orderNumberSelector??c,p=o.querySelector(a),l=re.getOrderNumberForSpecialWebsites(e?.domain,p??o);if(t(l)){pe.push(oe.NO_ORDER_NUMBER);continue}if(r?.size>0&&!r?.has(l)){pe.push(oe.NOT_ORDER_TO_EXTRACT);continue}const g=s?.orderContentSelector?.orderDateSelector,u=g?o.querySelector(g):null,d=re.getOrderDateForSpecialWebsites(e?.domain,u);if(!le(d))continue;const h=s?.orderContentSelector?.totalCostSelector,S=h?o.querySelector(h):null,m=re.getTextContentFromHtmlElement(S),E=re.getTotalCostForSpecialWebsites(e?.domain,m),C=s?.orderContentSelector?.orderDetailsPageSelector,f=C?o.querySelector(C):null,v=f?re.getHrefFromHtmlElement(f):re.getOrderDetailsPageForSpecialWebsites(e,l),y=o.querySelectorAll(i);if(y?.length)for(const e of y){const r=[],o=s?.orderContentSelector?.shipmentContentSelector,i=o?.trackPackageButtonSelector??"",a=o?.orderSummarySelector,p=o?.productContainerSelector??"",c=a?e.querySelector(a):null,g=re.getTextContentFromHtmlElement(c),u=re.isExpiredDeliveryDate(g);if(u===oe.CANCELED_ORDER||u===oe.EXPIRED_DELIVERY_DATE){pe.push(u);continue}const h=re.getOrderStatusFromTextInput(g),S=e.querySelectorAll(p);if(!S?.length){pe.push(oe.NO_PRODUCT_CONTAINERS);continue}for(const e of S){const n=o?.productContentSelector,s=n?.productImageSelector,i=n?.productUrlSelector,a=s?e.querySelector(s):null,p=a?.src??"",c=i?e.querySelector(i):null,l=ge(c,a);if(t(p)&&t(l)){pe.push(oe.INVALID_PRODUCT_DETAILS);continue}const g=Object.assign(new Q,{productImageUrl:p,productName:l,productUrl:re.getHrefFromHtmlElement(c)});r.push(g)}if(!r?.length)continue;const m=Object.assign(new V,{listOfProducts:r,orderDate:d,orderDetailsPage:v,orderNumber:l,orderStatus:h,orderSummary:g,totalCost:E,trackPackageButtonSelector:i});n.push(m)}else pe.push(oe.NO_SHIPMENT_CONTAINERS)}else pe.push(oe.NO_ORDER_CONTAINERS)}return n}(r,o);(function(e,t){let r="Failed to extract any orders";t>0&&(r="Successful order history page extraction");const n={domain:I.GetDomainName(),numOfOrders:t,extractionResults:pe},o=de(e,ne.TRACKING_PAGE_DATA,r,n);he(o)})(e,s.length),ee.postMessageToHost(ne.TRACKING_PAGE_DATA,[JSON.stringify(s),se])}(r,o,i)})).catch((e=>{ue(r,e,o)}))}catch(e){ue(r,e,null)}}function le(e){return!ie||(t(e)?(pe.push(oe.NO_ORDER_DATE),!1):t(ae)?(ae=e,!0):ae===e||(pe.push(oe.NOT_VALID_ORDER_FOR_TRACKING_PAGE_FRE),!1))}function ge(e,r){const n=re.getTextContentFromHtmlElement(e);if(t(n)){const e=r?.getAttribute("alt")??"";return t(e)?r?.getAttribute("title")??"":e}return n}function ue(e,t,r){let n=ne.TRACKING_PAGE_SCRIPT_ERROR;const o=t?.message??"";t instanceof SyntaxError?n=ne.TRACKING_PAGE_PARSING_ERROR:t instanceof G&&(n=ne.INVALID_TRACKING_PAGE_ERROR),function(e,t,r,n){const o={domain:I.GetDomainName(),pageUrl:I.GetPageUrl(),retailerData:JSON.stringify(n)},s=de(e,ne.TRACKING_PAGE_ERROR,r,o);s&&t&&(s.ErrorType=t);he(s)}(e,n,o,r),ee.postMessageToHost(n,[o,se])}function de(e,t,r,n){const o={};return o.JsonData=JSON.stringify(n),o.EventType=t,o.LogLevel="Information",o.Message=r,o.ClientContext={AppInfoClientName:b.GetClientName(),JSVersion:g},e&&(o.ImpressionId=e),o}function he(e){const t=[JSON.stringify(e)];ee.postMessageToHost("LogScriptTelemetry",t)}window.checkAndGetTrackingPageData=function(e){I.IsInframe()||ce(e)},window.getTrackingPageData=ce,window.trackingPageValidatorRuntime=ee}();