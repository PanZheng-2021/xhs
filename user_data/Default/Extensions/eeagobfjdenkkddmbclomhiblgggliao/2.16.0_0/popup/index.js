{const e=this,{window:t}=e,n="auto",a="content",o="ids",s=-1,i=2,l="injectInto",r="page",d="scripts",c="SkipScripts",u=e=>null!=e&&"object"==typeof e,{Boolean:p,Error:m,Object:g,Promise:x,addEventListener:f,removeEventListener:b,chrome:h,performance:v}=e,{apply:k}=Reflect,C=(k.call.bind({}.hasOwnProperty),g.call.bind(g.call)),w="isApplied",y=!h.app,S=(h.runtime.getURL("/").slice(0,-1),h.runtime.getManifest()),I=(h.runtime.getURL(S.options_ui.page).split("#",1)[0],h.runtime.getURL(S.icons[16].replace("16.png","")),"settings"),_="frameId";(()=>{var e,f={5976:(e,m,f)=>{"use strict";f(1871);var b=f(5313),h=f(6711),v=f(2477),k=f(2380),E=f(6906),M=(f(9994),f(6252)),D=f(2502),j=f(9963);const U=["data-is-applied"],F={class:"flex menu-buttons"},$=(0,M._)("div",{class:"logo"},[(0,M._)("img",{src:"/public/images/icon128.png"})],-1),z=["textContent"],T=["data-message","tabIndex"],O=["data-message","tabIndex"],R=["data-message","tabIndex"],L=["tabIndex"],q={key:0,class:"menu"},H={class:"menu-item menu-area menu-find"},K=["href","data-message","tabIndex"],P={key:1,class:"failure-reason"},W=["textContent"],Y=["textContent"],Z=["data-type"],B=["tabIndex","onClick"],J=["textContent","data-totals"],A=["tabIndex","data-message","onFocus","onKeydown","onClick"],N=["src"],G=["onClick","onContextmenu","onMousedown"],V=["textContent"],X=["title","data-error"],Q={class:"submenu-buttons"},ee=["tabIndex","onClick","title"],te=["tabIndex","._item"],ne={key:0,class:"excludes-menu mb-1c mr-1c"},ae=["textContent","title","onClick"],oe=["onUpdate:modelValue","onKeypress","onKeydown"],se=["textContent","onClick"],ie=["textContent","onClick"],le={class:"mb-1"},re=["textContent"],de={class:"submenu-commands"},ce=["tabIndex",".cmd","data-message"],ue=["textContent"],pe={key:2,class:"failure-reason"},me=["textContent"],ge=["textContent"],xe=["textContent"],fe=["textContent","tabIndex"],be=["href","tabIndex","textContent"],he={class:"message"},ve=["textContent"],ke={ref:"topExtras",class:"extras-menu"},Ce=["textContent"],we=["textContent"],ye=["textContent"],Se={key:4,ref:"extras",class:"extras-menu"},Ie=["href","data-message","textContent"],_e=["textContent"],Ee=["textContent"],Me=["textContent"];var De=f(2262),je=f(5010),Ue=f(6877),Fe=f(7458);const $e=(0,De.qj)({scripts:[],frameScripts:[],idMap:{},commands:[],domain:"",injectionFailure:null,injectable:!0});let ze,Te;const Oe=`${S.name} 2.16.0`,Re=["start","body","end","idle"],Le="filtersPopup",qe="updateEnabledScriptsOnly",He=(0,De.qj)({[w]:!0,[Le]:{},[qe]:!0});function Ke(...e){return(t,n)=>{for(let a=0;a<e.length;a++){const o=e[a],s=o(t),i=o(n);if(s<i)return-1;if(s>i)return 1}return 0}}function Pe(){return browser.tabs.reload($e.tab.id)}je.Z.hook(e=>{for(const t in He){const n=e[t];null!=n&&(He[t]=n&&u(n)?{...He[t],...n}:n)}}),g.assign(h.Z,{async UpdateScript({update:{error:e,message:t},where:{id:n}}={}){for(let a=0,o=ze;a<o.length;a++){const{list:s}=o[a];for(let a=0;a<s.length;a++){const o=s[a];if(o.id===n)return o.upd=e||t,void(o.updError=e)}}}});const We={components:{Icon:Ue.Z},data:()=>({store:$e,home:S.homepage_url.split("/")[2],options:He,activeMenu:"scripts",extras:null,focusBug:!1,focusedItem:null,message:null,name:Oe,needsReload:{},topExtras:null}),computed:{activeLinks(){const e=this.extras.data,t=(0,b.b7)(e),n=!t&&(0,b.t$)(e);return[t&&[t,(0,b.ag)("menuFeedback")],n&&[n,(0,b.ag)("buttonHome")]].filter(p)},injectionScopes(){const{sort:e,enabledFirst:t,groupRunAt:n,hideDisabled:a}=this.options[Le],{injectable:o}=$e,s="group"===a,i=He[qe];let l;return ze=[o&&["scripts",(0,b.ag)("menuMatchedScripts"),s||null],o&&s&&["disabled",(0,b.ag)("menuMatchedDisabledScripts"),!1],["frameScripts",(0,b.ag)("menuMatchedFrameScripts")]].filter(p).map(([o,s,r])=>{let d=$e[o]||$e.scripts;null!=r&&(d=d.filter(e=>!e.config.enabled==!r));const c=d.length,u=null==r?d.reduce((e,t)=>e+t.config.enabled,0):c;return"hide"!==a&&!0!==a||(d=d.filter(e=>e.config.enabled)),d=d.map(a=>{const o=(0,b.pV)(a),{id:s}=a.props,{enabled:r,removed:d,shouldUpdate:c}=a.config,u=!d&&(0,b.TZ)(a,{enabledOnly:i}),p={id:s,name:o,data:a,key:`${t&&+!r}${"alpha"===e?o.toLowerCase():n&&Re.indexOf((0,b.xT)(a))}${1e6+a.props.position}`,excludes:null};return u&&(p.upd=null),u&&c&&(l||(l=$e.updatableScripts={}),l[s]=p),p}).sort((e,t)=>e.key<t.key?-1:e.key>t.key),c&&{name:o,title:s,list:d,totals:u<c?`${u} / ${c}`:`${c}`}}).filter(p),ze},findUrls(){const e=encodeURIComponent($e.domain);return{[`${(0,b.ag)("menuFindScripts")} (GF)`]:`https://greasyfork.org/scripts/by-site/${e}`,OUJS:`https://openuserjs.org/?q=${e}`}},reloadHint(){return("scripts-skipped"===$e.failure||w in $e&&$e[w]!==He[w]||g.values(this.needsReload).some(p))&&(0,b.ag)("reloadTab")},tabIndex(){return this.extras?-1:0}},methods:{toggleMenu(e){this.activeMenu=this.activeMenu===e?null:e},async showExtras(e){const t=e.currentTarget,n=t._item,a=n.data?"extras":"topExtras";if(!this[a]){e.stopPropagation(),this[a]=n,n.el=t.closest(".script")||t,await this.$nextTick();const o=this.$refs[a],s=Math.min(innerHeight-o.getBoundingClientRect().height,t.getBoundingClientRect().bottom);o.style.top=`${s}px`}},getSymbolCheck:e=>"toggle-"+(e?"on":"off"),onSkipTab(){(0,b.gj)(c,$e.tab)},onToggle(){je.Z.set(w,He[w]=!He[w]),this.checkReload(),this.updateMessage()},onManage(e){(0,b.gj)("OpenDashboard",1===e?I:"").then(close)},onOpenUrl(e){const t=e.target.closest("a[href][target=_blank]");t&&(e.preventDefault(),(0,b.gj)("TabOpen",{url:t.href}).then(close))},onEditScript(e){(0,b.gj)("OpenEditor",e.data.props.id).then(close)},onCommand(e){const{type:t,currentTarget:n}=e;if("mousedown"===t)Te=n,e.preventDefault();else if("keydown"===t||Te===n){const[t,a,o]=n.cmd;(0,b.Cm)($e.tab.id,"Command",{id:t,key:a,evt:(0,k.zr)(e,["type","button","shiftKey","altKey","ctrlKey","metaKey","key","keyCode","code"])}).then(o&&close)}},onToggleScript(e){const{data:t}=e,n=!t.config.enabled,{id:a}=t.props;(0,b.gj)("UpdateScriptInfo",{id:a,config:{enabled:n}}).then(()=>{t.config.enabled=n,this.checkReload()||(this.needsReload[a]=n!==t.runs)})},checkReload(){if(je.Z.get("autoReload"))return Pe()},reloadTab:Pe,async onCreateScript(){(0,b.gj)("OpenEditor").then(close)},async onInjectionFailureFix(){je.Z.set("defaultInjectInto",n),await(0,b.dL)(100),await browser.tabs.reload(),t.close()},onRemoveScript(){const{config:e,props:{id:t}}=this.extras.data,n=+!e.removed;e.removed=n,(0,b.gj)("MarkRemoved",{id:t,removed:n})},onUpdateScript(){(0,b.gj)("CheckUpdate",this.extras.data.props.id)},onUpdateListed(){(0,b.gj)("CheckUpdate",g.keys($e.updatableScripts).map(Number))},async onExclude(){const e=this.extras,{data:t}=e,n=t.pageUrl,{host:a,domain:o}=await(0,b.gj)("GetTabDomain",n);e.excludes=[`${n.split("#")[0]}*`,{host:a,group:`*.${o}`}],await(0,b.dL)(),e.el.querySelector("input").focus()},onExcludeClose(e){e.excludes=null,this.focus(e)},async onExcludeSave(e,t){await(0,b.gj)("UpdateScriptInfo",{id:e.data.props.id,custom:{excludeMatch:[...e.data.custom.excludeMatch||[],...[t||e.excludes[0].trim()].filter(p)]}}),this.onExcludeClose(e),this.checkReload()},navigate(e){var t;const{activeElement:n}=document,a=C([].map,this.$el.querySelectorAll('[tabindex="0"]'),e=>({el:e,rect:e.getBoundingClientRect()})).filter(({rect:e})=>e.width&&e.height);a.sort(Ke(e=>e.rect.top,e=>e.rect.left));let o=a.findIndex(({el:e})=>e===n);const s=(e,t)=>{for(let n=o+e;n>=0&&n<a.length;n+=e)if(t(a[o],a[n]))return n};if(o<0)o=0;else if("u"===e||"d"===e){const t="u"===e?-1:1;if(o=s(t,(e,n)=>(e.rect.top-n.rect.top)*t<0),"u"===e)for(;o>0&&a[o-1].rect.top===a[o].rect.top;)o-=1}else{const t="l"===e?-1:1;o=s(t,(e,n)=>(e.rect.left-n.rect.left)*t<0)}null==(t=a[o])||t.el.focus()},focus(e){e&&(e=e.el)&&(e.querySelector(".menu-area")||e).focus()},delegateMouseEnter(e){const{target:t}=e;t.tabIndex>=0?t.focus():t.closest("[data-message]")||(this.message="")},delegateMouseLeave(e){const{target:t}=e;t!==document.activeElement||(0,Fe.u7)(t)||t.blur()},updateMessage(){var e;this.message=(null==(e=document.activeElement)?void 0:e.dataset.message)||""},showButtons(e){var t,n;return(null==(t=this.extras)?void 0:t.id)===e.id||(null==(n=this.focusedItem)?void 0:n.id)===e.id||this.focusBug}},mounted(){(0,E.wO)(this.$el),Fe.$J.enable(),this.$el.style.maxHeight=Math.min(Math.max(600,innerHeight),screen.availHeight-screenY-8)+"px",this.disposeList=[Fe.$J.register("escape",()=>{var e;const n=this.extras||this.topExtras;n?(this.extras=this.topExtras=null,this.focus(n)):null!=(e=document.activeElement)&&e.value?document.activeElement.blur():t.close()}),...y?[Fe.$J.register("tab",()=>{(0,Fe.nk)(1)}),Fe.$J.register("s-tab",()=>{(0,Fe.nk)(-1)})]:[],...["up","down","left","right"].map(e=>Fe.$J.register(e,this.navigate.bind(this,e[0]),{condition:"!inputFocus"})),Fe.$J.register("e",()=>{this.onEditScript(this.focusedItem)},{condition:"!inputFocus"})]},activated(){this.focusBug=!document.hasFocus()},beforeUnmount(){var e;Fe.$J.disable(),null==(e=this.disposeList)||e.forEach(e=>{e()})}},Ye=(0,f(3744).Z)(We,[["render",(e,t,n,a,o,s)=>{var i,l;const r=(0,M.up)("icon");return(0,M.wg)(),(0,M.iD)("div",{class:(0,D.C_)(["page-popup flex flex-col",o.store.failure]),onClick:t[17]||(t[17]=e=>o.extras=o.topExtras=null),onClickCapture:t[18]||(t[18]=(...e)=>s.onOpenUrl&&s.onOpenUrl(...e)),onMouseenterCapture:t[19]||(t[19]=(...e)=>s.delegateMouseEnter&&s.delegateMouseEnter(...e)),onMouseleaveCapture:t[20]||(t[20]=(...e)=>s.delegateMouseLeave&&s.delegateMouseLeave(...e)),onFocusCapture:t[21]||(t[21]=(...e)=>s.updateMessage&&s.updateMessage(...e)),"data-is-applied":o.options.isApplied},[(0,M._)("div",F,[$,(0,M._)("div",{class:"flex-1 ext-name",textContent:(0,D.zw)(o.name)},null,8,z),(0,M._)("span",{class:"menu-area","data-message":o.options.isApplied?e.i18n("menuScriptEnabled"):e.i18n("menuScriptDisabled"),tabIndex:s.tabIndex,onClick:t[0]||(t[0]=(...e)=>s.onToggle&&s.onToggle(...e))},[(0,M.Wm)(r,{name:s.getSymbolCheck(o.options.isApplied)},null,8,["name"])],8,T),(0,M._)("span",{class:"menu-area","data-message":e.i18n("menuDashboard"),tabIndex:s.tabIndex,onClick:t[1]||(t[1]=(...e)=>s.onManage&&s.onManage(...e))},[(0,M.Wm)(r,{name:"cog"})],8,O),(0,M._)("span",{class:"menu-area","data-message":e.i18n("menuNewScript"),tabIndex:s.tabIndex,onClick:t[2]||(t[2]=(...e)=>s.onCreateScript&&s.onCreateScript(...e))},[(0,M.Wm)(r,{name:"plus"})],8,R),(0,M._)("span",{class:"menu-area",tabIndex:s.tabIndex,"._item":{},onClick:t[3]||(t[3]=(...e)=>s.showExtras&&s.showExtras(...e))},[(0,M.Wm)(r,{name:"more"})],8,L)]),o.store.injectable?(0,M.wy)(((0,M.wg)(),(0,M.iD)("div",q,[(0,M._)("div",H,[((0,M.wg)(!0),(0,M.iD)(M.HY,null,(0,M.Ko)(s.findUrls,(e,t,n)=>((0,M.wg)(),(0,M.iD)(M.HY,{key:e},[(0,M._)("a",{target:"_blank",class:(0,D.C_)({ellipsis:!n,"mr-1":!n,"ml-1":n}),href:e,"data-message":e.split("://")[1],tabIndex:s.tabIndex},[n?(0,M.kq)("",!0):((0,M.wg)(),(0,M.j4)(r,{key:0,name:"search"})),(0,M.Uk)((0,D.zw)(t),1)],10,K),n?(0,M.kq)("",!0):((0,M.wg)(),(0,M.iD)(M.HY,{key:0},[(0,M.Uk)("/")],64))],64))),128))])],512)),[[j.F8,o.store.domain]]):(0,M.kq)("",!0),o.store.failureText?((0,M.wg)(),(0,M.iD)("div",P,[(0,M._)("span",{textContent:(0,D.zw)(o.store.failureText)},null,8,W),o.store.blacklisted?((0,M.wg)(),(0,M.iD)("code",{key:0,textContent:(0,D.zw)(o.store.blacklisted),class:"ellipsis inline-block"},null,8,Y)):(0,M.kq)("",!0)])):(0,M.kq)("",!0),((0,M.wg)(!0),(0,M.iD)(M.HY,null,(0,M.Ko)(s.injectionScopes,n=>((0,M.wg)(),(0,M.iD)("div",{class:(0,D.C_)(["menu menu-scripts flex flex-col",{expand:o.activeMenu===n.name,"block-scroll":o.extras}]),"data-type":n.name,key:n.name},[(0,M._)("div",{class:"menu-item menu-area menu-group",tabIndex:s.tabIndex,onClick:e=>s.toggleMenu(n.name)},[(0,M.Wm)(r,{name:"arrow",class:"icon-collapse"}),(0,M._)("div",{class:"flex-auto",textContent:(0,D.zw)(n.title),"data-totals":n.totals},null,8,J)],8,B),(0,M._)("div",{class:"submenu",ref_for:!0,ref:"scriptList",focusme:""},[((0,M.wg)(!0),(0,M.iD)(M.HY,null,(0,M.Ko)(n.list,n=>((0,M.wg)(),(0,M.iD)("div",{key:n.id,class:(0,D.C_)([{disabled:!n.data.config.enabled,failed:n.data.failed,removed:n.data.config.removed,runs:n.data.runs,"extras-shown":o.extras===n,"excludes-shown":n.excludes},"script"])},[(0,M._)("div",{class:"menu-item menu-area",tabIndex:s.tabIndex,"data-message":n.name,onFocus:e=>o.focusedItem=n,onKeydown:[(0,j.D2)((0,j.iM)(e=>s.onEditScript(n),["exact","stop"]),["enter"]),(0,j.D2)((0,j.iM)(e=>s.onToggleScript(n),["exact","stop"]),["space"])],onClick:e=>s.onToggleScript(n)},[(0,M._)("img",{class:"script-icon",src:n.data.safeIcon},null,8,N),(0,M.Wm)(r,{name:s.getSymbolCheck(n.data.config.enabled)},null,8,["name"]),(0,M._)("div",{class:"script-name flex-auto ellipsis",onClick:(0,j.iM)(e=>s.onEditScript(n),["ctrl","exact","stop"]),onContextmenu:(0,j.iM)(e=>s.onEditScript(n),["exact","stop","prevent"]),onMousedown:(0,j.iM)(e=>s.onEditScript(n),["middle","exact","stop"])},[n.data.syntax?((0,M.wg)(),(0,M.iD)("sup",{key:0,class:"syntax",textContent:(0,D.zw)(e.i18n("msgSyntaxError"))},null,8,V)):(0,M.kq)("",!0),(0,M.Uk)(" "+(0,D.zw)(n.name),1)],40,G),(0,M._)("div",{class:"upd ellipsis",title:n.upd,"data-error":n.updError},null,8,X)],40,A),(0,M.wy)((0,M._)("div",Q,[(0,M._)("div",{class:"submenu-button",tabIndex:s.tabIndex,onClick:e=>s.onEditScript(n),title:e.i18n("buttonEditClickHint")},[(0,M.Wm)(r,{name:"code"})],8,ee),(0,M._)("div",{class:"submenu-button",tabIndex:s.tabIndex,"._item":n,onClick:t[4]||(t[4]=(...e)=>s.showExtras&&s.showExtras(...e))},[(0,M.Wm)(r,{name:"more"})],8,te)],512),[[j.F8,s.showButtons(n)]]),n.excludes?((0,M.wg)(),(0,M.iD)("div",ne,[((0,M.wg)(!0),(0,M.iD)(M.HY,null,(0,M.Ko)(n.excludes[1],(e,t)=>((0,M.wg)(),(0,M.iD)("button",{key:t,textContent:(0,D.zw)(e),class:"ellipsis",title:`*://${e}/*`,onClick:t=>s.onExcludeSave(n,`*://${e}/*`)},null,8,ae))),128)),(0,M.wy)((0,M._)("input",{"onUpdate:modelValue":e=>n.excludes[0]=e,spellcheck:"false",onKeypress:(0,j.D2)(e=>s.onExcludeSave(n),["enter"]),onKeydown:(0,j.D2)((0,j.iM)(e=>s.onExcludeClose(n),["exact","stop","prevent"]),["esc"])},null,40,oe),[[j.nr,n.excludes[0]]]),(0,M._)("button",{textContent:(0,D.zw)(e.i18n("buttonOK")),onClick:e=>s.onExcludeSave(n)},null,8,se),(0,M._)("button",{textContent:(0,D.zw)(e.i18n("buttonCancel")),onClick:e=>s.onExcludeClose(n)},null,8,ie),(0,M._)("details",le,[(0,M._)("summary",null,[(0,M.Wm)(r,{name:"info"})]),(0,M._)("small",null,[(0,M.Uk)((0,D.zw)(e.i18n("menuExcludeHint"))+" "+(0,D.zw)(e.i18n("labelRelated")),1),(0,M._)("a",{textContent:(0,D.zw)(e.i18n("labelExcludeMatch")),target:"_blank",href:"https://violentmonkey.github.io/api/matching/"},null,8,re)])])])):(0,M.kq)("",!0),(0,M._)("div",de,[((0,M.wg)(!0),(0,M.iD)(M.HY,null,(0,M.Ko)(o.store.commands[n.id],({autoClose:e=!0,text:a,title:o},i)=>((0,M.wg)(),(0,M.iD)("div",{class:"menu-item menu-area",key:i,tabIndex:s.tabIndex,".cmd":[n.id,i,e],"data-message":o||a,onMousedown:t[5]||(t[5]=(...e)=>s.onCommand&&s.onCommand(...e)),onMouseup:t[6]||(t[6]=(...e)=>s.onCommand&&s.onCommand(...e)),onKeydown:[t[7]||(t[7]=(0,j.D2)((...e)=>s.onCommand&&s.onCommand(...e),["enter"])),t[8]||(t[8]=(0,j.D2)((...e)=>s.onCommand&&s.onCommand(...e),["space"]))]},[(0,M.Wm)(r,{name:"command"}),(0,M._)("div",{class:"flex-auto ellipsis",textContent:(0,D.zw)(a)},null,8,ue)],40,ce))),128))])],2))),128))],512)],10,Z))),128)),o.store.injectionFailure?((0,M.wg)(),(0,M.iD)("div",pe,[(0,M._)("div",{textContent:(0,D.zw)(e.i18n("menuInjectionFailed"))},null,8,me),o.store.injectionFailure.fixable?((0,M.wg)(),(0,M.iD)("a",{key:0,textContent:(0,D.zw)(e.i18n("menuInjectionFailedFix")),href:"#",onClick:t[9]||(t[9]=(0,j.iM)((...e)=>s.onInjectionFailureFix&&s.onInjectionFailureFix(...e),["prevent"]))},null,8,ge)):(0,M.kq)("",!0)])):(0,M.kq)("",!0),null!=(i=o.store.tab)&&i.incognito?((0,M.wg)(),(0,M.iD)("div",{key:3,class:"incognito",textContent:(0,D.zw)(e.i18n("msgIncognitoChanges"))},null,8,xe)):(0,M.kq)("",!0),(0,M._)("footer",null,[s.reloadHint?((0,M.wg)(),(0,M.iD)("a",{key:0,textContent:(0,D.zw)(s.reloadHint),tabIndex:s.tabIndex,onClick:t[10]||(t[10]=(...e)=>s.reloadTab&&s.reloadTab(...e))},null,8,fe)):((0,M.wg)(),(0,M.iD)("a",{key:1,target:"_blank",href:"https://"+o.home,tabIndex:s.tabIndex,textContent:(0,D.zw)(o.home)},null,8,be))]),(0,M.wy)((0,M._)("div",he,[(0,M._)("div",{textContent:(0,D.zw)(o.message)},null,8,ve)],512),[[j.F8,o.message]]),(0,M.wy)((0,M._)("div",ke,[(0,M._)("div",{textContent:(0,D.zw)(e.i18n("labelSettings")),onClick:t[11]||(t[11]=e=>s.onManage(1)),tabindex:"0"},null,8,Ce),o.store.updatableScripts?((0,M.wg)(),(0,M.iD)("div",{key:0,textContent:(0,D.zw)(e.i18n("updateListedCmd",`${g.keys(o.store.updatableScripts).length}`)),onClick:t[12]||(t[12]=(...e)=>s.onUpdateListed&&s.onUpdateListed(...e)),tabindex:"0"},null,8,we)):(0,M.kq)("",!0),/^(https?|file):/.test(null==(l=o.store.tab)?void 0:l.url)?((0,M.wg)(),(0,M.iD)("div",{key:1,textContent:(0,D.zw)(e.i18n("skipScripts")),onClick:t[13]||(t[13]=(...e)=>s.onSkipTab&&s.onSkipTab(...e)),tabindex:"0"},null,8,ye)):(0,M.kq)("",!0)],512),[[j.F8,o.topExtras]]),o.extras?((0,M.wg)(),(0,M.iD)("div",Se,[((0,M.wg)(!0),(0,M.iD)(M.HY,null,(0,M.Ko)(s.activeLinks,([e,t])=>((0,M.wg)(),(0,M.iD)("a",{key:e,href:e,"data-message":e,tabindex:"0",textContent:(0,D.zw)(t),rel:"noopener noreferrer",target:"_blank"},null,8,Ie))),128)),(0,M._)("div",{textContent:(0,D.zw)(e.i18n("menuExclude")),tabindex:"0",onClick:t[14]||(t[14]=(...e)=>s.onExclude&&s.onExclude(...e))},null,8,_e),(0,M._)("div",{textContent:(0,D.zw)(o.extras.data.config.removed?e.i18n("buttonRestore"):e.i18n("buttonRemove")),tabindex:"0",onClick:t[15]||(t[15]=(...e)=>s.onRemoveScript&&s.onRemoveScript(...e))},null,8,Ee),"upd"in o.extras?((0,M.wg)(),(0,M.iD)("div",{key:0,textContent:(0,D.zw)(e.i18n("buttonUpdate")),tabindex:"0",onClick:t[16]||(t[16]=(...e)=>s.onUpdateScript&&s.onUpdateScript(...e))},null,8,Me)):(0,M.kq)("",!0)],512)):(0,M.kq)("",!0)],42,U)}]]);let Ze,Be,Je;function Ae(e=100){Ze=new x(t=>{Be=t,setTimeout(t,e)})}async function Ne(){Ae(),g.assign($e,{scripts:[],frameScripts:[],idMap:{},commands:[],domain:"",injectionFailure:null,injectable:!0});let[e,t,[n,a,o]]=await(0,b.gj)("InitPopup");if(a?a===l?(a="noninjectable",t.injectable=!1,Be()):a===c?a="scripts-skipped":a===w?a="scripts-disabled":t[a]=o:n="",g.assign($e,t,{failure:a,failureText:n}),e)for(const t in e)h.Z.SetPopup(...e[t]);Je||(Je=browser.runtime.connect({name:`${t.tab.id}`}),Je.onMessage.addListener(Ne))}function Ge(e){return e&&(!$e.tab||$e.tab.id===e.id)}Ne(),(0,E.sY)(Ye),g.assign(h.Z,{Run({reset:e},{[_]:t,tab:n}){e&&!t&&Ge(n)&&Ne()},async SetPopup(e,{[_]:t,tab:n,url:c}){if(!Ge(n))return;const u=0===t;u?($e.commands=e.menus,$e[w]="off"!==e[l]):await Ze;const p=$e.idMap,m=p[0]||(p[0]={}),x=p[t]||(p[t]={}),f=C(k.Xw,e[o],null,(e,t)=>t!==x[e]&&e),h=g.keys(f).map(Number);if(h.length){var y;g.assign(x,f);const t=$e[u?d:"frameScripts"];((null==(y=e[d])?void 0:y.filter(({props:{id:e}})=>h.includes(e)))||g.assign(e,await(0,b.gj)("GetData",{ids:h}))[d]).forEach(n=>{(0,v.d)(n,e);const{id:o}=n.props,d=f[o],p=d===s,g=t.find(({props:e})=>e.id===o);if(g)n=g;else if((u||!(o in m))&&(t.push(n),u)){const{frameScripts:e}=$e,t=e.findIndex(({props:e})=>e.id===o);t>=0&&e.splice(t,1)}n.runs=d===a||d===r,n.pageUrl=c,n.failed=p||d===i,n.syntax=d===i,p&&!$e.injectionFailure&&($e.injectionFailure={fixable:e[l]===r})})}u&&Be()}}),null!=CSS.supports&&CSS.supports("list-style-type","disclosure-open")||document.styleSheets[0].insertRule(".excludes-menu ::-webkit-details-marker {display:none}")},6291:(e,t,n)=>{var a={"./arrow.svg":943,"./author.svg":7767,"./code.svg":4064,"./cog.svg":9640,"./command.svg":4507,"./filter.svg":5698,"./home.svg":7030,"./info.svg":6501,"./more.svg":8614,"./plus.svg":2996,"./question.svg":1902,"./refresh.svg":1694,"./search.svg":1112,"./toggle-off.svg":6817,"./toggle-on.svg":385,"./trash.svg":4289,"./undo.svg":8947};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new m("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=()=>g.keys(a),o.resolve=s,e.exports=o,o.id=6291}},b={};function h(e){var t=b[e];if(void 0!==t)return t.exports;var n=b[e]={exports:{}};return f[e].call(n.exports,n,n.exports,h),n.exports}h.m=f,e=[],h.O=(t,n,a,o)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,a,o]=e[d],i=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&g.keys(h.O).every(e=>h.O[e](n[l]))?n.splice(l--,1):(i=!1,o<s&&(s=o));if(i){e.splice(d--,1);var r=a();void 0!==r&&(t=r)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,a,o]},h.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return h.d(t,{a:t}),t},h.d=(e,t)=>{for(var n in t)h.o(t,n)&&!h.o(e,n)&&g.defineProperty(e,n,{enumerable:!0,get:t[n]})},h.o=(e,t)=>g.prototype.hasOwnProperty.call(e,t),h.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&g.defineProperty(e,Symbol.toStringTag,{value:"Module"}),g.defineProperty(e,"__esModule",{value:!0})},h.j=382,(()=>{var e={382:0};h.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[s,i,l]=n,r=0;if(s.some(t=>0!==e[t])){for(a in i)h.o(i,a)&&(h.m[a]=i[a]);if(l)var d=l(h)}for(t&&t(n);r<s.length;r++)o=s[r],h.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return h.O(d)},n=self.webpackChunkviolentmonkey=self.webpackChunkviolentmonkey||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var v=h.O(void 0,[84],()=>h(5976));v=h.O(v)})()}