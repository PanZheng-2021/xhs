(window.webpackJsonp=window.webpackJsonp||[]).push([[15,7,35,37,38,40],Array(23).concat([function(t,e,i){"use strict";i.d(e,"i",(function(){return o})),i.d(e,"d",(function(){return n})),i.d(e,"h",(function(){return I})),i.d(e,"b",(function(){return r})),i.d(e,"a",(function(){return a})),i.d(e,"g",(function(){return s})),i.d(e,"e",(function(){return c})),i.d(e,"f",(function(){return Nt})),i.d(e,"c",(function(){return l}));var o={};i.r(o),i.d(o,"getLocalCity",(function(){return h})),i.d(o,"getForecastWeather",(function(){return u})),i.d(o,"getCityList",(function(){return g}));var n={};i.r(n),i.d(n,"getSearchSuggest",(function(){return w})),i.d(n,"getEnginesList",(function(){return x}));var r={};i.r(r),i.d(r,"getIcon",(function(){return L})),i.d(r,"getUrlInfoWithPermission",(function(){return U})),i.d(r,"getUrlIcon",(function(){return z})),i.d(r,"getFetchiconUrls",(function(){return H})),i.d(r,"getLogoList",(function(){return W})),i.d(r,"getRedirectTargets",(function(){return q}));var a={};i.r(a),i.d(a,"getUnreadEmails",(function(){return V}));var s={};i.r(s),i.d(s,"register",(function(){return Z})),i.d(s,"login",(function(){return K})),i.d(s,"updateProfile",(function(){return J})),i.d(s,"getUserProfile",(function(){return tt})),i.d(s,"uploadAvatar",(function(){return et})),i.d(s,"modifyPassword",(function(){return it})),i.d(s,"forgetPassword",(function(){return ot})),i.d(s,"resetPassword",(function(){return nt})),i.d(s,"getEmailCode",(function(){return rt})),i.d(s,"getRegisterCode",(function(){return at})),i.d(s,"inspceCode",(function(){return st})),i.d(s,"checkTokenIsExpired",(function(){return lt})),i.d(s,"deleteAccount",(function(){return ct})),i.d(s,"loginWithUid",(function(){return dt})),i.d(s,"v1BasicLogin",(function(){return pt})),i.d(s,"getMobileUid",(function(){return ht})),i.d(s,"getMobileloginUrl",(function(){return ut})),i.d(s,"checkMobileloginUrl",(function(){return gt})),i.d(s,"sendPhoneCode",(function(){return ft})),i.d(s,"sendEmailCode",(function(){return mt})),i.d(s,"bindEmail",(function(){return bt})),i.d(s,"bindPhoneNumber",(function(){return yt})),i.d(s,"unbindEmail",(function(){return vt})),i.d(s,"unbindPhoneNumber",(function(){return wt})),i.d(s,"verifyPhoneVCode",(function(){return xt})),i.d(s,"ThirdLoginType",(function(){return _t})),i.d(s,"bindThird",(function(){return kt})),i.d(s,"unbindThird",(function(){return Ot})),i.d(s,"getAreaCodeList",(function(){return At})),i.d(s,"verifyPassword",(function(){return St})),i.d(s,"geVerifyTokenImg",(function(){return It}));var l={};i.r(l),i.d(l,"getRepairConcat",(function(){return jt})),i.d(l,"postErrorCollect",(function(){return $t})),i.d(l,"sendLog",(function(){return Ct}));var c={};i.r(c),i.d(c,"getSyncList",(function(){return Rt})),i.d(c,"getSyncDetail",(function(){return Lt})),i.d(c,"autoBackup",(function(){return Dt})),i.d(c,"manualBackup",(function(){return Mt})),i.d(c,"getV2DataFromV1",(function(){return Ut}));i(8);var d=i(0),p=i(3);const h=async()=>{try{const t=await p.a.get(d.A+"/city/locate",{lang:d.D.lang},{timeout:1e4});if(t&&t.city)return{data:t.city}}catch(t){return{error:t}}},u=async t=>{try{return{data:(await p.a.get(d.A+"/weather/forecast",{lang:d.D.lang,cid:t},{timeout:1e4})).forecast}}catch(t){return{error:t}}},g=async t=>{try{return{data:await p.a.get(d.A+"/city/list",{lang:d.D.lang,searchkey:t},{timeout:1e4})}}catch(t){return{error:t}}};i(21);var f=i(17),m=i(87),b=i.n(m),y=i(252),v=i.n(y);const w=async t=>d.D.isZh?d.h||d.s?k(t):A(t):d.h||d.s?O(t):S(t),x=async t=>{let e=d.q?36e5:6e4;t||(e=0);try{if(!f.a.requestFirefoxThrottle("/search/list",e,!0))return{error:"request throttle error"};const i=await p.a.get(d.y+"/search/list",{lang:d.D.lang,platform:d.D.platform,platformVersion:d.D.platformVersion,edition:d.e,maybe360:d.G,version:t||""+Date.now()});if(0===i.code){const t=i.data.map(t=>{const e={};return e.name=t.name,e.uuid=t.seId,e.logo=t.logo,e.desc=t.desc,e.types=t.types,e.hide=t.hide,e});return f.a.requestFirefoxThrottle("/search/list",!0,!0),{data:{list:t,hash:b()(JSON.stringify(t)),meta:i.meta}}}if(2005===i.code)return f.a.requestFirefoxThrottle("/search/list",!0,!0),{error:i};throw i}catch(t){return{error:t}}},_=f.a.getLastReqValue(p.a.jsonp),k=async t=>{var e;try{const i=await _(d.b+"/su?ie=utf-8&p=3",{wd:t},{adapter:v.a,callbackParamName:"cb"});return{data:(null===(e=null==i?void 0:i.s)||void 0===e?void 0:e.map(t=>({text:t})))||[]}}catch(t){return{error:t}}},O=async t=>{var e;try{const i=await _(d.g+"/complete/search?client=chrome",{q:t},{adapter:v.a,callbackParamName:"jsonp"});return{data:(null==i?void 0:i.length)&&(null===(e=i[1])||void 0===e?void 0:e.length)?i[1].map(t=>({text:t})):[]}}catch(t){return{error:t}}},A=async t=>{try{const e=await p.a.get(d.b+"/su?p=3&ie=UTF-8&cb=",{wd:t},{_single:!0,_delay:0}),i=/s:(\[[\w\W]*\])/.exec(e),o=JSON.parse(i[1]);return{data:o.map(t=>({text:t}))}}catch(t){return{error:t}}},S=async t=>{try{const e=await p.a.get(d.g+"/complete/search?client=chrome",{q:t},{_single:!0,_delay:200});return{data:e[2].map((t,i)=>(t||(t=e[1][i]),{text:t}))}}catch(t){return{error:t}}};var I=i(119),j=i(6),$=i.n(j),C=i(99),E=i.n(C),T=i(36),P=i.n(T);i(41),i(266),i(11),i(14),i(64);const R=d.D.lang,L=async({page:t=0,type:e,keyword:i,source:o}={})=>{try{const n=await p.a.get(d.x+"/get-icons",{lang:R,page:t,type:e,source:o,keyword:i},{_single:!0,_delay:200});if(n.success)return n.icons.forEach(t=>{if("infinity"===t.source)switch("infinity://wallpaper"===t.url&&(t.name="wallpaper_library"),t.url){case"infinity://wallpaper":case"infinity://weather":case"infinity://todos":case"infinity://notes":case"infinity://history":case"infinity://bookmarks":case"infinity://settings":t.name=i18n(t.name),t.description=i18n(t.description);break;case"infinity://extension":t.name=i18n(t.name),t.description=i18n(t.description,d.D.vendor)}t._footer=t.description||i18n("no_description")}),{data:n};throw n}catch(t){return{error:t}}},D=async t=>{try{const e=await p.a.get(d.y+"/icon/title",{url:t},{_single:!0,_delay:0,timeout:3e3});if(0===e.code)return{data:{name:e.data.title}};throw e}catch(t){return{error:t}}},M=/<title[^>]*>\s*(.*)\s*<\/title>/,U=t=>window.__INFINITY__.hasAllUrlPermission?new $.a(async e=>{let i=0;D(t).then(t=>{i+=1,t.error&&2!==i||e(t)}),(async t=>{try{const e=await p.a.get(t,{},{_single:"getUrlInfoFromFE",timeout:3e3,responseType:"text",_responseAll:!0}),i=e.data;if(i&&e.status>=200&&e.status<300){const t=i.indexOf("<title");if(t>0){const e=i.slice(t,t+200),o=M.exec(e),n=null==o?void 0:o[1];if(n)return{data:{name:n}}}}return{error:"error"}}catch(t){return{error:t}}})(t).then(t=>{i+=1,t.error&&2!==i||e(t)})}):new $.a(async e=>{e(await D(t))}),N=(t,e)=>{if(0===e.length)return e;const i=new Map,o=[];return t.forEach((t,e)=>{i.set(t,e)}),e.forEach(t=>{const e=i.get(t);o[e]=t}),o.filter(t=>!!t)},B=t=>new $.a(e=>{const i=()=>{const e=N(t,r),i=N(t,a),o=N(t,s);return e.concat(i,o)},o=t.length;let n=0;const r=[],a=[],s=[];t.forEach(t=>{const l=new Image;l.onload=function(){n+=1;const{width:l,height:c}=this,d=Math.max(l,c),p=Math.min(l,c);d/p<5?p>50&&d>100?r.push(t):p>50||d>100?a.push(t):s.push(t):s.push(t),n===o&&e(i())},l.onerror=()=>{n+=1,n===o&&e(i())},l.src=t}),setTimeout(()=>{e(i())},3e3)}),F=/\.(ico|png|jpg|jpeg|svg|webp)$/,z=async t=>{var e;try{const i=await p.a.get(t,{},{_single:"getUrlIcon",_delay:100,timeout:3e3,responseType:"text",_responseAll:!0}),o=i.data;if(o&&i.status>=200&&i.status<300){const n=(null===(e=i.request)||void 0===e?void 0:e.responseURL)||t;let r=((t,e)=>{const i=[];return e.replace(/<link [^>]*href=['"]([^'"]+)[^>]*/gi,(t,e)=>{i.push(e)}),E()(i).call(i,(e,i)=>{if(i&&F.test(i)){const o=new P.a(i,t);e.push(o.href)}return e},[])})(n,o);if(r.length<6){const t=((t,e)=>{const i=[];return e.replace(/<img [^>]*src=['"]([^'"]+)[^>]*/gi,(t,e)=>{i.push(e)}),E()(i).call(i,(e,i)=>{if(i&&F.test(i)){const o=new P.a(i,t);e.push(o.href)}return e},[])})(n,o);r=r.concat(t)}r.length>4&&(r.length=4);let a=await B(r);return a=Array.from(new Set(a)),a.length>2&&(a.length=2),{data:a}}return{error:""}}catch(t){return{error:t}}},H=async t=>{try{const{host:e}=new P.a(t),i=await p.a.get(d.y+"/icon/get_icon_urls",{host:e});return 0!==i.code?{error:i}:{data:i.data.map(t=>t.url)}}catch(t){return{error:t}}},W=async t=>{try{const{host:e}=new P.a(t);if(!e.includes("."))return{data:[]};const i=await p.a.get(d.y+"/icon/get_logo_list",{host:e,limit:2},{_single:!0,_delay:100});return 0!==i.code?{error:i}:{data:i.data.map(t=>t.src)}}catch(t){return{error:t}}},q=async t=>{var e;let i=d.q?36e5:6e4;t||(i=0);try{if(!f.a.requestFirefoxThrottle("/icon/rt",i,!0))return{error:"request throttle error"};const o=await p.a.post(d.y+"/icon/rt",{version:t||""+Date.now()});return 0===o.code&&f.a.requestFirefoxThrottle("/icon/rt",!0,!0),0===o.code&&o.data?{data:{list:o.data,version:null===(e=o.meta)||void 0===e?void 0:e.version}}:{error:o}}catch(t){return{error:t}}};function G(t){return t?t.textContent:null}function V(t){return new $.a((e,i)=>{const o=new XMLHttpRequest;o.onreadystatechange=function(){var t,n;if(4==o.readyState)if(o.responseXML){const i=o.responseXML;let r=G(i.querySelector("title"));if(r)try{r=/(\w+)@(\w+\.\w+)/.exec(r)[0]}catch(t){}const a=parseInt(G(i.querySelector("fullcount")),10),s=i.querySelectorAll("entry"),l=[];let c=-1;for(let e=0,i=s.length;e<i;e++){const i=s[e],o={id:G(i.querySelector("id")),issued:G(i.querySelector("issued")),title:G(i.querySelector("title")),summary:G(i.querySelector("summary")),link:(t=i.querySelector("link"),n="href",t?t.getAttribute(n):null),authorName:G(i.querySelector("author name")),authorEmail:G(i.querySelector("author email"))};o.issued&&(o.issued=new Date(o.issued).valueOf(),c=Math.max(c,o.issued)),l.push(o)}e({account:r,lastIssuedTime:c,count:a,emails:l})}else i()},o.onerror=i,o.open("GET",function(t){return d.f+"/mail/feed/atom?zx="+encodeURIComponent(t)}(t),!0),o.send(null)})}var Q=i(89),Y=i.n(Q),X=i(9);const Z=async({email:t,password:e,repeatPassword:i,code:o})=>{const n={email:Y()(t).call(t),password:b()(e),repeatPassword:b()(i),code:Y()(o).call(o)};try{return await p.a.post(d.y+"/user/register",n)}catch(t){return t}},K=async({email:t,password:e,phone_number:i})=>{const o={email:t?Y()(t).call(t):void 0,phone_number:i?Y()(i).call(i):void 0,password:b()(e)};try{return await p.a.post(d.y+"/user/login",o)}catch(t){return t}};async function J(t){const{data:e}=await X.k.read(),i=e.userInfo.uid;try{return await p.a.post(d.y+"/user/update_profile/"+i,t,{_auth:!0})}catch(t){throw new Error(t.message)}}async function tt(){try{return await p.a.get(d.y+"/user/get_user_profile",{},{_auth:!0,_proxy:!0})}catch(t){return t}}async function et(t){const e=new FormData;e.append("file",t);try{const t=await p.a.post(d.y+"/upload/avatar",e,{_auth:!0,headers:{"Content-Type":"multipart/form-data"}});if(0===(null==t?void 0:t.code))return t;throw new Error(i18n("upload_avatar_failure"))}catch(t){throw new Error(t)}}async function it({originPassword:t,newPassword:e}){const{data:i}=await X.k.read(),o=i.userInfo.uid,{token:n}=i;if(!n)throw new Error(i18n("unknown_mistake"));const r={originPassword:b()(t),newPassword:b()(e)};try{return await p.a.post(d.y+"/user/modify_password/"+o,r,{_auth:!0})}catch(t){return t}}async function ot(t){try{const e=await p.a.post(d.y+"/user/forget_password",t);return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function nt({password:t,repeatPassword:e,email:i,code:o,phone_number:n}){const r={password:b()(t),repeatPassword:b()(e),email:i?Y()(i).call(i):void 0,code:Y()(o).call(o),phone_number:n?Y()(n).call(n):void 0};try{return await p.a.post(d.y+"/user/reset_password",r)}catch(t){return t}}async function rt(t){try{const e=await p.a.post(`${d.y}/get_code2?lang=${d.D.lang}`,t,{withCredentials:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function at(t){try{return await p.a.post(`${d.y}/get_register_code2?lang=${d.D.lang}`,t,{withCredentials:!0})}catch(t){return t}}async function st(t){try{return await p.a.post(d.y+"/inspce_code",t)}catch(t){return t}}async function lt(){try{return await p.a.get(d.y+"/check_token",{},{_auth:!0})}catch(t){return t}}async function ct(){const{data:t}=await X.k.read(),e=t.userInfo.uid;try{return await p.a.post(d.y+"/user/delete/"+e,{},{_auth:!0})}catch(t){return t}}const dt=async t=>{try{return await p.a.post(d.y+"/user/login_uid",t,{timeout:1e4})}catch(t){return t}},pt=async t=>{try{return await p.a.post(d.y+"/user/v1_basic_login",t,{timeout:1e4})}catch(t){return t}},ht=async(t,e)=>{try{return await p.a.get(`${d.y}/user/user_hash?uid=${t}&secret=${e}`)}catch(t){return t}},ut=async()=>{try{const t=await p.a.get(d.y+"/login_code/mobile_code",{},{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}},gt=async(t,e)=>{try{const i=await p.a.post(d.y+"/login_code/check",{code:t,type:e},{_auth:!0});return 0===i.code?{data:i.data}:{error:i}}catch(t){return{error:t}}};async function ft(t){try{const e=await p.a.post(d.y+"/phone/send_code",t,{withCredentials:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function mt(t){try{const e=await p.a.post(d.y+"/get_email_bind_code",t,{_auth:!0,withCredentials:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function bt(t){try{const e=await p.a.post(d.y+"/bind/email",t,{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function yt(t){try{const e=await p.a.post(d.y+"/bind/phone",t,{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function vt(){try{const t=await p.a.post(d.y+"/unbind/email",{},{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}async function wt(){try{const t=await p.a.post(d.y+"/unbind/phone",{},{_auth:!0});return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}async function xt(t,e){try{const i=await p.a.post(d.y+"/phone/verify_code",{phone_number:t,code:e});return 0===i.code?{data:i.data}:{error:i}}catch(t){return{error:t}}}var _t;async function kt(t,e){try{const i=await p.a.post(`${d.y}/bind/${t}`,{access_code:e},{_auth:!0});return 0===i.code?{data:i.data}:{error:i}}catch(t){return{error:t}}}async function Ot(t){try{const e=await p.a.post(`${d.y}/unbind/${t}`,{},{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function At(){try{const t=await(await p.a.get(d.y+"/phone/area_list"));return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}async function St(t){try{const e=await p.a.post(d.y+"/user/verify_password",{password:b()(t)},{_auth:!0});return 0===e.code?{data:e.data}:{error:e}}catch(t){return{error:t}}}async function It(){try{const t=await p.a.get(d.y+"/verify/get_token_img");return 0===t.code?{data:t.data}:{error:t}}catch(t){return{error:t}}}!function(t){t.weibo="weibo",t.facebook="facebook",t.google="google",t.wechat="wechat",t.qq="qq"}(_t||(_t={}));const jt=async()=>{try{const t=await p.a.get(d.y+"/get_concat_info");if(0===t.code)return{data:t.data};throw t}catch(t){return{error:t}}},$t=async(t,e)=>{try{const{response:i,stack:o,config:n}=e;let r=i||n;r&&(r=JSON.stringify(r,(t,e)=>{if(e instanceof FormData){const t={};for(const[i,o]of e)t[i]=o;return t}if(e instanceof File){return{lastModified:e.lastModified,name:e.name,size:e.size,type:e.type}}return e}));let{data:a,error:s}=await X.k.read();if(!s&&a){const t=["mobileuid","avatar","refreshToken","secret","gender","name"];a=JSON.stringify(a,(e,i)=>{if(!t.includes(e))return i})}const l=await p.a.post(d.y+"/collect",{type:t,user:a,stack:o,info:r,env:Object.assign({},d.D)});if(0===l.code)return{data:l.data};throw l}catch(t){return{error:t}}},Ct=async t=>{await p.a.get(t,void 0,{_proxy:!0,_proxyIgnoreRes:!0})},Et=t=>{const e=JSON.stringify(t),i=(new TextEncoder).encode(e);return new Blob([i],{type:"application/json;charset=utf-8"})},Tt=t=>{const e={};return t.forEach(t=>{const{platform:i}=t;e[i]?e[i].push(t):e[i]=[t]}),e},Pt=t=>{const{_id:e,_platform:i="pc"}=t;return{id:e,time:f.a.fmtTime(Number(e)),platform:i}},Rt=async()=>{try{const t=await p.a.get(d.y+"/sync/list",void 0,{_auth:!0,_proxy:!0});if(0!==t.code)return{error:t};const e={};return e.auto=t.meta.auto.map(Pt),e.manual=Tt(t.meta.manual.map(Pt)),{data:e}}catch(t){return{error:t}}},Lt=async(t,e,i="all")=>{try{const o=await p.a.get(d.y+"/sync/download_url",{id:t,type:e,keys:i},{_auth:!0});if(0!==o.code)return{error:o};const n=o.data;let r={};const a=await $.a.all(n.map(e=>p.a.get(e.url+"&timestampid="+("latest"===t?Date.now():t),{},{timeout:18e4})));return n.forEach((t,i)=>{const o=t.fileKey;"manual"===e?r=Object.assign(Object.assign({},r),a[i]):"auto"===e&&(r[o]=a[i])}),{data:r}}catch(t){return $t("getSyncDetail",t),{error:t}}},Dt=async(t,e="")=>{const i=Object.keys(t).join(",");try{const o=await p.a.get(d.y+"/sync/token",{type:"auto",keys:i},{_auth:!0});if(0!==o.code||!o.data.length)return{error:o};const n=o.data;await $.a.all(n.map(e=>{const{url:i,key:o,token:n,host:r}=e,a=new FormData;return a.append("token",n),a.append("key",i),a.append("file",Et(t[o])),p.a.post(r,a,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4})})),localStorage.setItem("pre-sync-id",n[0].timestamp+"");const r=await p.a.post(d.y+"/sync/done",{type:"auto",websocketkeys:e,keys:i,record_time:n[0].timestamp},{_auth:!0});return 0!==r.code?{error:r}:{data:r.meta.map(Pt)}}catch(t){return $t("autoBackup",t),{error:t}}},Mt=async t=>{try{const e=await p.a.get(d.y+"/sync/token",{type:"manual",keys:"data"},{_auth:!0});if(0!==e.code||!e.data.length)return{error:e};const{token:i,url:o,timestamp:n,host:r}=e.data[0],a=new FormData;a.append("token",i),a.append("key",o),a.append("file",Et(t)),await p.a.post(r,a,{headers:{"Content-Type":"multipart/form-data"},timeout:18e4});const s=await p.a.post(d.y+"/sync/done",{type:"manual",keys:"data",record_time:n},{_auth:!0});return 0!==s.code?{error:s}:{data:Tt(s.meta.map(Pt))}}catch(t){return $t("manualBackup",t),{error:t}}},Ut=t=>"pro"===t?async function(){try{const{data:{userInfo:t}}=await X.k.read(),{uid:e,secret:i}=t,o=await p.a.get(d.x+"/user/recovery-pro",{uid:e,secret:i},{timeout:2e5});if(o.success)return{data:o.data};throw o}catch(t){return $t("getProV1Data",t),{error:t}}}():"basic"===t?async function(){try{const t=await p.a.get(d.y+"/sync/recover_basic",{},{_auth:!0,timeout:2e5});return 0!==t.code?{error:t}:{data:t.data}}catch(t){return $t("getBasicV1Data",t),{error:t}}}():void 0;var Nt=i(275)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,"iMessage",(function(){return p})),i.d(e,"message",(function(){return h}));i(11),i(14);var o=i(398),n=i(1),r=i(385),a=i(487),s=i.n(a),l=i(488),c=i.n(l),d=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let p=class extends n.a{constructor(){super(...arguments),this.content="",this.type="error"}render(){const t={"infinity-message":!0,"position-top":"top"===this.type};return n.e`
      <div class=${Object(r.a)(t)}>
        ${this.renderImg()}
        <span>${this.content}</span>
      </div>
    `}renderImg(){return"error"===this.type?n.e`<img .src=${s.a} />`:"warn"===this.type?n.e`<img .src=${c.a} />`:void 0}};p.styles=n.b`
    :host {
      box-sizing: border-box;
      display: flex;
      position: fixed;
      min-width: 330px;
      padding: 0 20px;
      height: 60px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 1);
      box-shadow: 0px 6px 48px 0px rgba(0, 0, 0, 0.24);
      border-radius: 6px;
      z-index: 99999999999;
    }
    :host([type='top']) {
      width: 100%;
      margin: 0;
      left: 0;
      top: var(--top-bar-height);
      height: auto;
      padding: 5px;
      border-radius: 0;
      background: rgba(95, 92, 92, 0.6);
      color: #fff;
      transform: none;
      transition: all 300ms;
      opacity: 0;
      pointer-events: none;
    }
    :host(.anim[type='top']) {
      opacity: 1;
    }

    .infinity-message {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
    }
    img {
      width: 20px;
      height: 20px;
      margin-right: 8px;
    }
  `,d([Object(n.g)({type:String})],p.prototype,"content",void 0),d([Object(n.g)({type:String})],p.prototype,"type",void 0),p=d([Object(n.c)("i-message")],p);const h={newInstance:function(t,e=2,i,o){let n;if(document.querySelector("i-message"))return void clearInterval(n);const r=document.createElement("i-message");return r.setAttribute("content",t),r.setAttribute("type",i),document.body.appendChild(r),0!==e&&(n=setTimeout(()=>{document.body.removeChild(r),o&&o()},1e3*e)),r},error:function(t,e,i){o.default.error(t,e),i&&setTimeout(i,e)},success:function(t,e,i){o.default.success(t,e),i&&setTimeout(i,e)},top:function(t,e,i){const o=this.newInstance(t,e,"top",i);setTimeout(()=>null==o?void 0:o.classList.add("anim"))},warn:function(t,e,i){this.newInstance(t,e,"warn",i)}}},,,,,,,,,,,,function(t,e,i){"use strict";i.d(e,"c",(function(){return l})),i.d(e,"d",(function(){return c})),i.d(e,"b",(function(){return d})),i.d(e,"e",(function(){return p})),i.d(e,"a",(function(){return h}));var o=i(6),n=i.n(o),r=(i(8),i(11),i(14),i(0)),a=i(22),s=i.n(a);function l(t,e){if(r.l){if(t=window.chrome.runtime.getURL(t),null==e?void 0:e.isNewTab)return window.chrome.tabs.create({url:t});window.chrome.tabs.getCurrent(e=>window.chrome.tabs.update(e.id,{url:t},()=>{chrome.runtime.lastError&&t&&(t.startsWith("http")?window.open(t,"_self"):window.chrome.tabs.create({url:t}))}))}else{if(null==e?void 0:e.isNewTab)return window.open(t);window.open(t,"_self")}}async function c(){if(r.l){const{slave:t}=await i.e(40).then(i.bind(null,163));window.chrome.tabs.getCurrent(e=>{t.sendMessage("tabs-reload"),setTimeout(()=>{window.chrome.tabs.remove(e.id)},16)})}else setTimeout(()=>{l("/")},16)}async function d(t,e){try{if(e){return await s.a.getItem(t)}{const e=localStorage.getItem(t);if(e)return"string"==typeof e?JSON.parse(e):e}}catch(t){throw new Error(t)}}async function p(t,e,i){i?await s.a.setItem(t,e):localStorage.setItem(t,JSON.stringify(e))}async function h(){const t=await new n.a(t=>chrome.bookmarks.getTree(t));if(r.n){const e=t[0].children.findIndex(t=>"unfiled_____"===t.id),i=t[0].children.findIndex(t=>"toolbar_____"===t.id);if(-1!==e&&-1!==i)if(e>i){const[o]=t[0].children.splice(e,1),[n]=t[0].children.splice(i,1);t[0].children.unshift(n,o)}else{const[o]=t[0].children.splice(i,1),[n]=t[0].children.splice(e,1);t[0].children.unshift(o,n)}}return t}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,"slave",(function(){return s}));i(8),i(11),i(14),i(41);var o=i(6),n=i.n(o),r=i(276),a=i(59);const s=new class{constructor(){if(this.channel=null,this.initResolve=[],this.initReject=[],this.messageScheduler=new r.a,this.initChannel=()=>{"serviceworker"===a.b?this.initServiceworker():"background"===a.b&&this.initBackground()},this.awaitChannel=()=>new n.a(async(t,e)=>{"serviceworker"===a.b?this.channel?(await this.channel.active,await this.channel.controlling,t(null)):(this.initResolve.push(t),this.initReject.push(e)):"background"===a.b&&t(null)}),this.initServiceworker=async()=>{try{const{createWorkBox:t}=await i.e(11).then(i.bind(null,615)),e=await t();if(!e)return;e.addEventListener("message",t=>{const{type:e,payload:i={}}=t.data;"master:bordcast-message"===e&&this.messageScheduler.execTask(i.type,i.payload)}),await e.active,await e.controlling,this.channel=e,this.initResolve.forEach(t=>{t()}),this.channel.postTask=this.channel.messageSW}catch(t){console.log("slave初始化错误：",t),this.initReject.forEach(t=>{t()})}},this.initBackground=()=>{this.channel={postTask:t=>new n.a((e,i)=>{chrome.runtime.sendMessage(t,t=>{chrome.runtime.lastError&&i(chrome.runtime.lastError),e(t)})})},chrome.runtime.onMessage.addListener(({type:t,payload:e,ignoreId:i})=>{"master:bordcast-message"===t?chrome.tabs.getCurrent(t=>{i!==t.id&&this.messageScheduler.execTask(e.type,e.payload)}):"slave:bordcast-message"===t&&this.messageScheduler.execTask(e.data.type,e.data.payload)})},a.a)throw new Error("it's not page");this.initChannel()}postTask(t,e,i){return new n.a(async(o,n)=>{let r=!1;await this.awaitChannel();const s=Object.assign(Object.assign(Object.assign({},a.d),{taskId:Object(a.c)()}),i);s.timeout&&setTimeout(()=>{r||o({error:"timeout"})},s.timeout);try{const i=await this.channel.postTask({type:t,payload:Object.assign({data:e},s)});r=!0,o(i)}catch(t){o({error:t})}})}listenMessage(t,e){this.messageScheduler.listenTask(t,e)}sendMessage(t,e=""){this.postTask("slave:bordcast-message",{type:t,payload:e})}}},,,,,function(t,e,i){"use strict";var o=i(6),n=i.n(o),r=(i(8),i(0)),a=i(22),s=i.n(a);const l=new class{constructor(){this.errorList=[],this.clearAllData=async()=>{try{await s.a.removeItem("old-data"),await s.a.removeItem("error-data")}catch(t){}}}getLocalData(){const t={};for(let e=0,i=localStorage.length;e<i;e++){const i=localStorage.key(e);t[i]=localStorage[i]}return t}async getIndexedData(){const t={};try{return await s.a.iterate((e,i)=>{t[i]=e}),t}catch(t){return await this.trackOnError(t),null}}async getOldData(){try{return await s.a.getItem("old-data")}catch(t){return await this.trackOnError(t),null}}async getErrorData(){try{return await s.a.getItem("error-data")}catch(t){return await this.trackOnError(t),null}}async exportDebugData(){const t=await this.getOldData(),e=await this.getErrorData();let i={};r.s||(i=await new n.a(t=>chrome.storage.local.get(null,t)));return{oldData:t,errorData:e,localData:this.getLocalData(),chromeData:i}}async backupOldData(t,e){try{const i=this.getLocalData(),o=await new n.a(t=>chrome.storage.local.get(null,t));let a;t&&(a=await this.getIndexedData()),await s.a.setItem("old-data",{localData:i,chromeData:o,indexedData:a,beforeUpdateVersion:e,version:r.D.extVersion})}catch(t){await this.trackOnError(t)}}async track(t){if(t)try{this.errorList=await s.a.getItem("error-data")||[];let e=t;"string"==typeof t&&(e=new Error(t)),this.errorList.push({message:e.message,stack:e.stack,time:Date.now()}),await s.a.setItem("error-data",this.errorList)}catch(t){await this.trackOnError(t)}}async trackOnError(t){try{const e=await new n.a(t=>chrome.storage.local.get("error-data",t));Array.isArray(e["error-data"])||(e["error-data"]=[]),e["error-data"].push({message:t.message,stack:t.stack,time:Date.now()}),await new n.a(t=>chrome.storage.local.set(e,t))}catch(t){localStorage["error-data"]=JSON.stringify({message:t.message,stack:t.stack})}}};e.a=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),i.d(e,"b",(function(){return c}));i(11),i(14),i(8),i(41);var o=i(4),n=i(163),r=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const a={},s=new Set;class l{constructor(){this.firstSync=!1,this.syncTabTime=0,this._lockRollback=!1,this.isRollbackFromStorage=!1,this.backupFileKey="",this.backupValueKeys=[],this.rollbackFromStorage=()=>null,this.stopToStorageReaction=()=>{},this.stopAutoBackupReaction=()=>{},this.convertBackupEquals=t=>t}async initSyncStore(t,e,i={},r=20){const s=t.key;if(a[s])throw new Error("storage key 重复");a[s]=this,0!==e.length&&(this.rollbackFromStorage=async()=>{let n=!1;const a=Object.create(null);Object.keys(i).forEach(t=>{e.includes(t)&&(a[t]=i[t])});try{const{data:i,error:o}=await t.read();if(o)throw o;const r=i?Object.keys(i):[];i&&r.forEach(t=>{e.includes(t)&&(a[t]=i[t])}),this.firstSync||i&&!e.some(t=>!r.includes(t))||(n=!0)}catch(t){console.error("storageSync",t)}this.isRollbackFromStorage=!0,this.stopToStorageReaction(),this.stopAutoBackupReaction(),Object(o.i)(()=>{for(const t in a)this[t]=a[t];this.firstSync||(this.firstSync=!0)}),this.restartAutoBackupReaction(),this.stopToStorageReaction=Object(o.h)(()=>{const t={};return e.forEach(e=>{t[e]=Object(o.j)(this[e])}),t},e=>{this.isRollbackFromStorage=!1,t.create(e).then(()=>{Object(o.i)(()=>{this.syncTabTime=Date.now()})})},{equals:o.d.structural,delay:r,fireImmediately:n})},await this.rollbackFromStorage(),Object(o.h)(()=>this.syncTabTime,t=>{t&&n.slave.sendMessage("tabs-sync",s)},{delay:60}))}restartAutoBackupReaction(t=!1){this.stopAutoBackupReaction(),this.stopAutoBackupReaction=Object(o.h)(()=>{const t={};return this.backupValueKeys.forEach(e=>{t[e]=Object(o.j)(this[e])}),t},t=>{(async(t,e)=>{try{const{syncStore:o}=await Promise.all([i.e(6),i.e(7),i.e(30)]).then(i.bind(null,614));o.pushAutoBackupPipe({[t]:e})}catch(t){}})(this.backupFileKey,t).catch()},{fireImmediately:t,equals:(t,e)=>{const i=this.convertBackupEquals(t),n=this.convertBackupEquals(e);return o.d.structural(i,n)},delay:40})}initAutoBackup(t,e){if(s.has(t))throw new Error("file key 重复");s.add(t),0!==e.length&&(this.backupFileKey=t,this.backupValueKeys=[...e])}async getBackupData(){const t={};return this.backupValueKeys.forEach(e=>{t[e]=Object(o.j)(this[e])}),t}}r([o.g],l.prototype,"firstSync",void 0),r([o.g],l.prototype,"syncTabTime",void 0),r([o.b],l.prototype,"initSyncStore",null);const c=t=>{const e=a[t];(null==e?void 0:e._lockRollback)||e.rollbackFromStorage()}},function(t,e,i){"use strict";var o=i(1);e.a=o.b`.global-scrollbar {
  overflow: auto;
  scrollbar-width: thin;
  scrollbar-color: #ddd #f2f2f2;
}
.global-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
.global-scrollbar::-webkit-scrollbar-thumb {
  border-radius: 3px;
  background-color: transparent;
  border: 1px dashed transparent;
  background-clip: padding-box;
  -webkit-transition: all 0.3s;
  transition: all 0.3s;
}
.global-scrollbar::-webkit-scrollbar-thumb:hover,
.global-scrollbar:hover::-webkit-scrollbar-thumb:hover {
  background-color: #ccc;
  background-clip: border-box;
}
.global-scrollbar::-webkit-scrollbar-track {
  background-color: transparent;
}
.global-scrollbar:hover::-webkit-scrollbar-thumb {
  background-color: #ddd;
}
@media only screen and (hover: none) {
  .global-scrollbar::-webkit-scrollbar-thumb {
    background-color: #ddd;
  }
}
`},function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));i(8),i(11),i(14),i(41);var o=i(0),n=i(491),r=i(36),a=i.n(r),s=i(3);const l=Object(o.F)()?"pc":"mobile";var c=i(23);const d=new class{constructor(){this.ga=null,this.localKey="analytics-status-time",this.gap=432e5,this.getPermission=async()=>{let t=!0;if(o.n)try{const{privacyStore:e}=await Promise.all([i.e(6),i.e(7),i.e(29)]).then(i.bind(null,621));1!==e.collectData&&(t=!1)}catch(e){t=!1}return t},this.trySendStatus=t=>{const e=localStorage.getItem(this.localKey);e?(Date.now()-Number(e)>this.gap||Number(e)>Date.now())&&this.sendStatus(t):this.sendStatus(t)},this.sendPageView=async t=>{if(!await this.getPermission())return;const e=this.ga.getPageviewUrl(t);c.c.sendLog(e)},this.sendEvent=async(t,e=!1)=>{await this.getPermission()&&Object.keys(t).forEach(i=>{const o=t[i];if("object"==typeof o)Object.keys(o).forEach(t=>{const n=o[t],r=this.ga.getEventUrl({category:i,action:t,label:String(n),nonInteraction:e});c.c.sendLog(r)});else{const t=this.ga.getEventUrl({category:i,action:String(o),nonInteraction:e});c.c.sendLog(t)}})},this.sendBaidu=async t=>{await this.getPermission()&&(async(t="")=>{const e=o.D.runtimePlatform,i=l+"-"+e;if(null==t?void 0:t.includes("baidu.com")){const e=new a.a(t).searchParams.get("tn"),n=`https://manage-api.infinitytab.com/analysis-manager/send/60efd763a741942ac60374e1?label=${o.C.baiduLabel}&action=${e}&event=${i}`;o.s?navigator.sendBeacon(n):s.a.post(n,null,{_proxy:!0})}})(t)},this.ga=new n.a({trackingId:o.C.trackingId})}async sendStatus(t){try{this.sendEvent(t,!0),localStorage.setItem(this.localKey,""+Date.now())}catch(t){}}}},,,,,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,"uploadFile",(function(){return s}));i(8);var o=i(0),n=i(3);const r=["infinity-notes-img","custom-wallpaper-library"],a={},s=async(t,e,i)=>{let s;try{if(a[i]&&a[i].endTime>Date.now())s=a[i];else{let t=null;if(t=r.includes(i)?await n.a.get(o.y+"/upload/public_private_token",{type:i},{_auth:!0}):await n.a.get(o.y+"/upload/token",{type:i}),0!==t.code||!t.data.token)return{error:t};s=t.data,s.endTime=Date.now()+1e3*(s.expires-600),a[i]=s}const{token:l,prefix:c}=s,d=new FormData;d.append("token",l),d.append("key",c+e),d.append("file",t,e);const{key:p,url:h}=await n.a.post(s.host,d,{timeout:18e4,headers:{"Content-Type":"multipart/form-data"}});return{data:{url:h,key:p}}}catch(t){return{error:t}}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));i(11),i(14);class o{constructor(){this._events=new Map}listenTask(t,e){if("function"!=typeof e)return;this._events.has(t)||this._events.set(t,new Set);this._events.get(t).add(e)}execTask(t,e,...i){if(this._events.has(t)){const o=this._events.get(t);for(const t of o)t(e,...i)}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var o=i(89),n=i.n(o),r=(i(11),i(14),i(8),i(4)),a=i(401),s=i.n(a),l=i(263),c=i(17),d=i(9),p=i(163),h=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const u=[{text:i18n("todo_welcome"),todoId:"todo-id1dtkk87it2iepal6dv4hr2uig0c",time:Date.now(),updatetime:0,done:!1}];class g extends l.a{constructor(){super(...arguments),this.todoList=u,this.currenetState="done",this.listLength=localStorage.getItem("todo-length")||0}toggleState(t){this.currenetState=t}get needNotificationPermission(){return this.todoList.some(t=>!!t.dueDate)}diffRemote(t){const e=t=>{if(null==t?void 0:t.updatetime){const e={updatetime:void 0};return t.done=!!t.done,Object.assign(Object.assign({},t),e)}},i=s()(t.todoList||[],e),o=s()(Object(r.j)(this.todoList),e);return!r.d.structural(i,o)}mergeRemote(t,e){if(t.todoList)if(e)this.todoList=t.todoList;else{const e=this.todoList,i=t.todoList,{result:o}=c.a.mergeArray(e,i,"todoId");this.todoList=o}}edit(t){this.todoList=this.todoList.map(e=>e.todoId===t?Object.assign(Object.assign({},e),{edit:!e.edit}):e)}get hasDoneTodo(){return this.todoList.filter(t=>t.done).length}async addTodo(t){if(!n()(t).call(t).length)return;const e={done:!1,time:+new Date,todoId:c.a.randomId("todo-"),updatetime:await c.a.getTimestamp(),text:t};Object(r.i)(()=>{this.todoList=[e,...this.todoList]})}removeTodo(){this.todoList=this.todoList.filter(t=>!t.done)}deleteTodo(t){this.todoList=this.todoList.filter(e=>e.todoId!==t)}async toggleTodo(t){const e=await c.a.getTimestamp();Object(r.i)(()=>{this.todoList=this.todoList.map(i=>i.todoId===t?Object.assign(Object.assign({},i),{done:!i.done,updatetime:e}):Object.assign({},i))})}async updateTodo(t,e){const i=await c.a.getTimestamp();Object(r.i)(()=>{this.todoList=this.todoList.map(o=>o.todoId===t?Object.assign(Object.assign(Object.assign({},o),e),{updatetime:i,edit:!1}):Object.assign({},o))})}removeTime(t){this.todoList=this.todoList.map(e=>e.todoId===t?Object.assign(Object.assign({},e),{dueDate:"",dueTime:"",dueTimestamp:null}):e)}}h([r.g],g.prototype,"todoList",void 0),h([r.g],g.prototype,"currenetState",void 0),h([r.b],g.prototype,"toggleState",null),h([r.e],g.prototype,"needNotificationPermission",null),h([r.b],g.prototype,"mergeRemote",null),h([r.b],g.prototype,"edit",null),h([r.g],g.prototype,"listLength",void 0),h([r.e],g.prototype,"hasDoneTodo",null),h([r.b],g.prototype,"addTodo",null),h([r.b],g.prototype,"removeTodo",null),h([r.b],g.prototype,"deleteTodo",null),h([r.b],g.prototype,"toggleTodo",null),h([r.b],g.prototype,"updateTodo",null),h([r.b],g.prototype,"removeTime",null);const f=new g;f.initSyncStore(d.j,["todoList","listLength"],{}),f.initAutoBackup("todo",["todoList"]),Object(r.c)(()=>{if(f.firstSync){const t=f.todoList.filter(t=>!t.done).length;Object(r.i)(()=>{f.listLength=t}),localStorage.setItem("todo-length",t+"")}});let m=!1;Object(r.c)(()=>{if(f.firstSync){const t=f.todoList.filter(t=>!t.done&&t.dueTimestamp>Date.now()).map(t=>Object(r.j)(t));if(!m)return void(m=!0);p.slave.postTask("slave:change-todo",t)}}),Object(r.c)(()=>{let t=!1;const{todoList:e}=f;for(let i=0;i<e.length-1;i++){const{done:o}=e[i],n=e[i+1].done;if(o&&!n){t=!0;break}}t&&(Object(r.i)(()=>{const t=e.filter(t=>t.done),i=e.filter(t=>!t.done);f.todoList=[...i,...t]}),t=!1)},{delay:300})},function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),i.d(e,"d",(function(){return c})),i.d(e,"b",(function(){return d})),i.d(e,"c",(function(){return p}));var o=i(6),n=i.n(o),r=(i(8),i(11),i(14),i(0)),a=i(162),s=i(119);function l(t){let e=0;switch(t){case"per-hour":e=r.q?36e5:2e4;break;case"twelve-hour":e=432e5;break;case"one-day":e=864e5}return e}async function c(t){let e;var i;return e="string"==typeof t?await(i=t,fetch(i).then(t=>t.blob())):t,await new n.a((t,i)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>{t(o.result)},o.onerror=i})}async function d(){const t=await Object(s.getBingWallpaper)();if(t.error)throw t.error;const[e]=Object(a.b)([t.data]);return e}async function p(){const t=await Object(s.getCustomColor)();if(!t.error)return t.data.map(t=>(t.type="color",t));console.warn(t.error)}},,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var o=i(6),n=i.n(o),r=(i(11),i(14),i(197)),a=i(482),s=i(1),l=i(4),c=s.b`.i-bubble {
  position: fixed;
  top: 80px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 99999999;
}
.i-bubble.network-error .i-bubble-wrap,
.i-bubble.error .i-bubble-wrap,
.i-bubble.success .i-bubble-wrap {
  padding-left: 30px;
  padding-right: 32px;
}
.i-bubble + .i-bubble-mask {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.7);
  z-index: 999999;
  display: none;
  opacity: 0;
  transition: opacity 150ms ease-in 0s;
}
.i-bubble.loading + .i-bubble-mask {
  display: block;
}
.i-bubble.loading.popup + .i-bubble-mask {
  opacity: 1;
}
.i-bubble .i-bubble-wrap {
  margin: 0 auto;
  box-sizing: border-box;
  padding: 12px 20px;
  background-color: #333;
  box-shadow: 0px 2px 20px 0px rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
  font-size: 14px;
  line-height: 1.4em;
  transition: opacity 0.15s cubic-bezier(0, 0, 0.2, 1) 0ms, transform 0.15s cubic-bezier(0, 0, 0.2, 1) 0ms;
  transform: scale(0.8);
  opacity: 0;
  box-shadow: 0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);
  max-width: 600px;
}
.i-bubble.popup .i-bubble-wrap {
  transform: scale(1);
  opacity: 1;
}
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}
.i-bubble .icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  margin-right: 12px;
  display: none;
}
.i-bubble .icon.icon-loading {
  animation: spin 700ms linear infinite;
}
.i-bubble .i-bubble-text {
  color: #e4e4e4;
  display: block;
  box-sizing: border-box;
  flex-grow: 1;
  width: 100%;
  word-break: break-all;
}
.i-bubble .i-bubble-button {
  width: 70px;
  height: 28px;
  color: #4caf50;
  background-color: initial;
  border: none;
  padding: 0;
  cursor: pointer;
  transition: color, background-color 200ms;
  border-radius: 4px;
  outline: none;
  max-width: 180px;
  margin-left: 46px;
  flex-shrink: 0;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.i-bubble .i-bubble-button:hover {
  background-color: rgba(76, 175, 80, 0.14);
}
`,d=i(17),p=i(27),h=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const u=Object(p.a)("network-error.png",!1),g=Object(p.a)("error.png",!1),f=Object(p.a)("success.png",!1),m=Object(p.a)("loading.png",!1);class b extends r.a{constructor(){super(...arguments),this.popup=!1,this.showButton=!1}static _timeToHideHandler(t){if(t.showButton){const e=t.shadowRoot.querySelector(".i-bubble .i-bubble-button");e.onclick&&(e.onclick=null)}const e=t.shadowRoot.querySelector(".i-bubble > .i-bubble-wrap");let i=!1;const o=()=>{t.onmouseenter=null,t.onmouseleave=null,document.body.contains(t)&&document.body.removeChild(t),i=!0};e.addEventListener("transitionend",o,{once:!0}),e.addEventListener("transitioncancel",o,{once:!0}),setTimeout(()=>{i||o()},150),t.setPopup(!1)}static _setTimerToHide(t,e){this._clearTimerToHide(t),t.hideTimer=setTimeout(()=>this._timeToHideHandler(t),e)}static _clearTimerToHide(t){t.hideTimer&&(clearTimeout(t.hideTimer),t.hideTimer=null)}static _messageMisc(t,e,i){this.setText(t),document.body.appendChild(this),window.customElements.whenDefined("i-bubble").then(()=>(this.offsetWidth,this.setPopup(!0),new n.a(t=>requestAnimationFrame(t)))).then(()=>{i&&i(this)}),e>0&&b._setTimerToHide(this,e)}static message(t,e){const i=document.createElement("i-bubble");i.setType("message"),e=null!=e?e:this.duration,this._messageMisc.call(i,t,e)}static networkError(t,e){const i=document.createElement("i-bubble");i.setType("network-error"),e=null!=e?e:this.duration,this._messageMisc.call(i,t,e)}static success(t,e){const i=document.createElement("i-bubble");i.setType("success"),e=null!=e?e:this.duration,this._messageMisc.call(i,t,e)}static error(t,e){const i=document.createElement("i-bubble");i.setType("error"),e=null!=e?e:this.duration,this._messageMisc.call(i,t,e)}static popupLogin(t){const e=this.popup(i18n("reqeust_login_message"),{showButton:!0,btnValue:i18n("to_login"),type:"message",onBtnClick:null!=t?t:()=>{a.userStore.openModal()}}),i=Date.now();let o=this.duration2;e.onmouseenter=()=>{o=Date.now()-i,b._clearTimerToHide(e)},e.onmouseleave=()=>{b._setTimerToHide(e,o)}}static popupLoading(t){const e=this.popup(i18n("wallpaper_loading"),{duration:0,showButton:!0,btnValue:i18n("cancel"),type:"loading",onBtnClick:t});return()=>setTimeout(()=>this._timeToHideHandler(e),b.waitForReady)}static loading(t){const e=this.popup(t,{type:"loading",duration:0});return()=>setTimeout(()=>this._timeToHideHandler(e),b.waitForReady)}static popup(t,e){const{duration:i=this.duration2,btnValue:o,onBtnClick:n,type:r,showButton:a}=e,s=document.createElement("i-bubble");return s.setType(r),o&&s.setBtnValue(o),a&&s.setShowButton(a),this._messageMisc.call(s,t,i,()=>{if(s.showButton){s.shadowRoot.querySelector(".i-bubble .i-bubble-button").onclick=t=>{n&&n(t),this._timeToHideHandler(s)}}}),s}firstUpdated(){const t="\n      background-size: cover;\n      background-repeat: no-repeat;\n      background-position: center;\n      display: block;\n    ",e=document.createElement("style");e.appendChild(document.createTextNode(`\n      .i-bubble .icon.icon-network-error{\n        background-image: url(${u});${t}\n      }\n      .i-bubble .icon.icon-success{\n        background-image: url(${f});${t}\n      }\n      .i-bubble .icon.icon-error{\n        background-image: url(${g});${t}\n      }\n      .i-bubble .icon.icon-loading{\n        background-image: url(${m});${t}\n      }\n      `)),this.shadowRoot.appendChild(e)}render(){return s.e`
      <section class="i-bubble ${this.type}${this.popup?" popup":""}">
        <section class="i-bubble-wrap">
          <i class="icon icon-${this.type}"></i>
          <span class="i-bubble-text">${this.text}</span>
          <input
            class="i-bubble-button"
            type="button"
            .value=${this.btnValue}
            style="${this.showButton?"":"display: none;"}"
          />
        </section>
      </section>
      <section class="i-bubble-mask" @click=${d.a.stopBubble}></section>
    `}setType(t){this.type=t}setText(t){this.text=t}setBtnValue(t){this.btnValue=t}setPopup(t){this.popup=t}setShowButton(t){this.showButton=t}}b.duration=3e3,b.duration2=5e3,b.waitForReady=1e3/60,b.styles=c,h([l.g],b.prototype,"type",void 0),h([l.g],b.prototype,"text",void 0),h([l.g],b.prototype,"btnValue",void 0),h([l.g],b.prototype,"popup",void 0),h([l.g],b.prototype,"showButton",void 0),h([l.b],b.prototype,"setType",null),h([l.b],b.prototype,"setText",null),h([l.b],b.prototype,"setBtnValue",null),h([l.b],b.prototype,"setPopup",null),h([l.b],b.prototype,"setShowButton",null),window.customElements.define("i-bubble",b);e.default=b},function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return r}));i(11),i(14);class o{constructor(){this._caches={},this._setCaches=t=>(...e)=>{this._caches[t]=e}}}const n=[],r=t=>new Proxy(t,{set:(t,e,i)=>null===i?(t[e]=i,!0):"function"==typeof t[e]?(console.warn("失败：重复注册"),!0):(t[e]=i,n.includes(e)&&delete t._caches[e],t._caches.hasOwnProperty(e)&&(t[e](...t._caches[e]),delete t._caches[e]),!0),get:(t,e)=>"function"==typeof t[e]?t[e]:t._setCaches(e)})},function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var o=i(6),n=i.n(o),r=(i(8),i(0)),a=i(75);async function s(){if(r.s||r.r){if("granted"!==await new n.a(t=>{!function(){try{Notification.requestPermission().then()}catch(t){return!1}return!0}()?Notification.requestPermission(t):Notification.requestPermission().then(t)}))throw new Error}else await a.a.request(["notifications"])}},,function(t,e,i){"use strict";i.d(e,"a",(function(){return O}));i(21),i(64),i(8);var o=i(1),n=i(197),r=o.b`:host {
  width: 100%;
  box-sizing: border-box;
  padding: 24px 20px 60px;
  display: flex;
  flex-direction: column;
  background-color: #fff;
}
textarea,
input {
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
}
.error {
  margin-left: 6px;
  font-size: 14px;
  font-weight: 400;
  color: #ea4747;
}
.box-dynamic {
  padding-bottom: 30px;
}
.item-icon {
  height: 70px;
}
.img-item-box:not([hidden]) {
  display: flex;
  align-items: flex-end;
}
.img-item {
  width: 60px;
  background-color: #dddddd;
  background-image: linear-gradient(45deg, #ffffff 25%, transparent 0px, transparent 75%, #ffffff 0px), linear-gradient(45deg, #ffffff 25%, transparent 0px, transparent 75%, #ffffff 0px);
  background-position: 0px 0px, 5px 5px;
  background-size: 10px 10px;
  border-radius: 6px;
}
.item {
  position: relative;
  margin-bottom: 20px;
}
.item .label-box {
  margin-bottom: 8px;
  display: flex;
  align-items: center;
}
.item .label-box .label {
  font-weight: 500;
  color: #333333;
}
.item .label-box .tip-question {
  margin-left: 2px;
  width: 16px;
  height: 16px;
  cursor: pointer;
}
.item #icon-preview {
  border: 4px solid #f6f6f6;
  transform: scale(0.25);
  transform-origin: left top;
  position: relative;
  border-radius: 30px;
  background-color: #ddd;
  background-image: linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0), linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0);
  background-position: 0 0, 20px 20px;
  background-size: 40px 40px;
}
.item .img-dropper {
  position: relative;
  margin-right: 8px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  vertical-align: bottom;
  width: 60px;
  height: 60px;
  background: #ffffff;
  background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23C3C3C3FF' stroke-width='1' stroke-dasharray='5%2c 6' stroke-dashoffset='12' stroke-linecap='butt'/%3e%3c/svg%3e");
  border-radius: 6px;
  cursor: pointer;
}
.item .img-dropper[hidden] {
  display: none;
}
.item .img-preview {
  background-size: cover;
  border: 1px solid #dadce0;
  box-sizing: border-box;
}
.item .img-preview .editing:hover {
  opacity: 1;
}
.item .img-preview .editing {
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 6px;
  background: rgba(0, 0, 0, 0.3);
  transition: opacity 0.2s;
}
.item .img-preview .editing-icon {
  width: 28px;
  height: 28px;
}
.item .img-preview i-svg {
  --size: 90%;
  color: #fff;
  opacity: 0.8;
  cursor: pointer;
}
.item .img-preview i-svg:hover {
  opacity: 1;
  color: #fff;
}
.item input::placeholder,
.item .input::placeholder,
.item textarea::placeholder {
  color: #999999;
}
.item input[type='text'],
.item .input {
  outline: none;
  border: none;
  border-bottom: 1px solid #eee;
  line-height: 1;
  height: 30px;
  box-sizing: border-box;
  padding-bottom: 6px;
  width: 100%;
  color: #333333;
}
.item .input {
  height: auto;
  max-height: 50px;
  line-height: 16px;
  max-width: 100%;
  min-width: 100%;
  resize: none;
}
.item input:-moz-read-only {
  cursor: not-allowed;
}
.item input:read-only {
  cursor: not-allowed;
}
.item textarea.target {
  outline: none;
  width: 100%;
  height: 90px;
  box-sizing: border-box;
  padding: 10px;
  background: #ffffff;
  border-radius: 6px;
  border: 1px solid #eeeeee;
  resize: none;
  word-break: break-all;
  color: #333333;
}
.item input[type='file'] {
  width: 100px;
}
.item.btn-box {
  display: flex;
  flex-direction: column;
  align-items: center;
}
.item.btn-box infinito-button {
  width: 220px;
  height: 38px;
  background: #333333;
  border-radius: 6px;
  outline: none;
  border: none;
  cursor: pointer;
  font-weight: 500;
  color: #ffffff;
}
.item.btn-box infinito-button:disabled {
  background: rgba(51, 51, 51, 0.7);
}
.item.btn-box .btn-cancel {
  margin-top: 14px;
  background: #eeeeee;
  border-radius: 6px;
  font-size: 14px;
  color: #333333;
}
.item.btn-box .btn-cancel:hover {
  background: #c8c8c8;
}
.del {
  position: absolute;
  width: 18px;
  height: 18px;
  top: -6px;
  right: -6px;
  cursor: pointer;
  transition: transform 0.2s;
}
.del:hover {
  transform: scale(1.1);
}
.svg-box {
  width: 70px;
  height: 70px;
  border: 1px solid #f6f6f6;
  box-sizing: border-box;
  position: relative;
  border-radius: 6px;
  background-color: #ddd;
  background-image: linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0), linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0);
  background-position: 0 0, 5px 5px;
  background-size: 10px 10px;
  overflow: hidden;
}
`,a=(i(11),i(14),i(528),i(529),i(530),i(531),o.b`.ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
i-input {
  display: block;
  margin-top: 20px;
}
.label-box {
  max-width: 100%;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
}
.label-box .label {
  height: 20px;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
  white-space: nowrap;
}
.imgs-box {
  display: flex;
}
.img-item-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 60px;
}
.img-item-box .name {
  margin-top: 8px;
  max-width: 80px;
  height: 16px;
  font-size: 11px;
  line-height: 16px;
  font-weight: 400;
  color: #b3b3b3;
}
.active .img-item {
  box-shadow: 0px 4px 8px 0px rgba(59, 62, 64, 0.73);
}
.active .name {
  font-weight: 500;
  color: #4d4d4d;
}
.img-item {
  width: 60px;
  height: 60px;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.2s box-shadow;
}
.color-img {
  overflow: hidden;
}
.cloud-imgs-box {
  display: flex;
}
.cloud-imgs-box .cloud-img-box:not(:last-of-type) {
  margin-right: 10px;
}
.color-img-box {
  margin-right: 17px;
  position: relative;
}
.color-img-box:after {
  position: absolute;
  top: 8px;
  content: '';
  right: -17px;
  width: 1px;
  height: 48px;
  background: #eceeee;
}
.local-img-box {
  position: relative;
  margin-left: 17px;
}
.cloud-imgs-box + .local-img-box:after {
  position: absolute;
  top: 8px;
  content: '';
  left: -17px;
  width: 1px;
  height: 48px;
  background: #eceeee;
}
.cloud-imgs-box {
  margin: 0 17px;
}
.color-type-box {
  position: relative;
  margin-top: 18px;
  padding: 20px;
  padding-top: 1px;
  background: #f5f8fa;
}
.color-type-box:after {
  position: absolute;
  content: '';
  top: -19px;
  left: 20px;
  width: 0;
  height: 0;
  border: 10px solid transparent;
  border-bottom: 10px solid #f5f8fa;
}
.permission-img {
  background: #ffffff;
  background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23C3C3C3FF' stroke-width='1' stroke-dasharray='5%2c 6' stroke-dashoffset='12' stroke-linecap='butt'/%3e%3c/svg%3e");
  display: flex;
  align-items: center;
  justify-content: center;
}
.permission-img img {
  width: 28px;
  height: 28px;
}
.error {
  margin-left: 6px;
  font-size: 14px;
  font-weight: 400;
  color: #ea4747;
}
`),s=i(23),l=i(93),c=i(75),d=i(0),p=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let h=class extends n.a{constructor(){super(...arguments),this.hasPermission=!1,this.imgType="local",this.imgIndex=0,this.localImageError=!1,this.localImagePreViewUrl="",this.cloudImgs=[],this.offsetRight=0,this.modalBorderRadius="3px",this.isAutoBgText=!0,this.colors=["rgba(255,71,52,1)","rgba(255,122,9,1)","rgba(255,207,12,1)","rgba(42,233,121,1)","rgba(44,214,223,1)","rgba(0,116,255,1)","rgba(109,9,255,1)","rgba(255,36,160,1)"],this.handleValue=async()=>{try{await this.saveImage()}catch(t){return!!this.localImagePreViewUrl&&(t&&t.message?l.message.error(t.message):l.message.error(t||"upload error"),!1)}return!0},this.getPermissionUrl=()=>{let t=[];return t=d.k?["http://*/","https://*/"]:d.r?"<all_urls>":["<all_urls>"],t}}changeValue(t){const e=new CustomEvent("on-change",{detail:{value:t}});this.dispatchEvent(e)}getAutoBgText(){if(!this.isAutoBgText)return;const{name:t}=this.value;let e="";e=t.length>3?t.substr(0,2):t,this.changeValue({bgText:e})}choosetextImg(){this.changeValue({bgType:"color"})}chooseCloudImg(t){this.changeValue({bgType:"image"}),this.imgType="cloud",this.imgIndex=t}chooseLocalImg(){this.changeValue({bgType:"image"}),this.imgType="local"}async saveImage(){if("color"===this.value.bgType)this.value.bgColor||this.changeValue({bgColor:this.colors[0]});else if("image"===this.value.bgType){let t={};if("cloud"===this.imgType){const e=this.$cloudIcons.querySelectorAll("i-imgicon")[this.imgIndex];t=await e.getImg()}else if("local"===this.imgType)if(this.localImagePreViewUrl)t=await this.$localicon.getImg();else{if(!this.value.bgImage)throw this.localImageError=!0,new Error("none img");t={url:this.value.bgImage,bgColor:this.value.bgColor}}this.changeValue({bgImage:t.url,bgColor:t.bgColor})}}getFormateUrl(t){return t.includes(":")?t:"http://"+this.value.target}renderCloudImgs(){return o.e`
      <div class="cloud-imgs-box">
        ${this.cloudImgs.map((t,e)=>o.e`<div
            class="img-item-box cloud-img-box ${"image"===this.value.bgType&&"cloud"===this.imgType&&this.imgIndex===e?"active":""}"
          >
            <div class="img-item cloud-img">
              <i-imgicon
                .preViewImgUrl="${t.url}"
                .bgColor="${"transparent"}"
                .canDelete="${!1}"
                .modalBorderRadius="${this.modalBorderRadius}"
                .active="${"image"===this.value.bgType&&"cloud"===this.imgType&&this.imgIndex===e}"
                @on-change="${()=>{this.chooseCloudImg(e)}}"
                .iconType="${this.iconType}"
              ></i-imgicon>
            </div>
            <div class="name ellipsis">${i18n("icon")}${"0"+(e+1)}</div>
          </div>`)}
      </div>
    `}async getUrlIcon(){if(await this.checkPermission(),this.hasPermission||d.s){const t=this.getFormateUrl(this.value.target),e=await s.b.getLogoList(t);if(e.error&&e.error.__CANCEL__)return;const i=e.data||[];if(i.length<2&&d.l){const e=await s.b.getUrlIcon(t.split("?")[0]);e.data&&e.data.length>0&&(i.push(...e.data),i.length=2)}this.cloudImgs=i.map(t=>({url:t}))}}async getPermission(){try{await c.a.request([],this.getPermissionUrl()),this.hasPermission=!0,window.__INFINITY__.hasAllUrlPermission=this.hasPermission,this.getUrlIcon()}catch(t){console.log("getPermission ~ error",t)}}async checkPermission(){try{const t=await c.a.has([],this.getPermissionUrl());this.hasPermission=!!t,window.__INFINITY__.hasAllUrlPermission=this.hasPermission}catch(t){console.log("checkPermission ~ error",t)}}renderPermissionIcon(){return o.e`
      <div class="cloud-imgs-box">
        <div class="img-item-box cloud-img-box ">
          <div @click="${this.getPermission}" class="img-item permission-img">
            <img src="${i(556)}" alt="" />
          </div>
          <div class="name ellipsis">${i18n("get_cloud_icon")}</div>
        </div>
      </div>
    `}firstUpdated(t){this.checkPermission(),t.has("value")&&(this.value.name&&this.getAutoBgText(),this.value.target&&this.getUrlIcon())}updated(t){const e=e=>{const i=t.get("value");return!i||("target"===e?i[e].split("?")[0]!==this.value[e].split("?")[0]:i[e]!==this.value[e])};t.has("value")&&(e("name")&&this.getAutoBgText(),e("target")&&this.getUrlIcon())}render(){return o.e`
      <section class="i-edit-img">
        <div class="item">
          <div class="label-box">
            <span class="label">${i18n("select_icon")}</span>
            <span
              .hidden="${"image"!==this.value.bgType||"local"!==this.imgType||!this.localImageError}"
              class="error ellipsis"
              >* ${i18n("please_upload_photos")}</span
            >
          </div>
          <div class="imgs-box">
            <div class="img-item-box color-img-box ${"color"===this.value.bgType?"active":""}">
              <div class="img-item color-img" @click="${this.choosetextImg}">
                <i-texticon
                  .bgColor="${this.value.bgColor||this.colors[0]}"
                  .bgFont="${this.value.bgFont}"
                  .bgText="${this.value.bgText}"
                ></i-texticon>
              </div>
              <div class="name ellipsis">${i18n("color_icon")}</div>
            </div>
            ${this.cloudImgs.length?this.renderCloudImgs():!1===this.hasPermission&&d.l&&!d.h?this.renderPermissionIcon():null}
            <div
              class="img-item-box local-img-box ${"image"===this.value.bgType&&"local"===this.imgType?"active":""}"
            >
              <div class="img-item local-img">
                <i-imgicon
                  class="local-img-icon"
                  .qiniu="${!0}"
                  .preViewImgUrl="${this.value.bgImage}"
                  .bgColor="${this.value.bgColor||"transparent"}"
                  .canDelete="${!0}"
                  .modalBorderRadius="${this.modalBorderRadius}"
                  .active=${"image"===this.value.bgType&&"local"===this.imgType}
                  @on-change="${t=>{this.localImagePreViewUrl=t.detail.preViewImgUrl,this.localImagePreViewUrl&&this.chooseLocalImg()}}"
                ></i-imgicon>
              </div>
              <div class="name ellipsis">${i18n("local_icon")}</div>
            </div>
          </div>
        </div>
        <div .hidden="${"color"!==this.value.bgType}" class="color-type-box">
          <i-input name="displayname" .label=${i18n("icon_bg_text")} .placeholder=${i18n("please_input_bg_text")}>
            <div class="bg-text" slot="input">
              <i-textarea
                .value="${this.value.bgText}"
                .placeholder="${i18n("show_name")}"
                @on-change="${t=>{this.changeValue({bgText:t.detail.value}),this.isAutoBgText=!1}}"
              ></i-textarea>
            </div>
          </i-input>
          <i-input name="displayfont" .label=${i18n("font_size")}>
            <div class="slider" style="margin-top: -2px;" slot="input">
              <infinito-slider
                style="--bg-color: #f5f8fa;"
                @on-change="${t=>{this.changeValue({bgFont:t.detail.value})}}"
                .value=${this.value.bgFont}
                .min=${14}
                .max=${74}
              ></infinito-slider>
            </div>
          </i-input>
          <i-input name="displaycolor" style="margin-top: 16px;" .label=${i18n("color")}>
            <div class="color" style="margin-top:14px;" slot="input">
              <i-colorpicker
                .side="${!0}"
                .value="${this.value.bgColor||this.colors[0]}"
                .colors="${this.colors}"
                .offsetRight="${this.offsetRight}"
                @on-change="${t=>{this.changeValue({bgColor:t.detail.value})}}"
              ></i-colorpicker>
            </div>
          </i-input>
        </div>
      </section>
    `}};h.styles=[a],p([Object(o.f)()],h.prototype,"hasPermission",void 0),p([Object(o.f)()],h.prototype,"imgType",void 0),p([Object(o.f)()],h.prototype,"imgIndex",void 0),p([Object(o.f)()],h.prototype,"localImageError",void 0),p([Object(o.f)()],h.prototype,"localImagePreViewUrl",void 0),p([Object(o.f)()],h.prototype,"cloudImgs",void 0),p([Object(o.g)({type:Object})],h.prototype,"value",void 0),p([Object(o.g)({type:Number})],h.prototype,"offsetRight",void 0),p([Object(o.g)({type:String})],h.prototype,"iconType",void 0),p([Object(o.g)({type:String})],h.prototype,"modalBorderRadius",void 0),p([Object(o.h)(".cloud-imgs-box")],h.prototype,"$cloudIcons",void 0),p([Object(o.h)("i-texticon")],h.prototype,"$texticon",void 0),p([Object(o.h)(".local-img-icon")],h.prototype,"$localicon",void 0),h=p([Object(o.c)("i-edit-img")],h);var u=i(4),g=i(17),f=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class m{async getTargetInfo(t,e){const{data:i,error:o}=await s.b.getUrlInfoWithPermission(t.split("?")[0]);if(null==o?void 0:o.__CANCEL__)return;if(o)return e?{name:"",bgText:""}:null;return{name:function(t){const e={lt:"<",gt:">",nbsp:" ",lrm:"",amp:"&",quot:'"'};return t.replace(/&(lt|gt|nbsp|amp|quot|lrm);/gi,(t,i)=>e[i])}(i.name),bgText:""}}async uploadIcon(t,e){var i,o;const{data:n,error:r}=await s.f.uploadFile(t,g.a.randomId("icon-")+".png",e);if(r){return{error:(null===(o=null===(i=r.response)||void 0===i?void 0:i.data)||void 0===o?void 0:o.error)?r.response.data.error:r.message,url:""}}return{url:n.url,error:""}}}f([u.b],m.prototype,"getTargetInfo",null),f([u.b],m.prototype,"uploadIcon",null);const b=new m;var y=i(2),v=i(264),w=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let x=class extends o.a{constructor(){super(...arguments),this.show=!1,this.closeModal=()=>{this.show=!1;const t=new CustomEvent("on-close",{});this.dispatchEvent(t)}}render(){return o.e`
      <infinito-modal style="--modal-padding:0;" .open=${this.show} .onCancel="${this.closeModal}">
        <div slot="body">
          <div class="container">
            <h2 class="title">${i18n("tip_question_title")}</h2>
            <span class="gap-line"></span>
            <div class="global-scrollbar" style="height: calc(100% - 81px);">
              <div class="content">
                <div class="card">
                  <div class="label">${i18n("tip_question_1")}</div>
                  <div class="img-box">
                    <img class="item-img" src="${i(557)}" alt="" />
                  </div>
                </div>
                <div class="card">
                  <div class="label">${i18n("tip_question_2")}</div>
                  <div class="img-box img-box-2">
                    <img class="item-img" src="${i(558)}" alt="" />
                    <div class="item-tip">${i18n("copy")}</div>
                  </div>
                </div>
                <div class="card">
                  <div class="label">${i18n("tip_question_3")}</div>
                  <div class="img-box img-box-3">
                    <img class="item-img" src="${i(559)}" alt="" />
                    <div class="item-tip tip3-box">
                      <div class="tip3-item">
                        <div class="tip3-label-box">
                          <span class="tip3-label">${i18n("search_engine")}</span>
                        </div>
                        <span class="input">${i18n("placeholder_name")}</span>
                      </div>
                      <div class="tip3-item">
                        <div class="tip3-label-box">
                          <span class="tip3-label">${i18n("website_search_replace_char")}</span
                          ><img class="tip-question" src="${i(494)}" alt="" />
                        </div>
                        <span class="input">https://www.google.com/search?sxsrf=ALeKk02...</span>
                        <img class="tip3-arrow" src="${i(560)}" alt="" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </infinito-modal>
    `}};x.styles=[v.a,o.b`
      .container {
        width: 800px;
        height: 70vh;
        min-height: 400px;
        max-height: 1000px;
        text-align: center;
        box-sizing: border-box;
        overflow: hidden;
      }
      .title {
        margin: 26px auto;
        height: 28px;
        font-size: 20px;
        font-weight: 500;
        color: #333333;
        line-height: 28px;
      }
      .gap-line {
        margin: auto;
        display: block;
        width: 720px;
        height: 1px;
        background: #ebebeb;
      }
      .content {
        padding: 33px 114px 50px;
        padding-right: 0;
        width: 572px;
        box-sizing: content-box;
        text-align: left;
      }
      .card {
        padding-bottom: 50px;
      }
      .label {
        font-size: 16px;
        font-weight: 400;
        color: #333333;
        line-height: 22px;
      }
      .img-box {
        position: relative;
        margin-top: 20px;
      }
      .img-box .item-img {
        width: 572px;
        height: 235px;
      }
      .item-tip {
        position: absolute;
        font-size: 14px;
        font-weight: 400;
        color: #333333;
        line-height: 20px;
      }
      .img-box-2 .item-tip {
        top: 86px;
        left: 396px;
      }
      .tip3-box {
        top: 64px;
        left: 138px;
      }
      .tip3-item {
        position: relative;
        margin-bottom: 20px;
        width: 320px;
      }
      .tip3-label-box {
        margin-bottom: 12px;
        display: flex;
        align-items: center;
      }
      .tip3-label {
        height: 20px;
        font-size: 14px;
        font-weight: 500;
        color: #333333;
        line-height: 20px;
      }
      .tip3-item .input {
        display: block;
        overflow: hidden;
        text-overflow: clip;
        white-space: nowrap;
        word-break: keep-all;
        border-bottom: 1px solid #eeeeee;
        box-sizing: content-box;
        padding-bottom: 6px;
        width: 100%;
        font-size: 14px;
        font-weight: 400;
        color: #656565;
        opacity: 0.8;
        width: 319px;
        height: 20px;
        line-height: 20px;
      }
      .tip-question {
        margin-left: 2px;
        width: 16px;
        height: 16px;
      }
      .tip3-arrow {
        width: 30px;
        height: 30px;
        position: absolute;
        left: -34px;
        bottom: 10px;
      }
    `],w([Object(o.g)({type:Boolean})],x.prototype,"show",void 0),x=w([Object(o.c)("tip-question")],x);var _,k=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let O=_=class extends n.a{constructor(){super(),this.sideRatio=1,this.popup=!1,this.iconType="custom-icon",this.readonlyTarget=!1,this.subSpin=!1,this.isAutoName=!0,this.validate={name:null,target:null},this.tipQuestion=!1,this.value=Object.assign({},_.defaultValue)}_changeTarget(t,e=!1){e?this.changeValue({target:t.currentTarget.value.replace(/%25s/g,"%s")}):this.changeValue({target:t.currentTarget.value}),this._validateTarget(),this.isAutoName&&this.getTargetInfo()}async getTargetInfo(){let t=this.value.target;if(!t)return;t.includes(":")||(t="http://"+t);if(!/^https?:\/\/(.+\.)+.+/.test(t))return;const e=await b.getTargetInfo(t,this.isAutoName);e&&this.changeValue({name:e.name})}_validateTarget(){const t=this.value.target;let e=!0;return t&&("search-engine-custom"!==this.iconType&&"search-engnie-add"!==this.iconType||t.includes("%s"))||(e=!1),this.changeValidate({target:e}),e}_validateName(t){return t||"custom-icon"===this.iconType?this.changeValidate({name:!0}):this.changeValidate({name:!1}),t}_validateAll(){this.changeValue({name:this.$name.value,target:this.$target.value}),this._validateName(this.value.name),this._validateTarget();for(const t in this.validate)if(Object.prototype.hasOwnProperty.call(this.validate,t)){if(!1===this.validate[t])return!1}return!0}changeValidate(t){this.validate=Object.assign(Object.assign({},this.validate),t)}async _submit(){if(!this._validateAll())return;this.subSpin=!0;const t=await this.$imgs.handleValue();if(this.subSpin=!1,!t)return;this.changeValue({bgColorImage:null});const e={value:Object.assign({},this.value)};e.value.target.includes(":")||(e.value.target="http://"+this.value.target);const i=Object.assign({},e.value);"color"===i.bgType?delete i.bgImage:"image"===i.bgType&&(delete i.bgFont,delete i.bgText,delete i.bgColorImage,"transparent"===i.bgColor&&(i.bgColor=void 0));const o=new CustomEvent("on-submit",{detail:{value:i}});this.dispatchEvent(o)}_cancel(){const t=new CustomEvent("on-cancel");this.dispatchEvent(t)}changeValue(t){this.value=Object.assign(Object.assign({},this.value),t)}reset(){this.validate={name:null,target:null},this.value=Object.assign({},_.defaultValue)}openTipQuestion(){this.tipQuestion=!0}_renderBasic(){const{value:t}=this;return"custom-icon"===this.iconType?o.e`<div .hidden="${this.popup}" class="item">
          <div class="label-box">
            <span class="label">${Object(y.i18n)("website_address")}</span
            ><span .hidden="${!1!==this.validate.target}" class="error">*${Object(y.i18n)("please_enter_url")}</span>
          </div>
          <input
            class="target"
            autocomplete="off"
            type="text"
            .value="${t.target||""}"
            .placeholder="${Object(y.i18n)("website_address")}"
            .readOnly="${this.readonlyTarget}"
            @input=${t=>{this._changeTarget(t)}}
          />
        </div>
        <div class="item">
          <div class="label-box">
            <span class="label">${Object(y.i18n)("website_name")}</span
            ><span .hidden="${!1!==this.validate.name}" class="error">*${Object(y.i18n)("name_error")}</span>
          </div>
          <input
            autocomplete="off"
            type="text"
            class="name"
            .value="${t.name||""}"
            .placeholder="${Object(y.i18n)("website_name")}"
            @input=${t=>{this.isAutoName=!1;const e=t.currentTarget.value;this.changeValue({name:e}),this._validateName(e)}}
          />
        </div>`:o.e` <div class="item">
          <div class="label-box">
            <span class="label">${Object(y.i18n)("search_engine")}</span
            ><span .hidden="${!1!==this.validate.name}" class="error">*${Object(y.i18n)("search_engine_error")}</span>
          </div>
          <input
            autocomplete="off"
            .value="${t.name||""}"
            type="text"
            class="name"
            .placeholder="${Object(y.i18n)("placeholder_name")}"
            @input=${t=>{const e=t.currentTarget.value;this.isAutoName=!1,this.changeValue({name:e}),this._validateName(e)}}
          />
        </div>
        <div class="item">
          <div class="label-box">
            <span class="label">${Object(y.i18n)("website_search_replace_char")}</span
            ><img
              @click="${this.openTipQuestion}"
              class="tip-question"
              src="${i(494)}"
              alt=""
            /><span .hidden="${!1!==this.validate.target}" class="error">*${Object(y.i18n)("format_error")}</span>
          </div>
          <textarea
            class="target global-scrollbar"
            rows="1"
            @input="${t=>this._changeTarget(t,!0)}"
            autocomplete="off"
            .value="${t.target||""}"
            .placeholder="${Object(y.i18n)("website_address")}"
          ></textarea>
        </div>`}_renderImgs(t,e){return o.e`<i-edit-img
      class="item"
      @on-change="${t=>this.changeValue(t.detail.value)}"
      .value=${t}
      .offsetRight=${e}
      .iconType="${this.iconType}"
      .modalBorderRadius="${this.popup?"0px":"3px"}"
    ></i-edit-img> `}render(){const t=this.sideRatio>.7?0:300*(this.sideRatio-.7);return o.e`
      ${this._renderBasic()} ${this._renderImgs(this.value,t)}
      <div class="item btn-box">
        <infinito-button primary .loading="${this.subSpin}" @click="${this._submit}"
          >${Object(y.i18n)("confirm")}</infinito-button
        >
        ${this.popup?"":o.e`<infinito-button class="btn-cancel" @click="${this._cancel}">${Object(y.i18n)("cancel")}</infinito-button>`}
      </div>
      <infinito-portal-entrance destination="tip-question">
        <tip-question
          @on-close="${()=>{this.tipQuestion=!1}}"
          .show="${this.tipQuestion}"
        ></tip-question>
      </infinito-portal-entrance>
    `}};O.styles=[v.a,r],O.defaultValue={bgType:"color",bgColor:"",bgFont:30,bgText:"",bgImage:"",target:"",name:"",bgColorImage:""},k([Object(o.g)({type:Number})],O.prototype,"sideRatio",void 0),k([Object(o.g)({type:Boolean})],O.prototype,"popup",void 0),k([Object(o.g)({type:String})],O.prototype,"iconType",void 0),k([Object(o.g)({type:Boolean})],O.prototype,"readonlyTarget",void 0),k([Object(o.g)({type:Object})],O.prototype,"value",void 0),k([Object(o.f)()],O.prototype,"subSpin",void 0),k([Object(o.f)()],O.prototype,"isAutoName",void 0),k([Object(o.f)()],O.prototype,"validate",void 0),k([Object(o.f)()],O.prototype,"tipQuestion",void 0),k([Object(o.h)(".target")],O.prototype,"$target",void 0),k([Object(o.h)(".name")],O.prototype,"$name",void 0),k([Object(o.h)("i-edit-img")],O.prototype,"$imgs",void 0),O=_=k([Object(o.c)("i-editicon")],O)},function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));i(11),i(14),i(21),i(64);var o=i(1),n=i(492),r=i.n(n),a=(i(523),i(521),o.b`/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:11.623Z
 */
.cropper-container {
  direction: ltr;
  font-size: 0;
  line-height: 0;
  position: relative;
  -ms-touch-action: none;
  touch-action: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
.cropper-container img {
  display: block;
  height: 100%;
  image-orientation: 0deg;
  max-height: none !important;
  max-width: none !important;
  min-height: 0 !important;
  min-width: 0 !important;
  width: 100%;
}
.cropper-wrap-box,
.cropper-canvas,
.cropper-drag-box,
.cropper-crop-box,
.cropper-modal {
  bottom: 0;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
}
.cropper-wrap-box,
.cropper-canvas {
  overflow: hidden;
}
.cropper-drag-box {
  background-color: #fff;
  opacity: 0;
}
.cropper-modal {
  background-color: #000;
  opacity: 0.5;
}
.cropper-view-box {
  display: block;
  height: 100%;
  outline: 1px solid #39f;
  outline-color: rgba(51, 153, 255, 0.75);
  overflow: hidden;
  width: 100%;
}
.cropper-dashed {
  border: 0 dashed #eee;
  display: block;
  opacity: 0.5;
  position: absolute;
}
.cropper-dashed.dashed-h {
  border-bottom-width: 1px;
  border-top-width: 1px;
  height: calc(100% / 3);
  left: 0;
  top: calc(100% / 3);
  width: 100%;
}
.cropper-dashed.dashed-v {
  border-left-width: 1px;
  border-right-width: 1px;
  height: 100%;
  left: calc(100% / 3);
  top: 0;
  width: calc(100% / 3);
}
.cropper-center {
  display: block;
  height: 0;
  left: 50%;
  opacity: 0.75;
  position: absolute;
  top: 50%;
  width: 0;
}
.cropper-center::before,
.cropper-center::after {
  background-color: #eee;
  content: ' ';
  display: block;
  position: absolute;
}
.cropper-center::before {
  height: 1px;
  left: -3px;
  top: 0;
  width: 7px;
}
.cropper-center::after {
  height: 7px;
  left: 0;
  top: -3px;
  width: 1px;
}
.cropper-face,
.cropper-line,
.cropper-point {
  display: block;
  height: 100%;
  opacity: 0.1;
  position: absolute;
  width: 100%;
}
.cropper-face {
  background-color: #fff;
  left: 0;
  top: 0;
}
.cropper-line {
  background-color: #39f;
}
.cropper-line.line-e {
  cursor: ew-resize;
  right: -3px;
  top: 0;
  width: 5px;
}
.cropper-line.line-n {
  cursor: ns-resize;
  height: 5px;
  left: 0;
  top: -3px;
}
.cropper-line.line-w {
  cursor: ew-resize;
  left: -3px;
  top: 0;
  width: 5px;
}
.cropper-line.line-s {
  bottom: -3px;
  cursor: ns-resize;
  height: 5px;
  left: 0;
}
.cropper-point {
  background-color: #39f;
  height: 5px;
  opacity: 0.75;
  width: 5px;
}
.cropper-point.point-e {
  cursor: ew-resize;
  margin-top: -3px;
  right: -3px;
  top: 50%;
}
.cropper-point.point-n {
  cursor: ns-resize;
  left: 50%;
  margin-left: -3px;
  top: -3px;
}
.cropper-point.point-w {
  cursor: ew-resize;
  left: -3px;
  margin-top: -3px;
  top: 50%;
}
.cropper-point.point-s {
  bottom: -3px;
  cursor: s-resize;
  left: 50%;
  margin-left: -3px;
}
.cropper-point.point-ne {
  cursor: nesw-resize;
  right: -3px;
  top: -3px;
}
.cropper-point.point-nw {
  cursor: nwse-resize;
  left: -3px;
  top: -3px;
}
.cropper-point.point-sw {
  bottom: -3px;
  cursor: nesw-resize;
  left: -3px;
}
.cropper-point.point-se {
  bottom: -3px;
  cursor: nwse-resize;
  height: 20px;
  opacity: 1;
  right: -3px;
  width: 20px;
}
@media (min-width: 768px) {
  .cropper-point.point-se {
    height: 15px;
    width: 15px;
  }
}
@media (min-width: 992px) {
  .cropper-point.point-se {
    height: 10px;
    width: 10px;
  }
}
@media (min-width: 1200px) {
  .cropper-point.point-se {
    height: 5px;
    opacity: 0.75;
    width: 5px;
  }
}
.cropper-point.point-se::before {
  background-color: #39f;
  bottom: -50%;
  content: ' ';
  display: block;
  height: 200%;
  opacity: 0;
  position: absolute;
  right: -50%;
  width: 200%;
}
.cropper-invisible {
  opacity: 0;
}
.cropper-bg {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');
}
.cropper-hide {
  display: block;
  height: 0;
  position: absolute;
  width: 0;
}
.cropper-hidden {
  display: none !important;
}
.cropper-move {
  cursor: move;
}
.cropper-crop {
  cursor: crosshair;
}
.cropper-disabled .cropper-drag-box,
.cropper-disabled .cropper-face,
.cropper-disabled .cropper-line,
.cropper-disabled .cropper-point {
  cursor: not-allowed;
}
`),s=o.b`:host {
  display: block;
  position: relative;
  z-index: 99999999;
}
.img-modal {
  position: fixed;
  z-index: 111;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.img-modal.hide {
  display: none;
}
.img-modal .img-modal-mask {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
}
.img-modal .img-modal-content {
  width: 640px;
  padding: 0 20px;
  box-sizing: border-box;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: #fff;
  box-shadow: 0 6px 6px rgba(0, 0, 0, 0.2);
  border-radius: 3px;
}
.img-modal .modal-header .close {
  margin-top: 18px;
  text-align: right;
}
.img-modal .modal-header .close i-usesvg {
  color: #d9d6d7;
  width: 14px;
  height: 14px;
  cursor: pointer;
}
.img-modal .modal-header .title {
  margin-top: 8px;
  margin-bottom: 50px;
  text-align: center;
  font-size: 20px;
  font-weight: 500;
  color: #333333;
  line-height: 28px;
}
.img-modal .modal-body {
  display: flex;
  padding-bottom: 20px;
}
.img-modal .cropper {
  position: relative;
  width: 260px;
  height: 260px;
  margin-right: 24px;
  flex-shrink: 0;
  margin-bottom: 32px;
}
.img-modal .float-option {
  position: absolute;
  bottom: -32px;
  width: 100%;
  box-sizing: border-box;
  display: flex;
  justify-content: space-between;
}
.img-modal .float-option i-usesvg {
  cursor: pointer;
  width: 18px;
  height: 18px;
  color: #333;
  opacity: 0.3;
  transition: opacity 0.2s;
}
.img-modal .float-option i-usesvg:hover {
  opacity: 1;
}
.img-modal .float-option-left > i-usesvg {
  margin-right: 16px;
}
.img-modal .float-option-right > i-usesvg {
  margin-left: 16px;
}
.img-modal .option {
  position: relative;
  flex-grow: 1;
}
.img-modal .option .title {
  display: block;
  margin-bottom: 14px;
  line-height: 1;
  font-weight: 500;
  color: #333333;
}
.img-modal .preview-box .preview {
  border: 1px solid #DADCE0;
  box-sizing: border-box;
  overflow: hidden;
  margin-bottom: 30px;
  width: 80px;
  height: 80px;
  border-radius: 6px;
  -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
          mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC);
}
.img-modal .color-box {
  position: relative;
}
.img-modal .color-box i-colorpicker {
  margin-right: 28px;
}
.modal-footer {
  margin-top: 20px;
  margin-bottom: 40px;
}
.modal-footer .btn-box {
  padding: 0 100px;
  display: flex;
  justify-content: space-between;
}
.modal-footer .btn-box infinito-button {
  outline: none;
  border: none;
  width: 120px;
  height: 42px;
  background: #efefef;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 500;
  line-height: 22px;
  color: #333333;
  cursor: pointer;
}
.cropper .cropper-wrap-box {
  background-color: currentColor;
}
.cropper img {
  max-width: 100%;
  max-height: 100%;
}
.cropper .cropper-wrap-box {
  background-color: currentColor;
}
.cropper .cropper-crop-box {
  background-color: currentColor;
}
.cropper .cropper-point.point-se {
  height: 5px;
  width: 5px;
}
`,l=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let c=class extends o.a{constructor(){super(...arguments),this.modalStatus=!1,this.rgba="",this.needBackground=!1,this.initRgba="",this.title="",this.borderRadius="3px",this.showImg=!1,this.changed=!1,this.cropper=null}static create(t){const e=null==t?void 0:t.title,i=null==t?void 0:t.needBackground,o=(null==t?void 0:t.borderRadius)||"3px",n=document.body,r=document.createElement("i-cropper");return r.borderRadius=o,e&&r.setAttribute("title",e),i&&r.setAttribute("needBackground",""+i),n.appendChild(r),this.instance=r,r}static destroy(){var t,e;null===(e=null===(t=this.instance)||void 0===t?void 0:t.parentNode)||void 0===e||e.removeChild(this.instance),this.instance=null}init(t,e){this.showImg=!1,this.rgba=e||"transparent",this.initRgba=e||"transparent",this.cropper?(this.cropper.replace(t),this.cropper.reset()):(this.$img.src=t,this.cropper=new r.a(this.$img,{aspectRatio:1,zoomOnWheel:!0,autoCropArea:.9999,preview:this.$preview,checkCrossOrigin:!1,dragMode:"move",ready:()=>{this.showImg=!0},zoom:()=>{this.changed=!0},cropend:()=>{this.changed=!0}}))}close(t=!0){this.modalStatus=!1,this.showImg=!1,t&&(this.rgba=""),this.changed=!1;const e=new CustomEvent("on-close-cropper",{bubbles:!0,composed:!0});this.dispatchEvent(e)}show(){this.modalStatus=!0;const t=new CustomEvent("on-show-cropper",{bubbles:!0,composed:!0});this.dispatchEvent(t)}_rotateCropper(t){this.cropper.rotate(t),this.changed=!0}_scaleCropper(t){this.cropper.zoom(t),this.changed=!0}_resetCropper(){this.rgba=this.initRgba,this.cropper.reset(),this.changed=!1,requestAnimationFrame(()=>{this.$colorPicker.resetActiveIndex()})}_onSubmitImg(){const t={minWidth:512,minHeight:512,maxWidth:600,maxHeight:600};this.needBackground&&(t.fillColor=this.rgba||"transparent"),this.cropper.getCroppedCanvas(t).toBlob(t=>{const e=new CustomEvent("on-change",{detail:{data:t,color:this.rgba,changed:this.changed}});this.dispatchEvent(e),this.close()},"image/png")}_pickColor(t){const{value:e}=t.detail;this.rgba=e,this.changed=!0}render(){return o.e` <div class="img-modal ${this.modalStatus?"show":"hide"}">
      <div class="img-modal-mask"></div>
      <div class="img-modal-content" style="border-radius:${this.borderRadius}">
        <section class="modal-header">
          <div class="close">
            <i-usesvg @click="${this.close}" type="icon-guanbi1" iconfont></i-usesvg>
          </div>
          <div class="title">${this.title||i18n("custom_icon")}</div>
        </section>
        <section class="modal-body">
          <div
            style="${this.rgba?`color:${this.rgba};`:"color:transparent;"}${this.showImg?"opacity:1;":"opacity:0;"}"
            class="cropper"
          >
            <img class="file-img" crossorigin="anonymous" src="" alt="" />
            <div class="float-option">
              <div class="float-option-left">
                <i-usesvg @click="${()=>this._rotateCropper(90)}" type="infinity-pro-pure-icon-redo"></i-usesvg>
                <i-usesvg @click="${()=>this._rotateCropper(-90)}" type="infinity-pro-pure-icon-undo"></i-usesvg>
              </div>
              <div class="float-option-right">
                <i-usesvg @click="${()=>this._scaleCropper(-.1)}" type="infinity-pro-pure-icon-zoom-out"></i-usesvg>
                <i-usesvg @click="${()=>this._scaleCropper(.1)}" type="infinity-pro-pure-icon-zoom-in"></i-usesvg>
              </div>
            </div>
          </div>
          <div class="option">
            <div class="preview-box">
              <span class="title">${i18n("preview")}</span>
              <div
                style="${this.rgba?`background-color:${this.rgba};`:"background-color:transparent;"}"
                class="preview"
              ></div>
            </div>
            <div class="color-box">
              <span class="title">${i18n("bg_color")}</span>
              <i-colorpicker .value="${this.rgba||"transparent"}" @on-change="${this._pickColor}"></i-colorpicker>
            </div>
          </div>
        </section>
        <section class="modal-footer">
          <div class="btn-box">
            <infinito-button @click="${this.close}">${i18n("cancel")}</infinito-button>
            <infinito-button @click="${this._resetCropper}">${i18n("reset")}</infinito-button>
            <infinito-button primary @click="${this._onSubmitImg}">${i18n("confirm")}</infinito-button>
          </div>
        </section>
      </div>
    </div>`}};c.styles=[s,a],c.instance=null,l([Object(o.h)(".file-img")],c.prototype,"$img",void 0),l([Object(o.h)(".preview")],c.prototype,"$preview",void 0),l([Object(o.h)("i-colorpicker")],c.prototype,"$colorPicker",void 0),l([Object(o.g)({type:Boolean})],c.prototype,"modalStatus",void 0),l([Object(o.g)({type:String})],c.prototype,"rgba",void 0),l([Object(o.g)({type:Boolean})],c.prototype,"needBackground",void 0),l([Object(o.g)({type:String})],c.prototype,"title",void 0),l([Object(o.g)({type:String})],c.prototype,"borderRadius",void 0),l([Object(o.f)()],c.prototype,"showImg",void 0),c=l([Object(o.c)("i-cropper")],c)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var o=i(546),n=i(547),r=i(548);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return c(this,t,e,i)}function c(t,e,i,o){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,o){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(o||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===o?new Uint8Array(e):void 0===o?new Uint8Array(e,i):new Uint8Array(e,i,o);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=h(t,e);return t}(t,e,i,o):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var o=0|g(e,i),n=(t=s(t,o)).write(e,i);n!==o&&(t=t.slice(0,n));return t}(t,e,i):function(t,e){if(l.isBuffer(e)){var i=0|u(e.length);return 0===(t=s(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(o=e.length)!=o?s(t,0):h(t,e);if("Buffer"===e.type&&r(e.data))return h(t,e.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function d(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function p(t,e){if(d(e),t=s(t,e<0?0:0|u(e)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function h(t,e){var i=e.length<0?0:0|u(e.length);t=s(t,i);for(var o=0;o<i;o+=1)t[o]=255&e[o];return t}function u(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function g(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return F(t).length;default:if(o)return B(t).length;e=(""+e).toLowerCase(),o=!0}}function f(t,e,i){var o=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return $(this,e,i);case"utf8":case"utf-8":return S(this,e,i);case"ascii":return I(this,e,i);case"latin1":case"binary":return j(this,e,i);case"base64":return A(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,i);default:if(o)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function m(t,e,i){var o=t[e];t[e]=t[i],t[i]=o}function b(t,e,i,o,n){if(0===t.length)return-1;if("string"==typeof i?(o=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=l.from(e,o)),l.isBuffer(e))return 0===e.length?-1:y(t,e,i,o,n);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):y(t,[e],i,o,n);throw new TypeError("val must be string, number or Buffer")}function y(t,e,i,o,n){var r,a=1,s=t.length,l=e.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,i/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){var d=-1;for(r=i;r<s;r++)if(c(t,r)===c(e,-1===d?0:r-d)){if(-1===d&&(d=r),r-d+1===l)return d*a}else-1!==d&&(r-=r-d),d=-1}else for(i+l>s&&(i=s-l),r=i;r>=0;r--){for(var p=!0,h=0;h<l;h++)if(c(t,r+h)!==c(e,h)){p=!1;break}if(p)return r}return-1}function v(t,e,i,o){i=Number(i)||0;var n=t.length-i;o?(o=Number(o))>n&&(o=n):o=n;var r=e.length;if(r%2!=0)throw new TypeError("Invalid hex string");o>r/2&&(o=r/2);for(var a=0;a<o;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[i+a]=s}return a}function w(t,e,i,o){return z(B(e,t.length-i),t,i,o)}function x(t,e,i,o){return z(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,o)}function _(t,e,i,o){return x(t,e,i,o)}function k(t,e,i,o){return z(F(e),t,i,o)}function O(t,e,i,o){return z(function(t,e){for(var i,o,n,r=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),o=i>>8,n=i%256,r.push(n),r.push(o);return r}(e,t.length-i),t,i,o)}function A(t,e,i){return 0===e&&i===t.length?o.fromByteArray(t):o.fromByteArray(t.slice(e,i))}function S(t,e,i){i=Math.min(t.length,i);for(var o=[],n=e;n<i;){var r,a,s,l,c=t[n],d=null,p=c>239?4:c>223?3:c>191?2:1;if(n+p<=i)switch(p){case 1:c<128&&(d=c);break;case 2:128==(192&(r=t[n+1]))&&(l=(31&c)<<6|63&r)>127&&(d=l);break;case 3:r=t[n+1],a=t[n+2],128==(192&r)&&128==(192&a)&&(l=(15&c)<<12|(63&r)<<6|63&a)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:r=t[n+1],a=t[n+2],s=t[n+3],128==(192&r)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&r)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(d=l)}null===d?(d=65533,p=1):d>65535&&(d-=65536,o.push(d>>>10&1023|55296),d=56320|1023&d),o.push(d),n+=p}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var i="",o=0;for(;o<e;)i+=String.fromCharCode.apply(String,t.slice(o,o+=4096));return i}(o)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,i){return c(null,t,e,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,i){return function(t,e,i,o){return d(e),e<=0?s(t,e):void 0!==i?"string"==typeof o?s(t,e).fill(i,o):s(t,e).fill(i):s(t,e)}(null,t,e,i)},l.allocUnsafe=function(t){return p(null,t)},l.allocUnsafeSlow=function(t){return p(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,o=e.length,n=0,r=Math.min(i,o);n<r;++n)if(t[n]!==e[n]){i=t[n],o=e[n];break}return i<o?-1:o<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!r(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var o=l.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var a=t[i];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(o,n),n+=a.length}return o},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):f.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,i,o,n){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===o&&(o=0),void 0===n&&(n=this.length),e<0||i>t.length||o<0||n>this.length)throw new RangeError("out of range index");if(o>=n&&e>=i)return 0;if(o>=n)return-1;if(e>=i)return 1;if(this===t)return 0;for(var r=(n>>>=0)-(o>>>=0),a=(i>>>=0)-(e>>>=0),s=Math.min(r,a),c=this.slice(o,n),d=t.slice(e,i),p=0;p<s;++p)if(c[p]!==d[p]){r=c[p],a=d[p];break}return r<a?-1:a<r?1:0},l.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},l.prototype.indexOf=function(t,e,i){return b(this,t,e,i,!0)},l.prototype.lastIndexOf=function(t,e,i){return b(this,t,e,i,!1)},l.prototype.write=function(t,e,i,o){if(void 0===e)o="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)o=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===o&&(o="utf8")):(o=i,i=void 0)}var n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var r=!1;;)switch(o){case"hex":return v(this,t,e,i);case"utf8":case"utf-8":return w(this,t,e,i);case"ascii":return x(this,t,e,i);case"latin1":case"binary":return _(this,t,e,i);case"base64":return k(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,i);default:if(r)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(t,e,i){var o="";i=Math.min(t.length,i);for(var n=e;n<i;++n)o+=String.fromCharCode(127&t[n]);return o}function j(t,e,i){var o="";i=Math.min(t.length,i);for(var n=e;n<i;++n)o+=String.fromCharCode(t[n]);return o}function $(t,e,i){var o=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>o)&&(i=o);for(var n="",r=e;r<i;++r)n+=N(t[r]);return n}function C(t,e,i){for(var o=t.slice(e,i),n="",r=0;r<o.length;r+=2)n+=String.fromCharCode(o[r]+256*o[r+1]);return n}function E(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,i,o,n,r){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<r)throw new RangeError('"value" argument is out of bounds');if(i+o>t.length)throw new RangeError("Index out of range")}function P(t,e,i,o){e<0&&(e=65535+e+1);for(var n=0,r=Math.min(t.length-i,2);n<r;++n)t[i+n]=(e&255<<8*(o?n:1-n))>>>8*(o?n:1-n)}function R(t,e,i,o){e<0&&(e=4294967295+e+1);for(var n=0,r=Math.min(t.length-i,4);n<r;++n)t[i+n]=e>>>8*(o?n:3-n)&255}function L(t,e,i,o,n,r){if(i+o>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function D(t,e,i,o,r){return r||L(t,0,i,4),n.write(t,e,i,o,23,4),i+4}function M(t,e,i,o,r){return r||L(t,0,i,8),n.write(t,e,i,o,52,8),i+8}l.prototype.slice=function(t,e){var i,o=this.length;if((t=~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),(e=void 0===e?o:~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=l.prototype;else{var n=e-t;i=new l(n,void 0);for(var r=0;r<n;++r)i[r]=this[r+t]}return i},l.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var o=this[t],n=1,r=0;++r<e&&(n*=256);)o+=this[t+r]*n;return o},l.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var o=this[t+--e],n=1;e>0&&(n*=256);)o+=this[t+--e]*n;return o},l.prototype.readUInt8=function(t,e){return e||E(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||E(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||E(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||E(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var o=this[t],n=1,r=0;++r<e&&(n*=256);)o+=this[t+r]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||E(t,e,this.length);for(var o=e,n=1,r=this[t+--o];o>0&&(n*=256);)r+=this[t+--o]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readInt8=function(t,e){return e||E(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||E(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,e){e||E(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,e){return e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||E(t,4,this.length),n.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||E(t,4,this.length),n.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||E(t,8,this.length),n.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||E(t,8,this.length),n.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,i,o){(t=+t,e|=0,i|=0,o)||T(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,r=0;for(this[e]=255&t;++r<i&&(n*=256);)this[e+r]=t/n&255;return e+i},l.prototype.writeUIntBE=function(t,e,i,o){(t=+t,e|=0,i|=0,o)||T(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,r=1;for(this[e+n]=255&t;--n>=0&&(r*=256);)this[e+n]=t/r&255;return e+i},l.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||T(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||T(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||T(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||T(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||T(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,i,o){if(t=+t,e|=0,!o){var n=Math.pow(2,8*i-1);T(this,t,e,i,n-1,-n)}var r=0,a=1,s=0;for(this[e]=255&t;++r<i&&(a*=256);)t<0&&0===s&&0!==this[e+r-1]&&(s=1),this[e+r]=(t/a>>0)-s&255;return e+i},l.prototype.writeIntBE=function(t,e,i,o){if(t=+t,e|=0,!o){var n=Math.pow(2,8*i-1);T(this,t,e,i,n-1,-n)}var r=i-1,a=1,s=0;for(this[e+r]=255&t;--r>=0&&(a*=256);)t<0&&0===s&&0!==this[e+r+1]&&(s=1),this[e+r]=(t/a>>0)-s&255;return e+i},l.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||T(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||T(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||T(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||T(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,i){return D(this,t,e,!0,i)},l.prototype.writeFloatBE=function(t,e,i){return D(this,t,e,!1,i)},l.prototype.writeDoubleLE=function(t,e,i){return M(this,t,e,!0,i)},l.prototype.writeDoubleBE=function(t,e,i){return M(this,t,e,!1,i)},l.prototype.copy=function(t,e,i,o){if(i||(i=0),o||0===o||(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&o<i&&(o=i),o===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-e<o-i&&(o=t.length-e+i);var n,r=o-i;if(this===t&&i<e&&e<o)for(n=r-1;n>=0;--n)t[n+e]=this[n+i];else if(r<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<r;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+r),e);return r},l.prototype.fill=function(t,e,i,o){if("string"==typeof t){if("string"==typeof e?(o=e,e=0,i=this.length):"string"==typeof i&&(o=i,i=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!l.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var r;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(r=e;r<i;++r)this[r]=t;else{var a=l.isBuffer(t)?t:B(new l(t,o).toString()),s=a.length;for(r=0;r<i-e;++r)this[r+e]=a[r%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function N(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var i;e=e||1/0;for(var o=t.length,n=null,r=[],a=0;a<o;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===o){(e-=3)>-1&&r.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&r.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function F(t){return o.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,i,o){for(var n=0;n<o&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}}).call(this,i(58))},,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,"userStore",(function(){return O}));i(8),i(41),i(11),i(14),i(21);var o=i(6),n=i.n(o),r=i(269),a=i.n(r),s=i(99),l=i.n(s),c=i(4),d=i(263),p=i(23),h=i(0),u=i(93),g=i(22),f=i.n(g),m=i(120),b=i(163),y=i(484),v=i(483),w=i(9),x=i(29),_=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class k extends d.a{constructor(){super(),this.isExpired=!1,this.isLogin=!1,this.token="",this.userInfo={},this.refreshToken="",this.mobileloginExpire=0,this.mobileloginUrl="",this.areaCodeList=[],this.thirdList=[{type:p.g.ThirdLoginType.wechat,title:i18n("wechat"),bindStatus:!1,nick_name:""},{type:p.g.ThirdLoginType.qq,title:"QQ",bindStatus:!1,nick_name:""},{type:p.g.ThirdLoginType.google,title:"Google",bindStatus:!1,nick_name:""},{type:p.g.ThirdLoginType.facebook,title:"Facebook",bindStatus:!1,abondon:!0,nick_name:""},{type:p.g.ThirdLoginType.weibo,title:i18n("xin_lang_weibo"),bindStatus:!1,abondon:!0,nick_name:""}],this.userProfilePromise=n.a.resolve(),this.wpColorUpdate=0,this.logining=!1,this.modalOpen=!1,this.removeAccountDisableSec=10,this.removeAccountDisableTimer=null,this.showLoginTipModal=!1,this.profileModal=!1,this.syncListModal=!1,this.isModify=!1,this.openMiniWindow=t=>{const e=Math.floor(window.screenY+200),i=Math.floor(window.screenX+window.innerWidth/3);return window.open(t,"_blank",`top=${e},left=${i},height=600,width=770,menubar=no,toolbar=yes,location=yes,status=no,resizable=no`)},this.binding=!1,this.bindListener=t=>{let e;const i=()=>{e=setTimeout(()=>{t.postMessage({from:"origin_login"},"*"),t.closed?(window.removeEventListener("message",o),this.binding=!1):i()},500)};i();const o=async t=>{try{if(!t.data&&!t.data.key&&"login"!==t.data.key)return;clearTimeout(e),window.removeEventListener("message",o,!1);const{message:i}=t.data;let n;switch(i.type){case p.g.ThirdLoginType.weibo:case p.g.ThirdLoginType.google:case p.g.ThirdLoginType.facebook:case p.g.ThirdLoginType.wechat:case p.g.ThirdLoginType.qq:n=await p.g.bindThird(i.type,i.code)}if(n.error)return void u.message.error(n.error.message);this.bindSuccess("third",n.data),u.message.success(i18n("bind_success"))}catch(t){u.message.error(i18n("network_error"))}finally{this.binding=!1}};window.addEventListener("message",o,!1)},this.countdownTimer=null,this.checkMobileUrlTimer=null,this.isShowLogoutConfirm=!1,this.showConfirmOpt="",this.isShowSecondProfileModal=!1,this.secondProfileModalType=null,this.clearAllData=!1,this.loading=!1,this.URL=h.y}get thirdAccountList(){const t={};return this.userInfo.third_account&&this.userInfo.third_account.forEach(e=>{t[e.platform]=e}),this.thirdList.map(e=>t[e.type]?Object.assign(Object.assign({},e),{bindStatus:!0,nick_name:t[e.type].nick_name}):e)}setWpColorUpdate(t){this.wpColorUpdate=t}closeModal(){this.modalOpen=!1}openModal(){this.modalOpen=!0}toggleLoginTipModal(){this.showLoginTipModal=!this.showLoginTipModal}closeLoginTipModal(){this.showLoginTipModal=!1}closeProfileModal(){this.profileModal=!1}openProfileModal(){this.profileModal=!0,this.openModify()}closeSyncListModal(){this.syncListModal=!1}openSyncListModal(){this.syncListModal=!0}openModify(){this.isModify=!0}async modifyProfile(t){try{const e=await p.g.updateProfile(t);Object(c.i)(()=>{if(e&&0===e.code){const{user:{name:t,gender:i,avatar:o}}=e.data;this.userInfo.name=t,this.userInfo.gender=i,this.userInfo.avatar=o}else u.message.error(i18n("update_data_failure"))})}catch(t){u.message.error(t.message)}}async getUserProfile(){const t=await p.g.getUserProfile();Object(c.i)(()=>{if(t)if(0===t.code&&this.isLogin){const{gender:e,name:i,avatar:o}=t.data;this.userInfo.name=i,this.userInfo.gender=e,this.userInfo.avatar=o,this.userInfo["auto-backup"]=t.data["auto-backup"],this.userInfo["wp-color-update"]=t.data["wp-color-update"],this.userInfo["backup-version-v2"]=t.data["backup-version-v2"],this.userInfo.email=t.data.email,this.userInfo.phone_number=t.data.phone_number,this.userInfo.third_account=t.data.third_account}else 3012===t.code&&(u.message.error(t.message),this.exitAccount())})}async getAreaCodeList(){const{data:t,error:e}=await p.g.getAreaCodeList();e||(null==t?void 0:t.length)&&Object(c.i)(()=>{this.areaCodeList=t})}async updateAvatar(t){try{return await p.g.uploadAvatar(t)}catch(t){u.message.error(i18n("upload_avatar_failure"))}}closeModify(){this.isModify=!1}thirdPartyLogin(t){let e;switch(this.logining=!0,t){case"facebook":e=this.URL+"/login/facebook";break;case"google":e=this.URL+"/login/google";break;case"qq":e=this.URL+"/login/qq";break;case"sina":e=this.URL+"/login/weibo";break;case"wechat":e=this.URL+"/login/wechat"}setTimeout(async()=>{const t=this.openMiniWindow(e);if(this.opener=t,h.n)return;const i=setInterval(()=>{t.postMessage({from:"origin_login"},"*")},300),o=t=>{if(!t.data&&!t.data.key&&"login"!==t.data.key)return;clearInterval(i),window.removeEventListener("message",o,!1);const{message:e}=t.data;this.login3rdSuccess(e)};window.addEventListener("message",o,!1)},300)}get isLastId(){const t=this.userInfo||{},e=t.third_account||[];let i=0;return t.email&&++i,t.phone_number&&++i,i+=e.length,i<=1}thirdPartyBind(t){if(this.binding)return;let e;switch(this.binding=!0,t){case p.g.ThirdLoginType.weibo:case p.g.ThirdLoginType.google:case p.g.ThirdLoginType.facebook:case p.g.ThirdLoginType.wechat:case p.g.ThirdLoginType.qq:e=this.openMiniWindow(`${h.y}/bind/to?type=${t}`),this.bindListener(e)}}async thirdPartyUnbind(t){let e;switch(t){case p.g.ThirdLoginType.weibo:case p.g.ThirdLoginType.google:case p.g.ThirdLoginType.facebook:case p.g.ThirdLoginType.qq:case p.g.ThirdLoginType.wechat:e=await p.g.unbindThird(t)}return e}bindSuccess(t,e){if("email"===t)this.userInfo.email=e;else if("phone"===t)this.userInfo.phone_number=e;else if("third"===t){const t=this.userInfo.third_account||[];t.push(e),this.userInfo.third_account=t}}unbindSuccess(t,e){if("email"===t)this.userInfo.email=null;else if("phone"===t)this.userInfo.phone_number=null;else if("third"===t){const t=this.userInfo.third_account||[],i=t.findIndex(t=>t.platform===e);if(-1===i)return;t.splice(i,1),this.userInfo.third_account=t}}async login(t){const e={};if(e.password=t.password,"email"===t.type)e.email=t.account;else{if("phone"!==t.type)return;e.phone_number=t.account}const i=await p.g.login(e);Object(c.i)(()=>{if(!i||0!==i.code)throw u.message.error(i.message),new Error(i.code);this.loginEmailSuccess(i.data.user),this.setToken(i.data),this.setRefreshToken(i.data.refreshToken)})}async getMobileloginUrl(t=!1){if(t&&(this.mobileloginUrl="",this.mobileloginExpire=0),m.f){const{data:t,error:e}=await p.g.getMobileloginUrl();if(e)return void Object(c.i)(()=>{this.mobileloginExpire=0});Object(c.i)(()=>{this.mobileloginUrl=t.url,this.mobileloginExpire=Math.floor(t.expire/1e3)}),this.checkMobileloginUrl(t.code,t.type),0!==this.mobileloginExpire&&(this.countdownTimer=setInterval(()=>{Object(c.i)(()=>{this.mobileloginExpire-=1}),this.mobileloginExpire<=0&&clearInterval(this.countdownTimer)},1e3))}}async checkMobileloginUrl(t,e,i=5e3){m.f&&this.mobileloginExpire>3&&(clearTimeout(this.checkMobileUrlTimer),this.checkMobileUrlTimer=setTimeout(async()=>{const{data:o}=await p.g.checkMobileloginUrl(t,e);if(o&&o.expired)return clearInterval(this.countdownTimer),void Object(c.i)(()=>{this.mobileloginExpire=0});this.checkMobileloginUrl(t,e,i)},i))}async loginEmailSuccess(t){this.logining=!1,this.closeModal(),this.isLogin=!0,this.userInfo=t,this.isExpired=!1,this.settingLoginSuccess()}setUserData(t){this.logining=!1,this.closeModal(),this.isLogin=t.isLogin,this.userInfo=t,this.isExpired=!1;["token","refreshToken","isLogin"].forEach(t=>delete this.userInfo[t])}async login3rdSuccess(t){if(!t||!Object.keys(t).length)return void this.cancelLogin();const e=t["login-type"];if(["qq","wechat"].includes(e)){const e=await p.g.loginWithUid(t);0===e.code?Object(c.i)(()=>{this.setUserData(t),this.setToken(e.data),this.setRefreshToken(e.data.refreshToken)}):3006===e.code&&u.message.error("获取token失败")}else this.setUserData(t),this.setToken(t),this.setRefreshToken(t.refreshToken);this.settingLoginSuccess()}settingLoginSuccess(){v.b.changeSetting("view","isHideIcp",!0)}cancelLogin(){var t;this.logining=!1,null===(t=this.opener)||void 0===t||t.close()}toggleClear(t){this.clearAllData=t}logout(t){this.isShowLogoutConfirm=!0,this.showConfirmOpt=t,"remove"===t&&(this.removeAccountDisableSec=10,clearInterval(this.removeAccountDisableTimer),this.removeAccountDisableTimer=setInterval(()=>{Object(c.i)(()=>{this.removeAccountDisableSec-=1,0===this.removeAccountDisableSec&&(clearInterval(this.removeAccountDisableTimer),this.removeAccountDisableTimer=null)})},1e3))}showSecondProfileModal(t){this.isShowSecondProfileModal=!0,this.secondProfileModalType=t}closeSecondProfileModal(){this.isShowSecondProfileModal=!1,this.secondProfileModalType=null}async exitAccount(){this.loading=!0,await new n.a(t=>{setTimeout(()=>{this.clearAllData?this.clearAllStore().then(t):t(null)},200)}),Object(c.i)(()=>{this.isLogin=!1,this.userInfo={},this.clearToken()}),this.clearAllData?window.location.reload():(Object(c.i)(()=>this.loading=!1),this.closeLogoutConfirm(),this.closeProfileModal(),h.s&&y.pluginStore.hideLast())}async deleteAccount(){this.loading=!0;const t=await p.g.deleteAccount();Object(c.i)(()=>{t&&0===t.code?this.exitAccount():(3012===t.code&&this.exitAccount(),u.message.error(t.message)),this.loading=!1})}restoreKeysToStorage(t){t.forEach(({data:t,key:e})=>localStorage.setItem(e,t))}async clearAllStore(){this.stopAutoBackupReaction(),this.stopToStorageReaction(),await w.a.deleteAllForLogout();const t=[x.c,x.d];await this._deleteIdb(t),b.slave.sendMessage("tabs-reload")}async _deleteIdb(t){const e=await new n.a(t=>a()(f.a).call(f.a,(e,i)=>t(i)));await n.a.all(t.map(t=>new n.a(i=>{const o=t.split("->");if(1===o.length)return e.includes(t)?void f.a.removeItem(t,i):void i(null);i(null),e.includes(o[0])&&f.a.getItem(o[0],t=>{l()(o).call(o,(t,e,i)=>(i===o.length-1&&Reflect.deleteProperty(t,e),t[e]),t),f.a.setItem(o[0],i)})})))}_clearLocalStorage(t){const e=new Map;t.filter(Boolean).forEach(t=>{const i=t.split("->");if(1===i.length)return void e.set(t,localStorage.getItem(t));const o=JSON.parse(localStorage.getItem(i[0]));i.slice(1).forEach((t,e)=>{const n=0===e?o:o[i[e]];for(const e in n)t!==e&&Reflect.deleteProperty(n,e)}),e.set(i[0],JSON.stringify(o))}),localStorage.clear();for(const t of a()(e).call(e))localStorage.setItem(t,e.get(t))}closeLogoutConfirm(){this.isShowLogoutConfirm=!1}setToken(t){this.token=t.token}setRefreshToken(t){this.refreshToken=t}clearToken(){this.token="",this.refreshToken=""}setOutdated(){this.isExpired=!0,this.isLogin=!1}toggleReLogin(){this.isExpired=!1}getPhoneNumber(){if(this.userInfo.phone_number){const t=this.userInfo.phone_number+"";return`${t.slice(0,3)}****${t.slice(-4)}`}return""}}_([c.g],k.prototype,"isExpired",void 0),_([c.g],k.prototype,"isLogin",void 0),_([c.g],k.prototype,"token",void 0),_([c.g],k.prototype,"userInfo",void 0),_([c.g],k.prototype,"refreshToken",void 0),_([c.g],k.prototype,"mobileloginExpire",void 0),_([c.g],k.prototype,"mobileloginUrl",void 0),_([c.g],k.prototype,"areaCodeList",void 0),_([c.e],k.prototype,"thirdAccountList",null),_([c.g],k.prototype,"wpColorUpdate",void 0),_([c.b],k.prototype,"setWpColorUpdate",null),_([c.g],k.prototype,"opener",void 0),_([c.g],k.prototype,"logining",void 0),_([c.g],k.prototype,"modalOpen",void 0),_([c.g],k.prototype,"removeAccountDisableSec",void 0),_([c.g],k.prototype,"removeAccountDisableTimer",void 0),_([c.b],k.prototype,"closeModal",null),_([c.b],k.prototype,"openModal",null),_([c.g],k.prototype,"showLoginTipModal",void 0),_([c.b],k.prototype,"toggleLoginTipModal",null),_([c.b],k.prototype,"closeLoginTipModal",null),_([c.g],k.prototype,"profileModal",void 0),_([c.g],k.prototype,"syncListModal",void 0),_([c.b],k.prototype,"closeProfileModal",null),_([c.b],k.prototype,"openProfileModal",null),_([c.b],k.prototype,"closeSyncListModal",null),_([c.b],k.prototype,"openSyncListModal",null),_([c.g],k.prototype,"isModify",void 0),_([c.b],k.prototype,"openModify",null),_([c.b],k.prototype,"modifyProfile",null),_([c.b],k.prototype,"getUserProfile",null),_([c.b],k.prototype,"getAreaCodeList",null),_([c.b],k.prototype,"updateAvatar",null),_([c.b],k.prototype,"closeModify",null),_([c.b],k.prototype,"thirdPartyLogin",null),_([c.g],k.prototype,"binding",void 0),_([c.e],k.prototype,"isLastId",null),_([c.b],k.prototype,"thirdPartyBind",null),_([c.b],k.prototype,"thirdPartyUnbind",null),_([c.b],k.prototype,"bindSuccess",null),_([c.b],k.prototype,"unbindSuccess",null),_([c.b],k.prototype,"login",null),_([c.b],k.prototype,"getMobileloginUrl",null),_([c.b],k.prototype,"checkMobileloginUrl",null),_([c.b],k.prototype,"loginEmailSuccess",null),_([c.b],k.prototype,"setUserData",null),_([c.b],k.prototype,"login3rdSuccess",null),_([c.b],k.prototype,"cancelLogin",null),_([c.g],k.prototype,"isShowLogoutConfirm",void 0),_([c.g],k.prototype,"showConfirmOpt",void 0),_([c.g],k.prototype,"isShowSecondProfileModal",void 0),_([c.g],k.prototype,"secondProfileModalType",void 0),_([c.g],k.prototype,"clearAllData",void 0),_([c.b],k.prototype,"toggleClear",null),_([c.b],k.prototype,"logout",null),_([c.b],k.prototype,"showSecondProfileModal",null),_([c.b],k.prototype,"closeSecondProfileModal",null),_([c.g],k.prototype,"loading",void 0),_([c.b],k.prototype,"exitAccount",null),_([c.b],k.prototype,"deleteAccount",null),_([c.b],k.prototype,"clearAllStore",null),_([c.b],k.prototype,"closeLogoutConfirm",null),_([c.b],k.prototype,"setToken",null),_([c.b],k.prototype,"setRefreshToken",null),_([c.b],k.prototype,"clearToken",null),_([c.b],k.prototype,"setOutdated",null),_([c.b],k.prototype,"toggleReLogin",null);const O=new k;Object(c.c)(()=>{O.firstSync&&(O.isLogin?(O.closeModal(),O.toggleReLogin(),O.userProfilePromise=O.getUserProfile()):(O.closeProfileModal(),O.closeSecondProfileModal()))}),O.initSyncStore(w.k,["userInfo","isLogin","token","refreshToken","wpColorUpdate"]),w.i.injectUserStore(O),w.i.injectSendTabsSync(t=>{b.slave.sendMessage("tabs-sync",t)})},function(t,e,i){"use strict";i.d(e,"b",(function(){return m})),i.d(e,"a",(function(){return y}));i(11),i(14),i(21),i(8),i(41);var o=i(4),n=i(263),r=i(17),a=i(75),s=i(106),l=i(268),c=i(0),d=i(386),p=i(400),h=i(265),u=i(9),g=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class f extends n.a{constructor(){super(...arguments),this.localSettings={},this.innerWidth=window.innerWidth,this.innerHeight=window.innerHeight,this.iconSpaceWidth=0,this.iconSpaceHeight=0,this.setting=this.init(),this.updatetime=0,this.permission={topUseful:-1,topBookmark:-1,searchSuggest:-1,gmailNotice:-1,gmailCount:-1,todoNotice:-1},this.logs=new Map,this.permissionMapper={topBookmark:[["bookmarks"],["chrome://favicon/"]],topUseful:[["topSites"],["chrome://favicon/"]],searchSuggest:[[],["https://suggestion.baidu.com/","https://google.com/"]],gmailNotice:[["notifications"],["https://mail.google.com/"]],gmailCount:[[],["https://mail.google.com/"]],todoNotice:[["notifications"],[]]},this.showSettingHomeModal=!1,this.webClickName=""}init(t={}){return{notice:Object.assign({},s.b.notice),link:Object.assign({},s.b.link),view:Object.assign({},s.b.view),layout:Object.assign({},s.b.layout),animation:Object.assign({},s.b.animation),icon:Object.assign({},s.b.icon),search:Object.assign({},s.b.search),font:Object.assign({},s.b.font),_v1Setting:t}}get withPermissionTopUseful(){return this.setting.view.topUseful&&1===this.permission.topUseful}get withPermissionTopBookmark(){return this.setting.view.topBookmark&&1===this.permission.topBookmark}get withPermissionSearchSuggest(){return this.setting.search.searchSuggest&&1===this.permission.searchSuggest}get needPermissionList(){const t=[],{view:e,notice:i,search:o}=this.setting,{topUseful:n,topBookmark:r,searchSuggest:a,gmailNotice:s,gmailCount:l,todoNotice:p}=this.permission;return c.m&&o.searchSuggest&&1!==a&&t.push({key:"searchSuggest",title:i18n("permission_serch_suggest_title"),content:i18n("permission_serch_suggest_content")}),c.m&&i.gmail&&1!==s&&t.push({key:"gmailNotice",title:i18n("permission_gmail_notice_title"),content:i18n("permission_gmail_notice_content")}),c.m&&i.gmailNumber&&1!==l&&t.push({key:"gmailCount",title:i18n("permission_gmail_num_title"),content:i18n("permission_gmail_num_content")}),c.s||c.r||!e.topBookmark||1===r||t.push({key:"topBookmark",title:i18n("permission_top_bookmark_title"),content:i18n("permission_top_bookmark_content")}),c.s||c.r||!e.topUseful||1===n||t.push({key:"topUseful",title:i18n("permission_top_useful_title"),content:i18n("permission_top_useful_content")}),d.a.needNotificationPermission&&1!==p&&((c.s||c.r)&&"denied"===Notification.permission||t.push({key:"todoNotice",title:i18n("permission_todo_notice_title"),content:i18n("permission_todo_notice_content")})),t}get sideRatio(){return this.setting.view.scaleSide}reset(){this.setting=this.init(this.setting._v1Setting),this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row)}diffRemote(t){return!o.d.structural(t.setting||{},this.setting)}sendSettingValue(){Object.keys(this.localSettings).length&&(h.a.sendEvent({settingValue:this.localSettings}),this.localSettings={})}async mergeRemote(t){const e=t.setting;if(!t.setting)return;const i=this.setting;this.setting={notice:Object.assign(Object.assign({},i.notice),e.notice),link:Object.assign(Object.assign({},i.link),e.link),view:Object.assign(Object.assign({},i.view),e.view),layout:Object.assign(Object.assign({},i.layout),e.layout),animation:Object.assign(Object.assign({},i.animation),e.animation),icon:Object.assign(Object.assign({},i.icon),e.icon),search:Object.assign(Object.assign({},i.search),e.search),font:Object.assign(Object.assign({},i.font),e.font),_v1Setting:e._v1Setting};const n=await r.a.getTimestamp();Object(o.i)(()=>{this.updatetime=n})}sendSettingLog(t,e){this.logs.has(t)&&clearTimeout(this.logs.get(t)),this.logs.set(t,setTimeout(()=>{h.a.sendEvent({settingAction:{[t]:e}}),this.logs.delete(t)},2e3))}async changeSetting(t,e,i){if(this.setting[t][e]===i)return;this.setting[t][e]=i,"layout"===t&&("custom"===e&&!0===i||"customItem"===e)&&(this.setting.layout.row=this.setting.layout.customItem[0],this.setting.layout.col=this.setting.layout.customItem[1],this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row));let n=`${t}_${e}`,a=i;"layout"!==t||"col"!==e&&"row"!==e||(this.changeLayoutCb(this.setting.layout.col,this.setting.layout.row),n="layout",a=this.setting.layout.row+"*"+this.setting.layout.col),this.sendSettingLog(n,a),this.localSettings[n]=a;const s=await r.a.getTimestamp();Object(o.i)(()=>{this.updatetime=s}),this.changeSettingEffect(t,e,i)}changeLayoutCb(t,e){console.log("col, row",t,e),console.log("changeLayoutCb 未注册")}changeLayout(t){this.changeLayoutCb=t}changeSettingEffect(t,e,i){switch(!0){case"topBookmark"===e:i&&this.requestPermission("topBookmark",!0);break;case"topUseful"===e:i&&this.requestPermission("topUseful",!0);break;case"notice"===t&&"gmail"===e:i&&this.requestPermission("gmailNotice",!0);break;case"notice"===t&&"gmailNumber"===e:i&&this.requestPermission("gmailCount",!0);break;case"searchSuggest"===e:i&&this.requestPermission("searchSuggest",!0)}}async checkPermission(t){if(c.s||c.r){switch(t){case"todoNotice":case"gmailNotice":return void("granted"===Notification.permission?this.permission[t]=1:"default"===Notification.permission?this.permission[t]=-1:this.permission[t]=0)}if(c.s)return}if(1===this.permission[t]){const e=this.permissionMapper[t];try{if(await a.a.has(e[0],e[1]))return}catch(t){console.log(t)}Object(o.i)(()=>{this.permission[t]=-1})}const e=this.permissionMapper[t];try{await a.a.has(e[0],e[1])&&Object(o.i)(()=>{this.permission[t]=1})}catch(t){}}async requestPermission(t,e=!1){if((c.s||c.r)&&["todoNotice","gmailNotice"].includes(t))return await Object(p.a)(),void Object(o.i)(()=>{this.permission.todoNotice=1,this.permission.gmailNotice=1});const i=this.permissionMapper[t];if(e||0!==this.permission[t]&&1!==this.permission[t])try{await a.a.request(i[0],i[1]),Object(o.i)(()=>{this.permission[t]=1}),"gmailNotice"===t&&this.checkPermission("todoNotice")}catch(e){e&&"REJECT"===e.message&&Object(o.i)(()=>{this.permission[t]=0})}}async requestAllPermission(){if(c.s||c.r)return await Object(p.a)(),void Object(o.i)(()=>{this.permission.todoNotice=1,this.permission.gmailNotice=1});const t=[[],[]];this.needPermissionList.forEach(e=>{const i=this.permissionMapper[e.key];t[0].push(...i[0]),i&&t[1].push(...i[1])});try{await a.a.request(t[0],t[1]),Object(o.i)(()=>{this.needPermissionList.forEach(t=>{this.permission[t.key]=1})})}catch(t){Object(o.i)(()=>{this.needPermissionList.forEach(t=>{this.permission[t.key]=0})})}}resetPermission(t){this.permission[t]=-1}setIconSpace(t){this.setting.icon.scale=t.iconScale,this.setting.layout.colGap=t.colGap,this.setting.layout.rowGap=t.rowGap,this.setting.search.scale=t.searchScale}openSearchSuggest(){this.setting.search.searchSuggest?this.requestPermission("searchSuggest",!0):this.setting.search.searchSuggest=!0}get sideScaleRatio(){return this.setting.view.scaleSide}toggleShowSettingHome(t){this.setting.view.isShowHomepageBtn=!t}toggleSettingHomeModal(){this.webClickName="",this.showSettingHomeModal=!this.showSettingHomeModal}closeSettingHomeModal(){this.showSettingHomeModal=!1}setWebClickName(t){this.webClickName=t}}g([o.g],f.prototype,"innerWidth",void 0),g([o.g],f.prototype,"innerHeight",void 0),g([o.g],f.prototype,"iconSpaceWidth",void 0),g([o.g],f.prototype,"iconSpaceHeight",void 0),g([o.g],f.prototype,"setting",void 0),g([o.g],f.prototype,"updatetime",void 0),g([o.g],f.prototype,"permission",void 0),g([o.e],f.prototype,"withPermissionTopUseful",null),g([o.e],f.prototype,"withPermissionTopBookmark",null),g([o.e],f.prototype,"withPermissionSearchSuggest",null),g([o.e],f.prototype,"needPermissionList",null),g([o.e],f.prototype,"sideRatio",null),g([o.b],f.prototype,"reset",null),g([o.b],f.prototype,"mergeRemote",null),g([o.b],f.prototype,"changeSetting",null),g([o.b],f.prototype,"checkPermission",null),g([o.b],f.prototype,"requestPermission",null),g([o.b],f.prototype,"requestAllPermission",null),g([o.b],f.prototype,"resetPermission",null),g([o.b],f.prototype,"setIconSpace",null),g([o.b],f.prototype,"openSearchSuggest",null),g([o.e],f.prototype,"sideScaleRatio",null),g([o.b],f.prototype,"toggleShowSettingHome",null),g([o.g],f.prototype,"showSettingHomeModal",void 0),g([o.b],f.prototype,"toggleSettingHomeModal",null),g([o.b],f.prototype,"closeSettingHomeModal",null),g([o.g],f.prototype,"webClickName",void 0),g([o.b],f.prototype,"setWebClickName",null);const m=new f;m.initSyncStore(u.g,["setting","permission","updatetime"],s.b),m.initAutoBackup("setting",["setting"]),Object(o.c)(()=>{m.firstSync&&m.setting.view.topBookmark&&m.checkPermission("topBookmark")},{delay:50}),Object(o.c)(()=>{m.firstSync&&m.setting.view.topUseful&&m.checkPermission("topUseful")},{delay:50}),Object(o.c)(()=>{m.firstSync&&m.setting.notice.gmail&&m.checkPermission("gmailNotice")},{delay:50}),Object(o.c)(()=>{d.a.firstSync&&d.a.needNotificationPermission&&m.checkPermission("todoNotice")},{delay:50}),Object(o.c)(()=>{m.firstSync&&m.setting.notice.gmailNumber&&m.checkPermission("gmailCount")},{delay:50}),Object(o.c)(()=>{m.firstSync&&m.setting.search.searchSuggest&&m.checkPermission("searchSuggest")},{delay:50}),Object(o.c)(()=>{m.firstSync&&1===m.permission.gmailNotice&&r.a.send({key:"bg-notice-gmail-permission",data:!0})}),Object(o.c)(()=>{if(m.firstSync){const{gmail:t,gmailVoice:e,gmailNumber:i}=m.setting.notice,{gmailCount:o,gmailNotice:n}=m.permission;r.a.send({key:"bg-notice-gmail-updated",data:{gmail:t&&1===n,gmailVoice:e,gmailNumber:i&&(1===n||1===o)}})}},{delay:100}),Object(o.c)(()=>{if(m.firstSync){const t={"--side-ratio":m.sideRatio,"--main-ratio":m.setting.view.scaleMain,"--icon-radius":Math.round(100*m.setting.icon.radius)+"%","--icon-font-color":m.setting.font.color,"--icon-font-size":Math.ceil(Math.max(m.setting.font.size*m.setting.view.scaleMain,12))+"px","--icon-opacity":m.setting.icon.opacity,"--icon-visible":m.setting.icon.isHideIconName?"hidden":"visible","--search-radius":""+m.setting.search.radius,"--search-opacity":m.setting.search.opacity};r.a.setStyle(t)}},{delay:50}),Object(o.c)(()=>{if(m.firstSync){let t=0,e=20;m.withPermissionTopBookmark&&(t+=36),m.withPermissionTopUseful&&(e+=26);const i={"--top-bar-height":t+"px","--settings-icon-top-offset":e+"px"};r.a.setStyle(i)}});const b=t=>{const e={"--search-height":t.searchHeight,"--search-width":t.searchWidth,"--search-margin-top":t.searchMarginTop,"--search-margin-bottom":t.searchMarginBottom,"--search-ratio":t.searchRatio,"--icon-box-width":t.iconBoxWidth,"--icon-box-height":t.iconBoxHeight,"--icon-one-height":t.iconOneHeight,"--icon-width":t.iconWidth,"--mini-icon-padding":t.miniIconPadding,"--icon-ratio":t.iconRatio,"--icon-row":m.setting.layout.row,"--icon-col":m.setting.layout.col,"--main-icons-margin":t.iconsMargin};r.a.setStyle(e)},y=(t=!0)=>{const e={row:m.setting.layout.row,col:m.setting.layout.col,rowGap:m.setting.layout.rowGap,colGap:m.setting.layout.colGap,iconScale:m.setting.icon.scale,searchScale:m.setting.search.scale,innerHeight:innerHeight,innerWidth:innerWidth,miniMode:m.setting.icon.miniMode,fontSize:m.setting.font.size,topUseful:m.withPermissionTopUseful,topBookmark:m.withPermissionTopBookmark,mainRatio:m.setting.view.scaleMain};if(t)requestIdleCallback(()=>{const t=Object(l.a)(e);b(t)});else{const t=Object(l.a)(e);b(t)}};Object(o.c)(()=>{m.firstSync&&y(!1)},{delay:40}),window.addEventListener("resize",r.a.throttle(()=>{y(!1)},56))},function(t,e,i){"use strict";i.r(e),i.d(e,"pluginStore",(function(){return d}));i(11),i(14),i(8);var o=i(4),n=i(75),r=i(399);class a extends r.a{opened(t){}}const s=Object(r.b)(new a);var l=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class c{constructor(){this.pluginsMap={"infinity://weather":"side-weather","infinity://todos":"side-todos","infinity://notes":"side-notes","infinity://history":"side-history","infinity://bookmarks":"side-bookmarks","infinity://extension":"side-extension","infinity://chrome-apps":"chrome-apps","infinity://wallpaper":"wallpaper","infinity://settings":"side-profile",search:"side-search",profile:"side-profile",editIcon:"side-editicon","side-tutorial":"side-tutorial"},this.pluginsTags={"side-weather":!1,"side-todos":!1,"side-notes":!1,"side-history":!1,"side-bookmarks":!1,"side-extension":!1,"chrome-apps":!1,"side-profile":!1,"side-search":!1,"side-editicon":!1,"side-tutorial":!1,wallpaper:!1},this.pluginViews=[],this.focusRepair=!1,Object(o.h)(()=>this.pluginViews.map(t=>t),([t])=>{s.opened(t)})}initDom(t){this.pluginsTags[t]=!0}async show(t){if(this.pluginViews.includes(t))return;const e=this.pluginsMap[t];if(!1===this.pluginsTags[e])try{await this.requestPermission(e),Object(o.i)(()=>{this.pluginsTags[e]=!0,this.pluginViews.push(t)})}catch(t){}else this.pluginViews.push(t)}async showRepair(){this.focusRepair=!0,this.show("profile"),localStorage.setItem("user-checkout-old-data","true")}blurRepair(){this.focusRepair=!1}requestPermission(t){switch(t){case"side-bookmarks":return n.a.request(["bookmarks"],["chrome://favicon/"]);case"side-extension":case"chrome-apps":return n.a.request(["management"]);case"side-history":return n.a.request(["history"],["chrome://favicon/"])}}hideLast(){const t=this.pluginViews.pop();return 0===this.pluginViews.length&&document.getElementsByTagName("newtab-main")[0].shadowRoot.querySelector(".swiper-content").style.setProperty("transform","none"),t}}l([o.g],c.prototype,"pluginsTags",void 0),l([o.b],c.prototype,"initDom",null),l([o.g],c.prototype,"pluginViews",void 0),l([o.g],c.prototype,"focusRepair",void 0),l([o.b],c.prototype,"show",null),l([o.b],c.prototype,"showRepair",null),l([o.b],c.prototype,"blurRepair",null),l([o.b],c.prototype,"hideLast",null);const d=new c},function(t,e,i){"use strict";i.r(e),i.d(e,"IConfirm",(function(){return s}));i(11),i(14),i(8);var o=i(1),n=o.b`.container {
  height: 100%;
  z-index: 100001;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-flow: column;
  justify-content: center;
  align-items: center;
}
.container[hidden] {
  display: none;
}
.container .top,
.container .bottom {
  flex-grow: 1;
}
.container .bottom {
  height: var(--modal-top, 15vh);
}
.body {
  width: 360px;
  min-height: 200px;
  padding: 30px;
  box-sizing: border-box;
  background: #ffffff;
  box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.18);
  border-radius: 6px;
}
.title,
.text {
  text-align: center;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  line-height: 24px;
}
.title {
  font-size: 18px;
  font-weight: bolder;
  margin-bottom: 30px;
}
.footer {
  margin-top: 40px;
  display: flex;
  justify-content: center;
}
.footer infinito-button {
  width: 120px;
  height: 42px;
  --hover-color: #eee;
  --hover-font-color: #000;
}
.footer infinito-button[primary] {
  --hover-color: #000;
  --hover-font-color: #fff;
}
.footer infinito-button:not(:last-of-type) {
  margin-right: 20px;
}
`,r=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let a=null,s=class extends o.a{constructor(){super(...arguments),this.defaultData={title:i18n("info"),text:"",onCancel:()=>{},onConfirm:()=>{}},this.show=!1,this.title=this.defaultData.title,this.text=this.defaultData.text,this.onCancel=()=>{},this.onConfirm=()=>{}}static create(){if(a)return a;const t=document.body;return a=document.createElement("i-confirm"),t.appendChild(a),a}firstUpdated(){}async performUpdate(){super.performUpdate()}shouldUpdate(t){return!t.has("show")||!1!==this.show||(setTimeout(()=>{this.requestUpdate()},1),!1)}updated(t){t.has("show")&&this.show&&(this.$container.animate([{opacity:"0"},{opacity:"1"}],{duration:300,easing:"ease-in"}),this.$body.animate([{opacity:"0",transform:"scale(0.8)"},{opacity:"1",transform:"none"}],{duration:300,easing:"ease-in"}))}toShow(t){this.show=!0;const e=Object.assign(Object.assign({},this.defaultData),t);this.title=e.title,this.text=e.text,this.onCancel=e.onCancel,this.onConfirm=e.onConfirm}toHide(){this.show=!1}render(){return o.e`
      <div class="container" .hidden="${!this.show}">
        <div class="top"></div>
        <section class="body">
          <div class="title">${this.title}</div>
          <div class="text">${this.text}</div>
          <div class="footer">
            <infinito-button
              @click="${()=>{this.toHide(),this.onCancel()}}"
            >${i18n("cancel")}</infinito-button>
            <infinito-button
              @click="${()=>{this.toHide(),this.onConfirm()}}"
              primary
            >${i18n("confirm")}</infinito-button>
          </div>
        </section>
        <div class="bottom"></div>
      </div>
    `}};s.styles=n,r([Object(o.g)({type:Boolean})],s.prototype,"show",void 0),r([Object(o.g)({type:String})],s.prototype,"title",void 0),r([Object(o.g)({type:String})],s.prototype,"text",void 0),r([Object(o.g)({attribute:!1})],s.prototype,"onCancel",void 0),r([Object(o.g)({attribute:!1})],s.prototype,"onConfirm",void 0),r([Object(o.h)(".container")],s.prototype,"$container",void 0),r([Object(o.h)(".body")],s.prototype,"$body",void 0),s=r([Object(o.c)("i-confirm")],s)},function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var o=i(95),n=i(116);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const r=new WeakMap,a=Object(n.e)(t=>e=>{if(!(e instanceof n.b))throw new Error("unsafeHTML can only be used in text bindings");const i=r.get(e);if(void 0!==i&&Object(o.h)(t)&&t===i.value&&e.value===i.fragment)return;const a=document.createElement("template");a.innerHTML=t;const s=document.importNode(a.content,!0);e.setValue(s),r.set(e,{value:t,fragment:s})})},function(t,e,i){t.exports=i.p+"images/error.f782e7c.png"},function(t,e,i){t.exports=i.p+"images/remind.896ff6f.png"},function(t,e,i){"use strict";i(11),i(14);var o=i(1),n=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let r=class extends o.a{constructor(){super(...arguments),this.src=""}render(){return o.e`
      <div class="svg" style="-webkit-mask-image: url(${this.src})"></div>
    `}};r.styles=o.b`
    :host{
      display: block;
      width: 30px;
      height: 30px;
      --size: 100%;
      -webkit-mask-size: var(--size);
      -webkit-mask-position: center;
      -webkit-mask-repeat: no-repeat;
      color: black;
    }
    .svg{
      width: inherit;
      height: inherit;
      -webkit-mask-size: inherit;
      -webkit-mask-position: inherit;
      color: inherit;
      background-color: currentcolor;
      -webkit-mask-repeat: inherit;
    }
  `,n([Object(o.g)({type:String})],r.prototype,"src",void 0),r=n([Object(o.c)("i-svg")],r)},,,function(t,e,i){
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */
t.exports=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function e(e){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?t(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var l="undefined"!=typeof window&&void 0!==window.document,c=l?window:{},d=!(!l||!c.document.documentElement)&&"ontouchstart"in c.document.documentElement,p=!!l&&"PointerEvent"in c,h="".concat("cropper","-crop"),u="".concat("cropper","-disabled"),g="".concat("cropper","-hidden"),f="".concat("cropper","-hide"),m="".concat("cropper","-invisible"),b="".concat("cropper","-modal"),y="".concat("cropper","-move"),v="".concat("cropper","Action"),w="".concat("cropper","Preview"),x=d?"touchstart":"mousedown",_=d?"touchmove":"mousemove",k=d?"touchend touchcancel":"mouseup",O=p?"pointerdown":x,A=p?"pointermove":_,S=p?"pointerup pointercancel":k,I=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,j=/^data:/,$=/^data:image\/jpeg;base64,/,C=/^img|canvas$/i,E={viewMode:0,dragMode:"crop",initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},T=Number.isNaN||c.isNaN;function P(t){return"number"==typeof t&&!T(t)}var R=function(t){return t>0&&t<1/0};function L(t){return void 0===t}function D(t){return"object"===i(t)&&null!==t}var M=Object.prototype.hasOwnProperty;function U(t){if(!D(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&M.call(i,"isPrototypeOf")}catch(t){return!1}}function N(t){return"function"==typeof t}var B=Array.prototype.slice;function F(t){return Array.from?Array.from(t):B.call(t)}function z(t,e){return t&&N(e)&&(Array.isArray(t)||P(t.length)?F(t).forEach((function(i,o){e.call(t,i,o,t)})):D(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var H=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];return D(t)&&i.length>0&&i.forEach((function(e){D(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},W=/\.\d*(?:0|9){12}\d*$/;function q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return W.test(t)?Math.round(t*e)/e:t}var G=/^width|height|left|top|marginLeft|marginTop$/;function V(t,e){var i=t.style;z(e,(function(t,e){G.test(e)&&P(t)&&(t="".concat(t,"px")),i[e]=t}))}function Q(t,e){if(e)if(P(t.length))z(t,(function(t){Q(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function Y(t,e){e&&(P(t.length)?z(t,(function(t){Y(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function X(t,e,i){e&&(P(t.length)?z(t,(function(t){X(t,e,i)})):i?Q(t,e):Y(t,e))}var Z=/([a-z\d])([A-Z])/g;function K(t){return t.replace(Z,"$1-$2").toLowerCase()}function J(t,e){return D(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(K(e)))}function tt(t,e,i){D(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(K(e)),i)}var et=/\s\s*/,it=function(){var t=!1;if(l){var e=!1,i=function(){},o=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});c.addEventListener("test",i,o),c.removeEventListener("test",i,o)}return t}();function ot(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(et).forEach((function(e){if(!it){var r=t.listeners;r&&r[e]&&r[e][i]&&(n=r[e][i],delete r[e][i],0===Object.keys(r[e]).length&&delete r[e],0===Object.keys(r).length&&delete t.listeners)}t.removeEventListener(e,n,o)}))}function nt(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(et).forEach((function(e){if(o.once&&!it){var r=t.listeners,a=void 0===r?{}:r;n=function(){delete a[e][i],t.removeEventListener(e,n,o);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];i.apply(t,s)},a[e]||(a[e]={}),a[e][i]&&t.removeEventListener(e,a[e][i],o),a[e][i]=n,t.listeners=a}t.addEventListener(e,n,o)}))}function rt(t,e,i){var o;return N(Event)&&N(CustomEvent)?o=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(o=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(o)}function at(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var st=c.location,lt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ct(t){var e=t.match(lt);return null!==e&&(e[1]!==st.protocol||e[2]!==st.hostname||e[3]!==st.port)}function dt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function pt(t){var e=t.rotate,i=t.scaleX,o=t.scaleY,n=t.translateX,r=t.translateY,a=[];P(n)&&0!==n&&a.push("translateX(".concat(n,"px)")),P(r)&&0!==r&&a.push("translateY(".concat(r,"px)")),P(e)&&0!==e&&a.push("rotate(".concat(e,"deg)")),P(i)&&1!==i&&a.push("scaleX(".concat(i,")")),P(o)&&1!==o&&a.push("scaleY(".concat(o,")"));var s=a.length?a.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function ht(t,i){var o=t.pageX,n=t.pageY,r={endX:o,endY:n};return i?r:e({startX:o,startY:n},r)}function ut(t){var e=t.aspectRatio,i=t.height,o=t.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",r=R(o),a=R(i);if(r&&a){var s=i*e;"contain"===n&&s>o||"cover"===n&&s<o?i=o/e:o=i*e}else r?i=o/e:a&&(o=i*e);return{width:o,height:i}}function gt(t,e,i,o){var n=e.aspectRatio,r=e.naturalWidth,s=e.naturalHeight,l=e.rotate,c=void 0===l?0:l,d=e.scaleX,p=void 0===d?1:d,h=e.scaleY,u=void 0===h?1:h,g=i.aspectRatio,f=i.naturalWidth,m=i.naturalHeight,b=o.fillColor,y=void 0===b?"transparent":b,v=o.imageSmoothingEnabled,w=void 0===v||v,x=o.imageSmoothingQuality,_=void 0===x?"low":x,k=o.maxWidth,O=void 0===k?1/0:k,A=o.maxHeight,S=void 0===A?1/0:A,I=o.minWidth,j=void 0===I?0:I,$=o.minHeight,C=void 0===$?0:$,E=document.createElement("canvas"),T=E.getContext("2d"),P=ut({aspectRatio:g,width:O,height:S}),R=ut({aspectRatio:g,width:j,height:C},"cover"),L=Math.min(P.width,Math.max(R.width,f)),D=Math.min(P.height,Math.max(R.height,m)),M=ut({aspectRatio:n,width:O,height:S}),U=ut({aspectRatio:n,width:j,height:C},"cover"),N=Math.min(M.width,Math.max(U.width,r)),B=Math.min(M.height,Math.max(U.height,s)),F=[-N/2,-B/2,N,B];return E.width=q(L),E.height=q(D),T.fillStyle=y,T.fillRect(0,0,L,D),T.save(),T.translate(L/2,D/2),T.rotate(c*Math.PI/180),T.scale(p,u),T.imageSmoothingEnabled=w,T.imageSmoothingQuality=_,T.drawImage.apply(T,[t].concat(a(F.map((function(t){return Math.floor(q(t))}))))),T.restore(),E}var ft=String.fromCharCode,mt=/^data:.*,/;function bt(t){var e,i=new DataView(t);try{var o,n,r;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var a=i.byteLength,s=2;s+1<a;){if(255===i.getUint8(s)&&225===i.getUint8(s+1)){n=s;break}s+=1}if(n){var l=n+10;if("Exif"===function(t,e,i){var o="";i+=e;for(var n=e;n<i;n+=1)o+=ft(t.getUint8(n));return o}(i,n+4,4)){var c=i.getUint16(l);if(((o=18761===c)||19789===c)&&42===i.getUint16(l+2,o)){var d=i.getUint32(l+4,o);d>=8&&(r=l+d)}}}if(r){var p,h,u=i.getUint16(r,o);for(h=0;h<u;h+=1)if(p=r+12*h+2,274===i.getUint16(p,o)){p+=8,e=i.getUint16(p,o),i.setUint16(p,1,o);break}}}catch(t){e=1}return e}var yt={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,o=this.cropper,n=Number(e.minContainerWidth),r=Number(e.minContainerHeight);Q(o,g),Y(t,g);var a={width:Math.max(i.offsetWidth,n>=0?n:200),height:Math.max(i.offsetHeight,r>=0?r:100)};this.containerData=a,V(o,{width:a.width,height:a.height}),Q(t,g),Y(o,g)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,o=Math.abs(e.rotate)%180==90,n=o?e.naturalHeight:e.naturalWidth,r=o?e.naturalWidth:e.naturalHeight,a=n/r,s=t.width,l=t.height;t.height*a>t.width?3===i?s=t.height*a:l=t.width/a:3===i?l=t.width/a:s=t.height*a;var c={aspectRatio:a,naturalWidth:n,naturalHeight:r,width:s,height:l};this.canvasData=c,this.limited=1===i||2===i,this.limitCanvas(!0,!0),c.width=Math.min(Math.max(c.width,c.minWidth),c.maxWidth),c.height=Math.min(Math.max(c.height,c.minHeight),c.maxHeight),c.left=(t.width-c.width)/2,c.top=(t.height-c.height)/2,c.oldLeft=c.left,c.oldTop=c.top,this.initialCanvasData=H({},c)},limitCanvas:function(t,e){var i=this.options,o=this.containerData,n=this.canvasData,r=this.cropBoxData,a=i.viewMode,s=n.aspectRatio,l=this.cropped&&r;if(t){var c=Number(i.minCanvasWidth)||0,d=Number(i.minCanvasHeight)||0;a>1?(c=Math.max(c,o.width),d=Math.max(d,o.height),3===a&&(d*s>c?c=d*s:d=c/s)):a>0&&(c?c=Math.max(c,l?r.width:0):d?d=Math.max(d,l?r.height:0):l&&(c=r.width,(d=r.height)*s>c?c=d*s:d=c/s));var p=ut({aspectRatio:s,width:c,height:d});c=p.width,d=p.height,n.minWidth=c,n.minHeight=d,n.maxWidth=1/0,n.maxHeight=1/0}if(e)if(a>(l?0:1)){var h=o.width-n.width,u=o.height-n.height;n.minLeft=Math.min(0,h),n.minTop=Math.min(0,u),n.maxLeft=Math.max(0,h),n.maxTop=Math.max(0,u),l&&this.limited&&(n.minLeft=Math.min(r.left,r.left+(r.width-n.width)),n.minTop=Math.min(r.top,r.top+(r.height-n.height)),n.maxLeft=r.left,n.maxTop=r.top,2===a&&(n.width>=o.width&&(n.minLeft=Math.min(0,h),n.maxLeft=Math.max(0,h)),n.height>=o.height&&(n.minTop=Math.min(0,u),n.maxTop=Math.max(0,u))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=o.width,n.maxTop=o.height},renderCanvas:function(t,e){var i=this.canvasData,o=this.imageData;if(e){var n=function(t){var e=t.width,i=t.height,o=t.degree;if(90==(o=Math.abs(o)%180))return{width:i,height:e};var n=o%90*Math.PI/180,r=Math.sin(n),a=Math.cos(n),s=e*a+i*r,l=e*r+i*a;return o>90?{width:l,height:s}:{width:s,height:l}}({width:o.naturalWidth*Math.abs(o.scaleX||1),height:o.naturalHeight*Math.abs(o.scaleY||1),degree:o.rotate||0}),r=n.width,a=n.height,s=i.width*(r/i.naturalWidth),l=i.height*(a/i.naturalHeight);i.left-=(s-i.width)/2,i.top-=(l-i.height)/2,i.width=s,i.height=l,i.aspectRatio=r/a,i.naturalWidth=r,i.naturalHeight=a,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,V(this.canvas,H({width:i.width,height:i.height},pt({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,o=i.naturalWidth*(e.width/e.naturalWidth),n=i.naturalHeight*(e.height/e.naturalHeight);H(i,{width:o,height:n,left:(e.width-o)/2,top:(e.height-n)/2}),V(this.image,H({width:i.width,height:i.height},pt(H({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,o=Number(t.autoCropArea)||.8,n={width:e.width,height:e.height};i&&(e.height*i>e.width?n.height=n.width/i:n.width=n.height*i),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*o),n.height=Math.max(n.minHeight,n.height*o),n.left=e.left+(e.width-n.width)/2,n.top=e.top+(e.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=H({},n)},limitCropBox:function(t,e){var i=this.options,o=this.containerData,n=this.canvasData,r=this.cropBoxData,a=this.limited,s=i.aspectRatio;if(t){var l=Number(i.minCropBoxWidth)||0,c=Number(i.minCropBoxHeight)||0,d=a?Math.min(o.width,n.width,n.width+n.left,o.width-n.left):o.width,p=a?Math.min(o.height,n.height,n.height+n.top,o.height-n.top):o.height;l=Math.min(l,o.width),c=Math.min(c,o.height),s&&(l&&c?c*s>l?c=l/s:l=c*s:l?c=l/s:c&&(l=c*s),p*s>d?p=d/s:d=p*s),r.minWidth=Math.min(l,d),r.minHeight=Math.min(c,p),r.maxWidth=d,r.maxHeight=p}e&&(a?(r.minLeft=Math.max(0,n.left),r.minTop=Math.max(0,n.top),r.maxLeft=Math.min(o.width,n.left+n.width)-r.width,r.maxTop=Math.min(o.height,n.top+n.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=o.width-r.width,r.maxTop=o.height-r.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&tt(this.face,v,i.width>=e.width&&i.height>=e.height?"move":"all"),V(this.cropBox,H({width:i.width,height:i.height},pt({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),rt(this.element,"crop",this.getData())}},vt={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,o=e?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",r=document.createElement("img");if(e&&(r.crossOrigin=e),r.src=o,r.alt=n,this.viewBox.appendChild(r),this.viewBoxImage=r,i){var a=i;"string"==typeof i?a=t.ownerDocument.querySelectorAll(i):i.querySelector&&(a=[i]),this.previews=a,z(a,(function(t){var i=document.createElement("img");tt(t,w,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=o,i.alt=n,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))}},resetPreview:function(){z(this.previews,(function(t){var e=J(t,w);V(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(t,e){if(D(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(K(e)))}(t,w)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,o=i.width,n=i.height,r=t.width,a=t.height,s=i.left-e.left-t.left,l=i.top-e.top-t.top;this.cropped&&!this.disabled&&(V(this.viewBoxImage,H({width:r,height:a},pt(H({translateX:-s,translateY:-l},t)))),z(this.previews,(function(e){var i=J(e,w),c=i.width,d=i.height,p=c,h=d,u=1;o&&(h=n*(u=c/o)),n&&h>d&&(p=o*(u=d/n),h=d),V(e,{width:p,height:h}),V(e.getElementsByTagName("img")[0],H({width:r*u,height:a*u},pt(H({translateX:-s*u,translateY:-l*u},t))))})))}},wt={bind:function(){var t=this.element,e=this.options,i=this.cropper;N(e.cropstart)&&nt(t,"cropstart",e.cropstart),N(e.cropmove)&&nt(t,"cropmove",e.cropmove),N(e.cropend)&&nt(t,"cropend",e.cropend),N(e.crop)&&nt(t,"crop",e.crop),N(e.zoom)&&nt(t,"zoom",e.zoom),nt(i,O,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&nt(i,"wheel",this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&nt(i,"dblclick",this.onDblclick=this.dblclick.bind(this)),nt(t.ownerDocument,A,this.onCropMove=this.cropMove.bind(this)),nt(t.ownerDocument,S,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&nt(window,"resize",this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;N(e.cropstart)&&ot(t,"cropstart",e.cropstart),N(e.cropmove)&&ot(t,"cropmove",e.cropmove),N(e.cropend)&&ot(t,"cropend",e.cropend),N(e.crop)&&ot(t,"crop",e.crop),N(e.zoom)&&ot(t,"zoom",e.zoom),ot(i,O,this.onCropStart),e.zoomable&&e.zoomOnWheel&&ot(i,"wheel",this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&ot(i,"dblclick",this.onDblclick),ot(t.ownerDocument,A,this.onCropMove),ot(t.ownerDocument,S,this.onCropEnd),e.responsive&&ot(window,"resize",this.onResize)}},xt={resize:function(){if(!this.disabled){var t,e,i=this.options,o=this.container,n=this.containerData,r=o.offsetWidth/n.width,a=o.offsetHeight/n.height,s=Math.abs(r-1)>Math.abs(a-1)?r:a;1!==s&&(i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(z(t,(function(e,i){t[i]=e*s}))),this.setCropBoxData(z(e,(function(t,i){e[i]=t*s})))))}},dblclick:function(){var t,e;this.disabled||"none"===this.options.dragMode||this.setDragMode((t=this.dragBox,e=h,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?"move":"crop"))},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,o=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?o=t.deltaY>0?1:-1:t.wheelDelta?o=-t.wheelDelta/120:t.detail&&(o=t.detail>0?1:-1),this.zoom(-o*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(P(e)&&1!==e||P(i)&&0!==i||t.ctrlKey))){var o,n=this.options,r=this.pointers;t.changedTouches?z(t.changedTouches,(function(t){r[t.identifier]=ht(t)})):r[t.pointerId||0]=ht(t),o=Object.keys(r).length>1&&n.zoomable&&n.zoomOnTouch?"zoom":J(t.target,v),I.test(o)&&!1!==rt(this.element,"cropstart",{originalEvent:t,action:o})&&(t.preventDefault(),this.action=o,this.cropping=!1,"crop"===o&&(this.cropping=!0,Q(this.dragBox,b)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==rt(this.element,"cropmove",{originalEvent:t,action:e})&&(t.changedTouches?z(t.changedTouches,(function(t){H(i[t.identifier]||{},ht(t,!0))})):H(i[t.pointerId||0]||{},ht(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?z(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,X(this.dragBox,b,this.cropped&&this.options.modal)),rt(this.element,"cropend",{originalEvent:t,action:e}))}}},_t={change:function(t){var i,o=this.options,n=this.canvasData,r=this.containerData,a=this.cropBoxData,s=this.pointers,l=this.action,c=o.aspectRatio,d=a.left,p=a.top,h=a.width,u=a.height,f=d+h,m=p+u,b=0,y=0,v=r.width,w=r.height,x=!0;!c&&t.shiftKey&&(c=h&&u?h/u:1),this.limited&&(b=a.minLeft,y=a.minTop,v=b+Math.min(r.width,n.width,n.left+n.width),w=y+Math.min(r.height,n.height,n.top+n.height));var _=s[Object.keys(s)[0]],k={x:_.endX-_.startX,y:_.endY-_.startY},O=function(t){switch(t){case"e":f+k.x>v&&(k.x=v-f);break;case"w":d+k.x<b&&(k.x=b-d);break;case"n":p+k.y<y&&(k.y=y-p);break;case"s":m+k.y>w&&(k.y=w-m)}};switch(l){case"all":d+=k.x,p+=k.y;break;case"e":if(k.x>=0&&(f>=v||c&&(p<=y||m>=w))){x=!1;break}O("e"),(h+=k.x)<0&&(l="w",d-=h=-h),c&&(u=h/c,p+=(a.height-u)/2);break;case"n":if(k.y<=0&&(p<=y||c&&(d<=b||f>=v))){x=!1;break}O("n"),u-=k.y,p+=k.y,u<0&&(l="s",p-=u=-u),c&&(h=u*c,d+=(a.width-h)/2);break;case"w":if(k.x<=0&&(d<=b||c&&(p<=y||m>=w))){x=!1;break}O("w"),h-=k.x,d+=k.x,h<0&&(l="e",d-=h=-h),c&&(u=h/c,p+=(a.height-u)/2);break;case"s":if(k.y>=0&&(m>=w||c&&(d<=b||f>=v))){x=!1;break}O("s"),(u+=k.y)<0&&(l="n",p-=u=-u),c&&(h=u*c,d+=(a.width-h)/2);break;case"ne":if(c){if(k.y<=0&&(p<=y||f>=v)){x=!1;break}O("n"),u-=k.y,p+=k.y,h=u*c}else O("n"),O("e"),k.x>=0?f<v?h+=k.x:k.y<=0&&p<=y&&(x=!1):h+=k.x,k.y<=0?p>y&&(u-=k.y,p+=k.y):(u-=k.y,p+=k.y);h<0&&u<0?(l="sw",p-=u=-u,d-=h=-h):h<0?(l="nw",d-=h=-h):u<0&&(l="se",p-=u=-u);break;case"nw":if(c){if(k.y<=0&&(p<=y||d<=b)){x=!1;break}O("n"),u-=k.y,p+=k.y,h=u*c,d+=a.width-h}else O("n"),O("w"),k.x<=0?d>b?(h-=k.x,d+=k.x):k.y<=0&&p<=y&&(x=!1):(h-=k.x,d+=k.x),k.y<=0?p>y&&(u-=k.y,p+=k.y):(u-=k.y,p+=k.y);h<0&&u<0?(l="se",p-=u=-u,d-=h=-h):h<0?(l="ne",d-=h=-h):u<0&&(l="sw",p-=u=-u);break;case"sw":if(c){if(k.x<=0&&(d<=b||m>=w)){x=!1;break}O("w"),h-=k.x,d+=k.x,u=h/c}else O("s"),O("w"),k.x<=0?d>b?(h-=k.x,d+=k.x):k.y>=0&&m>=w&&(x=!1):(h-=k.x,d+=k.x),k.y>=0?m<w&&(u+=k.y):u+=k.y;h<0&&u<0?(l="ne",p-=u=-u,d-=h=-h):h<0?(l="se",d-=h=-h):u<0&&(l="nw",p-=u=-u);break;case"se":if(c){if(k.x>=0&&(f>=v||m>=w)){x=!1;break}O("e"),u=(h+=k.x)/c}else O("s"),O("e"),k.x>=0?f<v?h+=k.x:k.y>=0&&m>=w&&(x=!1):h+=k.x,k.y>=0?m<w&&(u+=k.y):u+=k.y;h<0&&u<0?(l="nw",p-=u=-u,d-=h=-h):h<0?(l="sw",d-=h=-h):u<0&&(l="ne",p-=u=-u);break;case"move":this.move(k.x,k.y),x=!1;break;case"zoom":this.zoom(function(t){var i=e({},t),o=0;return z(t,(function(t,e){delete i[e],z(i,(function(e){var i=Math.abs(t.startX-e.startX),n=Math.abs(t.startY-e.startY),r=Math.abs(t.endX-e.endX),a=Math.abs(t.endY-e.endY),s=Math.sqrt(i*i+n*n),l=(Math.sqrt(r*r+a*a)-s)/s;Math.abs(l)>Math.abs(o)&&(o=l)}))})),o}(s),t),x=!1;break;case"crop":if(!k.x||!k.y){x=!1;break}i=at(this.cropper),d=_.startX-i.left,p=_.startY-i.top,h=a.minWidth,u=a.minHeight,k.x>0?l=k.y>0?"se":"ne":k.x<0&&(d-=h,l=k.y>0?"sw":"nw"),k.y<0&&(p-=u),this.cropped||(Y(this.cropBox,g),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}x&&(a.width=h,a.height=u,a.left=d,a.top=p,this.action=l,this.renderCropBox()),z(s,(function(t){t.startX=t.endX,t.startY=t.endY}))}},kt={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Q(this.dragBox,b),Y(this.cropBox,g),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=H({},this.initialImageData),this.canvasData=H({},this.initialCanvasData),this.cropBoxData=H({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(H(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Y(this.dragBox,b),Q(this.cropBox,g)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,z(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Y(this.cropper,u)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Q(this.cropper,u)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,o=i.left,n=i.top;return this.moveTo(L(t)?t:o+Number(t),L(e)?e:n+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,o=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(P(t)&&(i.left=t,o=!0),P(e)&&(i.top=e,o=!0),o&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var o=this.options,n=this.canvasData,r=n.width,a=n.height,s=n.naturalWidth,l=n.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&o.zoomable){var c=s*t,d=l*t;if(!1===rt(this.element,"zoom",{ratio:t,oldRatio:r/s,originalEvent:i}))return this;if(i){var p=this.pointers,h=at(this.cropper),u=p&&Object.keys(p).length?function(t){var e=0,i=0,o=0;return z(t,(function(t){var n=t.startX,r=t.startY;e+=n,i+=r,o+=1})),{pageX:e/=o,pageY:i/=o}}(p):{pageX:i.pageX,pageY:i.pageY};n.left-=(c-r)*((u.pageX-h.left-n.left)/r),n.top-=(d-a)*((u.pageY-h.top-n.top)/a)}else U(e)&&P(e.x)&&P(e.y)?(n.left-=(c-r)*((e.x-n.left)/r),n.top-=(d-a)*((e.y-n.top)/a)):(n.left-=(c-r)/2,n.top-=(d-a)/2);n.width=c,n.height=d,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return P(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,P(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(P(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,o=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(P(t)&&(i.scaleX=t,o=!0),P(e)&&(i.scaleY=e,o=!0),o&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,o=this.imageData,n=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){t={x:r.left-n.left,y:r.top-n.top,width:r.width,height:r.height};var a=o.width/o.naturalWidth;if(z(t,(function(e,i){t[i]=e/a})),e){var s=Math.round(t.y+t.height),l=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=l-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=o.rotate||0),i.scalable&&(t.scaleX=o.scaleX||1,t.scaleY=o.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,o=this.canvasData,n={};if(this.ready&&!this.disabled&&U(t)){var r=!1;e.rotatable&&P(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,r=!0),e.scalable&&(P(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,r=!0),P(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var a=i.width/i.naturalWidth;P(t.x)&&(n.left=t.x*a+o.left),P(t.y)&&(n.top=t.y*a+o.top),P(t.width)&&(n.width=t.width*a),P(t.height)&&(n.height=t.height*a),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?H({},this.containerData):{}},getImageData:function(){return this.sized?H({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&z(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&U(t)&&(P(t.left)&&(e.left=t.left),P(t.top)&&(e.top=t.top),P(t.width)?(e.width=t.width,e.height=t.width/i):P(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,o=this.cropBoxData,n=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&U(t)&&(P(t.left)&&(o.left=t.left),P(t.top)&&(o.top=t.top),P(t.width)&&t.width!==o.width&&(e=!0,o.width=t.width),P(t.height)&&t.height!==o.height&&(i=!0,o.height=t.height),n&&(e?o.height=o.width/n:i&&(o.width=o.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=gt(this.image,this.imageData,e,t);if(!this.cropped)return i;var o=this.getData(),n=o.x,r=o.y,s=o.width,l=o.height,c=i.width/Math.floor(e.naturalWidth);1!==c&&(n*=c,r*=c,s*=c,l*=c);var d=s/l,p=ut({aspectRatio:d,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),h=ut({aspectRatio:d,width:t.minWidth||0,height:t.minHeight||0},"cover"),u=ut({aspectRatio:d,width:t.width||(1!==c?i.width:s),height:t.height||(1!==c?i.height:l)}),g=u.width,f=u.height;g=Math.min(p.width,Math.max(h.width,g)),f=Math.min(p.height,Math.max(h.height,f));var m=document.createElement("canvas"),b=m.getContext("2d");m.width=q(g),m.height=q(f),b.fillStyle=t.fillColor||"transparent",b.fillRect(0,0,g,f);var y=t.imageSmoothingEnabled,v=void 0===y||y,w=t.imageSmoothingQuality;b.imageSmoothingEnabled=v,w&&(b.imageSmoothingQuality=w);var x,_,k,O,A,S,I=i.width,j=i.height,$=n,C=r;$<=-s||$>I?($=0,x=0,k=0,A=0):$<=0?(k=-$,$=0,A=x=Math.min(I,s+$)):$<=I&&(k=0,A=x=Math.min(s,I-$)),x<=0||C<=-l||C>j?(C=0,_=0,O=0,S=0):C<=0?(O=-C,C=0,S=_=Math.min(j,l+C)):C<=j&&(O=0,S=_=Math.min(l,j-C));var E=[$,C,x,_];if(A>0&&S>0){var T=g/s;E.push(k*T,O*T,A*T,S*T)}return b.drawImage.apply(b,[i].concat(a(E.map((function(t){return Math.floor(q(t))}))))),m},setAspectRatio:function(t){var e=this.options;return this.disabled||L(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,o=this.face;if(this.ready&&!this.disabled){var n="crop"===t,r=e.movable&&"move"===t;t=n||r?t:"none",e.dragMode=t,tt(i,v,t),X(i,h,n),X(i,y,r),e.cropBoxMovable||(tt(o,v,t),X(o,h,n),X(o,y,r))}return this}},Ot=c.Cropper,At=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,t),!e||!C.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=H({},E,U(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var e,i,r;return e=t,r=[{key:"noConflict",value:function(){return window.Cropper=Ot,t}},{key:"setDefaults",value:function(t){H(E,U(t)&&t)}}],(i=[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e.cropper){if(e.cropper=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,o=this.options;if(o.rotatable||o.scalable||(o.checkOrientation=!1),o.checkOrientation&&window.ArrayBuffer)if(j.test(t))$.test(t)?this.read((n=t.replace(mt,""),r=atob(n),a=new ArrayBuffer(r.length),z(s=new Uint8Array(a),(function(t,e){s[e]=r.charCodeAt(e)})),a)):this.clone();else{var n,r,a,s,l=new XMLHttpRequest,c=this.clone.bind(this);this.reloading=!0,this.xhr=l,l.onabort=c,l.onerror=c,l.ontimeout=c,l.onprogress=function(){"image/jpeg"!==l.getResponseHeader("content-type")&&l.abort()},l.onload=function(){e.read(l.response)},l.onloadend=function(){e.reloading=!1,e.xhr=null},o.checkCrossOrigin&&ct(t)&&i.crossOrigin&&(t=dt(t)),l.open("GET",t,!0),l.responseType="arraybuffer",l.withCredentials="use-credentials"===i.crossOrigin,l.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,o=bt(t),n=0,r=1,a=1;if(o>1){this.url=function(t,e){for(var i=[],o=new Uint8Array(t);o.length>0;)i.push(ft.apply(null,F(o.subarray(0,8192)))),o=o.subarray(8192);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}(t,"image/jpeg");var s=function(t){var e=0,i=1,o=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:o=-1;break;case 5:e=90,o=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:o}}(o);n=s.rotate,r=s.scaleX,a=s.scaleY}e.rotatable&&(i.rotate=n),e.scalable&&(i.scaleX=r,i.scaleY=a),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,o=e;this.options.checkCrossOrigin&&ct(e)&&(i||(i="anonymous"),o=dt(e)),this.crossOrigin=i,this.crossOriginUrl=o;var n=document.createElement("img");i&&(n.crossOrigin=i),n.src=o||e,n.alt=t.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),Q(n,f),t.parentNode.insertBefore(n,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=c.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(c.navigator.userAgent),o=function(e,i){H(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=H({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var n=document.createElement("img"),r=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){o(n.width,n.height),i||r.removeChild(n)},n.src=e.src,i||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",r.appendChild(n))}else o(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,o=t.parentNode,n=document.createElement("div");n.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var r=n.querySelector(".".concat("cropper","-container")),a=r.querySelector(".".concat("cropper","-canvas")),s=r.querySelector(".".concat("cropper","-drag-box")),l=r.querySelector(".".concat("cropper","-crop-box")),c=l.querySelector(".".concat("cropper","-face"));this.container=o,this.cropper=r,this.canvas=a,this.dragBox=s,this.cropBox=l,this.viewBox=r.querySelector(".".concat("cropper","-view-box")),this.face=c,a.appendChild(i),Q(t,g),o.insertBefore(r,t.nextSibling),this.isImg||Y(i,f),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,Q(l,g),e.guides||Q(l.getElementsByClassName("".concat("cropper","-dashed")),g),e.center||Q(l.getElementsByClassName("".concat("cropper","-center")),g),e.background&&Q(r,"".concat("cropper","-bg")),e.highlight||Q(c,m),e.cropBoxMovable&&(Q(c,y),tt(c,v,"all")),e.cropBoxResizable||(Q(l.getElementsByClassName("".concat("cropper","-line")),g),Q(l.getElementsByClassName("".concat("cropper","-point")),g)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),N(e.ready)&&nt(t,"ready",e.ready,{once:!0}),rt(t,"ready")}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Y(this.element,g))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}])&&n(e.prototype,i),r&&n(e,r),t}();return H(At.prototype,yt,vt,wt,xt,_t,kt),At}()},function(t,e,i){t.exports=i.p+"images/color.321ebce.jpg"},function(t,e,i){t.exports=i.p+"images/question.b0f36f5.svg"},function(t,e,i){var o=i(540),n=i(160);t.exports=function(t,e,i){var r=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return n(i)&&(r="leading"in i?!!i.leading:r,a="trailing"in i?!!i.trailing:a),o(t,e,{leading:r,maxWait:e,trailing:a})}},,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i(11),i(14);var o=i(1),n=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let r=class extends o.a{constructor(){super(...arguments),this.type="",this.iconfont=!1}render(){return this.iconfont?o.e`
        <svg part="svg">
          <use href="${i(525)}#${this.type}" style=${this.color?`fill: ${this.color};`:""}></use>
        </svg>
      `:o.e`
        <svg part="svg">
          <use href="${i(526)}#${this.type}"></use>
        </svg>
      `}};r.styles=o.b`
    :host {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 20px;
      height: 20px;
      color: #333;
    }
    svg {
      width: inherit;
      height: inherit;
      color: inherit;
      fill: currentColor;
    }
  `,n([Object(o.g)({type:String})],r.prototype,"type",void 0),n([Object(o.g)({type:Boolean})],r.prototype,"iconfont",void 0),n([Object(o.g)({type:String})],r.prototype,"color",void 0),r=n([Object(o.c)("i-usesvg")],r)},,function(t,e,i){"use strict";i(11),i(14),i(8);var o=i(1),n=i(385),r=(i(489),o.b`:host {
  display: block;
  position: relative;
  z-index: 999;
}
.color-pick-list {
  width: 100%;
  box-sizing: border-box;
  padding: 1px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  backface-visibility: hidden;
}
.color-item {
  position: relative;
  width: 18px;
  height: 18px;
  box-sizing: border-box;
  border-radius: 6px;
  cursor: pointer;
  background-color: currentColor;
}
.color-item::before {
  content: "";
  display: none;
  width: 0px;
  height: 0px;
  color: #fff;
  border-width: 0px 0px 2px 2px;
  padding: 3px 3px 3px 6px;
  border-style: solid;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -78%) rotate(-45deg);
}
.color-item.active::before {
  display: block;
}
.color-item.transparent {
  color: #ddd !important;
  background-position: 0 0, 5px 5px;
  background-size: 10px 10px;
  background-image: linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0), linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0);
}
.color-item.transparent i-svg {
  color: #fff !important;
  background: #ddd !important;
}
.color-item.transparent.active {
  background: #ddd;
  background-image: none;
}
.color-picker {
  position: absolute;
  bottom: 30px;
  right: 0;
  transform-origin: bottom right;
}
.side {
  transform: scale(calc(1 / var(--side-ratio)));
}
`),a=i(493),s=i.n(a),l=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let c=class extends o.a{constructor(){super(...arguments),this.value="",this.offsetRight=0,this.side=!1,this.name="",this.colors=["rgba(255,71,52,1)","rgba(255,122,9,1)","rgba(255,207,12,1)","rgba(42,233,121,1)","rgba(44,214,223,1)","rgba(0,116,255,1)","rgba(138,49,255,1)","transparent"],this.pickerStatus=!1,this.activeIndex=-1,this._close_picker_lock=!1,this._preClosePicker=()=>{this._close_picker_lock&&(this._close_picker_lock=!1)},this._postClosePicker=()=>{this._close_picker_lock||this._closePicker()},this._closePicker=()=>{this.pickerStatus=!1}}firstUpdated(){this._importColor(),this.resetActiveIndex(),window.addEventListener("mousedown",this._preClosePicker),window.addEventListener("mouseup",this._postClosePicker)}disconnectedCallback(){this._closePicker(),window.removeEventListener("mousedown",this._preClosePicker),window.removeEventListener("mouseup",this._postClosePicker),super.disconnectedCallback()}resetActiveIndex(){this.activeIndex=this.colors.findIndex(t=>t===this.value)}_importColor(){const t=document.querySelector("#script-vue"),e=document.querySelector("#script-color");if(!t){const t=document.createElement("script");t.src="/vendor/vue.min.js",t.id="script-vue",t.onload=()=>{if(!e){const t=document.createElement("script");t.src="/vendor/color-picker.min.js",t.id="script-color",document.body.append(t)}},document.body.append(t)}}_showPicker(t){t.stopPropagation(),this.pickerStatus=!0,"transparent"===this.value&&(this.value="#ff4734",this.activeIndex=-1,this._emitChange())}_pickColor(t){if(t instanceof CustomEvent){const{rgba:e}=t.detail[0],{r:i,g:o,b:n,a:r}=e;this.value=`rgba(${[i,o,n,r].join(",")})`,this.activeIndex=-1,this._emitChange()}}_pickThisColor(t){this.value=this.colors[t],this.activeIndex=t,this._emitChange()}_emitChange(){const t=new CustomEvent("on-change",{detail:{value:this.value}});this.dispatchEvent(t)}async performUpdate(){this.resetActiveIndex(),super.performUpdate()}updated(t){if(t.has("pickerStatus")&&!0===this.pickerStatus)try{this.$colorPicker.scrollIntoView({block:"nearest",behavior:"smooth"})}catch(t){}}render(){return o.e`
      <section class="color-pick-list">
        ${this.colors.map((t,e)=>o.e`<span
            @click="${()=>this._pickThisColor(e)}"
            class="${Object(n.a)({active:e===this.activeIndex,"color-item":!0,transparent:"transparent"===t})}"
            style="color:${t.includes("255,255,255")?"rgb(221,221,221)":t};"
          >
          </span>`)}
        <span
          @click="${this._showPicker}"
          class="color-item color-dropper ${-1===this.activeIndex&&this.value?"active":""}"
          style="background: url(${s.a}) no-repeat center; background-size: contain;"
        >
        </span>
      </section>
      <section
        @click="${t=>{t.stopPropagation()}}"
        class="color-picker ${this.side?"side":""}"
        .hidden=${!this.pickerStatus}
        style="margin-right:${this.offsetRight}px"
      >
        ${this.pickerStatus?o.e` <color-picker
              @mousedown=${t=>{t.stopPropagation(),this._close_picker_lock=!0}}
              value="${this.value}"
              @input="${this._pickColor}"
            ></color-picker>`:null}
      </section>
    `}};c.styles=r,l([Object(o.g)({type:String})],c.prototype,"value",void 0),l([Object(o.g)({type:Number})],c.prototype,"offsetRight",void 0),l([Object(o.g)({type:Boolean})],c.prototype,"side",void 0),l([Object(o.g)({type:String})],c.prototype,"name",void 0),l([Object(o.g)({type:Array})],c.prototype,"colors",void 0),l([Object(o.f)()],c.prototype,"pickerStatus",void 0),l([Object(o.f)()],c.prototype,"activeIndex",void 0),l([Object(o.h)(".color-picker")],c.prototype,"$colorPicker",void 0),c=l([Object(o.c)("i-colorpicker")],c)},,function(t,e,i){t.exports=i.p+"images/iconfont.919d651.svg"},function(t,e,i){t.exports=i.p+"images/icon.196b87f.svg"},,function(t,e,i){"use strict";i(8),i(11),i(14);var o=i(1),n=o.b`:host {
  display: block;
}
.ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.label-box {
  max-width: 100%;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
}
.label-box .label {
  height: 20px;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
  white-space: nowrap;
}
.error {
  margin-left: 6px;
  font-size: 14px;
  font-weight: 400;
  color: #ea4747;
}
.input {
  background-color: transparent;
  outline: none;
  border: none;
  border-bottom: 1px solid #eee;
  line-height: 1;
  height: 20px;
  box-sizing: content-box;
  padding-bottom: 10px;
  width: 100%;
  color: #333333;
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
}
.input::placeholder {
  color: #999999;
}
.input:-moz-read-only {
  cursor: not-allowed;
  color: #999999;
}
.input:read-only {
  cursor: not-allowed;
  color: #999999;
}
`,r=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const a=async t=>null;let s=class extends o.a{constructor(){super(...arguments),this.label="",this.defaultValue="",this.value="",this.validateMsg=i18n("format_error"),this.placeholder=i18n("please_enter_text"),this.readonly=!1,this.validate=a,this.validateStatus=null,this.onChange=t=>{const e=t.currentTarget.value;!1===this.validateStatus&&this.validate(e)&&(this.validateStatus=!0),this.value=e,this.emitChangeEvent(e)},this.emitChangeEvent=t=>{const e=new CustomEvent("on-change",{detail:{value:t}});this.dispatchEvent(e)},this.checkValidity=async()=>(this.validateStatus=await this.validate(this.value),this.validateStatus),this.reset=()=>{this.value=this.defaultValue,this.emitChangeEvent(this.defaultValue),this.validateStatus=null}}render(){return o.e`
      <div class="item">
        <div class="label-box">
          <span class="label">${this.label}</span
          ><span .hidden="${!1!==this.validateStatus}" class="error ellipsis">*${this.validateMsg}</span>
        </div>

        <slot name="input">
          <input
            class="input"
            autocomplete="off"
            type="text"
            .value="${this.value||""}"
            .placeholder="${this.placeholder}"
            .readOnly="${this.readonly}"
            @blur="${this.checkValidity}"
            @input=${t=>{this.onChange(t)}}
          />
        </slot>
      </div>
    `}};s.styles=n,r([Object(o.g)({type:String})],s.prototype,"label",void 0),r([Object(o.g)({type:String})],s.prototype,"defaultValue",void 0),r([Object(o.g)({type:String})],s.prototype,"value",void 0),r([Object(o.g)({type:String})],s.prototype,"validateMsg",void 0),r([Object(o.g)({type:String})],s.prototype,"placeholder",void 0),r([Object(o.g)({type:Boolean})],s.prototype,"readonly",void 0),r([Object(o.g)({attribute:!1})],s.prototype,"validate",void 0),r([Object(o.f)()],s.prototype,"validateStatus",void 0),s=r([Object(o.c)("i-input")],s)},function(t,e,i){"use strict";i(11),i(14),i(21);var o=i(1),n=o.b`.input {
  outline: none;
  border-top: none;
  border-right: none;
  border-left: none;
  border-image: initial;
  border-bottom: 1px solid #eeeeee;
  line-height: 1;
  height: 30px;
  box-sizing: border-box;
  padding-bottom: 6px;
  width: 100%;
  color: #333333;
  max-height: 50px;
  line-height: 16px;
  max-width: 100%;
  min-width: 100%;
  resize: none;
  background-color: transparent;
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
}
`,r=i(264),a=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let s=class extends o.a{constructor(){super(...arguments),this.textareaHeight="auto",this.value="",this.placeholder="",this.emitChangeEvent=t=>{const e=new CustomEvent("on-change",{detail:{value:t}});this.dispatchEvent(e)}}setTextareaHeight(t){const e=t.split("\n");if(1===e.length)this.textareaHeight="auto";else{const t=16*e.length;this.textareaHeight=t+2+"px"}}updated(t){t.has("value")&&this.setTextareaHeight(this.value)}render(){return o.e`
      <textarea
        class="input global-scrollbar"
        rows="1"
        style="height:${this.textareaHeight}"
        autocomplete="off"
        @input="${t=>{const e=t.currentTarget.value;this.value=e,this.emitChangeEvent(e),this.setTextareaHeight(e)}}"
        .value="${this.value}"
        .placeholder="${this.placeholder}"
      ></textarea>
    `}};s.styles=[r.a,n],a([Object(o.f)()],s.prototype,"textareaHeight",void 0),a([Object(o.g)({type:String})],s.prototype,"value",void 0),a([Object(o.g)({type:String})],s.prototype,"placeholder",void 0),s=a([Object(o.c)("i-textarea")],s)},function(t,e,i){"use strict";var o=i(6),n=i.n(o),r=(i(11),i(14),i(1)),a=r.b`.icon-preview {
  transform: scale(0.25);
  transform-origin: left top;
}
.svg-box {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  position: relative;
  border-radius: 6px;
  background-color: #ddd;
  background-image: linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0), linear-gradient(45deg, #fff 25%, transparent 0, transparent 75%, #fff 0);
  background-position: 0 0, 5px 5px;
  background-size: 10px 10px;
  overflow: hidden;
}
`,s=i(486),l=i(248),c=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let d=class extends r.a{constructor(){super(...arguments),this.bgText="",this.bgFont=30,this.bgColor="",this.iconType="custom-icon",this.fontScale=18/7,this.getImg=()=>new n.a(t=>{t(null)})}get previewFont(){return this.bgFont*this.fontScale+"px 'PingFang SC', 'Microsoft Yahei', monospace, sans-serif"}render(){return r.e`<div class="svg-box">
      <div class="svg-text" style="">
        ${Object(s.a)(Object(l.a)({bgFont:this.bgFont,bgText:this.bgText,bgColor:this.bgColor},"6px"))}
      </div>
    </div>`}};d.styles=a,c([Object(r.g)({type:String})],d.prototype,"bgText",void 0),c([Object(r.g)({type:Number})],d.prototype,"bgFont",void 0),c([Object(r.g)({type:String})],d.prototype,"bgColor",void 0),c([Object(r.g)({type:String})],d.prototype,"iconType",void 0),c([Object(r.h)(".icon-preview")],d.prototype,"$preview",void 0),d=c([Object(r.c)("i-texticon")],d)},function(t,e,i){"use strict";var o=i(36),n=i.n(o),r=(i(11),i(14),i(8),i(17)),a=i(23),s=i(1),l=s.b`.item {
  position: relative;
  width: 100%;
  height: 100%;
}
.img-item {
  position: relative;
  width: 100%;
  height: 100%;
  background-color: #dddddd;
  background-image: linear-gradient(45deg, #ffffff 25%, transparent 0px, transparent 75%, #ffffff 0px), linear-gradient(45deg, #ffffff 25%, transparent 0px, transparent 75%, #ffffff 0px);
  background-position: 0px 0px, 5px 5px;
  background-size: 10px 10px;
  border-radius: 6px;
}
.img-dropper {
  position: relative;
  margin-right: 8px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  vertical-align: bottom;
  width: 60px;
  height: 60px;
  background: #ffffff;
  background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23C3C3C3FF' stroke-width='1' stroke-dasharray='5%2c 6' stroke-dashoffset='12' stroke-linecap='butt'/%3e%3c/svg%3e");
  border-radius: 6px;
  cursor: pointer;
}
.img-dropper[hidden] {
  display: none;
}
.active .preview {
  border-color: transparent;
}
.img-preview {
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  box-sizing: border-box;
}
.img-preview .editing:hover {
  opacity: 1;
}
.img-preview .editing {
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 6px;
  background: rgba(0, 0, 0, 0.3);
  transition: opacity 0.2s;
}
.img-preview .editing-icon {
  width: 28px;
  height: 28px;
}
.img-preview i-svg {
  --size: 90%;
  color: #fff;
  opacity: 0.8;
  cursor: pointer;
}
.img-preview i-svg:hover {
  opacity: 1;
  color: #fff;
}
.del {
  position: absolute;
  width: 18px;
  height: 18px;
  top: -6px;
  right: -6px;
  cursor: pointer;
  transition: transform 0.2s;
}
.del:hover {
  transform: scale(1.1);
}
#imgType {
  width: 1px;
  height: 1px;
}
`,c=i(403),d=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let p=class extends s.a{constructor(){super(...arguments),this.cropper=null,this.preViewImgData=null,this.preViewImgUrl="",this.active=!1,this.bgColor="",this.iconType="custom-icon",this.canDelete=!1,this.modalBorderRadius="3px",this.qiniu=!1,this.emitChangeEvent=()=>{const t=new CustomEvent("on-change",{detail:{bgColor:this.bgColor,preViewImgData:this.preViewImgData,preViewImgUrl:this.preViewImgUrl}});this.dispatchEvent(t)},this.initCropper=()=>{this.cropper=c.a.create({borderRadius:this.modalBorderRadius}),this.cropper.addEventListener("on-change",async t=>{const{data:e,color:i,changed:o}=t.detail;if(!this.qiniu||o||!this.preViewImgUrl.startsWith("http")){this.bgColor=i,this.preViewImgData=e;const t=this.preViewImgUrl;this.preViewImgUrl=n.a.createObjectURL(this.preViewImgData),n.a.revokeObjectURL(t)}this.emitChangeEvent()})},this.getImg=async()=>{var t,e;if(this.preViewImgUrl.startsWith("http"))return{url:this.preViewImgUrl,bgColor:this.bgColor};const{data:i,error:o}=await a.f.uploadFile(this.preViewImgData,r.a.randomId("icon-")+".png",this.iconType);if(o){const i=(null===(e=null===(t=o.response)||void 0===t?void 0:t.data)||void 0===e?void 0:e.error)?o.response.data.error:o.message;throw new Error(i)}return{url:i.url,bgColor:this.bgColor}},this._chooseImg=t=>{const e=(t.target.files||t.dataTransfer.files)[0],i=new FileReader;i.readAsDataURL(e),t.currentTarget.value=null,i.onload=()=>{this.cropper.init(i.result,this.bgColor),this.cropper.show()}},this.reset=()=>{this.preViewImgUrl&&n.a.revokeObjectURL(this.preViewImgUrl),this.preViewImgData=null,this.preViewImgUrl="",this.bgColor="",this.emitChangeEvent()},this._delImg=t=>{t.stopPropagation(),this.preViewImgUrl&&n.a.revokeObjectURL(this.preViewImgUrl),this.preViewImgData=null,this.preViewImgUrl="",this.emitChangeEvent()},this._editImg=()=>{this.cropper.init(this.preViewImgUrl,this.bgColor),this.cropper.show()}}firstUpdated(){this.initCropper()}disconnectedCallback(){c.a.destroy(),super.disconnectedCallback()}render(){return s.e`
      <div class="item img-item">
        <div class="img-item">
          <input
            @drop="${this._chooseImg}"
            accept="image/*"
            @change="${this._chooseImg}"
            type="file"
            id="imgType"
            style="position:absolute;clip:rect(0 0 0 0);"
          />
          <label
            .hidden="${!!this.preViewImgUrl}"
            class="img-dropper"
            style="${this.active?"background-image: none;":""}"
            for="imgType"
          >
            <i-usesvg style="color:#C3C3C3;width:22px;height:22px" type="icon-xingzhuangjiehe2x" iconfont></i-usesvg>
          </label>
          <div
            .hidden="${!this.preViewImgUrl}"
            class="img-dropper img-preview"
            style="border:${this.active?"none":"1px solid #DADCE0"};background-color:${this.bgColor||"transparent"}; background-image: url('${this.preViewImgUrl}')"
            @click="${this._editImg}"
          >
            <div class="editing">
              <img class="editing-icon" src="${i(554)}" alt="" />
            </div>
            <img
              .hidden="${!this.canDelete}"
              class="del"
              @click="${this._delImg}"
              src="${i(555)}"
              alt=""
            />
          </div>
        </div>
      </div>
    `}};p.styles=l,d([Object(s.g)({type:String})],p.prototype,"preViewImgUrl",void 0),d([Object(s.g)({type:Boolean})],p.prototype,"active",void 0),d([Object(s.g)({type:String})],p.prototype,"bgColor",void 0),d([Object(s.g)({type:String})],p.prototype,"iconType",void 0),d([Object(s.g)({type:Boolean})],p.prototype,"canDelete",void 0),d([Object(s.g)({type:String})],p.prototype,"modalBorderRadius",void 0),d([Object(s.g)({type:Boolean})],p.prototype,"qiniu",void 0),p=d([Object(s.c)("i-imgicon")],p)},,,,,,,,,function(t,e,i){var o=i(160),n=i(541),r=i(542),a=Math.max,s=Math.min;t.exports=function(t,e,i){var l,c,d,p,h,u,g=0,f=!1,m=!1,b=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var i=l,o=c;return l=c=void 0,g=e,p=t.apply(o,i)}function v(t){return g=t,h=setTimeout(x,e),f?y(t):p}function w(t){var i=t-u;return void 0===u||i>=e||i<0||m&&t-g>=d}function x(){var t=n();if(w(t))return _(t);h=setTimeout(x,function(t){var i=e-(t-u);return m?s(i,d-(t-g)):i}(t))}function _(t){return h=void 0,b&&l?y(t):(l=c=void 0,p)}function k(){var t=n(),i=w(t);if(l=arguments,c=this,u=t,i){if(void 0===h)return v(u);if(m)return clearTimeout(h),h=setTimeout(x,e),y(u)}return void 0===h&&(h=setTimeout(x,e)),p}return e=r(e)||0,o(i)&&(f=!!i.leading,d=(m="maxWait"in i)?a(r(i.maxWait)||0,e):d,b="trailing"in i?!!i.trailing:b),k.cancel=function(){void 0!==h&&clearTimeout(h),g=0,l=u=c=h=void 0},k.flush=function(){return void 0===h?p:_(n())},k}},function(t,e,i){var o=i(88);t.exports=function(){return o.Date.now()}},function(t,e,i){var o=i(543),n=i(160),r=i(545),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(r(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=o(t);var i=s.test(t);return i||l.test(t)?c(t.slice(2),i?2:8):a.test(t)?NaN:+t}},function(t,e,i){var o=i(544),n=/^\s+/;t.exports=function(t){return t?t.slice(0,o(t)+1).replace(n,""):t}},function(t,e){var i=/\s/;t.exports=function(t){for(var e=t.length;e--&&i.test(t.charAt(e)););return e}},function(t,e,i){var o=i(184),n=i(167);t.exports=function(t){return"symbol"==typeof t||n(t)&&"[object Symbol]"==o(t)}},function(t,e,i){"use strict";e.byteLength=function(t){var e=c(t),i=e[0],o=e[1];return 3*(i+o)/4-o},e.toByteArray=function(t){var e,i,o=c(t),a=o[0],s=o[1],l=new r(function(t,e,i){return 3*(e+i)/4-i}(0,a,s)),d=0,p=s>0?a-4:a;for(i=0;i<p;i+=4)e=n[t.charCodeAt(i)]<<18|n[t.charCodeAt(i+1)]<<12|n[t.charCodeAt(i+2)]<<6|n[t.charCodeAt(i+3)],l[d++]=e>>16&255,l[d++]=e>>8&255,l[d++]=255&e;2===s&&(e=n[t.charCodeAt(i)]<<2|n[t.charCodeAt(i+1)]>>4,l[d++]=255&e);1===s&&(e=n[t.charCodeAt(i)]<<10|n[t.charCodeAt(i+1)]<<4|n[t.charCodeAt(i+2)]>>2,l[d++]=e>>8&255,l[d++]=255&e);return l},e.fromByteArray=function(t){for(var e,i=t.length,n=i%3,r=[],a=0,s=i-n;a<s;a+=16383)r.push(d(t,a,a+16383>s?s:a+16383));1===n?(e=t[i-1],r.push(o[e>>2]+o[e<<4&63]+"==")):2===n&&(e=(t[i-2]<<8)+t[i-1],r.push(o[e>>10]+o[e>>4&63]+o[e<<2&63]+"="));return r.join("")};for(var o=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)o[s]=a[s],n[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function d(t,e,i){for(var n,r,a=[],s=e;s<i;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(o[(r=n)>>18&63]+o[r>>12&63]+o[r>>6&63]+o[63&r]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,i,o,n){var r,a,s=8*n-o-1,l=(1<<s)-1,c=l>>1,d=-7,p=i?n-1:0,h=i?-1:1,u=t[e+p];for(p+=h,r=u&(1<<-d)-1,u>>=-d,d+=s;d>0;r=256*r+t[e+p],p+=h,d-=8);for(a=r&(1<<-d)-1,r>>=-d,d+=o;d>0;a=256*a+t[e+p],p+=h,d-=8);if(0===r)r=1-c;else{if(r===l)return a?NaN:1/0*(u?-1:1);a+=Math.pow(2,o),r-=c}return(u?-1:1)*a*Math.pow(2,r-o)},e.write=function(t,e,i,o,n,r){var a,s,l,c=8*r-n-1,d=(1<<c)-1,p=d>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,u=o?0:r-1,g=o?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=d):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=d?(s=0,a=d):a+p>=1?(s=(e*l-1)*Math.pow(2,n),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,n),a=0));n>=8;t[i+u]=255&s,u+=g,s/=256,n-=8);for(a=a<<n|s,c+=n;c>0;t[i+u]=255&a,u+=g,a/=256,c-=8);t[i+u-g]|=128*f}},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},,,,,,function(t,e,i){t.exports=i.p+"images/edit.064f8e9.svg"},function(t,e,i){t.exports=i.p+"images/del.20d8e3b.svg"},function(t,e,i){t.exports=i.p+"images/permission_img.1fa8fa6.svg"},function(t,e,i){t.exports=i.p+"images/item_1.8b1e737.png"},function(t,e,i){t.exports=i.p+"images/item_2.f6e1bf0.png"},function(t,e,i){t.exports=i.p+"images/item_3.d04a54a.png"},function(t,e,i){t.exports=i.p+"images/arrow.1799f5d.png"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,"syncStore",(function(){return P}));var o=i(6),n=i.n(o),r=i(99),a=i.n(r),s=(i(11),i(14),i(8),i(41),i(21),i(4)),l=i(23),c=i(263),d=i(625),p=i(483),h=i(626),u=i(622),g=i(386),f=i(627),m=i(482),b=i(623),y=i(1),v=i(197),w=y.b`.container {
  width: 410px;
  box-sizing: border-box;
  padding: 40px 40px 34px 40px;
  background: #ffffff;
  border-radius: 6px;
}
.header {
  text-align: center;
  line-height: 30px;
  height: 28px;
  font-size: 20px;
  font-weight: 500;
  color: #333333;
  line-height: 28px;
}
.main {
  margin: 24px auto 40px;
}
.tips {
  margin-bottom: 30px;
  font-size: 14px;
  font-weight: 400;
  color: #656565;
  line-height: 20px;
}
.checkbox {
  display: flex;
  align-items: center;
  position: relative;
  margin-bottom: 20px;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  cursor: pointer;
}
.checkbox .input-box {
  display: flex;
  align-items: center;
  position: relative;
}
.checkbox label {
  box-sizing: border-box;
  position: absolute;
  top: 0;
  left: 0;
  width: 16px;
  height: 16px;
  border: 2px solid #333;
  border-radius: 8px;
  cursor: pointer;
}
.checkbox label::after {
  content: '';
  width: 9px;
  height: 5px;
  position: absolute;
  top: 1px;
  left: 1px;
  border: 2px solid #333;
  border-top: none;
  border-right: none;
  background: transparent;
  opacity: 0;
  transform: rotate(-45deg);
}
.checkbox input {
  visibility: hidden;
}
.checkbox input:checked + label::after {
  opacity: 1;
}
.checkbox:last-of-type {
  margin-bottom: 0;
}
.btn {
  width: 330px;
  height: 52px;
}
.footer-import {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.btn-import {
  width: 155px;
  height: 52px;
}
`,x=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let _=class extends v.a{constructor(){super(...arguments),this.onChecked=t=>{},this.show=!1,this.checked=0,this.handleCheck=t=>{this.show=!1,"function"==typeof this.onChecked&&this.onChecked(t),this.checked=0,this.onChecked=()=>{}}}static create(t){const e=document.body.querySelector("#modal-first-sync");if(e){if(!this.instance){const t=document.createElement("modal-first-sync");e.appendChild(t),this.instance=t}return this.instance.show=!0,this.instance.onChecked=t,this.instance}}static hide(){this.instance&&this.instance.show&&this.instance.handleCheck(null)}firstUpdated(){}checkOne(t){this.checked=t}updated(){this.radios[this.checked].checked=!0}render(){return y.e`<infinito-modal style="--modal-padding:0;" .closeable="${!1}" .open=${this.show}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n("choose_sync_type")}</div>
          <div class="main">
            <div class="tips">${i18n("sync_type_tips")}</div>
            <div class="checkbox-box">
              <div class="checkbox" @click="${()=>this.checkOne(0)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="0" id="first_sync_0" />
                  <label for="first_sync_0"></label>
                </div>
                <span>${i18n("merge_cloud_local")}</span>
              </div>
              <div class="checkbox" @click="${()=>this.checkOne(1)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="1" id="first_sync_1" />
                  <label for="first_sync_1"></label>
                </div>
                <span>${i18n("use_local")}</span>
              </div>
              <div class="checkbox" @click="${()=>this.checkOne(2)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="2" id="first_sync_2" />
                  <label for="first_sync_2"></label>
                </div>
                <span>${i18n("use_cloud")}</span>
              </div>
            </div>
          </div>
          <div class="footer">
            <infinito-button
              primary
              class="btn"
              @click="${()=>{this.handleCheck(this.checked)}}"
              >${i18n("confirm")}</infinito-button
            >
          </div>
        </div>
      </div>
    </infinito-modal> `}};_.styles=w,_.instance=null,x([Object(y.g)()],_.prototype,"onChecked",void 0),x([Object(y.g)({type:Boolean})],_.prototype,"show",void 0),x([Object(y.g)({type:Number})],_.prototype,"checked",void 0),x([Object(y.i)('[name="first_sync"]')],_.prototype,"radios",void 0),_=x([Object(y.c)("modal-first-sync")],_);var k=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let O=class extends v.a{constructor(){super(...arguments),this.onChecked=t=>{},this.show=!1,this.checked=0,this.handleCheck=t=>{this.show=!1,"function"==typeof this.onChecked&&this.onChecked(t),this.checked=0,this.onChecked=()=>{}}}static create(t){const e=document.body.querySelector("#modal-import-type");if(e){if(!this.instance){const t=document.createElement("modal-import-type");e.appendChild(t),this.instance=t}return this.instance.show=!0,this.instance.onChecked=t,this.instance}}static hide(){this.instance&&this.instance.show&&this.instance.handleCheck(null)}firstUpdated(){}checkOne(t){this.checked=t}updated(){this.radios[this.checked].checked=!0}render(){return y.e`<infinito-modal style="--modal-padding:0;" .closeable="${!1}" .open=${this.show}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n("import_select_tile")}</div>
          <div class="main">
            <div class="tips">${i18n("inportdata_desc")}</div>
            <div class="checkbox-box">
              <div class="checkbox" @click="${()=>this.checkOne(0)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="0" id="first_sync_0" />
                  <label for="first_sync_0"></label>
                </div>
                <span>${i18n("merge_data")}</span>
              </div>
              <div class="checkbox" @click="${()=>this.checkOne(1)}">
                <div class="input-box">
                  <input name="first_sync" type="radio" value="1" id="first_sync_1" />
                  <label for="first_sync_1"></label>
                </div>
                <span>${i18n("overwrite_data")}</span>
              </div>
            </div>
          </div>
          <div class="footer-import">
            <infinito-button
              class="btn-import"
              @click="${()=>{this.handleCheck(null)}}"
              >${i18n("cancel")}</infinito-button
            >
            <infinito-button
              primary
              class="btn-import"
              @click="${()=>{this.handleCheck(this.checked)}}"
              >${i18n("confirm")}</infinito-button
            >
          </div>
        </div>
      </div>
    </infinito-modal> `}};O.styles=w,O.instance=null,k([Object(y.g)()],O.prototype,"onChecked",void 0),k([Object(y.g)({type:Boolean})],O.prototype,"show",void 0),k([Object(y.g)({type:Number})],O.prototype,"checked",void 0),k([Object(y.i)('[name="first_sync"]')],O.prototype,"radios",void 0),O=k([Object(y.c)("modal-import-type")],O);var A=i(163),S=i(0),I=i(387),j=i(265),$=i(9),C=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const E=[d.a,p.b,u.a,h.a,g.a,f.a,b.weatherStore];class T extends c.a{constructor(){super(...arguments),this.timmer=null,this.downloading=!1,this.backuping=!1,this.isBackup=!1,this.isOpenSync=!0,this.syncId="",this.lastSyncTime=0,this.syncSucsess=!1,this.syncFail=!1,this.syncFailMsg="",this.autosSyncList=[],this.waitMergeData=null,this.waitMergeId=null,this.manualSyncList={},this.isRecovered=!1,this.recoverErrorTimes=0,this.master=!1,this.prerender=[],this.autoBackupPipe={data:{},websocketKeys:[],timestamp:0},this.getAllBackupData=async()=>{const t={};return await n.a.all(E.map(async e=>{const i=await e.getBackupData();t[e.backupFileKey]=i})),t},this.getAutoLatest=async(t="all")=>{const e=localStorage.getItem("lock-auto-recover");if(e&&Date.now()-Number(e)<3e3)return;if(localStorage.setItem("lock-auto-recover",""+Date.now()),await this.getSyncList(),0===this.autosSyncList.length){const t=m.userStore.userInfo["backup-version-v2"];if(m.userStore.userInfo["auto-backup"]&&!t){const t=m.userStore.userInfo.email?"basic":"pro";await this.getV1RemoteData(t)}else this.tiggerBackup();return}const i=this.autosSyncList[0];if((null==i?void 0:i.id)===this.syncId||this.waitMergeId===(null==i?void 0:i.id))return;const o=localStorage.getItem("pre-sync-id");o&&(null==i?void 0:i.id)===o||(await this.getDetail(i.id,"auto",t,!1,!0),localStorage.removeItem("lock-auto-recover"))},this.changeSyncStatus=t=>{this.master=!1,this.downloading=t.downloading,this.backuping=t.backuping,this.isBackup=t.isBackup,this.syncFail=t.syncFail,this.syncFailMsg=t.syncFailMsg,this.syncSucsess=t.syncSucsess,(this.syncSucsess||this.syncFail)&&this.syncEnd()}}get autoSyncing(){return this.downloading||this.backuping}async changeSyncSwitch(t){this.isOpenSync=t}async autoBackup(t,e=""){const i=await this.toSync(!0,t,e);return i.error||Object(s.i)(()=>{this.autosSyncList=i.data}),i}async manualBackup(){const{default:t}=await Promise.resolve().then(i.bind(null,398)),e=t.loading(i18n("backing_up")),{error:o,data:n}=await this.toSync();e(),o?t.error(i18n("backup_failed")):Object(s.i)(()=>{this.manualSyncList=n})}async toSync(t=!1,e={},i=""){var o,r;let a;if(this.master=!0,t)this.isBackup=!0,this.backuping=!0,a=await l.e.autoBackup(e,i);else{const t={};await n.a.all(E.map(async e=>{const i=await e.getBackupData();t[e.backupFileKey]=i})),a=await l.e.manualBackup(t)}const{error:s,data:c=[]}=a;return t&&(s||A.slave.postTask("slave:sync-to-server",i),s?this.backupEnd(s.message||"auto-backup error",null===(o=c[0])||void 0===o?void 0:o.id):this.backupEnd(null,null===(r=c[0])||void 0===r?void 0:r.id)),a}backupEnd(t,e=""){Object(s.i)(()=>{this.master=!0,this.backuping=!1,t?this.syncFail=!0:(this.syncSucsess=!0,e&&(this.syncId=e,this.lastSyncTime=Date.now()))}),this.syncEnd()}downloadEnd(t,e=""){Object(s.i)(()=>{this.master=!0,this.downloading=!1,this.backuping=!1,t?this.syncFail=!0:(this.syncSucsess=!0,e&&(this.syncId=e,this.lastSyncTime=Date.now()))}),this.syncEnd()}syncEnd(){clearTimeout(this.timmer),this.timmer=setTimeout(()=>{Object(s.i)(()=>{this.syncFail=!1,this.syncFailMsg="",this.syncSucsess=!1,this.isBackup=!1})},3e3)}async getSyncList(){const{data:t,error:e}=await l.e.getSyncList();if(e)throw e;Object(s.i)(()=>{this.autosSyncList=t.auto,this.manualSyncList=t.manual})}async getDetail(t,e,o="all",n=!1,r=!1){let a,s;if(this.master=!0,n){const{default:t}=await Promise.resolve().then(i.bind(null,398));a=t,s=a.loading(i18n("syncing"))}else this.downloading=!0,this.isBackup=!1;const{data:c,error:d}=await l.e.getSyncDetail(r?"latest":t,e,o);n&&(null==s||s()),d?n?null==a||a.error(i18n("sync_fail")):this.downloadEnd(d.message||"download error"):(await this.useRemote(c,n),this.downloadEnd(null,t),this.tiggerBackup())}tiggerBackup(){var t;this.changeRecoveredStatus(!0),(null===(t=this.autoBackupPipe.websocketKeys)||void 0===t?void 0:t.length)&&(this.autoBackupPipe.timestamp=Date.now())}async getV1RemoteData(t,e=!1){let o,n;if(this.master=!0,e){const{default:t}=await Promise.resolve().then(i.bind(null,398));o=t,n=o.loading(i18n("syncing"))}else this.downloading=!0,this.isBackup=!1;const{error:r,data:a}=await l.e.getV2DataFromV1(t);e&&(null==n||n()),r?(e?null==o||o.error(i18n("sync_fail")):this.downloadEnd(r.message||"download v1 error"),Object(s.i)(()=>{this.recoverErrorTimes+=1})):(this.downloadEnd(null),await this.useRemote(a,e,!0),this.tiggerBackup())}changeRecoveredStatus(t){this.isRecovered=t}autoRunGetAutoLatest(){setTimeout(()=>{this.getAutoLatest()},0)}showModalAndCheckType(t=!1){return new n.a((e,i)=>{var o;if(t&&_.hide(),null===(o=_.instance)||void 0===o?void 0:o.show)return void e(null);const r=Object(s.j)(this.waitMergeData);_.create(async o=>{this.mergeType=o,this.diffColorItems();try{localStorage.setItem("restoring","1"),await n.a.all(E.map(async t=>{if(r&&r[t.backupFileKey])if(1===o)t.restartAutoBackupReaction(!0);else if(2===o)try{await t.mergeRemote(r[t.backupFileKey],!0),"site"===t.backupFileKey&&d.a.setRedirectVersion("")}catch(t){}else{if(0!==o)throw new Error("not check");try{await t.mergeRemote(r[t.backupFileKey],!1),"site"===t.backupFileKey&&d.a.setRedirectVersion("")}catch(t){}t.restartAutoBackupReaction(!0)}})),this.downloadEnd(null,this.waitMergeId),this.tiggerBackup(),Object(s.i)(()=>{this.waitMergeData=null,this.waitMergeId=null})}catch(e){t&&i(e)}localStorage.removeItem("restoring"),e(null)})})}useLocalData(t){E.map(async e=>{if(null==t?void 0:t[e.backupFileKey])try{await e.mergeRemote(t[e.backupFileKey],!0)}catch(t){console.error("Store ~ syncStores.map ~ error",t)}})}async useLocalDataWithCheck(t){E.some(e=>{if(t&&t[e.backupFileKey]){console.log("diffData ~ st.backupFileKey",e.backupFileKey);return e.diffRemote(t[e.backupFileKey])}return!1})?await this.showModalAndCheckImportType(t):this.useLocalData(t)}showModalAndCheckImportType(t){return new n.a(e=>{O.create(async i=>{try{await n.a.all(E.map(async e=>{if(t&&t[e.backupFileKey])if(1===i)try{await e.mergeRemote(t[e.backupFileKey],!0),"site"===e.backupFileKey&&d.a.setRedirectVersion("")}catch(t){}else{if(0!==i)throw new Error("not check");try{await e.mergeRemote(t[e.backupFileKey],!1),"site"===e.backupFileKey&&d.a.setRedirectVersion("")}catch(t){}}}))}catch(t){console.log("ModalImportType.create ~ error",t)}e(null)})})}useRemote(t,e,i=!1){return new n.a(async o=>{if(Object(s.i)(()=>{this.waitMergeData=null,this.waitMergeId=null}),e)await n.a.all(E.map(async e=>{if(null==t?void 0:t[e.backupFileKey])try{await e.mergeRemote(t[e.backupFileKey],!0),"site"===e.backupFileKey&&d.a.setRedirectVersion("")}catch(t){}})),this.mergeType=2,this.diffColorItems(),o(null);else if(this.isRecovered)await n.a.all(E.map(async e=>{if(null==t?void 0:t[e.backupFileKey])if(i)try{await e.mergeRemote(t[e.backupFileKey],!0)}catch(t){}else{e.stopAutoBackupReaction();try{await e.mergeRemote(t[e.backupFileKey],!0)}catch(t){}e.restartAutoBackupReaction()}})),o(null);else{E.some(e=>{if(t&&t[e.backupFileKey]){console.log("diffData ~ st.backupFileKey",e.backupFileKey);return e.diffRemote(t[e.backupFileKey])}return!1})?(Object(s.i)(()=>{var e;this.waitMergeData=t,this.waitMergeId=null===(e=this.autosSyncList[0])||void 0===e?void 0:e.id}),await this.showModalAndCheckType(!0),o(null)):(this.mergeType=2,this.diffColorItems(),await n.a.all(E.map(async e=>{if(null==t?void 0:t[e.backupFileKey])try{await e.mergeRemote(t[e.backupFileKey],!0)}catch(t){}})),o(null))}})}pushAutoBackupPipe(t){m.userStore.isLogin&&this.isOpenSync&&(Object.keys(t).forEach(e=>{this.autoBackupPipe.data[e]=t[e],this.autoBackupPipe.websocketKeys.includes(e)||this.autoBackupPipe.websocketKeys.push(e)}),this.autoBackupPipe.timestamp=Date.now())}cleanupPipe(t){t===this.autoBackupPipe.timestamp&&(this.autoBackupPipe={data:{},websocketKeys:[],timestamp:0})}clearList(){this.autosSyncList=[],this.manualSyncList=[]}async diffColorItems(){await m.userStore.userProfilePromise;const t=m.userStore.userInfo["wp-color-update"];if(t===m.userStore.wpColorUpdate)return;const{mergeType:e}=this,i=await Object(I.c)(),o=Object(s.j)(u.a.customColorItems);await u.a.mergeCustomColor(o,i,Number(e),!0),m.userStore.setWpColorUpdate(t)}}C([s.g],T.prototype,"downloading",void 0),C([s.g],T.prototype,"backuping",void 0),C([s.g],T.prototype,"isBackup",void 0),C([s.g],T.prototype,"isOpenSync",void 0),C([s.g],T.prototype,"syncId",void 0),C([s.g],T.prototype,"lastSyncTime",void 0),C([s.g],T.prototype,"syncSucsess",void 0),C([s.g],T.prototype,"syncFail",void 0),C([s.g],T.prototype,"syncFailMsg",void 0),C([s.g],T.prototype,"autosSyncList",void 0),C([s.g],T.prototype,"waitMergeData",void 0),C([s.g],T.prototype,"waitMergeId",void 0),C([s.g],T.prototype,"manualSyncList",void 0),C([s.g],T.prototype,"isRecovered",void 0),C([s.g],T.prototype,"recoverErrorTimes",void 0),C([s.g],T.prototype,"master",void 0),C([s.g],T.prototype,"prerender",void 0),C([s.g],T.prototype,"autoBackupPipe",void 0),C([s.e],T.prototype,"autoSyncing",null),C([s.b],T.prototype,"changeSyncSwitch",null),C([s.b],T.prototype,"autoBackup",null),C([s.b],T.prototype,"manualBackup",null),C([s.b],T.prototype,"toSync",null),C([s.b],T.prototype,"backupEnd",null),C([s.b],T.prototype,"downloadEnd",null),C([s.b],T.prototype,"syncEnd",null),C([s.b],T.prototype,"getSyncList",null),C([s.b],T.prototype,"getDetail",null),C([s.b],T.prototype,"tiggerBackup",null),C([s.b],T.prototype,"getV1RemoteData",null),C([s.b],T.prototype,"changeRecoveredStatus",null),C([s.b],T.prototype,"getAutoLatest",void 0),C([s.b],T.prototype,"pushAutoBackupPipe",null),C([s.b],T.prototype,"cleanupPipe",null),C([s.b],T.prototype,"clearList",null),C([s.b],T.prototype,"changeSyncStatus",void 0);const P=new T;P.initSyncStore($.i,["autoBackupPipe","syncId","lastSyncTime","isOpenSync","isRecovered","recoverErrorTimes","prerender","waitMergeData","waitMergeId","manualSyncList","autosSyncList"],void 0,50);Object(s.c)(()=>{var t;if(P.firstSync){const{isOpenSync:e,isRecovered:i,downloading:o}=P;if(m.userStore.isLogin&&e&&i&&!o&&!(null===(t=_.instance)||void 0===t?void 0:t.show)){const{data:t,websocketKeys:e,timestamp:i}=P.autoBackupPipe;(async t=>{const{data:e,websocketKeys:i,timestamp:o}=t,r=Object.assign({},e);if(Object.keys(r).length)try{const t=localStorage.getItem("lock-auto-backup");if(t&&Date.now()-Number(t)<4e3)return;localStorage.setItem("lock-auto-backup",""+Date.now()),0===P.autosSyncList.length?await n.a.all(E.map(async t=>{const e=await t.getBackupData();r[t.backupFileKey]=e})):await n.a.all(E.map(async t=>{if(i.includes(t.backupFileKey)){const e=await t.getBackupData();r[t.backupFileKey]=e}}));const{error:e}=await P.autoBackup(Object(s.j)(r),i.join(","));if(e)return;P.cleanupPipe(o),localStorage.removeItem("lock-auto-backup")}catch(t){}})({data:t,websocketKeys:e,timestamp:i})}}},{delay:4e3}),Object(s.c)(()=>{if(P.firstSync){const t=P.isOpenSync&&m.userStore.isLogin;A.slave.postTask("slave:change-sync",{status:t,userInfo:{uid:m.userStore.userInfo.uid,secret:m.userStore.userInfo.secret}}),t?P.autoRunGetAutoLatest():m.userStore.isLogin&&0===P.autosSyncList.length&&0===P.manualSyncList.length?P.getSyncList():m.userStore.isLogin||P.clearList()}},{delay:100}),Object(s.c)(()=>{P.firstSync&&(P.isOpenSync&&m.userStore.isLogin||(P.changeRecoveredStatus(!1),Object(s.i)(()=>{P.syncId="",P.waitMergeId=null,P.waitMergeData=null}),localStorage.removeItem("pre-sync-id")))}),Object(s.c)(()=>{P.firstSync&&m.userStore.isLogin&&0===m.userStore.userInfo["auto-backup"]&&0===P.autosSyncList.length&&d.a.restartAutoBackupReaction(!0)}),Object(s.c)(()=>{if(P.firstSync&&P.master){const t={downloading:P.downloading,backuping:P.backuping,syncSucsess:P.syncSucsess,syncFail:P.syncFail,syncFailMsg:P.syncFailMsg,isBackup:P.isBackup};A.slave.sendMessage("tabs-sync-status",t)}},{delay:20}),Object(s.c)(()=>{var t;P.firstSync&&P.autosSyncList.length&&(P.waitMergeId===(null===(t=P.autosSyncList[0])||void 0===t?void 0:t.id)?P.showModalAndCheckType():_.hide())},{delay:1}),window.addEventListener("beforeunload",()=>{P.master&&A.slave.sendMessage("tabs-sync-status",{downloading:!1,backuping:!1,syncSucsess:!1,syncFail:!1,syncFailMsg:"",isBackup:!1})}),Object(s.h)(()=>P.firstSync,async t=>{if(t){const t=await R();j.a.trySendStatus(t)}},{delay:1e3});const R=async()=>({currentIsLogin:!!m.userStore.isLogin,currentIsOpenSync:m.userStore.isLogin&&P.isOpenSync,currentSearchEngine:h.a.searchEngine.current.types[0].url.split("?")[0],currentWallpaper:(()=>{try{const t=u.a.type,e=["userLibraryAuto","cloudAuto"],i=["cloud","color"];if(["local","default","bing"].includes(t))return t;if(e.includes(t))return{[t]:u.a.switchType};if(i.includes(t))return"color"===t?{[t]:u.a.color}:{[t]:u.a.rawUrl}}catch(t){return"error"}})(),currentIconCount:(()=>{try{var t;const e=a()(t=d.a.sites).call(t,(t,e)=>{if(null==e?void 0:e.length){return t+a()(e).call(e,(t,e)=>{var i;return(null===(i=null==e?void 0:e.children)||void 0===i?void 0:i.length)?t+e.children.length:t+1},0)}return t},0);return 10*Math.round(e/10)}catch(t){return"error"}})(),currentVersion:S.D.extVersion,currentBrowserEnv:S.c,currentRunBrowser:S.D.runtimePlatform,currentWidth:window.screen.width*window.devicePixelRatio});j.a.sendPageView({page:"newtab"})},,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,"LocalSync",(function(){return n.a})),i.d(e,"syncTabsStore",(function(){return n.b})),i.d(e,"pluginStore",(function(){return r.pluginStore})),i.d(e,"userStore",(function(){return a.userStore})),i.d(e,"settingStore",(function(){return s.b})),i.d(e,"requestCalcSize",(function(){return s.a})),i.d(e,"siteStore",(function(){return l.a})),i.d(e,"searchStore",(function(){return c.a})),i.d(e,"wallpaperStore",(function(){return d.a})),i.d(e,"todoStore",(function(){return p.a})),i.d(e,"noteStore",(function(){return h.a})),i.d(e,"weatherStore",(function(){return u.weatherStore})),i.d(e,"gmailStore",(function(){return b})),i.d(e,"syncStore",(function(){return y.syncStore})),i.d(e,"privacyStore",(function(){return x}));var o=i(4),n=i(263),r=i(484),a=i(482),s=i(483),l=i(625),c=i(626),d=i(622),p=i(386),h=i(627),u=i(623),g=(i(11),i(14),i(9)),f=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class m extends n.a{constructor(){super(...arguments),this.unreadEmailCount=null}update(t){this.unreadEmailCount!==t&&(this.unreadEmailCount=t)}}f([o.g],m.prototype,"unreadEmailCount",void 0),f([o.b],m.prototype,"update",null);const b=new m;b.initSyncStore(g.c,["unreadEmailCount"]);var y=i(614),v=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class w extends n.a{constructor(){super(...arguments),this.userDate=0,this.collectData=0}agreeUserData(){this.userDate=1}refuseUserData(){this.userDate=-1}resetUserData(){this.userDate=0}agreeCollectData(){this.collectData=1}refuseCollectData(){this.collectData=-1}}v([o.g],w.prototype,"userDate",void 0),v([o.g],w.prototype,"collectData",void 0),v([o.b],w.prototype,"agreeUserData",null),v([o.b],w.prototype,"refuseUserData",null),v([o.b],w.prototype,"resetUserData",null),v([o.b],w.prototype,"agreeCollectData",null),v([o.b],w.prototype,"refuseCollectData",null);const x=new w;x.initSyncStore(g.e,["userDate","collectData"]),Object(o.f)({enforceActions:"observed"})},function(t,e,i){"use strict";i.d(e,"a",(function(){return $}));var o=i(99),n=i.n(o),r=i(36),a=i.n(r),s=(i(21),i(64),i(41),i(11),i(14),i(8),i(4)),l=i(29),c=i(263),d=i(93),p=i(0),h=i(9),u=i(163),g=i(249),f=i(387);function m(){u.slave.postTask("slave:bg-run-clear-wallpaper-timer-task")}var b=i(162),y=i(482),v=i(119),w=i(638),x=i.n(w),_=i(17),k=i(635),O=i(398),A=i(636),S=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const I=i(524);class j extends c.a{constructor(){super(),this.url=I,this.urlInUI=I,this.rawUrl=I,this.setWpSouceCount=t=>this.wpSourceCount=t,this.type="default",this.switchType="disabled",this.setSwitchType=t=>{this.switchType=t,this._updateTimer(!0)},this.setWpSourceCount=t=>this.wpSourceCount=t,this.wpExt="png",this.list=[],this.index=-1,this.timeEnd=0,this.remoteData=[],this.opacity=40,this.blur=0,this.setOpacity=t=>this.opacity=t,this.setBlur=t=>this.blur=t,this.liked=[],this.setLiked=t=>{this.liked=t},this.customColorItems=[],this.setCustomColorItems=t=>this.customColorItems=t,this._rgbaToHex=t=>{const e=t.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),i=parseFloat(e[3]||"1"),o=Math.floor(i*parseInt(e[0])+255*(1-i)),n=Math.floor(i*parseInt(e[1])+255*(1-i)),r=Math.floor(i*parseInt(e[2])+255*(1-i));return("0"+o.toString(16)).slice(-2)+("0"+n.toString(16)).slice(-2)+("0"+r.toString(16)).slice(-2)},this._maxCollectionlen=100,this.cloudCollection=[],this.appendCloudCollection=t=>this.cloudCollection.push(t),this.setCloudCollection=t=>this.cloudCollection=t,this._maxRecentUsedLen=100,this.cloudRecentUsedOrder={},this.setCloudRecentUsedOrder=t=>{const{cloudRecentUsedOrder:e,cloudRecentUsed:i}=this,o={};Object.keys(e).forEach(t=>{i.includes(t)&&(o[t]=e[t])}),o[t]=Date.now(),this.cloudRecentUsedOrder=o},this.cloudRecentUsed=[],this.setCloudRecentUsed=t=>{const e=Object.keys(this.cloudRecentUsedOrder);t.forEach(t=>{const i=e.indexOf(t);-1!==i&&e.splice(i,1)}),e.length>0&&e.forEach(t=>{delete this.localRecentUsedOrder[t]}),this.cloudRecentUsed=t},this.appendCloudRecentUsed=t=>{this.cloudRecentUsed.push(t),this.cloudRecentUsed=Array.from(new Set(this.cloudRecentUsed))},this.localRecentUsedOrder={},this.setLocalRecentUsedOrder=t=>{this.localRecentUsedOrder[t]=Date.now()},this.localRecentUsed=[],this.setLocalRecentUsed=t=>{const e=Object.keys(this.localRecentUsedOrder);t.forEach(t=>{const i=e.indexOf(t);-1!==i&&e.splice(i,1)}),e.length>0&&e.forEach(t=>{delete this.localRecentUsedOrder[t]}),this.localRecentUsed=t},this.appendLocalRecentUsed=t=>{this.localRecentUsed.push(t),this.localRecentUsed=Array.from(new Set(this.localRecentUsed))},this.isLibraryItem=t=>t.includes(window.__INFINITY__.wpLibraryItemId),this.isLocal=t=>t.includes(window.__INFINITY__.wpId),this.isColorItem=t=>t.includes(window.__INFINITY__.wpColorId),this.isCurrentWp=t=>this.id===t,this.diffRemote=t=>{const e=["type","switchType","timeEnd","id","wpSource","opacity","blur","customColorItems"],i=Object.keys(t).every(i=>!e.includes(i)||s.d.structural(this[i],t[i]));let o=!1;return"local"!==t.type&&t.url&&(o=this.urlInUI!==t.url),!i||o},this.nextPage=0,this.totalPage=-1,this.delay=-1,this._whenLocalSynced=async()=>{switch(function(t){Object(s.c)(()=>{const{opacity:e,blur:i}=t,o={"--wallpaper-alpha":e/100,"--wallpaper-filter":i/5+"px"};Object.keys(o).forEach(t=>{document.body.style.setProperty(t,o[t])})}),Object(s.h)(()=>t.type,e=>{e.includes("Auto")||("bing"!==e?t.wpSource&&(t.wpSource=void 0):t.wpSource=e,t.switchType="disabled",m())}),Object(s.c)(()=>{const{id:e}=t;e&&t.addRecentUsedP(e)});const e=document.querySelector(".wallpaper");Object(s.h)(()=>[t.urlInUI,t.color],([i,o])=>{"color"!==t.type?e.style.backgroundColor?(Object(g.a)("#999"),setTimeout(()=>{Object(g.b)(i)},200)):Object(g.b)(i):Object(g.a)(o)})}(this),await A.a.initStore(),this.isAuto&&this._setCloudAutoAfterInit(),this.type){case"bing":this._setBingAfterInit();break;case"userLibraryAuto":this._checkLibraryExists()}},this._syncLock=!1,this.mergeRemote=async(t,e)=>{try{if(this._syncLock)return;if(this._syncLock=!0,!("type"in t))return;if(p.n&&delete t.blur,"cloudRecentUsed"in t){if(e)this.setCloudRecentUsed(t.cloudRecentUsed);else{const e=Array.from(new Set(t.cloudRecentUsed.concat(this.cloudRecentUsed)));this.setCloudRecentUsed(e)}delete t.cloudRecentUsed}if("customColorItems"in t&&(this.mergeCustomColor(this.customColorItems,t.customColorItems,e?2:0),delete t.customColorItems),"local"===t.type)return void await this._mergeLocal(t);t.urlInUI=t.url,this._merge(t),this._afterSynced()}catch(t){console.log(t)}finally{this._syncLock=!1}},this.windmillRotating=!1,this._windmillPrevRotateSpeed=0,this._windmillPrevRotateDegree=0,this._windmillPrevRotateTime=-1,this.performWindmillRotate=t=>{if(-1===this._windmillPrevRotateTime)return this._windmillPrevRotateTime=t,void requestAnimationFrame(this.performWindmillRotate);const e=t-this._windmillPrevRotateTime;let i=this._windmillPrevRotateDegree;const{_windmillPrevRotateSpeed:o}=this;let n=o,r=0;if(this.windmillRotating)if(o<.46){let t,i;n+=36e-5*e,n>.46?(i=(n-.46)/36e-5,t=e-i,n=.46):(t=e,i=0),r=.46*i+o*t+18e-5*t*t}else r=.46*e;else{let i;n-=36e-5*e,n<0?(i=o/36e-5,n=0):i=e,0===n&&(t=-1),r=o*i-18e-5*i*i}i-=r,i%=360,i<0&&(i=360+i),this.windmillParent&&this.windmillParent.rotateWindMill(i),this._windmillPrevRotateDegree=i,this._windmillPrevRotateTime=t,this._windmillPrevRotateSpeed=n,0!==n&&requestAnimationFrame(this.performWindmillRotate)},this._lockLoadRandomP=!1,this.needSwitchWallpaper=!1,this._afterWpAutoSwitched=()=>{if(this._updateTimer(!0),!A.a.onlyOneItem)return this._prepareNextWp()},this._lockSwitchWallpaper=!1,this.timeToSwitchWallpaper=async()=>{if(!A.a.onlyOneItem&&!this._lockSwitchWallpaper){this._lockSwitchWallpaper=!0;try{await this.switchWallpaper(),await this._afterWpAutoSwitched()}finally{this._lockSwitchWallpaper=!1}}},this.switchToNextWallpaper=async()=>{try{await this.timeToSwitchWallpaper()}catch(t){d.message.top(i18n("wallpaper_switch_failure"))}},this.initAutoBackup("wallpaper",["id","url","rawUrl","wpSource","wpSourceName","type","switchType","color","timeEnd","index","opacity","blur","cloudRecentUsed","cloudRecentUsedOrder","customColorItems","nextPage","totalPage","wpExt"]),function(t){return t.initSyncStore(h.m,["id","urlInUI","rawUrl","wpSource","wpSourceCount","wpSourceName","type","switchType","imageName","imageSource","imageType","color","index","timeEnd","remoteData","opacity","blur","cloudRecentUsed","localRecentUsed","cloudRecentUsedOrder","localRecentUsedOrder","nextPage","totalPage","wpExt","customColorItems","delay"],void 0)}(this).then(this._whenLocalSynced),setTimeout(()=>{this.windmillParent=document.querySelector("newtab-main")})}_updateTimer(t=!1){const{switchType:e}=this;if(["disabled","when-newtab"].includes(e))m(),this.setTimeEnd(0);else{if(t){const t=Date.now();this.setTimeEnd(t+Object(f.a)(e))}!function(t,e){const i=Date.now(),o=Object(f.a)(e),n=t.timeEnd;let r;n>i?r=n-i:(r=o,t.setTimeEnd(i+o)),u.slave.postTask("slave:bg-run-timer-to-switch-wallpaper",r)}(this,e)}}setWpSourceName(t){this.wpSourceName=t}setWallpaper(t){const{url:e,urlInUI:i,rawUrl:o,id:n,name:r,source:a}=t;r&&(this.imageName=r),this.id=n,this.url=e,this.urlInUI=i,this.rawUrl=o,this.imageSource=a,this.setBase64Wallpaper()}async setBase64Wallpaper(){const{type:t,url:e}=this;if(["local","color"].includes(t))return;const i=await Object(f.d)(e);await Object(b.g)(i)}setColor(t){this.type="color",this.id=t.id,this.color=t.content,this.urlInUI=void 0}setCloudWallpaper(t){this.type="cloud",this.setCloudWallpaperRaw(t)}setCloudWallpaperRaw(t){this.setWallpaper({type:t.type,id:t.id,url:t.url,urlInUI:t.url,rawUrl:t.rawUrl,source:t.source})}setAutoWallpaperRaw(t){this.setWallpaper({type:t.type,id:t.id,url:t.url,urlInUI:t.url,rawUrl:t.rawUrl,source:t.source})}setWpExt(t){this.wpExt=t}async setLocalWallpaper(t){const{file:e}=t;this.setWpExt(x.a.getExtension(e.type));const i=await Object(f.d)(e);await Object(b.g)(i),this.setType("local"),this.setWallpaper({type:t.type,url:null,urlInUI:t.url,rawUrl:t.url,id:t.id})}async enableBingWallpaper(t){this.type="bing",this.wpSource="bing",this.setBingWallpaper(t)}setBingWallpaper(t){this.setCloudWallpaperRaw(t)}setList(t){this.list=t}pushList(t){this.list.push(...t)}setIndex(t){this.index=t}setTimeEnd(t){this.timeEnd=t}setRemoteData(t){this.remoteData=t}pushRemoteData(t){this.remoteData.push(...t)}spliceRemoteData(t,e=0){this.remoteData.splice(e,t)}get isAuto(){return this.type.includes("Auto")}removeLiked(t){const e=this.liked.indexOf(t);-1!==e&&this.liked.splice(e,1)}addLiked(t){const e=Object(s.j)(this.liked);e.push(t);const i=Array.from(new Set(e));this.setLiked(i)}includeLiked(t){return this.liked.includes(t)}async loadCollectionP(){const t=await Object(v.getCollectionWallpaper)();t.error||this.setCloudCollection(t.data)}async loadLikedP(){const t=await Object(v.getLikedWallpaper)();t.error||this.setLiked(t.data)}pushCustomColor(t){this.customColorItems.push(...t)}includesColorItem(t){return-1!==this.customColorItems.findIndex(({content:e})=>t===e)}appendCustomColor(t){if(-1===this.customColorItems.findIndex(({content:e})=>e===t.content)){const e=Object(s.j)(this.customColorItems);this.setCustomColorItems([t].concat(e))}}removeCustomColor(t){const e=this.customColorItems.findIndex(({id:e})=>e===t);-1!==e&&this.customColorItems.splice(e,1)}_rgbToHex(t){var e;return n()(e=t.map(t=>t.toString(16).padStart(0))).call(e,(t,e)=>t+e)}async addCustomColorItem(t){if(this.includesColorItem(t))return;const e=this._rgbaToHex(t),i=window.__INFINITY__.color_list,o=i.map(t=>_.a.hexColorDelta(e,t)),n=i[o.indexOf(Math.max.apply(null,o))],r={id:`${window.__INFINITY__.wpColorId}${Object(k.a)()}`,content:t,similarColor:n};try{y.userStore.isLogin&&await Object(v.addCustomColor)(r),this.appendCustomColor(Object.assign({type:"color"},r)),O.default.success(i18n("add_success"))}catch(t){O.default.error(i18n("network_error"))}}addCloudCollectionP(t){if(this.cloudCollection.includes(t))return;this.appendCloudCollection(t);const e=this._maxCollectionlen-this.collectionLen;if(e<0){const t=Object(s.j)(this.cloudCollection).reverse();t.length+=e,this.setCloudCollection(t.reverse())}}removeCloudCollectionP(t){const e=this.cloudCollection.indexOf(t);-1!==e&&this.cloudCollection.splice(e,1)}get collectionLen(){return this.cloudCollection.length}removeCollectionP(t){this.removeCloudCollectionP(t)}addCollectionP(t){this.addCloudCollectionP(t)}includeCollection(t){return this.cloudCollection.includes(t)}dropCloudRecentUsed(t){const e=this.cloudRecentUsed.indexOf(t);-1!==e&&this.cloudRecentUsed.splice(e,1)}get recentUsedLen(){return this.cloudRecentUsed.length+this.localRecentUsed.length}addLocalRecentP(t){if(this.setLocalRecentUsedOrder(t),this.localRecentUsed.includes(t))return;this.appendLocalRecentUsed(t);const e=this._maxRecentUsedLen-this.recentUsedLen;if(e<0){const t=Object(s.j)(this.localRecentUsed).reverse();t.length+=e,this.setLocalRecentUsed(t.reverse())}}addCloudRecentP(t){if(this.setCloudRecentUsedOrder(t),this.cloudRecentUsed.includes(t))return;this.appendCloudRecentUsed(t);const e=this._maxRecentUsedLen-this.recentUsedLen;if(e<0){const t=Object(s.j)(this.cloudRecentUsed).reverse();t.length+=e,this.setCloudRecentUsed(t.reverse())}}removeCloudRecentUsedP(t){const e=Object(s.j)(this.cloudRecentUsed);t.forEach(t=>{const i=e.indexOf(t);-1!==i&&e.splice(i,1)}),this.setCloudRecentUsed(e)}addRecentUsedP(t){this.addCloudRecentP(t)}async getBackupData(){const t={};this.backupValueKeys.forEach(e=>{t[e]=Object(s.j)(this[e])});try{if("local"===this.type){const e=await Object(b.c)();t.url=e}else t.url=this.urlInUI}catch(e){t.type="default"}return t}async _setBingAfterInit(){const t=await Object(f.b)();this.id!==t.id&&this.setCloudWallpaperRaw(t)}setDefaultWallpaper(){this.id=null,this.type="default",this.urlInUI=this.url=l.b,this.rawUrl=l.a}async _checkLibraryExists(){try{const t=await Object(v.hasWallpaperLibrary)(this.wpSource);if(t.error)throw t.error;1!==t.data&&this.setDefaultWallpaper()}catch(t){}}_setCloudAutoAfterInit(){A.a.ready?this._updateTimer(!0):this._afterWpAutoSwitched()}setType(t){this.type=t}_merge(t){Object.keys(t).forEach(e=>{this[e]!==t[e]&&(this[e]=t[e])})}async _mergeLocal(t){if("local"===this.type&&this.urlInUI.startsWith("blob:")){if(await Object(b.c)()!==t.url){const e=await Object(b.a)(t.url);t.urlInUI=t.rawUrl=a.a.createObjectURL(e),await Object(b.g)(t.url)}else delete t.urlInUI,delete t.rawUrl}else{const e=await Object(b.a)(t.url);t.urlInUI=t.rawUrl=a.a.createObjectURL(e),await Object(b.g)(t.url)}delete t.url;const e=t.wpExt;delete t.wpExt,this._merge(t),t.id?this.setWpExt(e):this.setWpExt(""),this._afterSynced()}async mergeCustomColor(t,e,i,o=!1){switch(i){case 1:if(0===t.length)return;await Object(v.setCustomColorItems)(t.map(t=>(delete t.type,t)));break;case 2:$.setCustomColorItems(e.map(t=>(t.type="color",t)));break;case 0:{const i=[],n=[];for(let e=0,o=t.length;e<o;++e){const o=t[e];n.includes(o.id)||(i.push(o),n.push(o.id))}for(let t=0,o=e.length;t<o;++t){const o=e[t];n.includes(o.id)||(i.push(o),n.push(o.id))}o&&await Object(v.setCustomColorItems)(i.map(t=>(delete t.type,t))),$.setCustomColorItems(i.map(t=>("type"in t||(t.type="color"),t)))}}}_afterSynced(){l.e&&Object(s.i)(()=>{this.url=this.url.replace(l.f,""),this.urlInUI=this.urlInUI.replace(l.f,"")}),this.setBase64Wallpaper(),this.isAuto&&(this._updateTimer(),this._prepareNextWp())}startRotateWindmill(){this.windmillRotating=!0,0===this._windmillPrevRotateSpeed&&requestAnimationFrame(this.performWindmillRotate)}endRotateWindmill(){this.windmillRotating=!1}async randomWallpaper(){if(!this._lockLoadRandomP){this._lockLoadRandomP=!0,this.startRotateWindmill();try{const{data:t,error:e}=await Object(v.getRandomWallpaper)();if(e)throw new Error(JSON.stringify(e));const i=await Object(b.f)(t.url);if(!i)throw new Error("fetch res to check :"+i);this.setCloudWallpaper(Object.assign({type:"cloud"},t)),d.message.top(i18n("wallpaper_switch_success"))}catch(t){d.message.top(i18n("wallpaper_switch_failure"))}finally{this._lockLoadRandomP=!1,this.endRotateWindmill()}}}async getNextWp(...t){const{data:e}=await Object(v.getNextWallpaper)(...t),[i]=Object(b.b)([e]);return i}async _prepareNextWp(){try{const t="userLibraryAuto"!==this.type?"library":"userLibrary",e=await this.getNextWp(this.wpSource,this.id,t);e.id===this.id?A.a.setOnlyOneItem(!0):A.a.setOnlyOneItem(!1),await Object(b.f)(e.url),A.a.setNextId(e.id),A.a.setNextRawURL(e.rawUrl),A.a.setNextURL(e.url),A.a.setNextItem(e),A.a.setReady(!0)}catch(t){if(!t.__CANCEL__)throw t}}enableUserLibraryAuto({libraryId:t,libraryName:e},i,o){this.type="userLibraryAuto",this.switchType=i,this.wpSource=t,this.wpSourceName=e,this._afterEnableWpAuto(o)}enableCloudAuto(t,e,i){this.type="cloudAuto",this.wpSource=t,this.switchType=e,this._afterEnableWpAuto(i)}_afterEnableWpAuto(t){this.setAutoWallpaperRaw(t),A.a.setOnlyOneItem(!1),this._afterWpAutoSwitched()}async switchWallpaper(){A.a.onlyOneItem||A.a.ready||await this._prepareNextWp(),this.setAutoWallpaperRaw(A.a.nextItem),A.a.setReady(!1),A.a.clearNextData()}}S([s.g],j.prototype,"id",void 0),S([s.g],j.prototype,"url",void 0),S([s.g],j.prototype,"urlInUI",void 0),S([s.g],j.prototype,"rawUrl",void 0),S([s.g],j.prototype,"wpSource",void 0),S([s.g],j.prototype,"wpSourceCount",void 0),S([s.b],j.prototype,"setWpSouceCount",void 0),S([s.g],j.prototype,"type",void 0),S([s.g],j.prototype,"switchType",void 0),S([s.b],j.prototype,"setSwitchType",void 0),S([s.b],j.prototype,"setWpSourceCount",void 0),S([s.g],j.prototype,"wpSourceName",void 0),S([s.b],j.prototype,"setWpSourceName",null),S([s.g],j.prototype,"imageName",void 0),S([s.g],j.prototype,"imageSource",void 0),S([s.g],j.prototype,"imageType",void 0),S([s.b],j.prototype,"setWallpaper",null),S([s.g],j.prototype,"color",void 0),S([s.b],j.prototype,"setColor",null),S([s.b],j.prototype,"setCloudWallpaper",null),S([s.b],j.prototype,"setCloudWallpaperRaw",null),S([s.b],j.prototype,"setAutoWallpaperRaw",null),S([s.g],j.prototype,"wpExt",void 0),S([s.b],j.prototype,"setWpExt",null),S([s.b],j.prototype,"enableBingWallpaper",null),S([s.b],j.prototype,"setBingWallpaper",null),S([s.g],j.prototype,"list",void 0),S([s.b],j.prototype,"setList",null),S([s.b],j.prototype,"pushList",null),S([s.g],j.prototype,"index",void 0),S([s.b],j.prototype,"setIndex",null),S([s.g],j.prototype,"timeEnd",void 0),S([s.b],j.prototype,"setTimeEnd",null),S([s.g],j.prototype,"remoteData",void 0),S([s.b],j.prototype,"setRemoteData",null),S([s.b],j.prototype,"pushRemoteData",null),S([s.b],j.prototype,"spliceRemoteData",null),S([s.g],j.prototype,"opacity",void 0),S([s.g],j.prototype,"blur",void 0),S([s.b],j.prototype,"setOpacity",void 0),S([s.b],j.prototype,"setBlur",void 0),S([s.e],j.prototype,"isAuto",null),S([s.g],j.prototype,"liked",void 0),S([s.b],j.prototype,"setLiked",void 0),S([s.b],j.prototype,"removeLiked",null),S([s.b],j.prototype,"addLiked",null),S([s.g],j.prototype,"customColorItems",void 0),S([s.b],j.prototype,"setCustomColorItems",void 0),S([s.b],j.prototype,"pushCustomColor",null),S([s.b],j.prototype,"removeCustomColor",null),S([s.b],j.prototype,"addCustomColorItem",null),S([s.g],j.prototype,"cloudCollection",void 0),S([s.b],j.prototype,"appendCloudCollection",void 0),S([s.b],j.prototype,"setCloudCollection",void 0),S([s.b],j.prototype,"addCloudCollectionP",null),S([s.b],j.prototype,"removeCloudCollectionP",null),S([s.e],j.prototype,"collectionLen",null),S([s.g],j.prototype,"cloudRecentUsed",void 0),S([s.b],j.prototype,"dropCloudRecentUsed",null),S([s.b],j.prototype,"setCloudRecentUsed",void 0),S([s.b],j.prototype,"appendCloudRecentUsed",void 0),S([s.g],j.prototype,"localRecentUsed",void 0),S([s.b],j.prototype,"setLocalRecentUsed",void 0),S([s.b],j.prototype,"appendLocalRecentUsed",void 0),S([s.e],j.prototype,"recentUsedLen",null),S([s.b],j.prototype,"addLocalRecentP",null),S([s.b],j.prototype,"addCloudRecentP",null),S([s.b],j.prototype,"removeCloudRecentUsedP",null),S([s.g],j.prototype,"delay",void 0),S([s.b],j.prototype,"setDefaultWallpaper",null),S([s.b],j.prototype,"_setCloudAutoAfterInit",null),S([s.b],j.prototype,"setType",null),S([s.b],j.prototype,"_merge",null),S([s.b],j.prototype,"mergeRemote",void 0),S([s.b],j.prototype,"randomWallpaper",null),S([s.b],j.prototype,"enableUserLibraryAuto",null),S([s.b],j.prototype,"enableCloudAuto",null),S([s.b],j.prototype,"switchWallpaper",null);const $=new j},function(t,e,i){"use strict";i.r(e),i.d(e,"weatherStore",(function(){return w})),i.d(e,"getCurrentWeather",(function(){return x}));var o=i(6),n=i.n(o),r=i(490),a=i.n(r),s=(i(11),i(14),i(8),i(4)),l=i(23),c=i(17),d=i(263),p=i(0);const h={100:i18n("w_100"),101:i18n("w_101"),102:i18n("w_102"),103:i18n("w_103"),104:i18n("w_104"),200:i18n("w_200"),201:i18n("w_201"),202:i18n("w_202"),203:i18n("w_203"),204:i18n("w_204"),205:i18n("w_205"),206:i18n("w_206"),207:i18n("w_207"),208:i18n("w_208"),209:i18n("w_209"),210:i18n("w_210"),211:i18n("w_211"),212:i18n("w_212"),213:i18n("w_213"),300:i18n("w_300"),301:i18n("w_301"),302:i18n("w_302"),303:i18n("w_303"),304:i18n("w_304"),305:i18n("w_305"),306:i18n("w_306"),307:i18n("w_307"),308:i18n("w_308"),309:i18n("w309"),310:i18n("w_310"),311:i18n("w_311"),312:i18n("w_312"),313:i18n("w_313"),314:i18n("w_314"),315:i18n("w_315"),316:i18n("w_316"),317:i18n("w_317"),318:i18n("w_318"),399:i18n("w_399"),400:i18n("w_400"),401:i18n("w_401"),402:i18n("w_402"),403:i18n("w_403"),404:i18n("w_404"),405:i18n("w_405"),406:i18n("w_406"),407:i18n("w_407"),408:i18n("w_408"),409:i18n("w_409"),410:i18n("w_410"),499:i18n("w_499"),500:i18n("w_500"),501:i18n("w_501"),502:i18n("w_502"),503:i18n("w_503"),504:i18n("w_504"),507:i18n("w_507"),508:i18n("w_508"),509:i18n("w_509"),510:i18n("w_510"),511:i18n("w_511"),512:i18n("w_512"),513:i18n("w_513"),514:i18n("w_514"),515:i18n("w_515"),900:i18n("w_900"),901:i18n("w_901"),999:i18n("w_999")},u={alyBGColor(t){let e="#36B3FF";switch(t.conditionCode){case"100":case"101":case"102":case"103":case"104":e="#0F7CFF";break;case"200":case"201":case"202":case"203":case"204":case"205":case"206":e="#10BDFF";break;case"207":case"208":case"209":case"210":case"211":case"212":e="#096BB2";break;case"213":case"900":e="#FF7F3B";break;case"300":case"301":case"302":case"303":case"304":case"305":case"306":case"307":case"308":case"309":case"310":case"311":case"312":case"313":case"314":case"315":case"316":case"317":case"318":case"399":e="#427BD1";break;case"301":case"300":case"402":case"403":case"404":case"405":case"406":case"407":case"408":case"409":case"410":case"4991":e="#87A6D5";break;case"500":case"501":case"502":case"503":case"504":case"505":case"506":case"507":case"508":case"509":case"510":case"511":case"512":case"513":case"514":case"515":case"999":e="#98A6BD";break;default:e="#0441C5"}return e},alyWIcon:t=>`${p.a}/weather/code_${t.conditionCode}.png`,alyText:t=>h[t.conditionCode]};function g(t,e,i){let o,n;return"celsius"===e?(o=t,n="°C"):(o=Math.floor(1.8*t+32),n="°F"),i&&(o+=n),o}var f=i(265),m=i(9),b=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},y=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i};class v extends d.a{constructor(){super(...arguments),this.localData={},this.list=[],this.lastUpdated=+new Date,this.unit="celsius",this.isShowModal=!1,this.isShowSetting=!1,this.searchState="none",this.citys=[]}get formateList(){return this.list.filter(t=>t.items).map(t=>{var e=y(t,[]);return e.items=e.items.map((t,e)=>{var i=y(t,[]);return 0===e&&(i._bgColor=u.alyBGColor(i),i._text=u.alyText(i)),i._bgImg=u.alyWIcon(i),i}),e})}sortList(t){this.list=t}changeIndex(t,e){var i;if(t===e)return;let o=[...this.list];const n=o.findIndex(e=>e.cid===t);if(-1===n)return;if("bottom"===e){const[t]=o.splice(n,1);o.push(t)}else if("top"===e){const[t]=o.splice(n,1);o.unshift(t)}else{const t=o.findIndex(t=>t.cid===e);if(-1===t)return;const[i]=o.splice(n,1);o.splice(t,0,i)}const r=(null===(i=this.list.filter(t=>t.top)[0])||void 0===i?void 0:i.name)||"";(r===t||r===e)&&(o=this.list.map(t=>t.top?Object.assign(Object.assign({},t),{top:0}):t)),this.list=o}openModal(){this.isShowModal=!0}closeModal(){this.isShowModal=!1,this.searchCitys("")}updateList(t){this.list=t}diffRemote(t){var e;if((null===(e=null==t?void 0:t.list)||void 0===e?void 0:e.length)!==this.list.length)return!0;if(this.unit!==t.unit)return!0;return this.list.some((e,i)=>e.cid!==t.list[i].cid)}async mergeRemote(t,e){if(t.list)try{const i=await this.getWeatherByCid(t.list);Object(s.i)(()=>{if(this.unit=t.unit,e)this.list=i;else{const t=this.list,e=i,{result:o}=c.a.mergeArray(t,e,"cid","updateTime");this.list=o}})}catch(t){}}async getWeatherByCid(t){t=t.filter(t=>t.name&&t.cid&&t.items);return await n.a.all(t.map(async t=>{if(t.cid){const e=await l.i.getForecastWeather(t.cid);if(null==e?void 0:e.data){return Object.assign(Object.assign({},e.data),{name:t.name})}}}))}async initLocal(){const t=await l.i.getLocalCity();Object(s.i)(()=>{t&&(this.localData=t.data)})}async addCity(t,e){const{data:i}=await l.i.getForecastWeather(t);if(!i)throw new Error(i18n("no_current_city_weather_data"));Object(s.i)(()=>{for(const e in this.list)if(this.list[e].cid===t)throw new Error(i18n("repeat_city"));this.list.push(Object.assign(Object.assign({},i),{cid:t,name:e})),this.lastUpdated=+new Date,this.closeModal()})}async searchCitys(t){if(!t)return this.citys=[],void(this.searchState="none");this.searchState="ing";try{const{data:e}=await l.i.getCityList(t);e?Object(s.i)(()=>{if(200===e.status){this.searchState="done";const t=e.cities.filter(t=>!this.filterCity(t.cid));this.citys=t}}):Object(s.i)(()=>{this.searchState="error"})}catch(t){Object(s.i)(()=>{this.searchState="error"})}}filterCity(t){const e=t.substr(t.length-1);return/^[a-zA-Z]+$/.test(e)}changeSelected(t,e){this.citys[t].selected=e}deleteCityWeather(t){let e=-1;for(const i in this.list)t===this.list[i].cid&&(e=Number(i));this.list.splice(e,1),this.lastUpdated=+new Date}changeUnit(){this.unit="celsius"===this.unit?"fahrenheit":"celsius",f.a.sendEvent({settingAction:{weatherUnit:this.unit}})}toggleSetting(){this.isShowSetting=!this.isShowSetting}closeSetting(){this.isShowSetting=!1}reset(){this.isShowSetting=!1,this.isShowModal=!1}toTop(t,e){var i;this.list=a()(i=this.list.map(i=>i.cid===t?Object.assign(Object.assign({},i),{top:0===e?1:0}):Object.assign(Object.assign({},i),{top:0}))).call(i,(t,e)=>e.top-t.top)}toggleOpen(t){this.list=this.list.map(e=>e.cid===t?Object.assign(Object.assign({},e),{open:0===e.open?1:0}):Object.assign({},e))}}b([s.g],v.prototype,"localData",void 0),b([s.g],v.prototype,"list",void 0),b([s.g],v.prototype,"lastUpdated",void 0),b([s.g],v.prototype,"unit",void 0),b([s.g],v.prototype,"isShowModal",void 0),b([s.g],v.prototype,"isShowSetting",void 0),b([s.g],v.prototype,"searchState",void 0),b([s.g],v.prototype,"citys",void 0),b([s.e],v.prototype,"formateList",null),b([s.b],v.prototype,"sortList",null),b([s.b],v.prototype,"changeIndex",null),b([s.b],v.prototype,"openModal",null),b([s.b],v.prototype,"closeModal",null),b([s.b],v.prototype,"updateList",null),b([s.b],v.prototype,"mergeRemote",null),b([s.b],v.prototype,"addCity",null),b([s.b],v.prototype,"searchCitys",null),b([s.b],v.prototype,"changeSelected",null),b([s.b],v.prototype,"deleteCityWeather",null),b([s.b],v.prototype,"changeUnit",null),b([s.b],v.prototype,"toggleSetting",null),b([s.b],v.prototype,"closeSetting",null),b([s.b],v.prototype,"reset",null),b([s.b],v.prototype,"toTop",null),b([s.b],v.prototype,"toggleOpen",null);const w=new v;w.initSyncStore(m.n,["localData","list","unit","lastUpdated"],{}),w.initAutoBackup("weather",["list","unit"]);const x=()=>{const t=w.formateList[0],e=null==t?void 0:t.items[0];if(!e)return{};return{name:g(e.tmpMax,w.unit,!0),bgColor:e._bgColor,bgImg:e._bgImg}};Object(s.c)(()=>{w.list.some(t=>!t||!t.cid)&&(p.j&&alert("error"),Object(s.i)(()=>{w.list=w.list.filter(t=>(null==t?void 0:t.name)&&(null==t?void 0:t.cid)&&(null==t?void 0:t.items))}))})},function(t,e,i){"use strict";i.d(e,"b",(function(){return o}));i(11),i(14),i(21);const o={isNonEmpty:(t,e)=>""===t?e:void 0,minLength:(t,e,i)=>t.length<e?i:void 0,isEmail:(t,e)=>/^\w+([+-.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)?void 0:e,isPhone:(t,e)=>/^1[3456789]\d{9}$/.test(t)?void 0:e};e.a=class{constructor(){this.cache=[]}add(t,e){for(const i of e){const e=i.strategy.split(":"),n=i.errorMsg;this.cache.push(()=>{const i=e.shift();return e.unshift(t),e.push(n),o[i].apply(null,e)})}}start(){for(const t of this.cache){const e=t();if(e)return e}}}},function(t,e,i){"use strict";i.d(e,"a",(function(){return x}));var o=i(99),n=i.n(o),r=i(490),a=i.n(r),s=(i(11),i(14),i(41),i(8),i(277),i(21),i(4)),l=i(401),c=i.n(l),d=i(263),p=i(483),h=i(17),u=i(0),g=i(193),f=i(484),m=i(623),b=i(23),y=i(9),v=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class w extends d.a{constructor(){super(...arguments),this.sites=[],this.editingId=null,this.currentPageIndex=0,this.redirectVersion="",this.mergeSiteArray=(t,e,i)=>{const o=t=>{if("object"==typeof t){if(t.target===g.i.target){const e=["target","uuid"];return n()(e).call(e,(e,i)=>e+t[i],"")}{var e;const i=a()(e=Object.keys(t).filter(t=>"id"!==t&&"updatetime"!==t)).call(e);return n()(i).call(i,(e,i)=>e+t[i],"")}}},r=(t=>{const e=Object.create(null),i=t=>{t.forEach(t=>{var o;if(Array.isArray(t))i(t);else if(t&&t.id){const n=t.id;e[n]=t,(null===(o=t.children)||void 0===o?void 0:o.length)>0&&i(t.children)}})};return i(t),e})(e),s=(t=>{const e=Object.create(null),i=t=>{t.forEach(t=>{var n;if(Array.isArray(t))i(t);else if("object"==typeof t)if((null===(n=t.children)||void 0===n?void 0:n.length)>0)i(t.children);else{const i=o(t);e[i]=!0}})};return i(t),e})(e);let l=!1;t.forEach((e,i)=>{t[i]=e.filter(t=>{var e;const i=r[t.id],n=t.updatetime||0;if((null===(e=t.children)||void 0===e?void 0:e.length)>0){if(i){return n>(i.updatetime||0)&&(l=!0,i.name=t.name),t.children.forEach(t=>{if(r[t.id]){const e=r[t.id].updatetime||0;(t.updatetime||0)>e&&(l=!0,Object.assign(r[t.id],t))}else l=!0,i.children.push(t)}),!1}return t.children=t.children.filter(t=>{if(r[t.id]){const e=r[t.id].updatetime||0;return(t.updatetime||0)>e&&(l=!0,Object.assign(r[t.id],t)),!1}return!0}),0!==t.children.length&&(1===t.children.length&&(Object.assign(t,t.children[0]),delete t.children),!0)}{if(!t.updatetime)return!1;const e=o(t);if(s[e])return!1;if(i){return n>(i.updatetime||0)&&(l=!0,Object.assign(r[t.id],t)),!1}return!0}})});const c=[];if(t.forEach(t=>{t.forEach(t=>{c.push(t)})}),c.length>0&&e.length>0){l=!0;let t=e.length-1;c.forEach(o=>{e[t].length<i?e[t].push(o):(t+=1,e[t]=[o])})}return{result:e,isLocalEffective:l}},this.convertBackupEquals=t=>{const{sites:e}=t;return(null==e?void 0:e.length)&&e.forEach(t=>{(null==t?void 0:t.length)&&t.forEach(t=>{(null==t?void 0:t.uuid)===g.i.uuid?(t.name=void 0,t.bgColor=void 0,t.bgImage=void 0):(null==t?void 0:t.children)&&t.children.forEach(t=>{(null==t?void 0:t.uuid)===g.i.uuid&&(t.name=void 0,t.bgColor=void 0,t.bgImage=void 0)})})}),t},this.reSortTimer=null,this.reSort=(t,e)=>{clearTimeout(this.reSortTimer),this.reSortTimer=setTimeout(()=>{var i;const o=t*e,r=n()(i=this.sites).call(i,(t,e)=>t.concat(e),[]),a=Array(Math.ceil(r.length/o)).fill(null);Object(s.i)(()=>{this.sites=a.map((t,e)=>r.slice(e*o,(e+1)*o))})},0)}}get uids(){const t=new Set;return(f.pluginStore.pluginViews.includes("infinity://settings")||f.pluginStore.pluginViews.includes("profile"))&&this.sites.forEach(e=>{e.filter(t=>t).forEach(e=>{e.children?e.children.forEach(e=>{t.add(e.uuid+"#"+e.target)}):t.add(e.uuid+"#"+e.target)})}),t}changeCurrentPage(t){this.currentPageIndex=t}diffRemote(t){const e=t=>{if((null==t?void 0:t.target)===g.i.target){const e={name:void 0,bgColor:void 0,bgImage:void 0};return Object.assign(Object.assign({},t),e)}},i=c()(t.sites||[],e),o=c()(Object(s.j)(this.sites),e);return!s.d.structural(i,o)}mergeRemote(t,e){if(!t.sites)return;const i=Object(m.getCurrentWeather)();if(e)this.setWeatherIcon(t.sites,i),this.sites=t.sites;else{const{col:e,row:o}=p.b.setting.layout,n=e*o,{result:r}=this.mergeSiteArray(Object(s.j)(this.sites),t.sites,n);this.setWeatherIcon(r,i),this.sites=r}this.sites.length?this.sites.length-1<this.currentPageIndex&&document.querySelector("newtab-main").toPage(this.sites.length-1):this.currentPageIndex=0}clearEditSite(){this.editingId=null}setEditSite(t){this.editingId=t}delSites(t=[],e=!0){var i,o,n;const[r,a,s]=t;let l,c=null;return 2===t.length?l=this.sites[r].splice(a,1):3===t.length&&(l=null===(o=null===(i=this.sites[r][a])||void 0===i?void 0:i.children)||void 0===o?void 0:o.splice(s,1)),e&&this.finishingSites(t[0]),2===t.length&&0===(null===(n=this.sites[r])||void 0===n?void 0:n.length)&&(c=r),{data:l,clearPageIndex:c}}insertSite(t=[],e){var i,o;const[n,r,a]=t;2===t.length?n!==this.sites.length||this.sites[n]?this.sites[n].splice(r,0,e):this.sites.push([e]):3===t.length&&(null===(o=null===(i=this.sites[n][r])||void 0===i?void 0:i.children)||void 0===o||o.splice(a,0,e))}handelStatus(t,e,i,o,n){const[r]=t;let[a]=e;if(null!==n&&n<a&&(a-=1,document.querySelector("newtab-main")._toPrevPage(!0)),3===t.length&&i.children.length<2){const t=this.findIndex(r,i.id);this.destroyFolder(t),a-=1}const s=null!==n?Math.min(n,a):a;return this.finishingSites(Math.max(s,0)),this.findIndex(a,o.id)}findIndex(t,e){const i=[];for(let o=Math.max(t||0,0);o<this.sites.length;o++){const t=this.sites[o];i[0]=o;if(t.find((t,o)=>t.id===e?(i[1]=o,!0):!!t.children&&t.children.find((t,n)=>t.id===e&&(i[1]=o,i[2]=n,!0))))return i}}findIcon(t,e){let i={};for(let o=Math.max(t||0,0);o<this.sites.length;o++){if(this.sites[o].some(t=>t.id===e?(i=t,!0):!!t.children&&t.children.some(t=>t.id===e&&(i=t,!0))))return i}return i}destroyFolder(t){const[e,i]=t,o=this.sites[e][i].children;0===o.length?this.sites[e].splice(i,1):(this.sites[e][i]=o.shift(),o.length>0&&this.sites[e].push(...o))}manualDestroyFolder(t){const[e,i]=t,o=this.sites[e][i].children;this.sites[e].splice(i,1);const{col:n,row:r}=p.b.setting.layout,a=n*r-this.sites[e].length;if(a>=o.length)this.sites[e].push(...o);else{const t=o.splice(0,a);this.sites[e].push(...t);const i=this.sites.length-1;this.sites[i].push(...o),this.finishingSites(i)}}finishingSites(t=0){const{col:e,row:i}=p.b.setting.layout,o=e*i,n=t=>{if(this.sites.length<=t)return;const e=this.sites[t].length;if(e>o){const i=t+1,r=this.sites[t].splice(o,e-o);this.sites.length>i?this.sites[i].unshift(...r):this.sites.push(r),n(i)}else 0===e?(t&&t===this.sites.length-1&&document.querySelector("newtab-main").toPage(t-1),this.sites.splice(t,1),n(t)):n(t+1)};n(t);for(let t=0;t<this.sites.length;){const e=this.sites[t];e&&e.length||(this.sites.splice(t,1),t-=1),t+=1}}addSite(t,e=0){if(this.sites.length>e){const{col:i,row:o}=p.b.setting.layout,n=i*o;return this.sites[e].length<n?(this.sites[e].push(t),e):this.addSite(t,e+1)}return this.sites[e]=[t],e}isIcon(t,e){return!this.findIcon(t,e).children}changeFolderName(t,e){const[i,o]=t;this.sites[i][o].name=e,this.sites[i][o].updatetime=Date.now()}setWeatherIcon(t,e){t.forEach(t=>{t&&t.forEach(t=>{t.target===g.i.target&&(t.name=e.name||g.i.name,t.bgColor=e.bgColor||g.i.bgColor,t.bgImage=e.bgImg||g.i.bgImage),t.children&&t.children.forEach(t=>{t.target===g.i.target&&(t.name=e.name||g.i.name,t.bgColor=e.bgColor||g.i.bgColor,t.bgImage=e.bgImg||g.i.bgImage)})})})}async submitSite(t){if("color"===t.bgType?delete t.bgImage:"image"===t.bgType&&(delete t.bgFont,delete t.bgText,delete t.bgColorImage,"transparent"===t.bgColor&&(t.bgColor=void 0)),t.updatetime=await h.a.getTimestamp(),this.editingId){const e=document.querySelector("newtab-main").iconSearchShow,i=this.findIcon(e?0:this.currentPageIndex,this.editingId);let o={};Object(s.i)(()=>{if(o=Object.assign(i,t),o.target===g.i.target){const t=Object(m.getCurrentWeather)();this.setWeatherIcon(x.sites,t)}})}else{const e=Object.assign({uuid:h.a.randomId("site-"),id:h.a.randomId("siteId-"),type:"web"},t),i=x.addSite(e,this.currentPageIndex);if(e.target===g.i.target){const t=Object(m.getCurrentWeather)();this.setWeatherIcon(x.sites,t)}document.querySelector("newtab-main").toPage(i)}return null}async getRedirectTargets(){const{data:t,error:e}=await b.b.getRedirectTargets(this.redirectVersion);if(!e&&t){const{list:e,version:i}=t;this.setRedirectVersion(i),this.userRedirect(e)}}setRedirectVersion(t){this.redirectVersion=t}userRedirect(t){t.forEach(t=>{let{matchs:e,version:i,target:o}=t;e=e.map(t=>new RegExp(t)),this.sites.forEach(t=>{t.forEach(t=>{var n;(null===(n=t.children)||void 0===n?void 0:n.length)?t.children.forEach(t=>{t.target&&e.some(e=>e.test(t.target))&&t.rVersion!==i&&(t.rVersion=i,t.target=o)}):t.target&&e.some(e=>e.test(t.target))&&t.rVersion!==i&&(t.rVersion=i,t.target=o)})})})}}v([s.g],w.prototype,"sites",void 0),v([s.g],w.prototype,"editingId",void 0),v([s.g],w.prototype,"currentPageIndex",void 0),v([s.g],w.prototype,"redirectVersion",void 0),v([s.e],w.prototype,"uids",null),v([s.b],w.prototype,"changeCurrentPage",null),v([s.b],w.prototype,"mergeRemote",null),v([s.b],w.prototype,"clearEditSite",null),v([s.b],w.prototype,"setEditSite",null),v([s.b],w.prototype,"delSites",null),v([s.b],w.prototype,"insertSite",null),v([s.b],w.prototype,"destroyFolder",null),v([s.b],w.prototype,"manualDestroyFolder",null),v([s.b],w.prototype,"finishingSites",null),v([s.b],w.prototype,"reSort",void 0),v([s.b],w.prototype,"addSite",null),v([s.b],w.prototype,"changeFolderName",null),v([s.b],w.prototype,"setWeatherIcon",null),v([s.b],w.prototype,"submitSite",null),v([s.b],w.prototype,"setRedirectVersion",null),v([s.b],w.prototype,"userRedirect",null);const x=new w;x.initSyncStore(y.h,["sites","redirectVersion"],{sites:Object(g.f)(u.D.lang)}),x.initAutoBackup("site",["sites"]),Object(s.h)(()=>[p.b.setting.layout.col,p.b.setting.layout.row].join(","),()=>{x.firstSync&&setTimeout(()=>{Object(p.a)(!1)},0)},{delay:0});const _=()=>{requestIdleCallback(()=>{x.firstSync?(x.sites.forEach((t,e)=>{t&&0!==t.length||Object(s.i)(()=>{x.sites.splice(e,1)})}),x.sites.forEach((t,e)=>{t.forEach((t,i)=>{t||Object(s.i)(()=>{x.sites[e].splice(i,1)})})})):_()})};setTimeout(()=>{_()},60),Object(s.c)(()=>{if(m.weatherStore.firstSync){const t=Object(m.getCurrentWeather)();x.setWeatherIcon(x.sites,t)}},{delay:20}),Object(s.c)(()=>{x.firstSync&&requestIdleCallback(()=>{x.getRedirectTargets()})},{delay:20}),p.b.changeLayout(x.reSort)},function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var o=i(490),n=i.n(o),r=i(99),a=i.n(r),s=(i(11),i(14),i(41),i(8),i(4)),l=i(263),c=i(193),d=i(17),p=i(23),h=i(0),u=i(482),g=i(9),f=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const m=h.D.isZh?c.a:c.b;class b extends l.a{constructor(){super(...arguments),this.list=[],this.defaultSearch=c.e,this.listHash="",this.version="",this.lang="",this.ignoreSuggest=!1,this.searchEngine={custom:[],addList:[],current:m,all:[]},this.convertBackupEquals=t=>{var e,i;let o=null===(e=null==t?void 0:t.searchEngine)||void 0===e?void 0:e.all,n=null===(i=null==t?void 0:t.searchEngine)||void 0===i?void 0:i.current;if(o&&(o=t.searchEngine.all.map(t=>t.uuid)),n&&(n=t.searchEngine.current.uuid),o||n){const e=Object.assign(Object.assign({},t.searchEngine),{all:o,current:n});return Object.assign(Object.assign({},t),{searchEngine:e})}return t},this.mergeAddArray=(t=[],e=[])=>{const i="uuid";if(!t||0===t.length)return{result:e||[],isLocalEffective:!1};const o=e.filter(t=>!!t),r=t=>{if("object"==typeof t){var e;const i=n()(e=Object.keys(t).filter(t=>"uuid"!==t&&"updatetime"!==t)).call(e);return a()(i).call(i,(e,i)=>e+t[i],"")}},s=(t=>{const e=Object.create(null);return t.forEach(t=>{const i=r(t);e[i]=!0}),e})(e),l=Object.create(null);e.forEach((t,e)=>{if(t[i]){const o=t[i];l[o]=e}});let c=!1;return t.filter(t=>0!==t.updatetime).forEach(t=>{const e=r(t);if(s[e])return;const n=t[i],a=l[n];if(void 0!==a){(o[a].updatetime||0)<(t.updatetime||0)&&(o[a]=t,c=!0)}else c=!0,o.push(t)}),{result:o.filter(t=>!!t),isLocalEffective:c}}}get allItems(){return[this.defaultSearch,...this.searchEngine.all]}diffRemote(t){var e,i;const o=t.searchEngine||{};if(JSON.stringify(o.addList||{})!==JSON.stringify(this.searchEngine.addList))return!0;if(JSON.stringify(o.custom||{})!==JSON.stringify(this.searchEngine.custom))return!0;if((null===(e=o.current)||void 0===e?void 0:e.uuid)!==this.searchEngine.current.uuid)return!0;if((null===(i=o.all)||void 0===i?void 0:i.length)!==this.searchEngine.all.length)return!0;return this.searchEngine.all.some((t,e)=>{var i,n;return(null===(n=null===(i=o.all)||void 0===i?void 0:i[e])||void 0===n?void 0:n.uuid)!==t.uuid})}mergeRemote(t,e){if(t.searchEngine)if(e)this.searchEngine=this.transformSearchI18n(t.searchEngine);else{const e=this.searchEngine.custom,i=t.searchEngine.custom,{result:o}=d.a.mergeArray(e,i,"uuid"),n=this.searchEngine.addList,r=t.searchEngine.addList,{result:a}=this.mergeAddArray(n,r),s=this.searchEngine.all,l=t.searchEngine.all,{result:c}=d.a.mergeArray(s,l,"uuid");this.searchEngine=this.transformSearchI18n({custom:o,addList:a,current:t.searchEngine.current,all:c})}}transformSearchI18n(t){const e=Object.create(null);this.list.forEach(t=>{e[t.uuid]=t});const i=t=>e[t.uuid]?Object.assign(Object.assign({},t),e[t.uuid]):t;return{custom:t.custom,addList:t.addList,current:i(t.current),all:t.all.map(t=>i(t))}}setActive(t){this.searchEngine.current=this.allItems[t]}closeSuggestTips(){this.ignoreSuggest=!0}delShortcut(t){const e=this.searchEngine.all.findIndex(e=>e.uuid===t);e>-1&&this.searchEngine.all.splice(e,1)}updateShortcut(t){if(t){this.searchEngine.all.some((e,i)=>e.uuid===t.uuid&&(this.searchEngine.all[i]=t,!0))||this.searchEngine.all.push(t);const e=this.searchEngine.current.uuid;t.uuid===e&&(this.searchEngine.current=t)}}createEngine(t,e=null){if(null===e){const e=d.a.randomId("custom-search-"),i=Object.assign(Object.assign({},t),{uuid:e});return this.searchEngine.custom.push(i),i}return this.searchEngine.custom[e]=Object.assign(Object.assign({},this.searchEngine.custom[e]),t),this.searchEngine.custom[e]}delEngine(t){const{uuid:e}=this.searchEngine.custom[t];return e!==this.searchEngine.current.uuid&&(this.delShortcut(e),this.searchEngine.custom.splice(t,1),!0)}createEngineAdd(t,e=null){if(null===e){const e=d.a.randomId("add-search-"),i=Object.assign(Object.assign({},t),{uuid:e});return this.searchEngine.addList.push(Object.assign(Object.assign({},t),{uuid:e})),i}return this.searchEngine.addList[e]=Object.assign(Object.assign({},this.searchEngine.addList[e]),t),this.searchEngine.addList[e]}delEngineAdd(t){return this.searchEngine.addList.splice(t,1),!0}async getEnginesList(){let t=this.version;this.lang!==h.D.lang&&(t="");const{data:e,error:i}=await p.d.getEnginesList(t);if(!i&&(Object(s.i)(()=>{var t;this.version=null===(t=e.meta)||void 0===t?void 0:t.version,this.lang=h.D.lang}),e.hash!==this.listHash))if(u.userStore.isLogin)this.updateEngines({list:e.list,listHash:e.hash});else{this.stopAutoBackupReaction();try{this.updateEngines({list:e.list,listHash:e.hash})}catch(i){}this.restartAutoBackupReaction()}}updateEngines({list:t,listHash:e}){this.list=t,this.listHash=e;const i={};t.forEach(t=>{i[t.uuid]=t});const o=this.searchEngine.current.uuid;i[o]&&(this.searchEngine.current=i[o]);const n=this.defaultSearch.uuid;i[n]&&(this.defaultSearch=i[n]);const r=[];this.searchEngine.all.forEach(t=>{const e=t.uuid;i[e]?0===t.updatetime?r.push(Object.assign(Object.assign({},i[e]),{updatetime:0})):r.push(Object.assign({},i[e])):r.push(t)}),this.searchEngine.all=r}sortShortcut(t,e){if(t===e)return;const i=[...this.searchEngine.all],o=i.findIndex(e=>e.uuid===t);if(-1!==o){if("all"===e){const[t]=i.splice(o,1);i.push(t)}else{const t=i.findIndex(t=>t.uuid===e);if(-1===t)return;const[n]=i.splice(o,1);i.splice(t,0,n)}this.searchEngine.all=i}}}f([s.g],b.prototype,"list",void 0),f([s.g],b.prototype,"defaultSearch",void 0),f([s.g],b.prototype,"listHash",void 0),f([s.g],b.prototype,"version",void 0),f([s.g],b.prototype,"lang",void 0),f([s.g],b.prototype,"ignoreSuggest",void 0),f([s.g],b.prototype,"searchEngine",void 0),f([s.e],b.prototype,"allItems",null),f([s.b],b.prototype,"mergeRemote",null),f([s.b],b.prototype,"setActive",null),f([s.b],b.prototype,"closeSuggestTips",null),f([s.b],b.prototype,"delShortcut",null),f([s.b],b.prototype,"updateShortcut",null),f([s.b],b.prototype,"createEngine",null),f([s.b],b.prototype,"delEngine",null),f([s.b],b.prototype,"createEngineAdd",null),f([s.b],b.prototype,"delEngineAdd",null),f([s.b],b.prototype,"getEnginesList",null),f([s.b],b.prototype,"updateEngines",null),f([s.b],b.prototype,"sortShortcut",null);const y=new b;y.initSyncStore(g.f,["searchEngine","list","listHash","ignoreSuggest","version","lang"],{list:c.g,searchEngine:{custom:[],addList:[],current:m,all:[Object.assign(Object.assign({},m),{updatetime:0}),Object.assign(Object.assign({},c.c),{updatetime:0})]}}),y.initAutoBackup("searcher",["searchEngine"]),Object(s.c)(()=>{y.firstSync&&y.getEnginesList()})},function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));i(11),i(14),i(41),i(8);var o=i(4),n=i(401),r=i.n(n),a=i(263),s=i(23),l=i(17),c=i(9),d=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const p=[{title:"",content:"",time:+new Date,id:"note-default-1ehj4oc7ubn8bgu9zb2spjip0vj",updatetime:0,fontSize:14}];class h extends a.a{constructor(){super(...arguments),this.linkModal=!1,this.list=p,this.checkedId=this.list[0].id,this.boldActive=!1}toogleLinkModal(){this.linkModal=!this.linkModal}setBoldActive(t){this.boldActive=t}get isEmpty(){return 0===this.list.length}get checkedNote(){return this.checkedId?this.list.filter(t=>t.id===this.checkedId)[0]:this.list[0]}get noteList(){const t=[],e=[];return this.list.forEach(i=>{i.sticky?t.push(i):e.push(i)}),t.concat(e)}diffRemote(t){const e=t=>{if(null==t?void 0:t.updatetime){const e={updatetime:void 0};return Object.assign(Object.assign({},t),e)}},i=r()(t.list||[],e),n=r()(Object(o.j)(this.list),e);return!o.d.structural(i,n)}mergeRemote(t,e){if(t.list)if(e)this.list=t.list,this.checkedId=t.checkedId;else{const e=this.list,i=t.list;this.checkedId=t.checkedId;const{result:o}=l.a.mergeArray(e,i);this.list=o}}async add({title:t="",content:e=""}){const i=l.a.randomId("note-"),n=await l.a.getTimestamp(),r={title:t,content:e,time:+new Date,id:i,updatetime:n,fontSize:14};Object(o.i)(()=>{this.list=[r,...this.list],this.checkedId=i})}delete(t){this.list=this.list.filter(e=>e.id!==t),t!==this.checkedId||this.isEmpty||(this.checkedId=this.list[0].id)}setTop(t){const e=this.list.findIndex(e=>e.id===t);if(-1!==e){const[t]=this.list.splice(e,1);t.sticky=!0,this.list.unshift(t)}}cancelSetTop(t){const e=this.list.findIndex(e=>e.id===t);if(-1!==e){const[t]=this.list.splice(e,1);t.sticky=!1,this.list.unshift(t)}}updateId(t){this.checkedId=t}async updateNote(t){const e=await l.a.getTimestamp();Object(o.i)(()=>{var i;(null===(i=this.list)||void 0===i?void 0:i.length)&&(this.list=this.list.map(i=>i.id===t.id?Object.assign(Object.assign(Object.assign({},i),t),{updatetime:e}):Object.assign({},i)))})}async upload(t,e){var i,o;const{data:n,error:r}=await s.f.uploadFile(t,e+".png","infinity-notes-img");if(r){return{error:(null===(o=null===(i=r.response)||void 0===i?void 0:i.data)||void 0===o?void 0:o.error)?r.response.data.error:r.message,data:""}}return{data:n,error:""}}}d([o.g],h.prototype,"linkModal",void 0),d([o.b],h.prototype,"toogleLinkModal",null),d([o.g],h.prototype,"list",void 0),d([o.g],h.prototype,"checkedId",void 0),d([o.g],h.prototype,"boldActive",void 0),d([o.b],h.prototype,"setBoldActive",null),d([o.e],h.prototype,"isEmpty",null),d([o.e],h.prototype,"checkedNote",null),d([o.e],h.prototype,"noteList",null),d([o.b],h.prototype,"mergeRemote",null),d([o.b],h.prototype,"add",null),d([o.b],h.prototype,"delete",null),d([o.b],h.prototype,"setTop",null),d([o.b],h.prototype,"cancelSetTop",null),d([o.b],h.prototype,"updateId",null),d([o.b],h.prototype,"updateNote",null),d([o.b],h.prototype,"upload",null);const u=new h;u.initSyncStore(c.d,["list","checkedId"],{}),u.initAutoBackup("note",["list","checkedId"])},function(t,e){var i,o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return o[t]},e.getBCHDigit=function(t){for(var e=0;0!==t;)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');i=t},e.isKanjiModeEnabled=function(){return void 0!==i},e.toSJIS=function(t){return i(t)}},function(t,e,i){var o=i(662),n=i(663);e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!o.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return n.testNumeric(t)?e.NUMERIC:n.testAlphanumeric(t)?e.ALPHANUMERIC:n.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,i){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(t){return i}}},function(t,e,i){"use strict";var o=i(6),n=i.n(o),r=i(89),a=i.n(r),s=(i(11),i(14),i(8),i(4)),l=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class c{constructor(){this.list=[],this.searchList=[],this.searchTxt="",this.permissionList=[],this.isShowAppModal=!1}get extensionList(){return this.list.length?this.list.filter(t=>"extension"===t.type):[]}get appList(){return this.list.length?this.list.filter(t=>t.isApp):[]}get compuList(){return[...this.extensionList,...this.appList]}get isEmpty(){return!(0!==this.appList.length||0!==this.extensionList.length)}async getAll(){const t=await new n.a(t=>window.chrome.management.getAll(t));Object(s.i)(()=>{this.list=t})}toggleOpen(t){this.list=t?this.list.map(e=>e.id===t?Object.assign(Object.assign({},e),{open:!e.open}):Object.assign(Object.assign({},e),{open:!1})):this.list.map(t=>Object.assign(Object.assign({},t),{open:!1}))}setEnabled(t,e){window.chrome.management.setEnabled(t,!e)}uninstall(t){window.chrome.management.uninstall(t,{showConfirmDialog:!0})}async getPermissionWarningsById(t){const e=await new n.a(e=>window.chrome.management.getPermissionWarningsById(t,e));Object(s.i)(()=>{this.permissionList=e})}search(t){this.searchTxt=t,this.searchList=this.list.filter(e=>e.name.toLowerCase().includes(a()(t).call(t).toLowerCase()))}closeModal(){this.isShowAppModal=!1}openModal(){this.isShowAppModal=!0}}l([s.g],c.prototype,"list",void 0),l([s.g],c.prototype,"searchList",void 0),l([s.g],c.prototype,"searchTxt",void 0),l([s.g],c.prototype,"permissionList",void 0),l([s.g],c.prototype,"isShowAppModal",void 0),l([s.e],c.prototype,"extensionList",null),l([s.e],c.prototype,"appList",null),l([s.e],c.prototype,"compuList",null),l([s.e],c.prototype,"isEmpty",null),l([s.b],c.prototype,"getAll",null),l([s.b],c.prototype,"toggleOpen",null),l([s.b],c.prototype,"setEnabled",null),l([s.b],c.prototype,"uninstall",null),l([s.b],c.prototype,"getPermissionWarningsById",null),l([s.b],c.prototype,"search",null),l([s.b],c.prototype,"closeModal",null),l([s.b],c.prototype,"openModal",null);const d=new c;e.a=d},function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var o=i(116);
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const n=new WeakMap,r=Object(o.e)(t=>e=>{if(!(e instanceof o.a)||e instanceof o.c||"style"!==e.committer.name||e.committer.parts.length>1)throw new Error("The `styleMap` directive must be used in the style attribute and must be the only part in the attribute.");const{committer:i}=e,{style:r}=i.element;let a=n.get(e);void 0===a&&(r.cssText=i.strings.join(" "),n.set(e,a=new Set)),a.forEach(e=>{e in t||(a.delete(e),-1===e.indexOf("-")?r[e]=null:r.removeProperty(e))});for(const e in t)a.add(e),-1===e.indexOf("-")?r[e]=t[e]:r.setProperty(e,t[e])})},function(t,e,i){"use strict";var o=i(641);r.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}();var n=r.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function r(t,e,i){return r.TYPED_ARRAY_SUPPORT||this instanceof r?"number"==typeof t?l(this,t):function(t,e,i,o){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer)return function(t,e,i,o){if(i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(o||0))throw new RangeError("'length' is out of bounds");var n;n=void 0===i&&void 0===o?new Uint8Array(e):void 0===o?new Uint8Array(e,i):new Uint8Array(e,i,o);r.TYPED_ARRAY_SUPPORT?n.__proto__=r.prototype:n=c(t,n);return n}(t,e,i,o);if("string"==typeof e)return function(t,e){var i=0|p(e),o=s(t,i),n=o.write(e);n!==i&&(o=o.slice(0,n));return o}(t,e);return function(t,e){if(r.isBuffer(e)){var i=0|a(e.length),o=s(t,i);return 0===o.length||e.copy(o,0,0,i),o}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):c(t,e);if("Buffer"===e.type&&Array.isArray(e.data))return c(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}(this,t,e,i):new r(t,e,i)}function a(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function s(t,e){var i;return r.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(e)).__proto__=r.prototype:(null===(i=t)&&(i=new r(e)),i.length=e),i}function l(t,e){var i=s(t,e<0?0:0|a(e));if(!r.TYPED_ARRAY_SUPPORT)for(var o=0;o<e;++o)i[o]=0;return i}function c(t,e){for(var i=e.length<0?0:0|a(e.length),o=s(t,i),n=0;n<i;n+=1)o[n]=255&e[n];return o}function d(t,e){var i;e=e||1/0;for(var o=t.length,n=null,r=[],a=0;a<o;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(a+1===o){(e-=3)>-1&&r.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&r.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function p(t){return r.isBuffer(t)?t.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer)?t.byteLength:("string"!=typeof t&&(t=""+t),0===t.length?0:d(t).length)}r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),r.prototype.write=function(t,e,i){void 0===e||void 0===i&&"string"==typeof e?(i=this.length,e=0):isFinite(e)&&(e|=0,isFinite(i)?i|=0:i=void 0);var o=this.length-e;if((void 0===i||i>o)&&(i=o),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");return function(t,e,i,o){return function(t,e,i,o){for(var n=0;n<o&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}(d(e,t.length-i),t,i,o)}(this,t,e,i)},r.prototype.slice=function(t,e){var i,o=this.length;if((t=~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),(e=void 0===e?o:~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),e<t&&(e=t),r.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=r.prototype;else{var n=e-t;i=new r(n,void 0);for(var a=0;a<n;++a)i[a]=this[a+t]}return i},r.prototype.copy=function(t,e,i,o){if(i||(i=0),o||0===o||(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&o<i&&(o=i),o===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-e<o-i&&(o=t.length-e+i);var n,a=o-i;if(this===t&&i<e&&e<o)for(n=a-1;n>=0;--n)t[n+e]=this[n+i];else if(a<1e3||!r.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)t[n+e]=this[n+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+a),e);return a},r.prototype.fill=function(t,e,i){if("string"==typeof t){if("string"==typeof e?(e=0,i=this.length):"string"==typeof i&&(i=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{var a=r.isBuffer(t)?t:new r(t),s=a.length;for(n=0;n<i-e;++n)this[n+e]=a[n%s]}return this},r.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s(null,0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=l(null,e),a=0;for(i=0;i<t.length;++i){var c=t[i];if(!r.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(n,a),a+=c.length}return n},r.byteLength=p,r.prototype._isBuffer=!0,r.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.exports.alloc=function(t){var e=new r(t);return e.fill(0),e},t.exports.from=function(t){return new r(t)}},,function(t,e,i){t.exports=i.p+"images/arrow-right.d51ffb7.svg"},,function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));i(11),i(14);var o=i(9),n=i(4),r=i(263),a=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class s extends r.a{constructor(){super(...arguments),this.onlyOneItem=!1,this.ready=!1}initStore(){return this.initSyncStore(o.l,["onlyOneItem","ready","nextId","nextRawURL","nextURL","nextItem"])}setOnlyOneItem(t){this.onlyOneItem=t}setReady(t){this.ready=t}setNextId(t){this.nextId=t}setNextRawURL(t){this.nextRawURL=t}setNextURL(t){this.nextURL=t}setNextItem(t){this.nextItem=t}clearNextData(){this.nextURL=void 0,this.nextRawURL=void 0,this.nextId=void 0,this.nextItem=null}}a([n.g],s.prototype,"onlyOneItem",void 0),a([n.g],s.prototype,"ready",void 0),a([n.g],s.prototype,"nextId",void 0),a([n.g],s.prototype,"nextRawURL",void 0),a([n.g],s.prototype,"nextURL",void 0),a([n.g],s.prototype,"nextItem",void 0),a([n.b],s.prototype,"setOnlyOneItem",null),a([n.b],s.prototype,"setReady",null),a([n.b],s.prototype,"setNextId",null),a([n.b],s.prototype,"setNextRawURL",null),a([n.b],s.prototype,"setNextURL",null),a([n.b],s.prototype,"setNextItem",null),a([n.b],s.prototype,"clearNextData",null);const l=new s},function(t,e,i){"use strict";i(11),i(14);var o=i(1),n=i(0),r=i(17),a=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let s=class extends o.a{constructor(){super(...arguments),this.url="",this._once=!1,this.onError=({currentTarget:t})=>{if(!this._once){const e=r.a.getFavIconSrc(this.url);t.src="https://favicon.infinitynewtab.com/"+e+".png",this._once=!0}}}firstUpdated(){}getSrc(){if(n.n||n.h){return"https://favicon.infinitynewtab.com/"+r.a.getFavIconSrc(this.url)+".png"}return"chrome://favicon/size/32@2x/"+this.url}render(){const t=this.getSrc();return o.e` <img src="${t}" @error="${this.onError}" /> `}};s.styles=o.b`
    :host {
      display: inline-block;
      flex-shrink: 0;
      width: inherit;
      height: inherit;
    }
    img {
      width: 100%;
      height: 100%;
    }
  `,a([Object(o.g)()],s.prototype,"url",void 0),s=a([Object(o.c)("i-favicon")],s)},,function(t,e,i){"use strict";var o=i(45),n=i(37),r=i(124),a=i(10),s=i(25),l=i(125),c=i(126),d=i(24);if(o({target:"Promise",proto:!0,real:!0,forced:!!r&&a((function(){r.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=l(this,s("Promise")),i="function"==typeof t;return this.then(i?function(i){return c(e,t()).then((function(){return i}))}:t,i?function(i){return c(e,t()).then((function(){throw i}))}:t)}}),!n&&"function"==typeof r){var p=s("Promise").prototype.finally;r.prototype.finally!==p&&d(r.prototype,"finally",p,{unsafe:!0})}},function(t,e,i){t.exports=i.p+"images/clear.31d5f14.png"},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,i){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(t){return i}}},function(t,e,i){t.exports=i.p+"images/spin.f9360d9.svg"},,function(t,e,i){t.exports=i.p+"images/close-fff.a7cbff9.svg"},function(t,e,i){t.exports=i.p+"images/empty.1b04259.png"},function(t,e,i){"use strict";i(11),i(14);var o=i(1),n=i(385),r=(i(489),i(721)),a=i.n(r),s=i(640),l=i.n(s),c=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let d=class extends o.a{constructor(){super(...arguments),this.placeholder="",this.value="",this.isClear=!1,this.searchBtnPosition="right",this.type="black"}handleInputChange(t){const e=t.target.value;this.value=e,this.dispatchEvent(new CustomEvent("i-search",{detail:{text:e},bubbles:!0,composed:!0}))}handleBlur(t){this.dispatchEvent(new CustomEvent("i-blur",{detail:{text:t.target.value},bubbles:!0,composed:!0}))}set(t){this.value=t,this.forElement.value=t}focus(){this.forElement.focus()}clear(t=!0){this.value="",this.forElement.value="",t&&this.forElement.focus(),this.dispatchEvent(new CustomEvent("i-clear",{bubbles:!0,composed:!0}))}render(){return o.e`
      <div class="i-search-wrapper ${this.type}">
        ${"left"===this.searchBtnPosition?o.e`<i-svg class="search-icon-left" .src=${a.a}></i-svg>`:null}
        <input
          class=${Object(n.a)({"padding-left":"left"===this.searchBtnPosition})}
          placeholder="${this.placeholder}"
          @blur="${this.handleBlur}"
          @input=${t=>{t.target.keyEvent||this.handleInputChange(t)}}
        />
        <div class="search-icon">
          ${this.value?o.e`<i-svg class="clear-icon" .src=${l.a} @click=${this.clear}></i-svg>`:null}
          ${this.value||"right"!==this.searchBtnPosition?null:o.e`<img class="search-icons" .src=${a.a} />`}
        </div>
      </div>
    `}};d.styles=o.b`
    :host {
      display: block;
      width: 100%;
      --height: 52px;
    }
    .i-search-wrapper {
      box-sizing: border-box;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      height: var(--height);
      background: rgba(255, 255, 255, 1);
      border: 1px solid #999;
      border-radius: 6px;
      overflow: hidden;
    }
    .i-search-wrapper:hover {
      border: 1px solid #333;
    }
    .i-search-wrapper:focus-within {
      border: 1px solid #333;
    }
    .white {
      border: none !important;
    }
    input {
      flex: 1;
      height: 100%;
      padding: 0px 48px 0px 20px;
      border: none;
      outline: none;
      font-size: 14px;
      min-width: 100px;
      font-family: PingFangSC-Regular, 'PingFang SC';
    }
    input.padding-left {
      padding-left: 44px;
    }
    .white input::placeholder {
      color: #bbb;
    }
    .search-icon {
      position: absolute;
      right: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
    }
    .i-search-wrapper:hover .search-icon-left {
      color: #333;
    }
    .i-search-wrapper:focus-within .search-icon-left {
      color: #333;
    }
    .search-icon-left {
      position: absolute;
      left: 16px;
      width: 18px;
      height: 18px;
      color: #999;
      transition: color 0.2s;
    }
    .search-icons {
      width: 18px;
      height: 18px;
    }
    .clear-icon {
      margin: 2px;
      width: 14px;
      height: 14px;
      color: #999;
      cursor: pointer;
      transition: color 0.2s;
      transform: translateZ(10px);
    }
    .clear-icon:hover {
      color: #333;
    }
  `,c([Object(o.g)({type:String})],d.prototype,"placeholder",void 0),c([Object(o.g)({type:String})],d.prototype,"value",void 0),c([Object(o.g)({type:Boolean,reflect:!0})],d.prototype,"isClear",void 0),c([Object(o.g)({type:String})],d.prototype,"searchBtnPosition",void 0),c([Object(o.g)({type:String})],d.prototype,"type",void 0),c([Object(o.h)("input")],d.prototype,"forElement",void 0),c([Object(o.d)({passive:!0})],d.prototype,"handleInputChange",null),d=c([Object(o.c)("i-search")],d)},function(t,e,i){t.exports=i.p+"images/link.15a4941.svg"},function(t,e,i){t.exports=i.p+"images/refresh.fbac946.svg"},function(t,e,i){t.exports=i.p+"images/payment.bdef3b5.png"},function(t,e,i){t.exports=i.p+"images/facebook-bg.10b1b46.png"},function(t,e,i){t.exports=i.p+"images/qq-bg.e497f75.png"},function(t,e,i){t.exports=i.p+"images/icon-backup.b9c87b9.svg"},function(t,e,i){t.exports=i.p+"images/arrow_qr_code.8fe97e0.png"},function(t,e,i){var o={"./icon_facebook.png":656,"./icon_google.png":657,"./icon_qq.png":658,"./icon_sina.png":659,"./icon_wechat.png":660};function n(t){var e=r(t);return i(e)}function r(t){if(!i.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}n.keys=function(){return Object.keys(o)},n.resolve=r,t.exports=n,n.id=655},function(t,e,i){t.exports=i.p+"images/icon_facebook.5e5a555.png"},function(t,e,i){t.exports=i.p+"images/icon_google.5a5277b.png"},function(t,e,i){t.exports=i.p+"images/icon_qq.dc39b28.png"},function(t,e,i){t.exports=i.p+"images/icon_sina.05f30d5.png"},function(t,e,i){t.exports=i.p+"images/icon_wechat.24b00c8.png"},function(t,e,i){var o=i(642),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case o.L:return n[4*(t-1)+0];case o.M:return n[4*(t-1)+1];case o.Q:return n[4*(t-1)+2];case o.H:return n[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case o.L:return r[4*(t-1)+0];case o.M:return r[4*(t-1)+1];case o.Q:return r[4*(t-1)+2];case o.H:return r[4*(t-1)+3];default:return}}},function(t,e){e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},function(t,e){var i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",o="(?:(?![A-Z0-9 $%*+\\-./:]|"+(i=i.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";e.KANJI=new RegExp(i,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(o,"g"),e.NUMERIC=new RegExp("[0-9]+","g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var n=new RegExp("^"+i+"$"),r=new RegExp("^[0-9]+$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return n.test(t)},e.testNumeric=function(t){return r.test(t)},e.testAlphanumeric=function(t){return a.test(t)}},function(t,e){function i(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");var e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))),6===e.length&&e.push("F","F");var i=parseInt(e.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:255&i,hex:"#"+e.slice(0,6).join("")}}e.getOptions=function(t){t||(t={}),t.color||(t.color={});var e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,o=t.width&&t.width>=21?t.width:void 0,n=t.scale||4;return{width:o,scale:o?4:n,margin:e,color:{dark:i(t.color.dark||"#000000ff"),light:i(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,i){var o=e.getScale(t,i);return Math.floor((t+2*i.margin)*o)},e.qrToImageData=function(t,i,o){for(var n=i.modules.size,r=i.modules.data,a=e.getScale(n,o),s=Math.floor((n+2*o.margin)*a),l=o.margin*a,c=[o.color.light,o.color.dark],d=0;d<s;d++)for(var p=0;p<s;p++){var h=4*(d*s+p),u=o.color.light;if(d>=l&&p>=l&&d<s-l&&p<s-l)u=c[r[Math.floor((d-l)/a)*n+Math.floor((p-l)/a)]?1:0];t[h++]=u.r,t[h++]=u.g,t[h++]=u.b,t[h]=u.a}}},function(t,e,i){var o={"./arrow_qr_code.png":654,"./avator.png":775,"./douban_icon.png":776,"./facebook-bg.png":651,"./facebook_icon.png":777,"./google_icon.png":778,"./linked_icon.png":779,"./login/icon_facebook.png":656,"./login/icon_google.png":657,"./login/icon_qq.png":658,"./login/icon_sina.png":659,"./login/icon_wechat.png":660,"./payment.png":650,"./qq-bg.png":652,"./qq_icon.png":780,"./source/all.png":781,"./source/barn-images.png":782,"./source/bing.png":783,"./source/free-nature-stock.png":784,"./source/infinity.png":785,"./source/jay-mantri.png":786,"./source/life-of-pix.png":787,"./source/mmt.png":788,"./source/picography.png":789,"./source/realistic-shots.png":790,"./source/skitter-photo.png":791,"./source/startup-stock-photos.png":792,"./source/unsplash.png":793,"./twitter_icon.png":794,"./xinlang_icon.png":795,"./zone_icon.png":796};function n(t){var e=r(t);return i(e)}function r(t){if(!i.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}n.keys=function(){return Object.keys(o)},n.resolve=r,t.exports=n,n.id=665},function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ownKeys(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(i),!0).forEach((function(e){_defineProperty(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],o=!0,n=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(o=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){n=!0,r=t}finally{try{o||null==s.return||s.return()}finally{if(n)throw r}}return i}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function createCommonjsModule(t){var e={exports:{}};return t(e,e.exports),e.exports}var UZIP_1=createCommonjsModule((function(t){var e,i,o={};t.exports=o,o.parse=function(t,e){for(var i=o.bin.readUshort,n=o.bin.readUint,r=0,a={},s=new Uint8Array(t),l=s.length-4;101010256!=n(s,l);)l--;r=l,r+=4;var c=i(s,r+=4),d=(i(s,r+=2),n(s,r+=2)),p=n(s,r+=4);r+=4,r=p;for(var h=0;h<c;h++){n(s,r),r+=4,r+=4,r+=4,n(s,r+=4),d=n(s,r+=4);var u=n(s,r+=4),g=i(s,r+=4),f=i(s,r+2),m=i(s,r+4);r+=6;var b=n(s,r+=8);r+=4,r+=g+f+m,o._readLocal(s,b,a,d,u,e)}return a},o._readLocal=function(t,e,i,n,r,a){var s=o.bin.readUshort,l=o.bin.readUint,c=(l(t,e),s(t,e+=4),s(t,e+=2),s(t,e+=2));l(t,e+=2),l(t,e+=4),e+=4;var d=s(t,e+=8),p=s(t,e+=2);e+=2;var h=o.bin.readUTF8(t,e,d);if(e+=d,e+=p,a)i[h]={size:r,csize:n};else{var u=new Uint8Array(t.buffer,e);if(0==c)i[h]=new Uint8Array(u.buffer.slice(e,e+n));else{if(8!=c)throw"unknown compression method: "+c;var g=new Uint8Array(r);o.inflateRaw(u,g),i[h]=g}}},o.inflateRaw=function(t,e){return o.F.inflate(t,e)},o.inflate=function(t,e){return t[0],t[1],o.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),e)},o.deflate=function(t,e){null==e&&(e={level:6});var i=0,n=new Uint8Array(50+Math.floor(1.1*t.length));n[i]=120,n[i+1]=156,i+=2,i=o.F.deflateRaw(t,n,i,e.level);var r=o.adler(t,0,t.length);return n[i+0]=r>>>24&255,n[i+1]=r>>>16&255,n[i+2]=r>>>8&255,n[i+3]=r>>>0&255,new Uint8Array(n.buffer,0,i+4)},o.deflateRaw=function(t,e){null==e&&(e={level:6});var i=new Uint8Array(50+Math.floor(1.1*t.length)),n=o.F.deflateRaw(t,i,n,e.level);return new Uint8Array(i.buffer,0,n)},o.encode=function(t,e){null==e&&(e=!1);var i=0,n=o.bin.writeUint,r=o.bin.writeUshort,a={};for(var s in t){var l=!o._noNeed(s)&&!e,c=t[s],d=o.crc.crc(c,0,c.length);a[s]={cpr:l,usize:c.length,crc:d,file:l?o.deflateRaw(c):c}}for(var s in a)i+=a[s].file.length+30+46+2*o.bin.sizeUTF8(s);i+=22;var p=new Uint8Array(i),h=0,u=[];for(var s in a){var g=a[s];u.push(h),h=o._writeHeader(p,h,s,g,0)}var f=0,m=h;for(var s in a)g=a[s],u.push(h),h=o._writeHeader(p,h,s,g,1,u[f++]);var b=h-m;return n(p,h,101010256),h+=4,r(p,h+=4,f),r(p,h+=2,f),n(p,h+=2,b),n(p,h+=4,m),h+=4,h+=2,p.buffer},o._noNeed=function(t){var e=t.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(e)},o._writeHeader=function(t,e,i,n,r,a){var s=o.bin.writeUint,l=o.bin.writeUshort,c=n.file;return s(t,e,0==r?67324752:33639248),e+=4,1==r&&(e+=2),l(t,e,20),l(t,e+=2,0),l(t,e+=2,n.cpr?8:0),s(t,e+=2,0),s(t,e+=4,n.crc),s(t,e+=4,c.length),s(t,e+=4,n.usize),l(t,e+=4,o.bin.sizeUTF8(i)),l(t,e+=2,0),e+=2,1==r&&(e+=2,e+=2,s(t,e+=6,a),e+=4),e+=o.bin.writeUTF8(t,e,i),0==r&&(t.set(c,e),e+=c.length),e},o.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var i=e,o=0;o<8;o++)1&i?i=3988292384^i>>>1:i>>>=1;t[e]=i}return t}(),update:function(t,e,i,n){for(var r=0;r<n;r++)t=o.crc.table[255&(t^e[i+r])]^t>>>8;return t},crc:function(t,e,i){return 4294967295^o.crc.update(4294967295,t,e,i)}},o.adler=function(t,e,i){for(var o=1,n=0,r=e,a=e+i;r<a;){for(var s=Math.min(r+5552,a);r<s;)n+=o+=t[r++];o%=65521,n%=65521}return n<<16|o},o.bin={readUshort:function(t,e){return t[e]|t[e+1]<<8},writeUshort:function(t,e,i){t[e]=255&i,t[e+1]=i>>8&255},readUint:function(t,e){return 16777216*t[e+3]+(t[e+2]<<16|t[e+1]<<8|t[e])},writeUint:function(t,e,i){t[e]=255&i,t[e+1]=i>>8&255,t[e+2]=i>>16&255,t[e+3]=i>>24&255},readASCII:function(t,e,i){for(var o="",n=0;n<i;n++)o+=String.fromCharCode(t[e+n]);return o},writeASCII:function(t,e,i){for(var o=0;o<i.length;o++)t[e+o]=i.charCodeAt(o)},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,i){for(var n,r="",a=0;a<i;a++)r+="%"+o.bin.pad(t[e+a].toString(16));try{n=decodeURIComponent(r)}catch(n){return o.bin.readASCII(t,e,i)}return n},writeUTF8:function(t,e,i){for(var o=i.length,n=0,r=0;r<o;r++){var a=i.charCodeAt(r);if(0==(4294967168&a))t[e+n]=a,n++;else if(0==(4294965248&a))t[e+n]=192|a>>6,t[e+n+1]=128|a>>0&63,n+=2;else if(0==(4294901760&a))t[e+n]=224|a>>12,t[e+n+1]=128|a>>6&63,t[e+n+2]=128|a>>0&63,n+=3;else{if(0!=(4292870144&a))throw"e";t[e+n]=240|a>>18,t[e+n+1]=128|a>>12&63,t[e+n+2]=128|a>>6&63,t[e+n+3]=128|a>>0&63,n+=4}}return n},sizeUTF8:function(t){for(var e=t.length,i=0,o=0;o<e;o++){var n=t.charCodeAt(o);if(0==(4294967168&n))i++;else if(0==(4294965248&n))i+=2;else if(0==(4294901760&n))i+=3;else{if(0!=(4292870144&n))throw"e";i+=4}}return i}},o.F={},o.F.deflateRaw=function(t,e,i,n){var r=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][n],a=o.F.U,s=o.F._goodIndex,l=(o.F._hash,o.F._putsE),c=0,d=i<<3,p=0,h=t.length;if(0==n){for(;c<h;)l(e,d,c+(O=Math.min(65535,h-c))==h?1:0),d=o.F._copyExact(t,c,O,e,d+8),c+=O;return d>>>3}var u=a.lits,g=a.strt,f=a.prev,m=0,b=0,y=0,v=0,w=0,x=0;for(h>2&&(g[x=o.F._hash(t,0)]=0),c=0;c<h;c++){if(w=x,c+1<h-2){x=o.F._hash(t,c+1);var _=c+1&32767;f[_]=g[x],g[x]=_}if(p<=c){(m>14e3||b>26697)&&h-c>100&&(p<c&&(u[m]=c-p,m+=2,p=c),d=o.F._writeBlock(c==h-1||p==h?1:0,u,m,v,t,y,c-y,e,d),m=b=v=0,y=c);var k=0;c<h-2&&(k=o.F._bestMatch(t,c,f,w,Math.min(r[2],h-c),r[3]));var O=k>>>16,A=65535&k;if(0!=k){A=65535&k;var S=s(O=k>>>16,a.of0);a.lhst[257+S]++;var I=s(A,a.df0);a.dhst[I]++,v+=a.exb[S]+a.dxb[I],u[m]=O<<23|c-p,u[m+1]=A<<16|S<<8|I,m+=2,p=c+O}else a.lhst[t[c]]++;b++}}for(y==c&&0!=t.length||(p<c&&(u[m]=c-p,m+=2,p=c),d=o.F._writeBlock(1,u,m,v,t,y,c-y,e,d),m=0,b=0,m=b=v=0,y=c);0!=(7&d);)d++;return d>>>3},o.F._bestMatch=function(t,e,i,n,r,a){var s=32767&e,l=i[s],c=s-l+32768&32767;if(l==s||n!=o.F._hash(t,e-c))return 0;for(var d=0,p=0,h=Math.min(32767,e);c<=h&&0!=--a&&l!=s;){if(0==d||t[e+d]==t[e+d-c]){var u=o.F._howLong(t,e,c);if(u>d){if(p=c,(d=u)>=r)break;c+2<u&&(u=c+2);for(var g=0,f=0;f<u-2;f++){var m=e-c+f+32768&32767,b=m-i[m]+32768&32767;b>g&&(g=b,l=m)}}}c+=(s=l)-(l=i[s])+32768&32767}return d<<16|p},o.F._howLong=function(t,e,i){if(t[e]!=t[e-i]||t[e+1]!=t[e+1-i]||t[e+2]!=t[e+2-i])return 0;var o=e,n=Math.min(t.length,e+258);for(e+=3;e<n&&t[e]==t[e-i];)e++;return e-o},o.F._hash=function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(t,e,i,n,r,a,s,l,c){var d,p,h,u,g,f,m,b,y,v=o.F.U,w=o.F._putsF,x=o.F._putsE;v.lhst[256]++,p=(d=o.F.getTrees())[0],h=d[1],u=d[2],g=d[3],f=d[4],m=d[5],b=d[6],y=d[7];var _=32+(0==(c+3&7)?0:8-(c+3&7))+(s<<3),k=n+o.F.contSize(v.fltree,v.lhst)+o.F.contSize(v.fdtree,v.dhst),O=n+o.F.contSize(v.ltree,v.lhst)+o.F.contSize(v.dtree,v.dhst);O+=14+3*m+o.F.contSize(v.itree,v.ihst)+(2*v.ihst[16]+3*v.ihst[17]+7*v.ihst[18]);for(var A=0;A<286;A++)v.lhst[A]=0;for(A=0;A<30;A++)v.dhst[A]=0;for(A=0;A<19;A++)v.ihst[A]=0;var S=_<k&&_<O?0:k<O?1:2;if(w(l,c,t),w(l,c+1,S),c+=3,0==S){for(;0!=(7&c);)c++;c=o.F._copyExact(r,a,s,l,c)}else{var I,j;if(1==S&&(I=v.fltree,j=v.fdtree),2==S){o.F.makeCodes(v.ltree,p),o.F.revCodes(v.ltree,p),o.F.makeCodes(v.dtree,h),o.F.revCodes(v.dtree,h),o.F.makeCodes(v.itree,u),o.F.revCodes(v.itree,u),I=v.ltree,j=v.dtree,x(l,c,g-257),x(l,c+=5,f-1),x(l,c+=5,m-4),c+=4;for(var $=0;$<m;$++)x(l,c+3*$,v.itree[1+(v.ordr[$]<<1)]);c+=3*m,c=o.F._codeTiny(b,v.itree,l,c),c=o.F._codeTiny(y,v.itree,l,c)}for(var C=a,E=0;E<i;E+=2){for(var T=e[E],P=T>>>23,R=C+(8388607&T);C<R;)c=o.F._writeLit(r[C++],I,l,c);if(0!=P){var L=e[E+1],D=L>>16,M=L>>8&255,U=255&L;x(l,c=o.F._writeLit(257+M,I,l,c),P-v.of0[M]),c+=v.exb[M],w(l,c=o.F._writeLit(U,j,l,c),D-v.df0[U]),c+=v.dxb[U],C+=P}}c=o.F._writeLit(256,I,l,c)}return c},o.F._copyExact=function(t,e,i,o,n){var r=n>>>3;return o[r]=i,o[r+1]=i>>>8,o[r+2]=255-o[r],o[r+3]=255-o[r+1],r+=4,o.set(new Uint8Array(t.buffer,e,i),r),n+(i+4<<3)},o.F.getTrees=function(){for(var t=o.F.U,e=o.F._hufTree(t.lhst,t.ltree,15),i=o.F._hufTree(t.dhst,t.dtree,15),n=[],r=o.F._lenCodes(t.ltree,n),a=[],s=o.F._lenCodes(t.dtree,a),l=0;l<n.length;l+=2)t.ihst[n[l]]++;for(l=0;l<a.length;l+=2)t.ihst[a[l]]++;for(var c=o.F._hufTree(t.ihst,t.itree,7),d=19;d>4&&0==t.itree[1+(t.ordr[d-1]<<1)];)d--;return[e,i,c,r,s,d,n,a]},o.F.getSecond=function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(t[i+1]);return e},o.F.nonZero=function(t){for(var e="",i=0;i<t.length;i+=2)0!=t[i+1]&&(e+=(i>>1)+",");return e},o.F.contSize=function(t,e){for(var i=0,o=0;o<e.length;o++)i+=e[o]*t[1+(o<<1)];return i},o.F._codeTiny=function(t,e,i,n){for(var r=0;r<t.length;r+=2){var a=t[r],s=t[r+1];n=o.F._writeLit(a,e,i,n);var l=16==a?2:17==a?3:7;a>15&&(o.F._putsE(i,n,s,l),n+=l)}return n},o.F._lenCodes=function(t,e){for(var i=t.length;2!=i&&0==t[i-1];)i-=2;for(var o=0;o<i;o+=2){var n=t[o+1],r=o+3<i?t[o+3]:-1,a=o+5<i?t[o+5]:-1,s=0==o?-1:t[o-1];if(0==n&&r==n&&a==n){for(var l=o+5;l+2<i&&t[l+2]==n;)l+=2;(c=Math.min(l+1-o>>>1,138))<11?e.push(17,c-3):e.push(18,c-11),o+=2*c-2}else if(n==s&&r==n&&a==n){for(l=o+5;l+2<i&&t[l+2]==n;)l+=2;var c=Math.min(l+1-o>>>1,6);e.push(16,c-3),o+=2*c-2}else e.push(n,0)}return i>>>1},o.F._hufTree=function(t,e,i){var n=[],r=t.length,a=e.length,s=0;for(s=0;s<a;s+=2)e[s]=0,e[s+1]=0;for(s=0;s<r;s++)0!=t[s]&&n.push({lit:s,f:t[s]});var l=n.length,c=n.slice(0);if(0==l)return 0;if(1==l){var d=n[0].lit;return c=0==d?1:0,e[1+(d<<1)]=1,e[1+(c<<1)]=1,1}n.sort((function(t,e){return t.f-e.f}));var p=n[0],h=n[1],u=0,g=1,f=2;for(n[0]={lit:-1,f:p.f+h.f,l:p,r:h,d:0};g!=l-1;)p=u!=g&&(f==l||n[u].f<n[f].f)?n[u++]:n[f++],h=u!=g&&(f==l||n[u].f<n[f].f)?n[u++]:n[f++],n[g++]={lit:-1,f:p.f+h.f,l:p,r:h};var m=o.F.setDepth(n[g-1],0);for(m>i&&(o.F.restrictDepth(c,i,m),m=i),s=0;s<l;s++)e[1+(c[s].lit<<1)]=c[s].d;return m},o.F.setDepth=function(t,e){return-1!=t.lit?(t.d=e,e):Math.max(o.F.setDepth(t.l,e+1),o.F.setDepth(t.r,e+1))},o.F.restrictDepth=function(t,e,i){var o=0,n=1<<i-e,r=0;for(t.sort((function(t,e){return e.d==t.d?t.f-e.f:e.d-t.d})),o=0;o<t.length&&t[o].d>e;o++){var a=t[o].d;t[o].d=e,r+=n-(1<<i-a)}for(r>>>=i-e;r>0;)(a=t[o].d)<e?(t[o].d++,r-=1<<e-a-1):o++;for(;o>=0;o--)t[o].d==e&&r<0&&(t[o].d--,r++);0!=r&&console.log("debt left")},o.F._goodIndex=function(t,e){var i=0;return e[16|i]<=t&&(i|=16),e[8|i]<=t&&(i|=8),e[4|i]<=t&&(i|=4),e[2|i]<=t&&(i|=2),e[1|i]<=t&&(i|=1),i},o.F._writeLit=function(t,e,i,n){return o.F._putsF(i,n,e[t<<1]),n+e[1+(t<<1)]},o.F.inflate=function(t,e){var i=Uint8Array;if(3==t[0]&&0==t[1])return e||new i(0);var n=o.F,r=n._bitsF,a=n._bitsE,s=n._decodeTiny,l=n.makeCodes,c=n.codes2map,d=n._get17,p=n.U,h=null==e;h&&(e=new i(t.length>>>2<<3));for(var u,g,f=0,m=0,b=0,y=0,v=0,w=0,x=0,_=0,k=0;0==f;)if(f=r(t,k,1),m=r(t,k+1,2),k+=3,0!=m){if(h&&(e=o.F._check(e,_+(1<<17))),1==m&&(u=p.flmap,g=p.fdmap,w=511,x=31),2==m){b=a(t,k,5)+257,y=a(t,k+5,5)+1,v=a(t,k+10,4)+4,k+=14;for(var O=0;O<38;O+=2)p.itree[O]=0,p.itree[O+1]=0;var A=1;for(O=0;O<v;O++){var S=a(t,k+3*O,3);p.itree[1+(p.ordr[O]<<1)]=S,S>A&&(A=S)}k+=3*v,l(p.itree,A),c(p.itree,A,p.imap),u=p.lmap,g=p.dmap,k=s(p.imap,(1<<A)-1,b+y,t,k,p.ttree);var I=n._copyOut(p.ttree,0,b,p.ltree);w=(1<<I)-1;var j=n._copyOut(p.ttree,b,y,p.dtree);x=(1<<j)-1,l(p.ltree,I),c(p.ltree,I,u),l(p.dtree,j),c(p.dtree,j,g)}for(;;){var $=u[d(t,k)&w];k+=15&$;var C=$>>>4;if(C>>>8==0)e[_++]=C;else{if(256==C)break;var E=_+C-254;if(C>264){var T=p.ldef[C-257];E=_+(T>>>3)+a(t,k,7&T),k+=7&T}var P=g[d(t,k)&x];k+=15&P;var R=P>>>4,L=p.ddef[R],D=(L>>>4)+r(t,k,15&L);for(k+=15&L,h&&(e=o.F._check(e,_+(1<<17)));_<E;)e[_]=e[_++-D],e[_]=e[_++-D],e[_]=e[_++-D],e[_]=e[_++-D];_=E}}}else{0!=(7&k)&&(k+=8-(7&k));var M=4+(k>>>3),U=t[M-4]|t[M-3]<<8;h&&(e=o.F._check(e,_+U)),e.set(new i(t.buffer,t.byteOffset+M,U),_),k=M+U<<3,_+=U}return e.length==_?e:e.slice(0,_)},o.F._check=function(t,e){var i=t.length;if(e<=i)return t;var o=new Uint8Array(Math.max(i<<1,e));return o.set(t,0),o},o.F._decodeTiny=function(t,e,i,n,r,a){for(var s=o.F._bitsE,l=o.F._get17,c=0;c<i;){var d=t[l(n,r)&e];r+=15&d;var p=d>>>4;if(p<=15)a[c]=p,c++;else{var h=0,u=0;16==p?(u=3+s(n,r,2),r+=2,h=a[c-1]):17==p?(u=3+s(n,r,3),r+=3):18==p&&(u=11+s(n,r,7),r+=7);for(var g=c+u;c<g;)a[c]=h,c++}}return r},o.F._copyOut=function(t,e,i,o){for(var n=0,r=0,a=o.length>>>1;r<i;){var s=t[r+e];o[r<<1]=0,o[1+(r<<1)]=s,s>n&&(n=s),r++}for(;r<a;)o[r<<1]=0,o[1+(r<<1)]=0,r++;return n},o.F.makeCodes=function(t,e){for(var i,n,r,a,s=o.F.U,l=t.length,c=s.bl_count,d=0;d<=e;d++)c[d]=0;for(d=1;d<l;d+=2)c[t[d]]++;var p=s.next_code;for(i=0,c[0]=0,n=1;n<=e;n++)i=i+c[n-1]<<1,p[n]=i;for(r=0;r<l;r+=2)0!=(a=t[r+1])&&(t[r]=p[a],p[a]++)},o.F.codes2map=function(t,e,i){for(var n=t.length,r=o.F.U.rev15,a=0;a<n;a+=2)if(0!=t[a+1])for(var s=a>>1,l=t[a+1],c=s<<4|l,d=e-l,p=t[a]<<d,h=p+(1<<d);p!=h;)i[r[p]>>>15-e]=c,p++},o.F.revCodes=function(t,e){for(var i=o.F.U.rev15,n=15-e,r=0;r<t.length;r+=2){var a=t[r]<<e-t[r+1];t[r]=i[a]>>>n}},o.F._putsE=function(t,e,i){i<<=7&e;var o=e>>>3;t[o]|=i,t[o+1]|=i>>>8},o.F._putsF=function(t,e,i){i<<=7&e;var o=e>>>3;t[o]|=i,t[o+1]|=i>>>8,t[o+2]|=i>>>16},o.F._bitsE=function(t,e,i){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<i)-1},o.F._bitsF=function(t,e,i){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<i)-1},o.F._get17=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},o.F._get25=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},o.F.U=(e=Uint16Array,i=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new i(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new i(286),dhst:new i(30),ihst:new i(19),lits:new i(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var t=o.F.U,e=0;e<32768;e++){var i=e;i=(4278255360&(i=(4042322160&(i=(3435973836&(i=(2863311530&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8,t.rev15[e]=(i>>>16|i<<16)>>>17}function n(t,e,i){for(;0!=e--;)t.push(0,i)}for(e=0;e<32;e++)t.ldef[e]=t.of0[e]<<3|t.exb[e],t.ddef[e]=t.df0[e]<<4|t.dxb[e];n(t.fltree,144,8),n(t.fltree,112,9),n(t.fltree,24,7),n(t.fltree,8,8),o.F.makeCodes(t.fltree,9),o.F.codes2map(t.fltree,9,t.flmap),o.F.revCodes(t.fltree,9),n(t.fdtree,32,5),o.F.makeCodes(t.fdtree,5),o.F.codes2map(t.fdtree,5,t.fdmap),o.F.revCodes(t.fdtree,5),n(t.itree,19,0),n(t.ltree,286,0),n(t.dtree,30,0),n(t.ttree,320,0)}()})),UZIP=Object.freeze(Object.assign(Object.create(null),UZIP_1,{default:UZIP_1})),UPNG={},N,W,H;UPNG.toRGBA8=function(t){var e=t.width,i=t.height;if(null==t.tabs.acTL)return[UPNG.toRGBA8.decodeImage(t.data,e,i,t).buffer];var o=[];null==t.frames[0].data&&(t.frames[0].data=t.data);for(var n=e*i*4,r=new Uint8Array(n),a=new Uint8Array(n),s=new Uint8Array(n),l=0;l<t.frames.length;l++){var c=t.frames[l],d=c.rect.x,p=c.rect.y,h=c.rect.width,u=c.rect.height,g=UPNG.toRGBA8.decodeImage(c.data,h,u,t);if(0!=l)for(var f=0;f<n;f++)s[f]=r[f];if(0==c.blend?UPNG._copyTile(g,h,u,r,e,i,d,p,0):1==c.blend&&UPNG._copyTile(g,h,u,r,e,i,d,p,1),o.push(r.buffer.slice(0)),0==c.dispose);else if(1==c.dispose)UPNG._copyTile(a,h,u,r,e,i,d,p,0);else if(2==c.dispose)for(f=0;f<n;f++)r[f]=s[f]}return o},UPNG.toRGBA8.decodeImage=function(t,e,i,o){var n=e*i,r=UPNG.decode._getBPP(o),a=Math.ceil(e*r/8),s=new Uint8Array(4*n),l=new Uint32Array(s.buffer),c=o.ctype,d=o.depth,p=UPNG._bin.readUshort;if(6==c){var h=n<<2;if(8==d)for(var u=0;u<h;u+=4)s[u]=t[u],s[u+1]=t[u+1],s[u+2]=t[u+2],s[u+3]=t[u+3];if(16==d)for(u=0;u<h;u++)s[u]=t[u<<1]}else if(2==c){var g=o.tabs.tRNS;if(null==g){if(8==d)for(u=0;u<n;u++){var f=3*u;l[u]=255<<24|t[f+2]<<16|t[f+1]<<8|t[f]}if(16==d)for(u=0;u<n;u++)f=6*u,l[u]=255<<24|t[f+4]<<16|t[f+2]<<8|t[f]}else{var m=g[0],b=g[1],y=g[2];if(8==d)for(u=0;u<n;u++){var v=u<<2;f=3*u,l[u]=255<<24|t[f+2]<<16|t[f+1]<<8|t[f],t[f]==m&&t[f+1]==b&&t[f+2]==y&&(s[v+3]=0)}if(16==d)for(u=0;u<n;u++)v=u<<2,f=6*u,l[u]=255<<24|t[f+4]<<16|t[f+2]<<8|t[f],p(t,f)==m&&p(t,f+2)==b&&p(t,f+4)==y&&(s[v+3]=0)}}else if(3==c){var w=o.tabs.PLTE,x=o.tabs.tRNS,_=x?x.length:0;if(1==d)for(var k=0;k<i;k++){var O=k*a,A=k*e;for(u=0;u<e;u++){v=A+u<<2;var S=3*(I=t[O+(u>>3)]>>7-((7&u)<<0)&1);s[v]=w[S],s[v+1]=w[S+1],s[v+2]=w[S+2],s[v+3]=I<_?x[I]:255}}if(2==d)for(k=0;k<i;k++)for(O=k*a,A=k*e,u=0;u<e;u++)v=A+u<<2,S=3*(I=t[O+(u>>2)]>>6-((3&u)<<1)&3),s[v]=w[S],s[v+1]=w[S+1],s[v+2]=w[S+2],s[v+3]=I<_?x[I]:255;if(4==d)for(k=0;k<i;k++)for(O=k*a,A=k*e,u=0;u<e;u++)v=A+u<<2,S=3*(I=t[O+(u>>1)]>>4-((1&u)<<2)&15),s[v]=w[S],s[v+1]=w[S+1],s[v+2]=w[S+2],s[v+3]=I<_?x[I]:255;if(8==d)for(u=0;u<n;u++){var I;v=u<<2,S=3*(I=t[u]),s[v]=w[S],s[v+1]=w[S+1],s[v+2]=w[S+2],s[v+3]=I<_?x[I]:255}}else if(4==c){if(8==d)for(u=0;u<n;u++){v=u<<2;var j=t[$=u<<1];s[v]=j,s[v+1]=j,s[v+2]=j,s[v+3]=t[$+1]}if(16==d)for(u=0;u<n;u++){var $;v=u<<2,j=t[$=u<<2],s[v]=j,s[v+1]=j,s[v+2]=j,s[v+3]=t[$+2]}}else if(0==c)for(m=o.tabs.tRNS?o.tabs.tRNS:-1,k=0;k<i;k++){var C=k*a,E=k*e;if(1==d)for(var T=0;T<e;T++){var P=(j=255*(t[C+(T>>>3)]>>>7-(7&T)&1))==255*m?0:255;l[E+T]=P<<24|j<<16|j<<8|j}else if(2==d)for(T=0;T<e;T++)P=(j=85*(t[C+(T>>>2)]>>>6-((3&T)<<1)&3))==85*m?0:255,l[E+T]=P<<24|j<<16|j<<8|j;else if(4==d)for(T=0;T<e;T++)P=(j=17*(t[C+(T>>>1)]>>>4-((1&T)<<2)&15))==17*m?0:255,l[E+T]=P<<24|j<<16|j<<8|j;else if(8==d)for(T=0;T<e;T++)P=(j=t[C+T])==m?0:255,l[E+T]=P<<24|j<<16|j<<8|j;else if(16==d)for(T=0;T<e;T++)j=t[C+(T<<1)],P=p(t,C+(T<<u))==m?0:255,l[E+T]=P<<24|j<<16|j<<8|j}return s},UPNG.decode=function(t){for(var e,i=new Uint8Array(t),o=8,n=UPNG._bin,r=n.readUshort,a=n.readUint,s={tabs:{},frames:[]},l=new Uint8Array(i.length),c=0,d=0,p=[137,80,78,71,13,10,26,10],h=0;h<8;h++)if(i[h]!=p[h])throw"The input is not a PNG file!";for(;o<i.length;){var u=n.readUint(i,o);o+=4;var g=n.readASCII(i,o,4);if(o+=4,"IHDR"==g)UPNG.decode._IHDR(i,o,s);else if("CgBI"==g)s.tabs[g]=i.slice(o,o+4);else if("IDAT"==g){for(h=0;h<u;h++)l[c+h]=i[o+h];c+=u}else if("acTL"==g)s.tabs[g]={num_frames:a(i,o),num_plays:a(i,o+4)},e=new Uint8Array(i.length);else if("fcTL"==g){var f;0!=d&&((f=s.frames[s.frames.length-1]).data=UPNG.decode._decompress(s,e.slice(0,d),f.rect.width,f.rect.height),d=0);var m={x:a(i,o+12),y:a(i,o+16),width:a(i,o+4),height:a(i,o+8)},b=r(i,o+22);b=r(i,o+20)/(0==b?100:b);var y={rect:m,delay:Math.round(1e3*b),dispose:i[o+24],blend:i[o+25]};s.frames.push(y)}else if("fdAT"==g){for(h=0;h<u-4;h++)e[d+h]=i[o+h+4];d+=u-4}else if("pHYs"==g)s.tabs[g]=[n.readUint(i,o),n.readUint(i,o+4),i[o+8]];else if("cHRM"==g)for(s.tabs[g]=[],h=0;h<8;h++)s.tabs[g].push(n.readUint(i,o+4*h));else if("tEXt"==g||"zTXt"==g){null==s.tabs[g]&&(s.tabs[g]={});var v=n.nextZero(i,o),w=n.readASCII(i,o,v-o),x=o+u-v-1;if("tEXt"==g)O=n.readASCII(i,v+1,x);else{var _=UPNG.decode._inflate(i.slice(v+2,v+2+x));O=n.readUTF8(_,0,_.length)}s.tabs[g][w]=O}else if("iTXt"==g){null==s.tabs[g]&&(s.tabs[g]={}),v=0;var k=o;v=n.nextZero(i,k),w=n.readASCII(i,k,v-k);var O,A=i[k=v+1];k+=2,v=n.nextZero(i,k),n.readASCII(i,k,v-k),k=v+1,v=n.nextZero(i,k),n.readUTF8(i,k,v-k),x=u-((k=v+1)-o),0==A?O=n.readUTF8(i,k,x):(_=UPNG.decode._inflate(i.slice(k,k+x)),O=n.readUTF8(_,0,_.length)),s.tabs[g][w]=O}else if("PLTE"==g)s.tabs[g]=n.readBytes(i,o,u);else if("hIST"==g){var S=s.tabs.PLTE.length/3;for(s.tabs[g]=[],h=0;h<S;h++)s.tabs[g].push(r(i,o+2*h))}else if("tRNS"==g)3==s.ctype?s.tabs[g]=n.readBytes(i,o,u):0==s.ctype?s.tabs[g]=r(i,o):2==s.ctype&&(s.tabs[g]=[r(i,o),r(i,o+2),r(i,o+4)]);else if("gAMA"==g)s.tabs[g]=n.readUint(i,o)/1e5;else if("sRGB"==g)s.tabs[g]=i[o];else if("bKGD"==g)0==s.ctype||4==s.ctype?s.tabs[g]=[r(i,o)]:2==s.ctype||6==s.ctype?s.tabs[g]=[r(i,o),r(i,o+2),r(i,o+4)]:3==s.ctype&&(s.tabs[g]=i[o]);else if("IEND"==g)break;o+=u,n.readUint(i,o),o+=4}return 0!=d&&((f=s.frames[s.frames.length-1]).data=UPNG.decode._decompress(s,e.slice(0,d),f.rect.width,f.rect.height),d=0),s.data=UPNG.decode._decompress(s,l,s.width,s.height),delete s.compress,delete s.interlace,delete s.filter,s},UPNG.decode._decompress=function(t,e,i,o){var n=UPNG.decode._getBPP(t),r=Math.ceil(i*n/8),a=new Uint8Array((r+1+t.interlace)*o);return e=t.tabs.CgBI?UPNG.inflateRaw(e,a):UPNG.decode._inflate(e,a),0==t.interlace?e=UPNG.decode._filterZero(e,t,0,i,o):1==t.interlace&&(e=UPNG.decode._readInterlace(e,t)),e},UPNG.decode._inflate=function(t,e){return UPNG.inflateRaw(new Uint8Array(t.buffer,2,t.length-6),e)},UPNG.inflateRaw=(H={},H.H={},H.H.N=function(t,e){var i,o,n=Uint8Array,r=0,a=0,s=0,l=0,c=0,d=0,p=0,h=0,u=0;if(3==t[0]&&0==t[1])return e||new n(0);var g=H.H,f=g.b,m=g.e,b=g.R,y=g.n,v=g.A,w=g.Z,x=g.m,_=null==e;for(_&&(e=new n(t.length>>>2<<5));0==r;)if(r=f(t,u,1),a=f(t,u+1,2),u+=3,0!=a){if(_&&(e=H.H.W(e,h+(1<<17))),1==a&&(i=x.J,o=x.h,d=511,p=31),2==a){s=m(t,u,5)+257,l=m(t,u+5,5)+1,c=m(t,u+10,4)+4,u+=14;for(var k=1,O=0;O<38;O+=2)x.Q[O]=0,x.Q[O+1]=0;for(O=0;O<c;O++){var A=m(t,u+3*O,3);x.Q[1+(x.X[O]<<1)]=A,A>k&&(k=A)}u+=3*c,y(x.Q,k),v(x.Q,k,x.u),i=x.w,o=x.d,u=b(x.u,(1<<k)-1,s+l,t,u,x.v);var S=g.V(x.v,0,s,x.C);d=(1<<S)-1;var I=g.V(x.v,s,l,x.D);p=(1<<I)-1,y(x.C,S),v(x.C,S,i),y(x.D,I),v(x.D,I,o)}for(;;){var j=i[w(t,u)&d];u+=15&j;var $=j>>>4;if($>>>8==0)e[h++]=$;else{if(256==$)break;var C=h+$-254;if($>264){var E=x.q[$-257];C=h+(E>>>3)+m(t,u,7&E),u+=7&E}var T=o[w(t,u)&p];u+=15&T;var P=T>>>4,R=x.c[P],L=(R>>>4)+f(t,u,15&R);for(u+=15&R;h<C;)e[h]=e[h++-L],e[h]=e[h++-L],e[h]=e[h++-L],e[h]=e[h++-L];h=C}}}else{0!=(7&u)&&(u+=8-(7&u));var D=4+(u>>>3),M=t[D-4]|t[D-3]<<8;_&&(e=H.H.W(e,h+M)),e.set(new n(t.buffer,t.byteOffset+D,M),h),u=D+M<<3,h+=M}return e.length==h?e:e.slice(0,h)},H.H.W=function(t,e){var i=t.length;if(e<=i)return t;var o=new Uint8Array(i<<1);return o.set(t,0),o},H.H.R=function(t,e,i,o,n,r){for(var a=H.H.e,s=H.H.Z,l=0;l<i;){var c=t[s(o,n)&e];n+=15&c;var d=c>>>4;if(d<=15)r[l]=d,l++;else{var p=0,h=0;16==d?(h=3+a(o,n,2),n+=2,p=r[l-1]):17==d?(h=3+a(o,n,3),n+=3):18==d&&(h=11+a(o,n,7),n+=7);for(var u=l+h;l<u;)r[l]=p,l++}}return n},H.H.V=function(t,e,i,o){for(var n=0,r=0,a=o.length>>>1;r<i;){var s=t[r+e];o[r<<1]=0,o[1+(r<<1)]=s,s>n&&(n=s),r++}for(;r<a;)o[r<<1]=0,o[1+(r<<1)]=0,r++;return n},H.H.n=function(t,e){for(var i,o,n,r,a=H.H.m,s=t.length,l=a.j,c=0;c<=e;c++)l[c]=0;for(c=1;c<s;c+=2)l[t[c]]++;var d=a.K;for(i=0,l[0]=0,o=1;o<=e;o++)i=i+l[o-1]<<1,d[o]=i;for(n=0;n<s;n+=2)0!=(r=t[n+1])&&(t[n]=d[r],d[r]++)},H.H.A=function(t,e,i){for(var o=t.length,n=H.H.m.r,r=0;r<o;r+=2)if(0!=t[r+1])for(var a=r>>1,s=t[r+1],l=a<<4|s,c=e-s,d=t[r]<<c,p=d+(1<<c);d!=p;)i[n[d]>>>15-e]=l,d++},H.H.l=function(t,e){for(var i=H.H.m.r,o=15-e,n=0;n<t.length;n+=2){var r=t[n]<<e-t[n+1];t[n]=i[r]>>>o}},H.H.M=function(t,e,i){i<<=7&e;var o=e>>>3;t[o]|=i,t[o+1]|=i>>>8},H.H.I=function(t,e,i){i<<=7&e;var o=e>>>3;t[o]|=i,t[o+1]|=i>>>8,t[o+2]|=i>>>16},H.H.e=function(t,e,i){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<i)-1},H.H.b=function(t,e,i){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<i)-1},H.H.Z=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},H.H.i=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},H.H.m=(N=Uint16Array,W=Uint32Array,{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(32768),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(65536),g:new N(32768)}),function(){for(var t=H.H.m,e=0;e<32768;e++){var i=e;i=(4278255360&(i=(4042322160&(i=(3435973836&(i=(2863311530&i)>>>1|(1431655765&i)<<1))>>>2|(858993459&i)<<2))>>>4|(252645135&i)<<4))>>>8|(16711935&i)<<8,t.r[e]=(i>>>16|i<<16)>>>17}function o(t,e,i){for(;0!=e--;)t.push(0,i)}for(e=0;e<32;e++)t.q[e]=t.S[e]<<3|t.T[e],t.c[e]=t.p[e]<<4|t.z[e];o(t._,144,8),o(t._,112,9),o(t._,24,7),o(t._,8,8),H.H.n(t._,9),H.H.A(t._,9,t.J),H.H.l(t._,9),o(t.$,32,5),H.H.n(t.$,5),H.H.A(t.$,5,t.h),H.H.l(t.$,5),o(t.Q,19,0),o(t.C,286,0),o(t.D,30,0),o(t.v,320,0)}(),H.H.N),UPNG.decode._readInterlace=function(t,e){for(var i=e.width,o=e.height,n=UPNG.decode._getBPP(e),r=n>>3,a=Math.ceil(i*n/8),s=new Uint8Array(o*a),l=0,c=[0,0,4,0,2,0,1],d=[0,4,0,2,0,1,0],p=[8,8,8,4,4,2,2],h=[8,8,4,4,2,2,1],u=0;u<7;){for(var g=p[u],f=h[u],m=0,b=0,y=c[u];y<o;)y+=g,b++;for(var v=d[u];v<i;)v+=f,m++;var w=Math.ceil(m*n/8);UPNG.decode._filterZero(t,e,l,m,b);for(var x=0,_=c[u];_<o;){for(var k=d[u],O=l+x*w<<3;k<i;){var A;if(1==n&&(A=(A=t[O>>3])>>7-(7&O)&1,s[_*a+(k>>3)]|=A<<7-((7&k)<<0)),2==n&&(A=(A=t[O>>3])>>6-(7&O)&3,s[_*a+(k>>2)]|=A<<6-((3&k)<<1)),4==n&&(A=(A=t[O>>3])>>4-(7&O)&15,s[_*a+(k>>1)]|=A<<4-((1&k)<<2)),n>=8)for(var S=_*a+k*r,I=0;I<r;I++)s[S+I]=t[(O>>3)+I];O+=n,k+=f}x++,_+=g}m*b!=0&&(l+=b*(1+w)),u+=1}return s},UPNG.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},UPNG.decode._filterZero=function(t,e,i,o,n){var r=UPNG.decode._getBPP(e),a=Math.ceil(o*r/8),s=UPNG.decode._paeth;r=Math.ceil(r/8);var l=0,c=1,d=t[i],p=0;if(d>1&&(t[i]=[0,0,1][d-2]),3==d)for(p=r;p<a;p++)t[p+1]=t[p+1]+(t[p+1-r]>>>1)&255;for(var h=0;h<n;h++)if(p=0,0==(d=t[(c=(l=i+h*a)+h+1)-1]))for(;p<a;p++)t[l+p]=t[c+p];else if(1==d){for(;p<r;p++)t[l+p]=t[c+p];for(;p<a;p++)t[l+p]=t[c+p]+t[l+p-r]}else if(2==d)for(;p<a;p++)t[l+p]=t[c+p]+t[l+p-a];else if(3==d){for(;p<r;p++)t[l+p]=t[c+p]+(t[l+p-a]>>>1);for(;p<a;p++)t[l+p]=t[c+p]+(t[l+p-a]+t[l+p-r]>>>1)}else{for(;p<r;p++)t[l+p]=t[c+p]+s(0,t[l+p-a],0);for(;p<a;p++)t[l+p]=t[c+p]+s(t[l+p-r],t[l+p-a],t[l+p-r-a])}return t},UPNG.decode._paeth=function(t,e,i){var o=t+e-i,n=o-t,r=o-e,a=o-i;return n*n<=r*r&&n*n<=a*a?t:r*r<=a*a?e:i},UPNG.decode._IHDR=function(t,e,i){var o=UPNG._bin;i.width=o.readUint(t,e),e+=4,i.height=o.readUint(t,e),e+=4,i.depth=t[e],e++,i.ctype=t[e],e++,i.compress=t[e],e++,i.filter=t[e],e++,i.interlace=t[e],e++},UPNG._bin={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,i){t[e]=i>>8&255,t[e+1]=255&i},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,i){t[e]=i>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=255&i},readASCII:function(t,e,i){for(var o="",n=0;n<i;n++)o+=String.fromCharCode(t[e+n]);return o},writeASCII:function(t,e,i){for(var o=0;o<i.length;o++)t[e+o]=i.charCodeAt(o)},readBytes:function(t,e,i){for(var o=[],n=0;n<i;n++)o.push(t[e+n]);return o},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,i){for(var o,n="",r=0;r<i;r++)n+="%"+UPNG._bin.pad(t[e+r].toString(16));try{o=decodeURIComponent(n)}catch(o){return UPNG._bin.readASCII(t,e,i)}return o}},UPNG._copyTile=function(t,e,i,o,n,r,a,s,l){for(var c=Math.min(e,n),d=Math.min(i,r),p=0,h=0,u=0;u<d;u++)for(var g=0;g<c;g++)if(a>=0&&s>=0?(p=u*e+g<<2,h=(s+u)*n+a+g<<2):(p=(-s+u)*e-a+g<<2,h=u*n+g<<2),0==l)o[h]=t[p],o[h+1]=t[p+1],o[h+2]=t[p+2],o[h+3]=t[p+3];else if(1==l){var f=t[p+3]*(1/255),m=t[p]*f,b=t[p+1]*f,y=t[p+2]*f,v=o[h+3]*(1/255),w=o[h]*v,x=o[h+1]*v,_=o[h+2]*v,k=1-f,O=f+v*k,A=0==O?0:1/O;o[h+3]=255*O,o[h+0]=(m+w*k)*A,o[h+1]=(b+x*k)*A,o[h+2]=(y+_*k)*A}else if(2==l)f=t[p+3],m=t[p],b=t[p+1],y=t[p+2],v=o[h+3],w=o[h],x=o[h+1],_=o[h+2],f==v&&m==w&&b==x&&y==_?(o[h]=0,o[h+1]=0,o[h+2]=0,o[h+3]=0):(o[h]=m,o[h+1]=b,o[h+2]=y,o[h+3]=f);else if(3==l){if(f=t[p+3],m=t[p],b=t[p+1],y=t[p+2],v=o[h+3],w=o[h],x=o[h+1],_=o[h+2],f==v&&m==w&&b==x&&y==_)continue;if(f<220&&v>20)return!1}return!0},UPNG.encode=function(t,e,i,o,n,r,a){null==o&&(o=0),null==a&&(a=!1);var s=UPNG.encode.compress(t,e,i,o,[!1,!1,!1,0,a]);return UPNG.encode.compressPNG(s,-1),UPNG.encode._main(s,e,i,n,r)},UPNG.encodeLL=function(t,e,i,o,n,r,a,s){for(var l={ctype:0+(1==o?0:2)+(0==n?0:4),depth:r,frames:[]},c=(o+n)*r,d=c*e,p=0;p<t.length;p++)l.frames.push({rect:{x:0,y:0,width:e,height:i},img:new Uint8Array(t[p]),blend:0,dispose:1,bpp:Math.ceil(c/8),bpl:Math.ceil(d/8)});return UPNG.encode.compressPNG(l,0,!0),UPNG.encode._main(l,e,i,a,s)},UPNG.encode._main=function(t,e,i,o,n){null==n&&(n={});var r=UPNG.crc.crc,a=UPNG._bin.writeUint,s=UPNG._bin.writeUshort,l=UPNG._bin.writeASCII,c=8,d=t.frames.length>1,p=!1,h=33+(d?20:0);if(null!=n.sRGB&&(h+=13),null!=n.pHYs&&(h+=21),3==t.ctype){for(var u=t.plte.length,g=0;g<u;g++)t.plte[g]>>>24!=255&&(p=!0);h+=8+3*u+4+(p?8+1*u+4:0)}for(var f=0;f<t.frames.length;f++)d&&(h+=38),h+=(O=t.frames[f]).cimg.length+12,0!=f&&(h+=4);h+=12;var m=new Uint8Array(h),b=[137,80,78,71,13,10,26,10];for(g=0;g<8;g++)m[g]=b[g];if(a(m,c,13),l(m,c+=4,"IHDR"),a(m,c+=4,e),a(m,c+=4,i),m[c+=4]=t.depth,m[++c]=t.ctype,m[++c]=0,m[++c]=0,m[++c]=0,a(m,++c,r(m,c-17,17)),c+=4,null!=n.sRGB&&(a(m,c,1),l(m,c+=4,"sRGB"),m[c+=4]=n.sRGB,a(m,++c,r(m,c-5,5)),c+=4),null!=n.pHYs&&(a(m,c,9),l(m,c+=4,"pHYs"),a(m,c+=4,n.pHYs[0]),a(m,c+=4,n.pHYs[1]),m[c+=4]=n.pHYs[2],a(m,++c,r(m,c-13,13)),c+=4),d&&(a(m,c,8),l(m,c+=4,"acTL"),a(m,c+=4,t.frames.length),a(m,c+=4,null!=n.loop?n.loop:0),a(m,c+=4,r(m,c-12,12)),c+=4),3==t.ctype){for(a(m,c,3*(u=t.plte.length)),l(m,c+=4,"PLTE"),c+=4,g=0;g<u;g++){var y=3*g,v=t.plte[g],w=255&v,x=v>>>8&255,_=v>>>16&255;m[c+y+0]=w,m[c+y+1]=x,m[c+y+2]=_}if(a(m,c+=3*u,r(m,c-3*u-4,3*u+4)),c+=4,p){for(a(m,c,u),l(m,c+=4,"tRNS"),c+=4,g=0;g<u;g++)m[c+g]=t.plte[g]>>>24&255;a(m,c+=u,r(m,c-u-4,u+4)),c+=4}}var k=0;for(f=0;f<t.frames.length;f++){var O=t.frames[f];d&&(a(m,c,26),l(m,c+=4,"fcTL"),a(m,c+=4,k++),a(m,c+=4,O.rect.width),a(m,c+=4,O.rect.height),a(m,c+=4,O.rect.x),a(m,c+=4,O.rect.y),s(m,c+=4,o[f]),s(m,c+=2,1e3),m[c+=2]=O.dispose,m[++c]=O.blend,a(m,++c,r(m,c-30,30)),c+=4);var A=O.cimg;a(m,c,(u=A.length)+(0==f?0:4));var S=c+=4;l(m,c,0==f?"IDAT":"fdAT"),c+=4,0!=f&&(a(m,c,k++),c+=4),m.set(A,c),a(m,c+=u,r(m,S,c-S)),c+=4}return a(m,c,0),l(m,c+=4,"IEND"),a(m,c+=4,r(m,c-4,4)),c+=4,m.buffer},UPNG.encode.compressPNG=function(t,e,i){for(var o=0;o<t.frames.length;o++){var n=t.frames[o],r=(n.rect.width,n.rect.height),a=new Uint8Array(r*n.bpl+r);n.cimg=UPNG.encode._filterZero(n.img,r,n.bpp,n.bpl,a,e,i)}},UPNG.encode.compress=function(t,e,i,o,n){for(var r=n[0],a=n[1],s=n[2],l=n[3],c=n[4],d=6,p=8,h=255,u=0;u<t.length;u++)for(var g=new Uint8Array(t[u]),f=g.length,m=0;m<f;m+=4)h&=g[m+3];var b=255!=h,y=UPNG.encode.framize(t,e,i,r,a,s),v={},w=[],x=[];if(0!=o){var _=[];for(m=0;m<y.length;m++)_.push(y[m].img.buffer);var k=UPNG.encode.concatRGBA(_),O=UPNG.quantize(k,o),A=0,S=new Uint8Array(O.abuf);for(m=0;m<y.length;m++){var I=(q=y[m].img).length;for(x.push(new Uint8Array(O.inds.buffer,A>>2,I>>2)),u=0;u<I;u+=4)q[u]=S[A+u],q[u+1]=S[A+u+1],q[u+2]=S[A+u+2],q[u+3]=S[A+u+3];A+=I}for(m=0;m<O.plte.length;m++)w.push(O.plte[m].est.rgba)}else for(u=0;u<y.length;u++){var j=y[u],$=new Uint32Array(j.img.buffer),C=j.rect.width,E=(f=$.length,new Uint8Array(f));for(x.push(E),m=0;m<f;m++){var T=$[m];if(0!=m&&T==$[m-1])E[m]=E[m-1];else if(m>C&&T==$[m-C])E[m]=E[m-C];else{var P=v[T];if(null==P&&(v[T]=P=w.length,w.push(T),w.length>=300))break;E[m]=P}}}var R=w.length;for(R<=256&&0==c&&(p=R<=2?1:R<=4?2:R<=16?4:8,p=Math.max(p,l)),u=0;u<y.length;u++){(j=y[u]).rect.x,j.rect.y,C=j.rect.width;var L=j.rect.height,D=j.img,M=(new Uint32Array(D.buffer),4*C),U=4;if(R<=256&&0==c){M=Math.ceil(p*C/8);for(var N=new Uint8Array(M*L),B=x[u],F=0;F<L;F++){m=F*M;var z=F*C;if(8==p)for(var H=0;H<C;H++)N[m+H]=B[z+H];else if(4==p)for(H=0;H<C;H++)N[m+(H>>1)]|=B[z+H]<<4-4*(1&H);else if(2==p)for(H=0;H<C;H++)N[m+(H>>2)]|=B[z+H]<<6-2*(3&H);else if(1==p)for(H=0;H<C;H++)N[m+(H>>3)]|=B[z+H]<<7-1*(7&H)}D=N,d=3,U=1}else if(0==b&&1==y.length){N=new Uint8Array(C*L*3);var W=C*L;for(m=0;m<W;m++){var q,G=4*m;N[q=3*m]=D[G],N[q+1]=D[G+1],N[q+2]=D[G+2]}D=N,d=2,U=3,M=3*C}j.img=D,j.bpl=M,j.bpp=U}return{ctype:d,depth:p,plte:w,frames:y}},UPNG.encode.framize=function(t,e,i,o,n,r){for(var a=[],s=0;s<t.length;s++){var l,c=new Uint8Array(t[s]),d=new Uint32Array(c.buffer),p=0,h=0,u=e,g=i,f=o?1:0;if(0!=s){for(var m=r||o||1==s||0!=a[s-2].dispose?1:2,b=0,y=1e9,v=0;v<m;v++){for(var w=new Uint8Array(t[s-1-v]),x=new Uint32Array(t[s-1-v]),_=e,k=i,O=-1,A=-1,S=0;S<i;S++)for(var I=0;I<e;I++)d[R=S*e+I]!=x[R]&&(I<_&&(_=I),I>O&&(O=I),S<k&&(k=S),S>A&&(A=S));-1==O&&(_=k=O=A=0),n&&(1==(1&_)&&_--,1==(1&k)&&k--);var j=(O-_+1)*(A-k+1);j<y&&(y=j,b=v,p=_,h=k,u=O-_+1,g=A-k+1)}w=new Uint8Array(t[s-1-b]),1==b&&(a[s-1].dispose=2),l=new Uint8Array(u*g*4),UPNG._copyTile(w,e,i,l,u,g,-p,-h,0),1==(f=UPNG._copyTile(c,e,i,l,u,g,-p,-h,3)?1:0)?UPNG.encode._prepareDiff(c,e,i,l,{x:p,y:h,width:u,height:g}):UPNG._copyTile(c,e,i,l,u,g,-p,-h,0)}else l=c.slice(0);a.push({rect:{x:p,y:h,width:u,height:g},img:l,blend:f,dispose:0})}if(o)for(s=0;s<a.length;s++)if(1!=(L=a[s]).blend){var $=L.rect,C=a[s-1].rect,E=Math.min($.x,C.x),T=Math.min($.y,C.y),P={x:E,y:T,width:Math.max($.x+$.width,C.x+C.width)-E,height:Math.max($.y+$.height,C.y+C.height)-T};a[s-1].dispose=1,s-1!=0&&UPNG.encode._updateFrame(t,e,i,a,s-1,P,n),UPNG.encode._updateFrame(t,e,i,a,s,P,n)}if(1!=t.length)for(var R=0;R<a.length;R++){var L;(L=a[R]).rect.width,L.rect.height}return a},UPNG.encode._updateFrame=function(t,e,i,o,n,r,a){for(var s=Uint8Array,l=Uint32Array,c=new s(t[n-1]),d=new l(t[n-1]),p=n+1<t.length?new s(t[n+1]):null,h=new s(t[n]),u=new l(h.buffer),g=e,f=i,m=-1,b=-1,y=0;y<r.height;y++)for(var v=0;v<r.width;v++){var w=r.x+v,x=r.y+y,_=x*e+w,k=u[_];0==k||0==o[n-1].dispose&&d[_]==k&&(null==p||0!=p[4*_+3])||(w<g&&(g=w),w>m&&(m=w),x<f&&(f=x),x>b&&(b=x))}-1==m&&(g=f=m=b=0),a&&(1==(1&g)&&g--,1==(1&f)&&f--),r={x:g,y:f,width:m-g+1,height:b-f+1};var O=o[n];O.rect=r,O.blend=1,O.img=new Uint8Array(r.width*r.height*4),0==o[n-1].dispose?(UPNG._copyTile(c,e,i,O.img,r.width,r.height,-r.x,-r.y,0),UPNG.encode._prepareDiff(h,e,i,O.img,r)):UPNG._copyTile(h,e,i,O.img,r.width,r.height,-r.x,-r.y,0)},UPNG.encode._prepareDiff=function(t,e,i,o,n){UPNG._copyTile(t,e,i,o,n.width,n.height,-n.x,-n.y,2)},UPNG.encode._filterZero=function(t,e,i,o,n,r,a){var s,l=[],c=[0,1,2,3,4];-1!=r?c=[r]:(e*o>5e5||1==i)&&(c=[0]),a&&(s={level:0});for(var d=UZIP,p=0;p<c.length;p++){for(var h=0;h<e;h++)UPNG.encode._filterLine(n,t,h,o,i,c[p]);l.push(d.deflate(n,s))}var u,g=1e9;for(p=0;p<l.length;p++)l[p].length<g&&(u=p,g=l[p].length);return l[u]},UPNG.encode._filterLine=function(t,e,i,o,n,r){var a=i*o,s=a+i,l=UPNG.decode._paeth;if(t[s]=r,s++,0==r)if(o<500)for(var c=0;c<o;c++)t[s+c]=e[a+c];else t.set(new Uint8Array(e.buffer,a,o),s);else if(1==r){for(c=0;c<n;c++)t[s+c]=e[a+c];for(c=n;c<o;c++)t[s+c]=e[a+c]-e[a+c-n]+256&255}else if(0==i){for(c=0;c<n;c++)t[s+c]=e[a+c];if(2==r)for(c=n;c<o;c++)t[s+c]=e[a+c];if(3==r)for(c=n;c<o;c++)t[s+c]=e[a+c]-(e[a+c-n]>>1)+256&255;if(4==r)for(c=n;c<o;c++)t[s+c]=e[a+c]-l(e[a+c-n],0,0)+256&255}else{if(2==r)for(c=0;c<o;c++)t[s+c]=e[a+c]+256-e[a+c-o]&255;if(3==r){for(c=0;c<n;c++)t[s+c]=e[a+c]+256-(e[a+c-o]>>1)&255;for(c=n;c<o;c++)t[s+c]=e[a+c]+256-(e[a+c-o]+e[a+c-n]>>1)&255}if(4==r){for(c=0;c<n;c++)t[s+c]=e[a+c]+256-l(0,e[a+c-o],0)&255;for(c=n;c<o;c++)t[s+c]=e[a+c]+256-l(e[a+c-n],e[a+c-o],e[a+c-n-o])&255}}},UPNG.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var i=e,o=0;o<8;o++)1&i?i=3988292384^i>>>1:i>>>=1;t[e]=i}return t}(),update:function(t,e,i,o){for(var n=0;n<o;n++)t=UPNG.crc.table[255&(t^e[i+n])]^t>>>8;return t},crc:function(t,e,i){return 4294967295^UPNG.crc.update(4294967295,t,e,i)}},UPNG.quantize=function(t,e){var i,o=new Uint8Array(t),n=o.slice(0),r=new Uint32Array(n.buffer),a=UPNG.quantize.getKDtree(n,e),s=a[0],l=a[1],c=UPNG.quantize.planeDst,d=o,p=r,h=d.length,u=new Uint8Array(o.length>>2);if(o.length<2e7)for(var g=0;g<h;g+=4){var f=d[g]*(1/255),m=d[g+1]*(1/255),b=d[g+2]*(1/255),y=d[g+3]*(1/255);i=UPNG.quantize.getNearest(s,f,m,b,y),u[g>>2]=i.ind,p[g>>2]=i.est.rgba}else for(g=0;g<h;g+=4){for(f=d[g]*(1/255),m=d[g+1]*(1/255),b=d[g+2]*(1/255),y=d[g+3]*(1/255),i=s;i.left;)i=c(i.est,f,m,b,y)<=0?i.left:i.right;u[g>>2]=i.ind,p[g>>2]=i.est.rgba}return{abuf:n.buffer,inds:u,plte:l}},UPNG.quantize.getKDtree=function(t,e,i){null==i&&(i=1e-4);var o=new Uint32Array(t.buffer),n={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};n.bst=UPNG.quantize.stats(t,n.i0,n.i1),n.est=UPNG.quantize.estats(n.bst);for(var r=[n];r.length<e;){for(var a=0,s=0,l=0;l<r.length;l++)r[l].est.L>a&&(a=r[l].est.L,s=l);if(a<i)break;var c=r[s],d=UPNG.quantize.splitPixels(t,o,c.i0,c.i1,c.est.e,c.est.eMq255);if(c.i0>=d||c.i1<=d)c.est.L=0;else{var p={i0:c.i0,i1:d,bst:null,est:null,tdst:0,left:null,right:null};p.bst=UPNG.quantize.stats(t,p.i0,p.i1),p.est=UPNG.quantize.estats(p.bst);var h={i0:d,i1:c.i1,bst:null,est:null,tdst:0,left:null,right:null};for(h.bst={R:[],m:[],N:c.bst.N-p.bst.N},l=0;l<16;l++)h.bst.R[l]=c.bst.R[l]-p.bst.R[l];for(l=0;l<4;l++)h.bst.m[l]=c.bst.m[l]-p.bst.m[l];h.est=UPNG.quantize.estats(h.bst),c.left=p,c.right=h,r[s]=p,r.push(h)}}for(r.sort((function(t,e){return e.bst.N-t.bst.N})),l=0;l<r.length;l++)r[l].ind=l;return[n,r]},UPNG.quantize.getNearest=function(t,e,i,o,n){if(null==t.left)return t.tdst=UPNG.quantize.dist(t.est.q,e,i,o,n),t;var r=UPNG.quantize.planeDst(t.est,e,i,o,n),a=t.left,s=t.right;r>0&&(a=t.right,s=t.left);var l=UPNG.quantize.getNearest(a,e,i,o,n);if(l.tdst<=r*r)return l;var c=UPNG.quantize.getNearest(s,e,i,o,n);return c.tdst<l.tdst?c:l},UPNG.quantize.planeDst=function(t,e,i,o,n){var r=t.e;return r[0]*e+r[1]*i+r[2]*o+r[3]*n-t.eMq},UPNG.quantize.dist=function(t,e,i,o,n){var r=e-t[0],a=i-t[1],s=o-t[2],l=n-t[3];return r*r+a*a+s*s+l*l},UPNG.quantize.splitPixels=function(t,e,i,o,n,r){var a=UPNG.quantize.vecDot;for(o-=4;i<o;){for(;a(t,i,n)<=r;)i+=4;for(;a(t,o,n)>r;)o-=4;if(i>=o)break;var s=e[i>>2];e[i>>2]=e[o>>2],e[o>>2]=s,i+=4,o-=4}for(;a(t,i,n)>r;)i-=4;return i+4},UPNG.quantize.vecDot=function(t,e,i){return t[e]*i[0]+t[e+1]*i[1]+t[e+2]*i[2]+t[e+3]*i[3]},UPNG.quantize.stats=function(t,e,i){for(var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=[0,0,0,0],r=i-e>>2,a=e;a<i;a+=4){var s=t[a]*(1/255),l=t[a+1]*(1/255),c=t[a+2]*(1/255),d=t[a+3]*(1/255);n[0]+=s,n[1]+=l,n[2]+=c,n[3]+=d,o[0]+=s*s,o[1]+=s*l,o[2]+=s*c,o[3]+=s*d,o[5]+=l*l,o[6]+=l*c,o[7]+=l*d,o[10]+=c*c,o[11]+=c*d,o[15]+=d*d}return o[4]=o[1],o[8]=o[2],o[9]=o[6],o[12]=o[3],o[13]=o[7],o[14]=o[11],{R:o,m:n,N:r}},UPNG.quantize.estats=function(t){var e=t.R,i=t.m,o=t.N,n=i[0],r=i[1],a=i[2],s=i[3],l=0==o?0:1/o,c=[e[0]-n*n*l,e[1]-n*r*l,e[2]-n*a*l,e[3]-n*s*l,e[4]-r*n*l,e[5]-r*r*l,e[6]-r*a*l,e[7]-r*s*l,e[8]-a*n*l,e[9]-a*r*l,e[10]-a*a*l,e[11]-a*s*l,e[12]-s*n*l,e[13]-s*r*l,e[14]-s*a*l,e[15]-s*s*l],d=c,p=UPNG.M4,h=[Math.random(),Math.random(),Math.random(),Math.random()],u=0,g=0;if(0!=o)for(var f=0;f<16&&(h=p.multVec(d,h),g=Math.sqrt(p.dot(h,h)),h=p.sml(1/g,h),!(0!=f&&Math.abs(g-u)<1e-9));f++)u=g;var m=[n*l,r*l,a*l,s*l];return{Cov:c,q:m,e:h,L:u,eMq255:p.dot(p.sml(255,m),h),eMq:p.dot(h,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2])<<16|Math.round(255*m[1])<<8|Math.round(255*m[0])<<0)>>>0}},UPNG.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},UPNG.encode.concatRGBA=function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i].byteLength;var o=new Uint8Array(e),n=0;for(i=0;i<t.length;i++){for(var r=new Uint8Array(t[i]),a=r.length,s=0;s<a;s+=4){var l=r[s],c=r[s+1],d=r[s+2],p=r[s+3];0==p&&(l=c=d=0),o[n+s]=l,o[n+s+1]=c,o[n+s+2]=d,o[n+s+3]=p}n+=a}return o.buffer};var isBrowser="undefined"!=typeof window,moduleMapper=isBrowser&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),CustomFile=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"File")||File),CustomFileReader=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"FileReader")||FileReader);function isAutoOrientationInBrowser(){return new Promise((function(t,e){var i,o,n,r;return void 0!==isAutoOrientationInBrowser.result?t(isAutoOrientationInBrowser.result):getFilefromDataUrl("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(a){try{return drawFileInCanvas(i=a).then((function(a){try{return canvasToFile(o=a[1],i.type,i.name,i.lastModified).then((function(i){try{return n=i,cleanupCanvasMemory(o),drawFileInCanvas(n).then((function(i){try{return r=i[0],isAutoOrientationInBrowser.result=1===r.width&&2===r.height,t(isAutoOrientationInBrowser.result)}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}catch(t){return e(t)}}),e)}))}function getDataUrlFromFile(t){return new Promise((function(e,i){var o=new CustomFileReader;o.onload=function(){return e(o.result)},o.onerror=function(t){return i(t)},o.readAsDataURL(t)}))}function getFilefromDataUrl(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return new Promise((function(o){for(var n=t.split(","),r=n[0].match(/:(.*?);/)[1],a=globalThis.atob(n[1]),s=a.length,l=new Uint8Array(s);s--;)l[s]=a.charCodeAt(s);var c=new Blob([l],{type:r});c.name=e,c.lastModified=i,o(c)}))}function loadImage(t){return new Promise((function(e,i){var o=new Image;o.onload=function(){return e(o)},o.onerror=function(t){return i(t)},o.src=t}))}function drawImageInCanvas(t){var e=_slicedToArray(getNewCanvasAndCtx(t.width,t.height),2),i=e[0];return e[1].drawImage(t,0,0,i.width,i.height),i}function drawFileInCanvas(t){return new Promise((function(e,i){var o,n,r=function(){try{return n=drawImageInCanvas(o),e([o,n])}catch(t){return i(t)}},a=function(e){try{return getDataUrlFromFile(t).then((function(t){try{return loadImage(t).then((function(t){try{return o=t,r()}catch(t){return i(t)}}),i)}catch(t){return i(t)}}),i)}catch(t){return i(t)}};try{return createImageBitmap(t).then((function(t){try{return o=t,r()}catch(t){return a()}}),a)}catch(t){a()}}))}function canvasToFile(t,e,i,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return new Promise((function(r,a){var s,l,c;if("image/png"===e)return l=t.getContext("2d").getImageData(0,0,t.width,t.height).data,c=UPNG.encode([l],t.width,t.height,256*n),(s=new Blob([c],{type:e})).name=i,s.lastModified=o,p.call(this);{return"function"==typeof OffscreenCanvas&&t instanceof OffscreenCanvas?t.convertToBlob({type:e,quality:n}).then(function(t){try{return(s=t).name=i,s.lastModified=o,d.call(this)}catch(t){return a(t)}}.bind(this),a):getFilefromDataUrl(t.toDataURL(e,n),i,o).then(function(t){try{return s=t,d.call(this)}catch(t){return a(t)}}.bind(this),a);function d(){return p.call(this)}}function p(){return r(s)}}))}function getExifOrientation(t){return new Promise((function(e,i){var o=new CustomFileReader;o.onload=function(t){var i=new DataView(t.target.result);if(65496!=i.getUint16(0,!1))return e(-2);for(var o=i.byteLength,n=2;n<o;){if(i.getUint16(n+2,!1)<=8)return e(-1);var r=i.getUint16(n,!1);if(n+=2,65505==r){if(1165519206!=i.getUint32(n+=2,!1))return e(-1);var a=18761==i.getUint16(n+=6,!1);n+=i.getUint32(n+4,a);var s=i.getUint16(n,a);n+=2;for(var l=0;l<s;l++)if(274==i.getUint16(n+12*l,a))return e(i.getUint16(n+12*l+8,a))}else{if(65280!=(65280&r))break;n+=i.getUint16(n,!1)}}return e(-1)},o.onerror=function(t){return i(t)},o.readAsArrayBuffer(t)}))}function handleMaxWidthOrHeight(t,e){var i,o=t.width,n=t.height,r=e.maxWidthOrHeight,a=t;if(isFinite(r)&&(o>r||n>r)){var s=_slicedToArray(getNewCanvasAndCtx(o,n),2);a=s[0],i=s[1],o>n?(a.width=r,a.height=n/o*r):(a.width=o/n*r,a.height=r),i.drawImage(t,0,0,a.width,a.height),cleanupCanvasMemory(t)}return a}function followExifOrientation(t,e){var i=t.width,o=t.height,n=_slicedToArray(getNewCanvasAndCtx(i,o),2),r=n[0],a=n[1];switch(4<e&&e<9?(r.width=o,r.height=i):(r.width=i,r.height=o),e){case 2:a.transform(-1,0,0,1,i,0);break;case 3:a.transform(-1,0,0,-1,i,o);break;case 4:a.transform(1,0,0,-1,0,o);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,o,0);break;case 7:a.transform(0,-1,-1,0,o,i);break;case 8:a.transform(0,-1,1,0,0,i)}return a.drawImage(t,0,0,i,o),cleanupCanvasMemory(t),r}function getNewCanvasAndCtx(t,e){var i,o;try{if(null===(o=(i=new OffscreenCanvas(t,e)).getContext("2d")))throw new Error("getContext of OffscreenCanvas returns null")}catch(t){o=(i=document.createElement("canvas")).getContext("2d")}return i.width=t,i.height=e,[i,o]}function cleanupCanvasMemory(t){t.width=0,t.height=0}function compress(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new Promise((function(o,n){var r,a,s,l,c,d,p,h,u,g,f,m,b,y,v,w,x,_;function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;r+=t,e.onProgress(Math.min(r,100))}function O(t){r=Math.min(Math.max(t,r),100),e.onProgress(r)}return r=i,a=e.maxIteration||10,s=1024*e.maxSizeMB*1024,k(),drawFileInCanvas(t).then(function(i){try{var r=_slicedToArray(i,2);return r[0],l=r[1],k(),c=handleMaxWidthOrHeight(l,e),k(),new Promise((function(i,o){var n;if(!(n=e.exifOrientation))return getExifOrientation(t).then(function(t){try{return n=t,r.call(this)}catch(t){return o(t)}}.bind(this),o);function r(){return i(n)}return r.call(this)})).then(function(i){try{return d=i,k(),isAutoOrientationInBrowser().then(function(i){try{return p=i?c:followExifOrientation(c,d),k(),h=e.initialQuality||1,u=e.fileType||t.type,canvasToFile(p,u,t.name,t.lastModified,h).then(function(e){try{{if(g=e,k(),f=g.size>s,m=g.size>t.size,!f&&!m)return O(100),o(g);var i;function r(){if(a--&&(v>s||v>b)){var e,i,o=_slicedToArray(getNewCanvasAndCtx(e=f?.95*_.width:_.width,i=f?.95*_.height:_.height),2);return x=o[0],o[1].drawImage(_,0,0,e,i),h*=.95,canvasToFile(x,u,t.name,t.lastModified,h).then((function(t){try{return w=t,cleanupCanvasMemory(_),_=x,v=w.size,O(Math.min(99,Math.floor((y-v)/(y-s)*100))),r}catch(t){return n(t)}}),n)}return[1]}return b=t.size,y=g.size,v=y,_=p,(i=function(t){for(;t;){if(t.then)return void t.then(i,n);try{if(t.pop){if(t.length)return t.pop()?d.call(this):t;t=r}else t=t.call(this)}catch(t){return n(t)}}}.bind(this))(r);function d(){return cleanupCanvasMemory(_),cleanupCanvasMemory(x),cleanupCanvasMemory(c),cleanupCanvasMemory(p),cleanupCanvasMemory(l),O(100),o(w)}}}catch(t){return n(t)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),n)}catch(t){return n(t)}}.bind(this),n)}))}isBrowser&&(Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t});var cnt=0,imageCompressionLibUrl,worker;function createWorker(t){return"function"==typeof t&&(t="(".concat(f,")()")),new Worker(URL.createObjectURL(new Blob([t])))}function createSourceObject(t){return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}function stringify(t){return JSON.stringify(t,(function(t,e){return"function"==typeof e?"BIC_FN:::(() => ".concat(e.toString(),")()"):e}))}function parse(o){if("string"==typeof o)return o;var result={};return Object.entries(o).forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if("string"==typeof value&&value.startsWith("BIC_FN:::"))try{result[key]=eval(value.replace(/^BIC_FN:::/,""))}catch(t){throw console.log(key,t),t}else result[key]=parse(value)})),result}function generateLib(){return createSourceObject("\n    // reconstruct library\n    function imageCompression (){return (".concat(imageCompression,").apply(null, arguments)}\n\n    imageCompression.getDataUrlFromFile = ").concat(imageCompression.getDataUrlFromFile,"\n    imageCompression.getFilefromDataUrl = ").concat(imageCompression.getFilefromDataUrl,"\n    imageCompression.loadImage = ").concat(imageCompression.loadImage,"\n    imageCompression.drawImageInCanvas = ").concat(imageCompression.drawImageInCanvas,"\n    imageCompression.drawFileInCanvas = ").concat(imageCompression.drawFileInCanvas,"\n    imageCompression.canvasToFile = ").concat(imageCompression.canvasToFile,"\n    imageCompression.getExifOrientation = ").concat(imageCompression.getExifOrientation,"\n    imageCompression.handleMaxWidthOrHeight = ").concat(imageCompression.handleMaxWidthOrHeight,"\n    imageCompression.followExifOrientation = ").concat(imageCompression.followExifOrientation,"\n    imageCompression.cleanupCanvasMemory = ").concat(imageCompression.cleanupCanvasMemory,"\n    imageCompression.isAutoOrientationInBrowser = ").concat(imageCompression.isAutoOrientationInBrowser,"\n\n    // functions / objects\n    getDataUrlFromFile = imageCompression.getDataUrlFromFile\n    getFilefromDataUrl = imageCompression.getFilefromDataUrl\n    loadImage = imageCompression.loadImage\n    drawImageInCanvas = imageCompression.drawImageInCanvas\n    drawFileInCanvas = imageCompression.drawFileInCanvas\n    canvasToFile = imageCompression.canvasToFile\n    getExifOrientation = imageCompression.getExifOrientation\n    handleMaxWidthOrHeight = imageCompression.handleMaxWidthOrHeight\n    followExifOrientation = imageCompression.followExifOrientation\n    cleanupCanvasMemory = imageCompression.cleanupCanvasMemory\n    isAutoOrientationInBrowser = imageCompression.isAutoOrientationInBrowser\n    \n    getNewCanvasAndCtx = ").concat(getNewCanvasAndCtx,"\n    CustomFileReader = FileReader\n    CustomFile = File\n    function _slicedToArray(arr, n) { return arr }\n    function _typeof(a) { return typeof a }\n    function compress (){return (").concat(compress,").apply(null, arguments)}\n\n    // Libraries\n    const parse = ").concat(parse,"\n    const UPNG = {}\n    UPNG.toRGBA8 = ").concat(UPNG.toRGBA8,"\n    UPNG.toRGBA8.decodeImage = ").concat(UPNG.toRGBA8.decodeImage,"\n    UPNG.decode = ").concat(UPNG.decode,"\n    UPNG.decode._decompress = ").concat(UPNG.decode._decompress,"\n    UPNG.decode._inflate = ").concat(UPNG.decode._inflate,"\n    UPNG.decode._readInterlace = ").concat(UPNG.decode._readInterlace,"\n    UPNG.decode._getBPP = ").concat(UPNG.decode._getBPP," \n    UPNG.decode._filterZero = ").concat(UPNG.decode._filterZero,"\n    UPNG.decode._paeth = ").concat(UPNG.decode._paeth,"\n    UPNG.decode._IHDR = ").concat(UPNG.decode._IHDR,"\n    UPNG._bin = parse(").concat(stringify(UPNG._bin),")\n    UPNG._copyTile = ").concat(UPNG._copyTile,"\n    UPNG.encode = ").concat(UPNG.encode,"\n    UPNG.encodeLL = ").concat(UPNG.encodeLL," \n    UPNG.encode._main = ").concat(UPNG.encode._main,"\n    UPNG.encode.compressPNG = ").concat(UPNG.encode.compressPNG," \n    UPNG.encode.compress = ").concat(UPNG.encode.compress,"\n    UPNG.encode.framize = ").concat(UPNG.encode.framize," \n    UPNG.encode._updateFrame = ").concat(UPNG.encode._updateFrame," \n    UPNG.encode._prepareDiff = ").concat(UPNG.encode._prepareDiff," \n    UPNG.encode._filterZero = ").concat(UPNG.encode._filterZero," \n    UPNG.encode._filterLine = ").concat(UPNG.encode._filterLine,"\n    UPNG.encode.concatRGBA = ").concat(UPNG.encode.concatRGBA,"\n    UPNG.crc = parse(").concat(stringify(UPNG.crc),")\n    UPNG.crc.table = ( function() {\n    var tab = new Uint32Array(256);\n    for (var n=0; n<256; n++) {\n      var c = n;\n      for (var k=0; k<8; k++) {\n        if (c & 1)  c = 0xedb88320 ^ (c >>> 1);\n        else        c = c >>> 1;\n      }\n      tab[n] = c;  }\n    return tab;  })()\n    UPNG.quantize = ").concat(UPNG.quantize," \n    UPNG.quantize.getKDtree = ").concat(UPNG.quantize.getKDtree," \n    UPNG.quantize.getNearest = ").concat(UPNG.quantize.getNearest," \n    UPNG.quantize.planeDst = ").concat(UPNG.quantize.planeDst," \n    UPNG.quantize.dist = ").concat(UPNG.quantize.dist,"     \n    UPNG.quantize.splitPixels = ").concat(UPNG.quantize.splitPixels," \n    UPNG.quantize.vecDot = ").concat(UPNG.quantize.vecDot," \n    UPNG.quantize.stats = ").concat(UPNG.quantize.stats," \n    UPNG.quantize.estats = ").concat(UPNG.quantize.estats,"\n    UPNG.M4 = parse(").concat(stringify(UPNG.M4),")\n    UPNG.encode.concatRGBA = ").concat(UPNG.encode.concatRGBA,'\n    UPNG.inflateRaw=function(){\n    var H={};H.H={};H.H.N=function(N,W){var R=Uint8Array,i=0,m=0,J=0,h=0,Q=0,X=0,u=0,w=0,d=0,v,C;\n      if(N[0]==3&&N[1]==0)return W?W:new R(0);var V=H.H,n=V.b,A=V.e,l=V.R,M=V.n,I=V.A,e=V.Z,b=V.m,Z=W==null;\n      if(Z)W=new R(N.length>>>2<<5);while(i==0){i=n(N,d,1);m=n(N,d+1,2);d+=3;if(m==0){if((d&7)!=0)d+=8-(d&7);\n        var D=(d>>>3)+4,q=N[D-4]|N[D-3]<<8;if(Z)W=H.H.W(W,w+q);W.set(new R(N.buffer,N.byteOffset+D,q),w);d=D+q<<3;\n        w+=q;continue}if(Z)W=H.H.W(W,w+(1<<17));if(m==1){v=b.J;C=b.h;X=(1<<9)-1;u=(1<<5)-1}if(m==2){J=A(N,d,5)+257;\n        h=A(N,d+5,5)+1;Q=A(N,d+10,4)+4;d+=14;var E=d,j=1;for(var c=0;c<38;c+=2){b.Q[c]=0;b.Q[c+1]=0}for(var c=0;\n                                                                                                        c<Q;c++){var K=A(N,d+c*3,3);b.Q[(b.X[c]<<1)+1]=K;if(K>j)j=K}d+=3*Q;M(b.Q,j);I(b.Q,j,b.u);v=b.w;C=b.d;\n        d=l(b.u,(1<<j)-1,J+h,N,d,b.v);var r=V.V(b.v,0,J,b.C);X=(1<<r)-1;var S=V.V(b.v,J,h,b.D);u=(1<<S)-1;M(b.C,r);\n        I(b.C,r,v);M(b.D,S);I(b.D,S,C)}while(!0){var T=v[e(N,d)&X];d+=T&15;var p=T>>>4;if(p>>>8==0){W[w++]=p}else if(p==256){break}else{var z=w+p-254;\n        if(p>264){var _=b.q[p-257];z=w+(_>>>3)+A(N,d,_&7);d+=_&7}var $=C[e(N,d)&u];d+=$&15;var s=$>>>4,Y=b.c[s],a=(Y>>>4)+n(N,d,Y&15);\n        d+=Y&15;while(w<z){W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a]}w=z}}}return W.length==w?W:W.slice(0,w)};\n      H.H.W=function(N,W){var R=N.length;if(W<=R)return N;var V=new Uint8Array(R<<1);V.set(N,0);return V};\n      H.H.R=function(N,W,R,V,n,A){var l=H.H.e,M=H.H.Z,I=0;while(I<R){var e=N[M(V,n)&W];n+=e&15;var b=e>>>4;\n        if(b<=15){A[I]=b;I++}else{var Z=0,m=0;if(b==16){m=3+l(V,n,2);n+=2;Z=A[I-1]}else if(b==17){m=3+l(V,n,3);\n          n+=3}else if(b==18){m=11+l(V,n,7);n+=7}var J=I+m;while(I<J){A[I]=Z;I++}}}return n};H.H.V=function(N,W,R,V){var n=0,A=0,l=V.length>>>1;\n        while(A<R){var M=N[A+W];V[A<<1]=0;V[(A<<1)+1]=M;if(M>n)n=M;A++}while(A<l){V[A<<1]=0;V[(A<<1)+1]=0;A++}return n};\n      H.H.n=function(N,W){var R=H.H.m,V=N.length,n,A,l,M,I,e=R.j;for(var M=0;M<=W;M++)e[M]=0;for(M=1;M<V;M+=2)e[N[M]]++;\n        var b=R.K;n=0;e[0]=0;for(A=1;A<=W;A++){n=n+e[A-1]<<1;b[A]=n}for(l=0;l<V;l+=2){I=N[l+1];if(I!=0){N[l]=b[I];\n          b[I]++}}};H.H.A=function(N,W,R){var V=N.length,n=H.H.m,A=n.r;for(var l=0;l<V;l+=2)if(N[l+1]!=0){var M=l>>1,I=N[l+1],e=M<<4|I,b=W-I,Z=N[l]<<b,m=Z+(1<<b);\n        while(Z!=m){var J=A[Z]>>>15-W;R[J]=e;Z++}}};H.H.l=function(N,W){var R=H.H.m.r,V=15-W;for(var n=0;n<N.length;\n                                                                                                 n+=2){var A=N[n]<<W-N[n+1];N[n]=R[A]>>>V}};H.H.M=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8};\n      H.H.I=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8;N[V+2]|=R>>>16};H.H.e=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8)>>>(W&7)&(1<<R)-1};\n      H.H.b=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)&(1<<R)-1};H.H.Z=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)};\n      H.H.i=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16|N[(W>>>3)+3]<<24)>>>(W&7)};H.H.m=function(){var N=Uint16Array,W=Uint32Array;\n        return{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(1<<15),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(1<<16),g:new N(1<<15)}}();\n      (function(){var N=H.H.m,W=1<<15;for(var R=0;R<W;R++){var V=R;V=(V&2863311530)>>>1|(V&1431655765)<<1;\n        V=(V&3435973836)>>>2|(V&858993459)<<2;V=(V&4042322160)>>>4|(V&252645135)<<4;V=(V&4278255360)>>>8|(V&16711935)<<8;\n        N.r[R]=(V>>>16|V<<16)>>>17}function n(A,l,M){while(l--!=0)A.push(0,M)}for(var R=0;R<32;R++){N.q[R]=N.S[R]<<3|N.T[R];\n        N.c[R]=N.p[R]<<4|N.z[R]}n(N._,144,8);n(N._,255-143,9);n(N._,279-255,7);n(N._,287-279,8);H.H.n(N._,9);\n        H.H.A(N._,9,N.J);H.H.l(N._,9);n(N.$,32,5);H.H.n(N.$,5);H.H.A(N.$,5,N.h);H.H.l(N.$,5);n(N.Q,19,0);n(N.C,286,0);\n        n(N.D,30,0);n(N.v,320,0)}());return H.H.N}()\n    \n    const UZIP = {}\n    UZIP["parse"] = ').concat(UZIP_1.parse,"\n    UZIP._readLocal = ").concat(UZIP_1._readLocal,"\n    UZIP.inflateRaw = ").concat(UZIP_1.inflateRaw,"\n    UZIP.inflate = ").concat(UZIP_1.inflate,"\n    UZIP.deflate = ").concat(UZIP_1.deflate,"\n    UZIP.deflateRaw = ").concat(UZIP_1.deflateRaw,"\n    UZIP.encode = ").concat(UZIP_1.encode,"\n    UZIP._noNeed = ").concat(UZIP_1._noNeed,"\n    UZIP._writeHeader = ").concat(UZIP_1._writeHeader,"\n    UZIP.crc = parse(").concat(stringify(UZIP_1.crc),")\n    UZIP.crc.table = ( function() {\n      var tab = new Uint32Array(256);\n      for (var n=0; n<256; n++) {\n        var c = n;\n        for (var k=0; k<8; k++) {\n          if (c & 1)  c = 0xedb88320 ^ (c >>> 1);\n          else        c = c >>> 1;\n        }\n        tab[n] = c;  }\n      return tab;  })()\n    \n    UZIP.adler = ").concat(UZIP_1.adler,"\n    UZIP.bin = parse(").concat(stringify(UZIP_1.bin),")\n    UZIP.F = {}\n    UZIP.F.deflateRaw = ").concat(UZIP_1.F.deflateRaw,"\n    UZIP.F._bestMatch = ").concat(UZIP_1.F._bestMatch,"\n    UZIP.F._howLong = ").concat(UZIP_1.F._howLong,"\n    UZIP.F._hash = ").concat(UZIP_1.F._hash,"\n    UZIP.saved = ").concat(UZIP_1.saved,"\n    UZIP.F._writeBlock = ").concat(UZIP_1.F._writeBlock,"\n    UZIP.F._copyExact = ").concat(UZIP_1.F._copyExact,"\n    UZIP.F.getTrees = ").concat(UZIP_1.F.getTrees,"\n    UZIP.F.getSecond = ").concat(UZIP_1.F.getSecond,"\n    UZIP.F.nonZero = ").concat(UZIP_1.F.nonZero,"\n    UZIP.F.contSize = ").concat(UZIP_1.F.contSize,"\n    UZIP.F._codeTiny = ").concat(UZIP_1.F._codeTiny," \n    UZIP.F._lenCodes = ").concat(UZIP_1.F._lenCodes," \n    UZIP.F._hufTree = ").concat(UZIP_1.F._hufTree," \n    UZIP.F.setDepth = ").concat(UZIP_1.F.setDepth," \n    UZIP.F.restrictDepth = ").concat(UZIP_1.F.restrictDepth,"\n    UZIP.F._goodIndex = ").concat(UZIP_1.F._goodIndex," \n    UZIP.F._writeLit = ").concat(UZIP_1.F._writeLit," \n    UZIP.F.inflate = ").concat(UZIP_1.F.inflate," \n    UZIP.F._check = ").concat(UZIP_1.F._check," \n    UZIP.F._decodeTiny = ").concat(UZIP_1.F._decodeTiny," \n    UZIP.F._copyOut = ").concat(UZIP_1.F._copyOut," \n    UZIP.F.makeCodes = ").concat(UZIP_1.F.makeCodes," \n    UZIP.F.codes2map = ").concat(UZIP_1.F.codes2map," \n    UZIP.F.revCodes = ").concat(UZIP_1.F.revCodes," \n\n    // used only in deflate\n    UZIP.F._putsE = ").concat(UZIP_1.F._putsE,"\n    UZIP.F._putsF = ").concat(UZIP_1.F._putsF,"\n  \n    UZIP.F._bitsE = ").concat(UZIP_1.F._bitsE,"\n    UZIP.F._bitsF = ").concat(UZIP_1.F._bitsF,"\n\n    UZIP.F._get17 = ").concat(UZIP_1.F._get17,"\n    UZIP.F._get25 = ").concat(UZIP_1.F._get25,"\n    UZIP.F.U = function(){\n      var u16=Uint16Array, u32=Uint32Array;\n      return {\n        next_code : new u16(16),\n        bl_count  : new u16(16),\n        ordr : [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],\n        of0  : [3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],\n        exb  : [0,0,0,0,0,0,0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,  4,  5,  5,  5,  5,  0,  0,  0,  0],\n        ldef : new u16(32),\n        df0  : [1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577, 65535, 65535],\n        dxb  : [0,0,0,0,1,1,2, 2, 3, 3, 4, 4, 5, 5,  6,  6,  7,  7,  8,  8,   9,   9,  10,  10,  11,  11,  12,   12,   13,   13,     0,     0],\n        ddef : new u32(32),\n        flmap: new u16(  512),  fltree: [],\n        fdmap: new u16(   32),  fdtree: [],\n        lmap : new u16(32768),  ltree : [],  ttree:[],\n        dmap : new u16(32768),  dtree : [],\n        imap : new u16(  512),  itree : [],\n        //rev9 : new u16(  512)\n        rev15: new u16(1<<15),\n        lhst : new u32(286), dhst : new u32( 30), ihst : new u32(19),\n        lits : new u32(15000),\n        strt : new u16(1<<16),\n        prev : new u16(1<<15)\n      };\n    } ();\n\n    (function(){\n      var U = UZIP.F.U;\n      var len = 1<<15;\n      for(var i=0; i<len; i++) {\n        var x = i;\n        x = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));\n        x = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));\n        x = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));\n        x = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));\n        U.rev15[i] = (((x >>> 16) | (x << 16)))>>>17;\n      }\n  \n      function pushV(tgt, n, sv) {  while(n--!=0) tgt.push(0,sv);  }\n  \n      for(var i=0; i<32; i++) {  U.ldef[i]=(U.of0[i]<<3)|U.exb[i];  U.ddef[i]=(U.df0[i]<<4)|U.dxb[i];  }\n  \n      pushV(U.fltree, 144, 8);  pushV(U.fltree, 255-143, 9);  pushV(U.fltree, 279-255, 7);  pushV(U.fltree,287-279,8);\n      /*\n        var i = 0;\n        for(; i<=143; i++) U.fltree.push(0,8);\n        for(; i<=255; i++) U.fltree.push(0,9);\n        for(; i<=279; i++) U.fltree.push(0,7);\n        for(; i<=287; i++) U.fltree.push(0,8);\n        */\n      UZIP.F.makeCodes(U.fltree, 9);\n      UZIP.F.codes2map(U.fltree, 9, U.flmap);\n      UZIP.F.revCodes (U.fltree, 9)\n  \n      pushV(U.fdtree,32,5);\n      //for(i=0;i<32; i++) U.fdtree.push(0,5);\n      UZIP.F.makeCodes(U.fdtree, 5);\n      UZIP.F.codes2map(U.fdtree, 5, U.fdmap);\n      UZIP.F.revCodes (U.fdtree, 5)\n  \n      pushV(U.itree,19,0);  pushV(U.ltree,286,0);  pushV(U.dtree,30,0);  pushV(U.ttree,320,0);\n      /*\n        for(var i=0; i< 19; i++) U.itree.push(0,0);\n        for(var i=0; i<286; i++) U.ltree.push(0,0);\n        for(var i=0; i< 30; i++) U.dtree.push(0,0);\n        for(var i=0; i<320; i++) U.ttree.push(0,0);\n        */\n    })()\n    "))}function generateWorkerScript(){return createWorker("\n    let scriptImported = false\n    self.addEventListener('message', async (e) => {\n      const { file, id, imageCompressionLibUrl, options } = e.data\n      options.onProgress = (progress) => self.postMessage({ progress, id })\n      try {\n        if (!scriptImported) {\n          // console.log('[worker] importScripts', imageCompressionLibUrl)\n          self.importScripts(imageCompressionLibUrl)\n          scriptImported = true\n        }\n        // console.log('[worker] self', self)\n        const compressedFile = await imageCompression(file, options)\n        self.postMessage({ file: compressedFile, id })\n      } catch (e) {\n        // console.error('[worker] error', e)\n        self.postMessage({ error: e.message + '\\n' + e.stack, id })\n      }\n    })\n  ")}function compressOnWebWorker(t,e){return new Promise((function(i,o){return new Promise((function(n,r){var a=cnt++;return imageCompressionLibUrl||(imageCompressionLibUrl=generateLib()),worker||(worker=generateWorkerScript()),worker.addEventListener("message",(function t(n){if(n.data.id===a){if(void 0!==n.data.progress)return void e.onProgress(n.data.progress);worker.removeEventListener("message",t),n.data.error&&o(new Error(n.data.error)),i(n.data.file)}})),worker.addEventListener("error",o),worker.postMessage({file:t,id:a,imageCompressionLibUrl:imageCompressionLibUrl,options:_objectSpread2(_objectSpread2({},e),{},{onProgress:void 0})}),n()}))}))}function imageCompression(t,e){return new Promise((function(i,o){var n,r,a,s,l;if(r=0,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,s="boolean"!=typeof e.useWebWorker||e.useWebWorker,delete e.useWebWorker,a=e.onProgress,e.onProgress=function(t){r=t,"function"==typeof a&&a(r)},!(t instanceof Blob||t instanceof CustomFile))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return o(new Error("The file given is not an image"));if(l="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!s||"function"!=typeof Worker||l)return compress(t,e).then(function(t){try{return n=t,p.call(this)}catch(t){return o(t)}}.bind(this),o);var c=function(){try{return p.call(this)}catch(t){return o(t)}}.bind(this),d=function(i){try{return compress(t,e).then((function(t){try{return n=t,c()}catch(t){return o(t)}}),o)}catch(t){return o(t)}};try{return compressOnWebWorker(t,e).then((function(t){try{return n=t,c()}catch(t){return d()}}),d)}catch(t){d()}function p(){try{n.name=t.name,n.lastModified=t.lastModified}catch(t){}return i(n)}}))}imageCompression.getDataUrlFromFile=getDataUrlFromFile,imageCompression.getFilefromDataUrl=getFilefromDataUrl,imageCompression.loadImage=loadImage,imageCompression.drawImageInCanvas=drawImageInCanvas,imageCompression.drawFileInCanvas=drawFileInCanvas,imageCompression.canvasToFile=canvasToFile,imageCompression.getExifOrientation=getExifOrientation,imageCompression.handleMaxWidthOrHeight=handleMaxWidthOrHeight,imageCompression.followExifOrientation=followExifOrientation,imageCompression.cleanupCanvasMemory=cleanupCanvasMemory,imageCompression.isAutoOrientationInBrowser=isAutoOrientationInBrowser,imageCompression.version="1.0.14",__webpack_exports__.a=imageCompression},function(t,e,i){t.exports=i.p+"images/close.5f38fbc.png"},function(t,e,i){t.exports=i.p+"images/recommand.163ee25.png"},function(t,e,i){t.exports=i.p+"images/close.5f38fbc.png"},function(t,e,i){t.exports=i.p+"images/arrow.4ee035b.png"},,,,,,function(t,e,i){t.exports=i.p+"images/edit.39cf929.png"},function(t,e,i){(function(){(null!==e?e:this).Lethargy=function(){function t(t,e,i,o){this.stability=null!=t?Math.abs(t):8,this.sensitivity=null!=e?1+Math.abs(e):100,this.tolerance=null!=i?1+Math.abs(i):1.1,this.delay=null!=o?o:150,this.lastUpDeltas=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this),this.lastDownDeltas=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this),this.deltasTimestamp=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this)}return t.prototype.check=function(t){var e;return null!=(t=t.originalEvent||t).wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=-40*t.deltaY:null==t.detail&&0!==t.detail||(e=-40*t.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),e>0?(this.lastUpDeltas.push(e),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(e),this.lastDownDeltas.shift(),this.isInertia(-1))},t.prototype.isInertia=function(t){var e,i,o,n,r,a,s;return null===(e=-1===t?this.lastDownDeltas:this.lastUpDeltas)[0]?t:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&e[0]===e[2*this.stability-1])&&(o=e.slice(0,this.stability),i=e.slice(this.stability,2*this.stability),s=o.reduce((function(t,e){return t+e})),r=i.reduce((function(t,e){return t+e})),a=s/o.length,n=r/i.length,Math.abs(a)<Math.abs(n*this.tolerance)&&this.sensitivity<Math.abs(n)&&t)},t.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},t.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},t}()}).call(this)},function(t,e,i){t.exports=i.p+"images/expand.f5e33fc.svg"},function(t,e,i){t.exports=i.p+"images/update-side.f885641.jpg"},function(t,e,i){t.exports=i.p+"images/infinity.e82d3fc.svg"},function(t,e,i){t.exports=i.p+"images/left.de9b35b.svg"},function(t,e,i){t.exports=i.p+"images/setting.9bb7a8a.png"},function(t,e,i){t.exports=i.p+"images/close.5575d99.png"},function(t,e,i){t.exports=i.p+"images/location.6694f8a.png"},function(t,e,i){t.exports=i.p+"images/spin.f9360d9.svg"},function(t,e,i){t.exports=i.p+"images/error.7c8e11f.png"},function(t,e,i){t.exports=i.p+"images/empty.c781995.png"},function(t,e,i){t.exports=i.p+"images/left.050db11.png"},function(t,e,i){t.exports=i.p+"images/right.7c65f69.png"},function(t,e,i){t.exports=i.p+"images/close.b9682ba.png"},function(t,e,i){var o,n,r;
/*!
	autosize 4.0.4
	license: MIT
	http://www.jacklmoore.com/autosize
*/n=[t,e],void 0===(r="function"==typeof(o=function(t,e){"use strict";var i,o,n="function"==typeof Map?new Map:(i=[],o=[],{has:function(t){return i.indexOf(t)>-1},get:function(t){return o[i.indexOf(t)]},set:function(t,e){-1===i.indexOf(t)&&(i.push(t),o.push(e))},delete:function(t){var e=i.indexOf(t);e>-1&&(i.splice(e,1),o.splice(e,1))}}),r=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){r=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function a(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!n.has(t)){var e,i=null,o=null,a=null,s=function(){t.clientWidth!==o&&p()},l=function(e){window.removeEventListener("resize",s,!1),t.removeEventListener("input",p,!1),t.removeEventListener("keyup",p,!1),t.removeEventListener("autosize:destroy",l,!1),t.removeEventListener("autosize:update",p,!1),Object.keys(e).forEach((function(i){t.style[i]=e[i]})),n.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",l,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",p,!1),window.addEventListener("resize",s,!1),t.addEventListener("input",p,!1),t.addEventListener("autosize:update",p,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",n.set(t,{destroy:l,update:p}),"vertical"===(e=window.getComputedStyle(t,null)).resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),i="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(i)&&(i=0),p()}function c(e){var i=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=i,t.style.overflowY=e}function d(){if(0!==t.scrollHeight){var e=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(t),n=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+i+"px",o=t.clientWidth,e.forEach((function(t){t.node.scrollTop=t.scrollTop})),n&&(document.documentElement.scrollTop=n)}}function p(){d();var e=Math.round(parseFloat(t.style.height)),i=window.getComputedStyle(t,null),o="content-box"===i.boxSizing?Math.round(parseFloat(i.height)):t.offsetHeight;if(o<e?"hidden"===i.overflowY&&(c("scroll"),d(),o="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==i.overflowY&&(c("hidden"),d(),o="content-box"===i.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),a!==o){a=o;var n=r("autosize:resized");try{t.dispatchEvent(n)}catch(t){}}}}function s(t){var e=n.get(t);e&&e.destroy()}function l(t){var e=n.get(t);e&&e.update()}var c=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((c=function(t){return t}).destroy=function(t){return t},c.update=function(t){return t}):((c=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],(function(t){return a(t)})),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t},c.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],l),t}),e.default=c,t.exports=e.default})?o.apply(e,n):o)||(t.exports=r)},function(t,e,i){t.exports=i.p+"images/alarm.12375fc.png"},function(t,e,i){t.exports=i.p+"images/error.cb0c05c.png"},function(t,e,i){
/*! @license DOMPurify 2.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.0/LICENSE */
t.exports=function(){"use strict";var t=Object.hasOwnProperty,e=Object.setPrototypeOf,i=Object.isFrozen,o=Object.getPrototypeOf,n=Object.getOwnPropertyDescriptor,r=Object.freeze,a=Object.seal,s=Object.create,l="undefined"!=typeof Reflect&&Reflect,c=l.apply,d=l.construct;c||(c=function(t,e,i){return t.apply(e,i)}),r||(r=function(t){return t}),a||(a=function(t){return t}),d||(d=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(e))))});var p,h=_(Array.prototype.forEach),u=_(Array.prototype.pop),g=_(Array.prototype.push),f=_(String.prototype.toLowerCase),m=_(String.prototype.match),b=_(String.prototype.replace),y=_(String.prototype.indexOf),v=_(String.prototype.trim),w=_(RegExp.prototype.test),x=(p=TypeError,function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return d(p,e)});function _(t){return function(e){for(var i=arguments.length,o=Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];return c(t,e,o)}}function k(t,o){e&&e(t,null);for(var n=o.length;n--;){var r=o[n];if("string"==typeof r){var a=f(r);a!==r&&(i(o)||(o[n]=a),r=a)}t[r]=!0}return t}function O(e){var i=s(null),o=void 0;for(o in e)c(t,e,[o])&&(i[o]=e[o]);return i}function A(t,e){for(;null!==t;){var i=n(t,e);if(i){if(i.get)return _(i.get);if("function"==typeof i.value)return _(i.value)}t=o(t)}return function(t){return console.warn("fallback value for",t),null}}var S=r(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),I=r(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),j=r(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$=r(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),C=r(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),E=r(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),T=r(["#text"]),P=r(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),R=r(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),L=r(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),D=r(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),M=a(/\{\{[\s\S]*|[\s\S]*\}\}/gm),U=a(/<%[\s\S]*|[\s\S]*%>/gm),N=a(/^data-[\-\w.\u00B7-\uFFFF]/),B=a(/^aria-[\-\w]+$/),F=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),z=a(/^(?:\w+script|data):/i),H=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function q(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var G=function(){return"undefined"==typeof window?null:window},V=function(t,e){if("object"!==(void 0===t?"undefined":W(t))||"function"!=typeof t.createPolicy)return null;var i=null;e.currentScript&&e.currentScript.hasAttribute("data-tt-policy-suffix")&&(i=e.currentScript.getAttribute("data-tt-policy-suffix"));var o="dompurify"+(i?"#"+i:"");try{return t.createPolicy(o,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G(),i=function(e){return t(e)};if(i.version="2.3.0",i.removed=[],!e||!e.document||9!==e.document.nodeType)return i.isSupported=!1,i;var o=e.document,n=e.document,a=e.DocumentFragment,s=e.HTMLTemplateElement,l=e.Node,c=e.Element,d=e.NodeFilter,p=e.NamedNodeMap,_=void 0===p?e.NamedNodeMap||e.MozNamedAttrMap:p,Q=e.Text,Y=e.Comment,X=e.DOMParser,Z=e.trustedTypes,K=c.prototype,J=A(K,"cloneNode"),tt=A(K,"nextSibling"),et=A(K,"childNodes"),it=A(K,"parentNode");if("function"==typeof s){var ot=n.createElement("template");ot.content&&ot.content.ownerDocument&&(n=ot.content.ownerDocument)}var nt=V(Z,o),rt=nt&&Mt?nt.createHTML(""):"",at=n,st=at.implementation,lt=at.createNodeIterator,ct=at.createDocumentFragment,dt=at.getElementsByTagName,pt=o.importNode,ht={};try{ht=O(n).documentMode?n.documentMode:{}}catch(t){}var ut={};i.isSupported="function"==typeof it&&st&&void 0!==st.createHTMLDocument&&9!==ht;var gt=M,ft=U,mt=N,bt=B,yt=z,vt=H,wt=F,xt=null,_t=k({},[].concat(q(S),q(I),q(j),q(C),q(T))),kt=null,Ot=k({},[].concat(q(P),q(R),q(L),q(D))),At=null,St=null,It=!0,jt=!0,$t=!1,Ct=!1,Et=!1,Tt=!1,Pt=!1,Rt=!1,Lt=!1,Dt=!0,Mt=!1,Ut=!0,Nt=!0,Bt=!1,Ft={},zt=k({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ht=null,Wt=k({},["audio","video","img","source","image","track"]),qt=null,Gt=k({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Vt="http://www.w3.org/1998/Math/MathML",Qt="http://www.w3.org/2000/svg",Yt="http://www.w3.org/1999/xhtml",Xt=Yt,Zt=!1,Kt=null,Jt=n.createElement("form"),te=function(t){Kt&&Kt===t||(t&&"object"===(void 0===t?"undefined":W(t))||(t={}),t=O(t),xt="ALLOWED_TAGS"in t?k({},t.ALLOWED_TAGS):_t,kt="ALLOWED_ATTR"in t?k({},t.ALLOWED_ATTR):Ot,qt="ADD_URI_SAFE_ATTR"in t?k(O(Gt),t.ADD_URI_SAFE_ATTR):Gt,Ht="ADD_DATA_URI_TAGS"in t?k(O(Wt),t.ADD_DATA_URI_TAGS):Wt,At="FORBID_TAGS"in t?k({},t.FORBID_TAGS):{},St="FORBID_ATTR"in t?k({},t.FORBID_ATTR):{},Ft="USE_PROFILES"in t&&t.USE_PROFILES,It=!1!==t.ALLOW_ARIA_ATTR,jt=!1!==t.ALLOW_DATA_ATTR,$t=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Ct=t.SAFE_FOR_TEMPLATES||!1,Et=t.WHOLE_DOCUMENT||!1,Rt=t.RETURN_DOM||!1,Lt=t.RETURN_DOM_FRAGMENT||!1,Dt=!1!==t.RETURN_DOM_IMPORT,Mt=t.RETURN_TRUSTED_TYPE||!1,Pt=t.FORCE_BODY||!1,Ut=!1!==t.SANITIZE_DOM,Nt=!1!==t.KEEP_CONTENT,Bt=t.IN_PLACE||!1,wt=t.ALLOWED_URI_REGEXP||wt,Xt=t.NAMESPACE||Yt,Ct&&(jt=!1),Lt&&(Rt=!0),Ft&&(xt=k({},[].concat(q(T))),kt=[],!0===Ft.html&&(k(xt,S),k(kt,P)),!0===Ft.svg&&(k(xt,I),k(kt,R),k(kt,D)),!0===Ft.svgFilters&&(k(xt,j),k(kt,R),k(kt,D)),!0===Ft.mathMl&&(k(xt,C),k(kt,L),k(kt,D))),t.ADD_TAGS&&(xt===_t&&(xt=O(xt)),k(xt,t.ADD_TAGS)),t.ADD_ATTR&&(kt===Ot&&(kt=O(kt)),k(kt,t.ADD_ATTR)),t.ADD_URI_SAFE_ATTR&&k(qt,t.ADD_URI_SAFE_ATTR),Nt&&(xt["#text"]=!0),Et&&k(xt,["html","head","body"]),xt.table&&(k(xt,["tbody"]),delete At.tbody),r&&r(t),Kt=t)},ee=k({},["mi","mo","mn","ms","mtext"]),ie=k({},["foreignobject","desc","title","annotation-xml"]),oe=k({},I);k(oe,j),k(oe,$);var ne=k({},C);k(ne,E);var re=function(t){var e=it(t);e&&e.tagName||(e={namespaceURI:Yt,tagName:"template"});var i=f(t.tagName),o=f(e.tagName);if(t.namespaceURI===Qt)return e.namespaceURI===Yt?"svg"===i:e.namespaceURI===Vt?"svg"===i&&("annotation-xml"===o||ee[o]):Boolean(oe[i]);if(t.namespaceURI===Vt)return e.namespaceURI===Yt?"math"===i:e.namespaceURI===Qt?"math"===i&&ie[o]:Boolean(ne[i]);if(t.namespaceURI===Yt){if(e.namespaceURI===Qt&&!ie[o])return!1;if(e.namespaceURI===Vt&&!ee[o])return!1;var n=k({},["title","style","font","a","script"]);return!ne[i]&&(n[i]||!oe[i])}return!1},ae=function(t){g(i.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){try{t.outerHTML=rt}catch(e){t.remove()}}},se=function(t,e){try{g(i.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){g(i.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!kt[t])if(Rt||Lt)try{ae(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},le=function(t){var e=void 0,i=void 0;if(Pt)t="<remove></remove>"+t;else{var o=m(t,/^[\r\n\t ]+/);i=o&&o[0]}var r=nt?nt.createHTML(t):t;if(Xt===Yt)try{e=(new X).parseFromString(r,"text/html")}catch(t){}if(!e||!e.documentElement){e=st.createDocument(Xt,"template",null);try{e.documentElement.innerHTML=Zt?"":r}catch(t){}}var a=e.body||e.documentElement;return t&&i&&a.insertBefore(n.createTextNode(i),a.childNodes[0]||null),Xt===Yt?dt.call(e,Et?"html":"body")[0]:Et?e.documentElement:a},ce=function(t){return lt.call(t.ownerDocument||t,t,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},de=function(t){return!(t instanceof Q||t instanceof Y||"string"==typeof t.nodeName&&"string"==typeof t.textContent&&"function"==typeof t.removeChild&&t.attributes instanceof _&&"function"==typeof t.removeAttribute&&"function"==typeof t.setAttribute&&"string"==typeof t.namespaceURI&&"function"==typeof t.insertBefore)},pe=function(t){return"object"===(void 0===l?"undefined":W(l))?t instanceof l:t&&"object"===(void 0===t?"undefined":W(t))&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},he=function(t,e,o){ut[t]&&h(ut[t],(function(t){t.call(i,e,o,Kt)}))},ue=function(t){var e=void 0;if(he("beforeSanitizeElements",t,null),de(t))return ae(t),!0;if(m(t.nodeName,/[\u0080-\uFFFF]/))return ae(t),!0;var o=f(t.nodeName);if(he("uponSanitizeElement",t,{tagName:o,allowedTags:xt}),!pe(t.firstElementChild)&&(!pe(t.content)||!pe(t.content.firstElementChild))&&w(/<[/\w]/g,t.innerHTML)&&w(/<[/\w]/g,t.textContent))return ae(t),!0;if(!xt[o]||At[o]){if(Nt&&!zt[o]){var n=it(t)||t.parentNode,r=et(t)||t.childNodes;if(r&&n)for(var a=r.length-1;a>=0;--a)n.insertBefore(J(r[a],!0),tt(t))}return ae(t),!0}return t instanceof c&&!re(t)?(ae(t),!0):"noscript"!==o&&"noembed"!==o||!w(/<\/no(script|embed)/i,t.innerHTML)?(Ct&&3===t.nodeType&&(e=t.textContent,e=b(e,gt," "),e=b(e,ft," "),t.textContent!==e&&(g(i.removed,{element:t.cloneNode()}),t.textContent=e)),he("afterSanitizeElements",t,null),!1):(ae(t),!0)},ge=function(t,e,i){if(Ut&&("id"===e||"name"===e)&&(i in n||i in Jt))return!1;if(jt&&!St[e]&&w(mt,e));else if(It&&w(bt,e));else{if(!kt[e]||St[e])return!1;if(qt[e]);else if(w(wt,b(i,vt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==y(i,"data:")||!Ht[t])if($t&&!w(yt,b(i,vt,"")));else if(i)return!1}return!0},fe=function(t){var e=void 0,o=void 0,n=void 0,r=void 0;he("beforeSanitizeAttributes",t,null);var a=t.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:kt};for(r=a.length;r--;){var l=e=a[r],c=l.name,d=l.namespaceURI;if(o=v(e.value),n=f(c),s.attrName=n,s.attrValue=o,s.keepAttr=!0,s.forceKeepAttr=void 0,he("uponSanitizeAttribute",t,s),o=s.attrValue,!s.forceKeepAttr&&(se(c,t),s.keepAttr))if(w(/\/>/i,o))se(c,t);else{Ct&&(o=b(o,gt," "),o=b(o,ft," "));var p=t.nodeName.toLowerCase();if(ge(p,n,o))try{d?t.setAttributeNS(d,c,o):t.setAttribute(c,o),u(i.removed)}catch(t){}}}he("afterSanitizeAttributes",t,null)}},me=function t(e){var i=void 0,o=ce(e);for(he("beforeSanitizeShadowDOM",e,null);i=o.nextNode();)he("uponSanitizeShadowNode",i,null),ue(i)||(i.content instanceof a&&t(i.content),fe(i));he("afterSanitizeShadowDOM",e,null)};return i.sanitize=function(t,n){var r=void 0,s=void 0,c=void 0,d=void 0,p=void 0;if((Zt=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!pe(t)){if("function"!=typeof t.toString)throw x("toString is not a function");if("string"!=typeof(t=t.toString()))throw x("dirty is not a string, aborting")}if(!i.isSupported){if("object"===W(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof t)return e.toStaticHTML(t);if(pe(t))return e.toStaticHTML(t.outerHTML)}return t}if(Tt||te(n),i.removed=[],"string"==typeof t&&(Bt=!1),Bt);else if(t instanceof l)1===(s=(r=le("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!Rt&&!Ct&&!Et&&-1===t.indexOf("<"))return nt&&Mt?nt.createHTML(t):t;if(!(r=le(t)))return Rt?null:rt}r&&Pt&&ae(r.firstChild);for(var h=ce(Bt?t:r);c=h.nextNode();)3===c.nodeType&&c===d||ue(c)||(c.content instanceof a&&me(c.content),fe(c),d=c);if(d=null,Bt)return t;if(Rt){if(Lt)for(p=ct.call(r.ownerDocument);r.firstChild;)p.appendChild(r.firstChild);else p=r;return Dt&&(p=pt.call(o,p,!0)),p}var u=Et?r.outerHTML:r.innerHTML;return Ct&&(u=b(u,gt," "),u=b(u,ft," ")),nt&&Mt?nt.createHTML(u):u},i.setConfig=function(t){te(t),Tt=!0},i.clearConfig=function(){Kt=null,Tt=!1},i.isValidAttribute=function(t,e,i){Kt||te({});var o=f(t),n=f(e);return ge(o,n,i)},i.addHook=function(t,e){"function"==typeof e&&(ut[t]=ut[t]||[],g(ut[t],e))},i.removeHook=function(t){ut[t]&&u(ut[t])},i.removeHooks=function(t){ut[t]&&(ut[t]=[])},i.removeAllHooks=function(){ut={}},i}()}()},function(t,e,i){t.exports=i.p+"images/spin.053f510.svg"},function(t,e,i){t.exports=i.p+"images/top.79df55b.png"},function(t,e,i){t.exports=i.p+"images/note.d7ede44.png"},function(t,e,i){t.exports=i.p+"images/bold.08bc468.png"},function(t,e,i){t.exports=i.p+"images/plus.9b73992.png"},function(t,e,i){t.exports=i.p+"images/min.2ddeb34.png"},function(t,e,i){t.exports=i.p+"images/link.e1e6090.png"},function(t,e,i){t.exports=i.p+"images/pic.ce6b6ab.png"},function(t,e,i){t.exports=i.p+"images/added.e27311a.svg"},function(t,e,i){t.exports=i.p+"images/search_result.2f0ee91.svg"},function(t,e,i){t.exports=i.p+"images/popular.37b00cd.svg"},function(t,e,i){t.exports=i.p+"images/share_by_user.6dc1594.svg"},function(t,e,i){t.exports=i.p+"images/application.87292f2.svg"},function(t,e,i){t.exports=i.p+"images/news.eee6b7c.svg"},function(t,e,i){t.exports=i.p+"images/music_video.605f663.svg"},function(t,e,i){t.exports=i.p+"images/photos.0a1f40b.svg"},function(t,e,i){t.exports=i.p+"images/shopping.9a830b3.svg"},function(t,e,i){t.exports=i.p+"images/social.4dcfc82.svg"},function(t,e,i){t.exports=i.p+"images/sports.7b38f0b.svg"},function(t,e,i){t.exports=i.p+"images/life_style.4460e9b.svg"},function(t,e,i){t.exports=i.p+"images/games.d0c6657.svg"},function(t,e,i){t.exports=i.p+"images/education.eefa8c2.svg"},function(t,e,i){t.exports=i.p+"images/tech.5a20545.svg"},function(t,e,i){t.exports=i.p+"images/finance.ecb9742.svg"},function(t,e,i){t.exports=i.p+"images/read.59ac46b.svg"},function(t,e,i){t.exports=i.p+"images/others.29c4520.svg"},function(t,e,i){t.exports=i.p+"images/search.1ffd553.png"},function(t,e,i){t.exports=i.p+"images/defaultapp.d47f3f3.png"},function(t,e,i){t.exports=i.p+"images/holder.de15c91.png"},function(t,e,i){t.exports=i.p+"images/added.e27311a.svg"},function(t,e,i){t.exports=i.p+"images/networkerr.ab12fcc.png"},function(t,e,i){t.exports=i.p+"images/no-result.80a1e8b.png"},function(t,e,i){t.exports=i.p+"images/permission_img.1fa8fa6.svg"},function(t,e,i){t.exports=i.p+"images/close.0d8a2c5.svg"},function(t,e,i){t.exports=i.p+"images/custom.469c6c9.svg"},function(t,e,i){t.exports=i.p+"images/qrcode.3aadda2.jpg"},function(t,e){var i;!function(){function t(t){this.mode=l.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,i=this.data.length;i>e;e++){var o=[],n=this.data.charCodeAt(e);n>65536?(o[0]=240|(1835008&n)>>>18,o[1]=128|(258048&n)>>>12,o[2]=128|(4032&n)>>>6,o[3]=128|63&n):n>2048?(o[0]=224|(61440&n)>>>12,o[1]=128|(4032&n)>>>6,o[2]=128|63&n):n>128?(o[0]=192|(1984&n)>>>6,o[1]=128|63&n):o[0]=n,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function o(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var i=0;i<t.length&&0==t[i];)i++;this.num=new Array(t.length-i+e);for(var o=0;o<t.length-i;o++)this.num[o]=t[o+i]}function n(t,e){this.totalCount=t,this.dataCount=e}function r(){this.buffer=[],this.length=0}function a(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var i=e.toString().match(/android ([0-9]\.[0-9])/i);i&&i[1]&&(t=parseFloat(i[1]))}return t}function s(t,e){for(var i=1,o=function(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}(t),n=0,r=g.length;r>=n;n++){var a=0;switch(e){case c.L:a=g[n][0];break;case c.M:a=g[n][1];break;case c.Q:a=g[n][2];break;case c.H:a=g[n][3]}if(a>=o)break;i++}if(i>g.length)throw new Error("Too long data");return i}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,i=this.parsedData.length;i>e;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var i=new t(e);this.dataList.push(i),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,i){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[o][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,i),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,i)},setupPositionProbePattern:function(t,e){for(var i=-1;7>=i;i++)if(!(-1>=t+i||this.moduleCount<=t+i))for(var o=-1;7>=o;o++)-1>=e+o||this.moduleCount<=e+o||(this.modules[t+i][e+o]=i>=0&&6>=i&&(0==o||6==o)||o>=0&&6>=o&&(0==i||6==i)||i>=2&&4>=i&&o>=2&&4>=o)},getBestMaskPattern:function(){for(var t=0,e=0,i=0;8>i;i++){this.makeImpl(!0,i);var o=p.getLostPoint(this);(0==i||t>o)&&(t=o,e=i)}return e},createMovieClip:function(t,e,i){var o=t.createEmptyMovieClip(e,i);this.make();for(var n=0;n<this.modules.length;n++)for(var r=1*n,a=0;a<this.modules[n].length;a++){var s=1*a;this.modules[n][a]&&(o.beginFill(0,100),o.moveTo(s,r),o.lineTo(s+1,r),o.lineTo(s+1,r+1),o.lineTo(s,r+1),o.endFill())}return o},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=p.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var i=0;i<t.length;i++){var o=t[e],n=t[i];if(null==this.modules[o][n])for(var r=-2;2>=r;r++)for(var a=-2;2>=a;a++)this.modules[o+r][n+a]=-2==r||2==r||-2==a||2==a||0==r&&0==a}},setupTypeNumber:function(t){for(var e=p.getBCHTypeNumber(this.typeNumber),i=0;18>i;i++){var o=!t&&1==(e>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=o}for(i=0;18>i;i++){o=!t&&1==(e>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=o}},setupTypeInfo:function(t,e){for(var i=this.errorCorrectLevel<<3|e,o=p.getBCHTypeInfo(i),n=0;15>n;n++){var r=!t&&1==(o>>n&1);6>n?this.modules[n][8]=r:8>n?this.modules[n+1][8]=r:this.modules[this.moduleCount-15+n][8]=r}for(n=0;15>n;n++){r=!t&&1==(o>>n&1);8>n?this.modules[8][this.moduleCount-n-1]=r:9>n?this.modules[8][15-n-1+1]=r:this.modules[8][15-n-1]=r}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var i=-1,o=this.moduleCount-1,n=7,r=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[o][a-s]){var l=!1;r<t.length&&(l=1==(t[r]>>>n&1)),p.getMask(e,o,a-s)&&(l=!l),this.modules[o][a-s]=l,-1==--n&&(r++,n=7)}if(0>(o+=i)||this.moduleCount<=o){o-=i,i=-i;break}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,i,o){for(var a=n.getRSBlocks(t,i),s=new r,l=0;l<o.length;l++){var c=o[l];s.put(c.mode,4),s.put(c.getLength(),p.getLengthInBits(c.mode,t)),c.write(s)}var d=0;for(l=0;l<a.length;l++)d+=a[l].dataCount;if(s.getLengthInBits()>8*d)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*d+")");for(s.getLengthInBits()+4<=8*d&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=8*d)&&(s.put(e.PAD0,8),!(s.getLengthInBits()>=8*d));)s.put(e.PAD1,8);return e.createBytes(s,a)},e.createBytes=function(t,e){for(var i=0,n=0,r=0,a=new Array(e.length),s=new Array(e.length),l=0;l<e.length;l++){var c=e[l].dataCount,d=e[l].totalCount-c;n=Math.max(n,c),r=Math.max(r,d),a[l]=new Array(c);for(var h=0;h<a[l].length;h++)a[l][h]=255&t.buffer[h+i];i+=c;var u=p.getErrorCorrectPolynomial(d),g=new o(a[l],u.getLength()-1).mod(u);s[l]=new Array(u.getLength()-1);for(h=0;h<s[l].length;h++){var f=h+g.getLength()-s[l].length;s[l][h]=f>=0?g.get(f):0}}var m=0;for(h=0;h<e.length;h++)m+=e[h].totalCount;var b=new Array(m),y=0;for(h=0;n>h;h++)for(l=0;l<e.length;l++)h<a[l].length&&(b[y++]=a[l][h]);for(h=0;r>h;h++)for(l=0;l<e.length;l++)h<s[l].length&&(b[y++]=s[l][h]);return b};for(var l={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},c={L:1,M:0,Q:3,H:2},d={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;p.getBCHDigit(e)-p.getBCHDigit(p.G15)>=0;)e^=p.G15<<p.getBCHDigit(e)-p.getBCHDigit(p.G15);return(t<<10|e)^p.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;p.getBCHDigit(e)-p.getBCHDigit(p.G18)>=0;)e^=p.G18<<p.getBCHDigit(e)-p.getBCHDigit(p.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return p.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,i){switch(t){case d.PATTERN000:return(e+i)%2==0;case d.PATTERN001:return e%2==0;case d.PATTERN010:return i%3==0;case d.PATTERN011:return(e+i)%3==0;case d.PATTERN100:return(Math.floor(e/2)+Math.floor(i/3))%2==0;case d.PATTERN101:return e*i%2+e*i%3==0;case d.PATTERN110:return(e*i%2+e*i%3)%2==0;case d.PATTERN111:return(e*i%3+(e+i)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new o([1],0),i=0;t>i;i++)e=e.multiply(new o([1,h.gexp(i)],0));return e},getLengthInBits:function(t,e){if(e>=1&&10>e)switch(t){case l.MODE_NUMBER:return 10;case l.MODE_ALPHA_NUM:return 9;case l.MODE_8BIT_BYTE:case l.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(27>e)switch(t){case l.MODE_NUMBER:return 12;case l.MODE_ALPHA_NUM:return 11;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(41>e))throw new Error("type:"+e);switch(t){case l.MODE_NUMBER:return 14;case l.MODE_ALPHA_NUM:return 13;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),i=0,o=0;e>o;o++)for(var n=0;e>n;n++){for(var r=0,a=t.isDark(o,n),s=-1;1>=s;s++)if(!(0>o+s||o+s>=e))for(var l=-1;1>=l;l++)0>n+l||n+l>=e||(0!=s||0!=l)&&a==t.isDark(o+s,n+l)&&r++;r>5&&(i+=3+r-5)}for(o=0;e-1>o;o++)for(n=0;e-1>n;n++){var c=0;t.isDark(o,n)&&c++,t.isDark(o+1,n)&&c++,t.isDark(o,n+1)&&c++,t.isDark(o+1,n+1)&&c++,(0==c||4==c)&&(i+=3)}for(o=0;e>o;o++)for(n=0;e-6>n;n++)t.isDark(o,n)&&!t.isDark(o,n+1)&&t.isDark(o,n+2)&&t.isDark(o,n+3)&&t.isDark(o,n+4)&&!t.isDark(o,n+5)&&t.isDark(o,n+6)&&(i+=40);for(n=0;e>n;n++)for(o=0;e-6>o;o++)t.isDark(o,n)&&!t.isDark(o+1,n)&&t.isDark(o+2,n)&&t.isDark(o+3,n)&&t.isDark(o+4,n)&&!t.isDark(o+5,n)&&t.isDark(o+6,n)&&(i+=40);var d=0;for(n=0;e>n;n++)for(o=0;e>o;o++)t.isDark(o,n)&&d++;return i+10*(Math.abs(100*d/e/e-50)/5)}},h={glog:function(t){if(1>t)throw new Error("glog("+t+")");return h.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return h.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},u=0;8>u;u++)h.EXP_TABLE[u]=1<<u;for(u=8;256>u;u++)h.EXP_TABLE[u]=h.EXP_TABLE[u-4]^h.EXP_TABLE[u-5]^h.EXP_TABLE[u-6]^h.EXP_TABLE[u-8];for(u=0;255>u;u++)h.LOG_TABLE[h.EXP_TABLE[u]]=u;o.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var n=0;n<t.getLength();n++)e[i+n]^=h.gexp(h.glog(this.get(i))+h.glog(t.get(n)));return new o(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=h.glog(this.get(0))-h.glog(t.get(0)),i=new Array(this.getLength()),n=0;n<this.getLength();n++)i[n]=this.get(n);for(n=0;n<t.getLength();n++)i[n]^=h.gexp(h.glog(t.get(n))+e);return new o(i,0).mod(t)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(t,e){var i=n.getRsBlockTable(t,e);if(null==i)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=i.length/3,r=[],a=0;o>a;a++)for(var s=i[3*a+0],l=i[3*a+1],c=i[3*a+2],d=0;s>d;d++)r.push(new n(l,c));return r},n.getRsBlockTable=function(t,e){switch(e){case c.L:return n.RS_BLOCK_TABLE[4*(t-1)+0];case c.M:return n.RS_BLOCK_TABLE[4*(t-1)+1];case c.Q:return n.RS_BLOCK_TABLE[4*(t-1)+2];case c.H:return n.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},r.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var i=0;e>i;i++)this.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var g=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],f=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){function e(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);for(var o in e)e.hasOwnProperty(o)&&i.setAttribute(o,e[o]);return i}var i=this._htOption,o=this._el,n=t.getModuleCount();Math.floor(i.width/n),Math.floor(i.height/n),this.clear();var r=e("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:i.colorLight});r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.appendChild(r),r.appendChild(e("rect",{fill:i.colorLight,width:"100%",height:"100%"})),r.appendChild(e("rect",{fill:i.colorDark,width:"1",height:"1",id:"template"}));for(var a=0;n>a;a++)for(var s=0;n>s;s++)if(t.isDark(a,s)){var l=e("use",{x:String(s),y:String(a)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),r.appendChild(l)}},t.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},t}(),m="svg"===document.documentElement.tagName.toLowerCase()?f:"undefined"!=typeof CanvasRenderingContext2D?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function e(t,e){var i=this;if(i._fFail=e,i._fSuccess=t,null===i._bSupportDataURI){var o=document.createElement("img"),n=function(){i._bSupportDataURI=!1,i._fFail&&i._fFail.call(i)};return o.onabort=n,o.onerror=n,o.onload=function(){i._bSupportDataURI=!0,i._fSuccess&&i._fSuccess.call(i)},void(o.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===i._bSupportDataURI&&i._fSuccess?i._fSuccess.call(i):!1===i._bSupportDataURI&&i._fFail&&i._fFail.call(i)}if(this._android&&this._android<=2.1){var i=1/window.devicePixelRatio,o=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,e,n,r,a,s,l,c,d){if("nodeName"in t&&/img/i.test(t.nodeName))for(var p=arguments.length-1;p>=1;p--)arguments[p]=arguments[p]*i;else void 0===c&&(arguments[1]*=i,arguments[2]*=i,arguments[3]*=i,arguments[4]*=i);o.apply(this,arguments)}}var n=function(t,e){this._bIsPainted=!1,this._android=a(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return n.prototype.draw=function(t){var e=this._elImage,i=this._oContext,o=this._htOption,n=t.getModuleCount(),r=o.width/n,a=o.height/n,s=Math.round(r),l=Math.round(a);e.style.display="none",this.clear();for(var c=0;n>c;c++)for(var d=0;n>d;d++){var p=t.isDark(c,d),h=d*r,u=c*a;i.strokeStyle=p?o.colorDark:o.colorLight,i.lineWidth=1,i.fillStyle=p?o.colorDark:o.colorLight,i.fillRect(h,u,r,a),i.strokeRect(Math.floor(h)+.5,Math.floor(u)+.5,s,l),i.strokeRect(Math.ceil(h)-.5,Math.ceil(u)-.5,s,l)}this._bIsPainted=!0},n.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t)},n.prototype.isPainted=function(){return this._bIsPainted},n.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},n.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},n}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,i=this._el,o=t.getModuleCount(),n=Math.floor(e.width/o),r=Math.floor(e.height/o),a=['<table style="border:0;border-collapse:collapse;">'],s=0;o>s;s++){a.push("<tr>");for(var l=0;o>l;l++)a.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+n+"px;height:"+r+"px;background-color:"+(t.isDark(s,l)?e.colorDark:e.colorLight)+';"></td>');a.push("</tr>")}a.push("</table>"),i.innerHTML=a.join("");var c=i.childNodes[0],d=(e.width-c.offsetWidth)/2,p=(e.height-c.offsetHeight)/2;d>0&&p>0&&(c.style.margin=p+"px "+d+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();(i=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:c.H},"string"==typeof e&&(e={text:e}),e)for(var i in e)this._htOption[i]=e[i];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(m=f),this._android=a(),this._el=t,this._oQRCode=null,this._oDrawing=new m(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(t){this._oQRCode=new e(s(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},i.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},i.prototype.clear=function(){this._oDrawing.clear()},i.CorrectLevel=c}(),function(t,e,o){function n(t,e){var o=function(){var t=arguments;if(u)return u.apply(null,t);var e={};return p(t,(function(t){p(t,(function(t,i){e[i]=t}))})),t[0]=e}({},w,e||{},function(t){if(t.dataset)return t.dataset;var e={};return t.hasAttributes()?(p(t.attributes,(function(t){var i=t.name;return 0!==i.indexOf("data-")||(i=i.replace(/^data-/i,"").replace(/-(\w)/g,(function(t,e){return e.toUpperCase()})),void(e[i]=t.value))})),e):{}}(t));o.imageSelector&&(o.image=a(o.imageSelector).map((function(t){return t.src})).join("||")),function(t,e){if(e&&"string"==typeof e){var i=(t.className+" "+e).split(/\s+/),o=" ";p(i,(function(t){o.indexOf(" "+t+" ")<0&&(o+=t+" ")})),t.className=o.slice(1,-1)}}(t,"share-component social-share"),function(t,e){var i=function(t){t.mobileSites.length||(t.mobileSites=t.sites);var e=(f?t.mobileSites:t.sites).slice(0),i=t.disabled;return"string"==typeof e&&(e=e.split(/\s*,\s*/)),"string"==typeof i&&(i=i.split(/\s*,\s*/)),g&&i.push("wechat"),i.length&&p(i,(function(t){e.splice(function(t,e,i){var o;if(e){if(h)return h.call(e,t,i);for(o=e.length,i=i?0>i?Math.max(0,o+i):i:0;o>i;i++)if(i in e&&e[i]===t)return i}return-1}(t,e),1)})),e}(e),o="prepend"==e.mode;p(o?i.reverse():i,(function(i){var n=r(i,e),a=e.initialized?c(t,"icon-"+i):d('<a class="social-share-icon icon-'+i+'"></a>');return!a.length||(a[0].href=n,"wechat"===i?a[0].tabindex=-1:a[0].target="_blank",void(e.initialized||(o?t.insertBefore(a[0],t.firstChild):t.appendChild(a[0]))))}))}(t,o),function(t,e){var o=c(t,"icon-wechat","a");if(0===o.length)return!1;var n=d('<div class="wechat-qrcode"><h4>'+e.wechatQrcodeTitle+'</h4><div class="qrcode"></div><div class="help">'+e.wechatQrcodeHelper+"</div></div>"),r=c(n[0],"qrcode","div");o[0].appendChild(n[0]),new i(r[0],{text:e.url,width:e.wechatQrcodeSize,height:e.wechatQrcodeSize})}(t,o),t.initialized=!0}function r(t,e){return e.summary=e.description,x[t].replace(/\{\{(\w)(\w*)\}\}/g,(function(i,n,r){var a=t+n+r.toLowerCase();return r=(n+r).toLowerCase(),encodeURIComponent((e[a]===o?e[r]:e[a])||"")}))}function a(i){return(e.querySelectorAll||t.jQuery||t.Zepto||s).call(e,i)}function s(t){var i=[];return p(t.split(/\s*,\s*/),(function(o){var n=o.match(/([#.])(\w+)/);if(null===n)throw Error("Supports only simple single #ID or .CLASS selector.");if(n[1]){var r=e.getElementById(n[2]);r&&i.push(r)}i=i.concat(c(t))})),i}function l(t){return(e.getElementsByName(t)[0]||0).content}function c(t,e,i){if(t.getElementsByClassName)return t.getElementsByClassName(e);var o=[],n=t.getElementsByTagName(i||"*");return e=" "+e+" ",p(n,(function(t){(" "+(t.className||"")+" ").indexOf(e)>=0&&o.push(t)})),o}function d(t){var i=e.createElement("div");return i.innerHTML=t,i.childNodes}function p(t,e){var i=t.length;if(i===o){for(var n in t)if(t.hasOwnProperty(n)&&!1===e.call(t[n],t[n],n))break}else for(var r=0;i>r&&!1!==e.call(t[r],t[r],r);r++);}var h=Array.prototype.indexOf,u=Object.assign,g=/MicroMessenger/i.test(navigator.userAgent),f=e.documentElement.clientWidth<=768,m=(e.images[0]||0).src||"",b=l("site")||l("Site")||e.title,y=l("title")||l("Title")||e.title,v=l("description")||l("Description")||"",w={url:location.href,origin:location.origin,source:b,title:y,description:v,image:m,imageSelector:o,weiboKey:"",wechatQrcodeTitle:"微信扫一扫：分享",wechatQrcodeHelper:"<p>微信里点“发现”，扫一下</p><p>二维码便可将本文分享至朋友圈。</p>",wechatQrcodeSize:100,sites:["weibo","qq","wechat","tencent","douban","qzone","linkedin","diandian","facebook","twitter","google"],mobileSites:[],disabled:[],initialized:!1},x={qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{URL}}&title={{TITLE}}&desc={{DESCRIPTION}}&summary={{SUMMARY}}&site={{SOURCE}}",qq:"http://connect.qq.com/widget/shareqq/index.html?url={{URL}}&title={{TITLE}}&source={{SOURCE}}&desc={{DESCRIPTION}}&pics={{IMAGE}}",tencent:"http://share.v.t.qq.com/index.php?c=share&a=index&title={{TITLE}}&url={{URL}}&pic={{IMAGE}}",weibo:"http://service.weibo.com/share/share.php?url={{URL}}&title={{TITLE}}&pic={{IMAGE}}&appkey={{WEIBOKEY}}",wechat:"javascript:",douban:"http://shuo.douban.com/!service/share?href={{URL}}&name={{TITLE}}&text={{DESCRIPTION}}&image={{IMAGE}}&starid=0&aid=0&style=11",diandian:"http://www.diandian.com/share?lo={{URL}}&ti={{TITLE}}&type=link",linkedin:"http://www.linkedin.com/shareArticle?mini=true&ro=true&title={{TITLE}}&url={{URL}}&summary={{SUMMARY}}&source={{SOURCE}}&armin=armin",facebook:"https://www.facebook.com/sharer/sharer.php?u={{URL}}",twitter:"https://twitter.com/intent/tweet?text={{TITLE}}&url={{URL}}&via={{ORIGIN}}",google:"https://plus.google.com/share?url={{URL}}"};t.socialShare=function(t,e){(t="string"==typeof t?a(t):t).length===o&&(t=[t]),p(t,(function(t){t.initialized||n(t,e)}))},function(i){var o="addEventListener",n=e[o]?"":"on";~e.readyState.indexOf("m")?i():"load DOMContentLoaded readystatechange".replace(/\w+/g,(function(r,a){(a?e:t)[n?"attachEvent":o](n+r,(function(){i&&(6>a||~e.readyState.indexOf("m"))&&(i(),i=0)}),!1)}))}((function(){socialShare(".social-share, .share-component")}))}(window,document)},function(t,e,i){t.exports=i.p+"images/0.eaad457.svg"},function(t,e,i){t.exports=i.p+"images/10.4c57f00.svg"},function(t,e,i){t.exports=i.p+"images/15.d2b4e87.svg"},function(t,e,i){t.exports=i.p+"images/20.151fae4.svg"},function(t,e,i){t.exports=i.p+"images/25.08e5fd2.svg"},function(t,e,i){t.exports=i.p+"images/0.46cff52.svg"},function(t,e,i){t.exports=i.p+"images/10.41414fe.svg"},function(t,e,i){t.exports=i.p+"images/15.541edc8.svg"},function(t,e,i){t.exports=i.p+"images/20.7dc2d60.svg"},function(t,e,i){t.exports=i.p+"images/25.b869696.svg"},function(t,e,i){t.exports=i.p+"images/qq_group.35acb4d.svg"},function(t,e,i){t.exports=i.p+"images/femael.fe86af2.png"},function(t,e,i){t.exports=i.p+"images/male.72d961f.png"},function(t,e,i){var o=i(746),n=i(747),r=i(764),a=i(765);function s(t,e,i,r,a){var s=[].slice.call(arguments,1),l=s.length,c="function"==typeof s[l-1];if(!c&&!o())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(i=e,e=r=void 0):2!==l||e.getContext||(r=i,i=e,e=void 0),new Promise((function(o,a){try{var s=n.create(i,r);o(t(s,e,r))}catch(t){a(t)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(a=i,i=e,e=r=void 0):3===l&&(e.getContext&&void 0===a?(a=r,r=void 0):(a=r,r=i,i=e,e=void 0));try{var d=n.create(i,r);a(null,t(d,e,r))}catch(t){a(t)}}e.create=n.create,e.toCanvas=s.bind(null,r.render),e.toDataURL=s.bind(null,r.renderToDataURL),e.toString=s.bind(null,(function(t,e,i){return a.render(t,i)}))},function(t,e){t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},function(t,e,i){var o=i(632),n=i(628),r=i(642),a=i(748),s=i(749),l=i(750),c=i(751),d=i(752),p=i(661),h=i(753),u=i(756),g=i(757),f=i(629),m=i(758),b=i(641);function y(t,e,i){var o,n,r=t.size,a=g.getEncodedBits(e,i);for(o=0;o<15;o++)n=1==(a>>o&1),o<6?t.set(o,8,n,!0):o<8?t.set(o+1,8,n,!0):t.set(r-15+o,8,n,!0),o<8?t.set(8,r-o-1,n,!0):o<9?t.set(8,15-o-1+1,n,!0):t.set(8,15-o-1,n,!0);t.set(r-8,8,1,!0)}function v(t,e,i){var r=new a;i.forEach((function(e){r.put(e.mode.bit,4),r.put(e.getLength(),f.getCharCountIndicator(e.mode,t)),e.write(r)}));var s=8*(n.getSymbolTotalCodewords(t)-p.getTotalCodewordsCount(t,e));for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);for(var l=(s-r.getLengthInBits())/8,c=0;c<l;c++)r.put(c%2?17:236,8);return function(t,e,i){for(var r=n.getSymbolTotalCodewords(e),a=p.getTotalCodewordsCount(e,i),s=r-a,l=p.getBlocksCount(e,i),c=l-r%l,d=Math.floor(r/l),u=Math.floor(s/l),g=u+1,f=d-u,m=new h(f),b=0,y=new Array(l),v=new Array(l),w=0,x=o.from(t.buffer),_=0;_<l;_++){var k=_<c?u:g;y[_]=x.slice(b,b+k),v[_]=m.encode(y[_]),b+=k,w=Math.max(w,k)}var O,A,S=o.alloc(r),I=0;for(O=0;O<w;O++)for(A=0;A<l;A++)O<y[A].length&&(S[I++]=y[A][O]);for(O=0;O<f;O++)for(A=0;A<l;A++)S[I++]=v[A][O];return S}(r,t,e)}function w(t,e,i,o){var r;if(b(t))r=m.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");var a=e;if(!a){var p=m.rawSplit(t);a=u.getBestVersionForData(p,i)}r=m.fromString(t,a||40)}var h=u.getBestVersionForData(r,i);if(!h)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<h)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+h+".\n")}else e=h;var g=v(e,i,r),f=n.getSymbolSize(e),w=new s(f);return function(t,e){for(var i=t.size,o=c.getPositions(e),n=0;n<o.length;n++)for(var r=o[n][0],a=o[n][1],s=-1;s<=7;s++)if(!(r+s<=-1||i<=r+s))for(var l=-1;l<=7;l++)a+l<=-1||i<=a+l||(s>=0&&s<=6&&(0===l||6===l)||l>=0&&l<=6&&(0===s||6===s)||s>=2&&s<=4&&l>=2&&l<=4?t.set(r+s,a+l,!0,!0):t.set(r+s,a+l,!1,!0))}(w,e),function(t){for(var e=t.size,i=8;i<e-8;i++){var o=i%2==0;t.set(i,6,o,!0),t.set(6,i,o,!0)}}(w),function(t,e){for(var i=l.getPositions(e),o=0;o<i.length;o++)for(var n=i[o][0],r=i[o][1],a=-2;a<=2;a++)for(var s=-2;s<=2;s++)-2===a||2===a||-2===s||2===s||0===a&&0===s?t.set(n+a,r+s,!0,!0):t.set(n+a,r+s,!1,!0)}(w,e),y(w,i,0),e>=7&&function(t,e){for(var i,o,n,r=t.size,a=u.getEncodedBits(e),s=0;s<18;s++)i=Math.floor(s/3),o=s%3+r-8-3,n=1==(a>>s&1),t.set(i,o,n,!0),t.set(o,i,n,!0)}(w,e),function(t,e){for(var i=t.size,o=-1,n=i-1,r=7,a=0,s=i-1;s>0;s-=2)for(6===s&&s--;;){for(var l=0;l<2;l++)if(!t.isReserved(n,s-l)){var c=!1;a<e.length&&(c=1==(e[a]>>>r&1)),t.set(n,s-l,c),-1===--r&&(a++,r=7)}if((n+=o)<0||i<=n){n-=o,o=-o;break}}}(w,g),isNaN(o)&&(o=d.getBestMask(w,y.bind(null,w,i))),d.applyMask(o,w),y(w,i,o),{modules:w,version:e,errorCorrectionLevel:i,maskPattern:o,segments:r}}e.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");var i,o,a=r.M;return void 0!==e&&(a=r.from(e.errorCorrectionLevel,r.M),i=u.from(e.version),o=d.from(e.maskPattern),e.toSJISFunc&&n.setToSJISFunction(e.toSJISFunc)),w(t,i,a,o)}},function(t,e){function i(){this.buffer=[],this.length=0}i.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var i=0;i<e;i++)this.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=i},function(t,e,i){var o=i(632);function n(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=o.alloc(t*t),this.reservedBit=o.alloc(t*t)}n.prototype.set=function(t,e,i,o){var n=t*this.size+e;this.data[n]=i,o&&(this.reservedBit[n]=!0)},n.prototype.get=function(t,e){return this.data[t*this.size+e]},n.prototype.xor=function(t,e,i){this.data[t*this.size+e]^=i},n.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=n},function(t,e,i){var o=i(628).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];for(var e=Math.floor(t/7)+2,i=o(t),n=145===i?26:2*Math.ceil((i-13)/(2*e-2)),r=[i-7],a=1;a<e-1;a++)r[a]=r[a-1]-n;return r.push(6),r.reverse()},e.getPositions=function(t){for(var i=[],o=e.getRowColCoords(t),n=o.length,r=0;r<n;r++)for(var a=0;a<n;a++)0===r&&0===a||0===r&&a===n-1||r===n-1&&0===a||i.push([o[r],o[a]]);return i}},function(t,e,i){var o=i(628).getSymbolSize;e.getPositions=function(t){var e=o(t);return[[0,0],[e-7,0],[0,e-7]]}},function(t,e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var i=3,o=3,n=40,r=10;function a(t,i,o){switch(t){case e.Patterns.PATTERN000:return(i+o)%2==0;case e.Patterns.PATTERN001:return i%2==0;case e.Patterns.PATTERN010:return o%3==0;case e.Patterns.PATTERN011:return(i+o)%3==0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2==0;case e.Patterns.PATTERN101:return i*o%2+i*o%3==0;case e.Patterns.PATTERN110:return(i*o%2+i*o%3)%2==0;case e.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){for(var e=t.size,o=0,n=0,r=0,a=null,s=null,l=0;l<e;l++){n=r=0,a=s=null;for(var c=0;c<e;c++){var d=t.get(l,c);d===a?n++:(n>=5&&(o+=i+(n-5)),a=d,n=1),(d=t.get(c,l))===s?r++:(r>=5&&(o+=i+(r-5)),s=d,r=1)}n>=5&&(o+=i+(n-5)),r>=5&&(o+=i+(r-5))}return o},e.getPenaltyN2=function(t){for(var e=t.size,i=0,n=0;n<e-1;n++)for(var r=0;r<e-1;r++){var a=t.get(n,r)+t.get(n,r+1)+t.get(n+1,r)+t.get(n+1,r+1);4!==a&&0!==a||i++}return i*o},e.getPenaltyN3=function(t){for(var e=t.size,i=0,o=0,r=0,a=0;a<e;a++){o=r=0;for(var s=0;s<e;s++)o=o<<1&2047|t.get(a,s),s>=10&&(1488===o||93===o)&&i++,r=r<<1&2047|t.get(s,a),s>=10&&(1488===r||93===r)&&i++}return i*n},e.getPenaltyN4=function(t){for(var e=0,i=t.data.length,o=0;o<i;o++)e+=t.data[o];return Math.abs(Math.ceil(100*e/i/5)-10)*r},e.applyMask=function(t,e){for(var i=e.size,o=0;o<i;o++)for(var n=0;n<i;n++)e.isReserved(n,o)||e.xor(n,o,a(t,n,o))},e.getBestMask=function(t,i){for(var o=Object.keys(e.Patterns).length,n=0,r=1/0,a=0;a<o;a++){i(a),e.applyMask(a,t);var s=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(a,t),s<r&&(r=s,n=a)}return n}},function(t,e,i){var o=i(632),n=i(754),r=i(475).Buffer;function a(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(t){this.degree=t,this.genPoly=n.generateECPolynomial(this.degree)},a.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");var e=o.alloc(this.degree),i=r.concat([t,e],t.length+this.degree),a=n.mod(i,this.genPoly),s=this.degree-a.length;if(s>0){var l=o.alloc(this.degree);return a.copy(l,s),l}return a},t.exports=a},function(t,e,i){var o=i(632),n=i(755);e.mul=function(t,e){for(var i=o.alloc(t.length+e.length-1),r=0;r<t.length;r++)for(var a=0;a<e.length;a++)i[r+a]^=n.mul(t[r],e[a]);return i},e.mod=function(t,e){for(var i=o.from(t);i.length-e.length>=0;){for(var r=i[0],a=0;a<e.length;a++)i[a]^=n.mul(e[a],r);for(var s=0;s<i.length&&0===i[s];)s++;i=i.slice(s)}return i},e.generateECPolynomial=function(t){for(var i=o.from([1]),r=0;r<t;r++)i=e.mul(i,[1,n.exp(r)]);return i}},function(t,e,i){var o=i(632),n=o.alloc(512),r=o.alloc(256);!function(){for(var t=1,e=0;e<255;e++)n[e]=t,r[t]=e,256&(t<<=1)&&(t^=285);for(e=255;e<512;e++)n[e]=n[e-255]}(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return r[t]},e.exp=function(t){return n[t]},e.mul=function(t,e){return 0===t||0===e?0:n[r[t]+r[e]]}},function(t,e,i){var o=i(628),n=i(661),r=i(642),a=i(629),s=i(662),l=i(641),c=o.getBCHDigit(7973);function d(t,e){return a.getCharCountIndicator(t,e)+4}function p(t,e){var i=0;return t.forEach((function(t){var o=d(t.mode,e);i+=o+t.getBitsLength()})),i}e.from=function(t,e){return s.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,i){if(!s.isValid(t))throw new Error("Invalid QR Code version");void 0===i&&(i=a.BYTE);var r=8*(o.getSymbolTotalCodewords(t)-n.getTotalCodewordsCount(t,e));if(i===a.MIXED)return r;var l=r-d(i,t);switch(i){case a.NUMERIC:return Math.floor(l/10*3);case a.ALPHANUMERIC:return Math.floor(l/11*2);case a.KANJI:return Math.floor(l/13);case a.BYTE:default:return Math.floor(l/8)}},e.getBestVersionForData=function(t,i){var o,n=r.from(i,r.M);if(l(t)){if(t.length>1)return function(t,i){for(var o=1;o<=40;o++){if(p(t,o)<=e.getCapacity(o,i,a.MIXED))return o}}(t,n);if(0===t.length)return 1;o=t[0]}else o=t;return function(t,i,o){for(var n=1;n<=40;n++)if(i<=e.getCapacity(n,o,t))return n}(o.mode,o.getLength(),n)},e.getEncodedBits=function(t){if(!s.isValid(t)||t<7)throw new Error("Invalid QR Code version");for(var e=t<<12;o.getBCHDigit(e)-c>=0;)e^=7973<<o.getBCHDigit(e)-c;return t<<12|e}},function(t,e,i){var o=i(628),n=o.getBCHDigit(1335);e.getEncodedBits=function(t,e){for(var i=t.bit<<3|e,r=i<<10;o.getBCHDigit(r)-n>=0;)r^=1335<<o.getBCHDigit(r)-n;return 21522^(i<<10|r)}},function(t,e,i){var o=i(629),n=i(759),r=i(760),a=i(761),s=i(762),l=i(663),c=i(628),d=i(763);function p(t){return unescape(encodeURIComponent(t)).length}function h(t,e,i){for(var o,n=[];null!==(o=t.exec(i));)n.push({data:o[0],index:o.index,mode:e,length:o[0].length});return n}function u(t){var e,i,n=h(l.NUMERIC,o.NUMERIC,t),r=h(l.ALPHANUMERIC,o.ALPHANUMERIC,t);return c.isKanjiModeEnabled()?(e=h(l.BYTE,o.BYTE,t),i=h(l.KANJI,o.KANJI,t)):(e=h(l.BYTE_KANJI,o.BYTE,t),i=[]),n.concat(r,e,i).sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function g(t,e){switch(e){case o.NUMERIC:return n.getBitsLength(t);case o.ALPHANUMERIC:return r.getBitsLength(t);case o.KANJI:return s.getBitsLength(t);case o.BYTE:return a.getBitsLength(t)}}function f(t,e){var i,l=o.getBestModeForData(t);if((i=o.from(e,l))!==o.BYTE&&i.bit<l.bit)throw new Error('"'+t+'" cannot be encoded with mode '+o.toString(i)+".\n Suggested mode is: "+o.toString(l));switch(i!==o.KANJI||c.isKanjiModeEnabled()||(i=o.BYTE),i){case o.NUMERIC:return new n(t);case o.ALPHANUMERIC:return new r(t);case o.KANJI:return new s(t);case o.BYTE:return new a(t)}}e.fromArray=function(t){return t.reduce((function(t,e){return"string"==typeof e?t.push(f(e,null)):e.data&&t.push(f(e.data,e.mode)),t}),[])},e.fromString=function(t,i){for(var n=function(t,e){for(var i={},n={start:{}},r=["start"],a=0;a<t.length;a++){for(var s=t[a],l=[],c=0;c<s.length;c++){var d=s[c],p=""+a+c;l.push(p),i[p]={node:d,lastCount:0},n[p]={};for(var h=0;h<r.length;h++){var u=r[h];i[u]&&i[u].node.mode===d.mode?(n[u][p]=g(i[u].lastCount+d.length,d.mode)-g(i[u].lastCount,d.mode),i[u].lastCount+=d.length):(i[u]&&(i[u].lastCount=d.length),n[u][p]=g(d.length,d.mode)+4+o.getCharCountIndicator(d.mode,e))}}r=l}for(h=0;h<r.length;h++)n[r[h]].end=0;return{map:n,table:i}}(function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];switch(n.mode){case o.NUMERIC:e.push([n,{data:n.data,mode:o.ALPHANUMERIC,length:n.length},{data:n.data,mode:o.BYTE,length:n.length}]);break;case o.ALPHANUMERIC:e.push([n,{data:n.data,mode:o.BYTE,length:n.length}]);break;case o.KANJI:e.push([n,{data:n.data,mode:o.BYTE,length:p(n.data)}]);break;case o.BYTE:e.push([{data:n.data,mode:o.BYTE,length:p(n.data)}])}}return e}(u(t,c.isKanjiModeEnabled())),i),r=d.find_path(n.map,"start","end"),a=[],s=1;s<r.length-1;s++)a.push(n.table[r[s]].node);return e.fromArray(function(t){return t.reduce((function(t,e){var i=t.length-1>=0?t[t.length-1]:null;return i&&i.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)}),[])}(a))},e.rawSplit=function(t){return e.fromArray(u(t,c.isKanjiModeEnabled()))}},function(t,e,i){var o=i(629);function n(t){this.mode=o.NUMERIC,this.data=t.toString()}n.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){var e,i,o;for(e=0;e+3<=this.data.length;e+=3)i=this.data.substr(e,3),o=parseInt(i,10),t.put(o,10);var n=this.data.length-e;n>0&&(i=this.data.substr(e),o=parseInt(i,10),t.put(o,3*n+1))},t.exports=n},function(t,e,i){var o=i(629),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(t){this.mode=o.ALPHANUMERIC,this.data=t}r.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){var e;for(e=0;e+2<=this.data.length;e+=2){var i=45*n.indexOf(this.data[e]);i+=n.indexOf(this.data[e+1]),t.put(i,11)}this.data.length%2&&t.put(n.indexOf(this.data[e]),6)},t.exports=r},function(t,e,i){var o=i(632),n=i(629);function r(t){this.mode=n.BYTE,this.data=o.from(t)}r.getBitsLength=function(t){return 8*t},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){for(var e=0,i=this.data.length;e<i;e++)t.put(this.data[e],8)},t.exports=r},function(t,e,i){var o=i(629),n=i(628);function r(t){this.mode=o.KANJI,this.data=t}r.getBitsLength=function(t){return 13*t},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var i=n.toSJIS(this.data[e]);if(i>=33088&&i<=40956)i-=33088;else{if(!(i>=57408&&i<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13)}},t.exports=r},function(t,e,i){"use strict";var o={single_source_shortest_paths:function(t,e,i){var n={},r={};r[e]=0;var a,s,l,c,d,p,h,u=o.PriorityQueue.make();for(u.push(e,0);!u.empty();)for(l in s=(a=u.pop()).value,c=a.cost,d=t[s]||{})d.hasOwnProperty(l)&&(p=c+d[l],h=r[l],(void 0===r[l]||h>p)&&(r[l]=p,u.push(l,p),n[l]=s));if(void 0!==i&&void 0===r[i]){var g=["Could not find a path from ",e," to ",i,"."].join("");throw new Error(g)}return n},extract_shortest_path_from_predecessor_list:function(t,e){for(var i=[],o=e;o;)i.push(o),t[o],o=t[o];return i.reverse(),i},find_path:function(t,e,i){var n=o.single_source_shortest_paths(t,e,i);return o.extract_shortest_path_from_predecessor_list(n,i)},PriorityQueue:{make:function(t){var e,i=o.PriorityQueue,n={};for(e in t=t||{},i)i.hasOwnProperty(e)&&(n[e]=i[e]);return n.queue=[],n.sorter=t.sorter||i.default_sorter,n},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var i={value:t,cost:e};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=o},function(t,e,i){var o=i(664);e.render=function(t,e,i){var n=i,r=e;void 0!==n||e&&e.getContext||(n=e,e=void 0),e||(r=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),n=o.getOptions(n);var a=o.getImageWidth(t.modules.size,n),s=r.getContext("2d"),l=s.createImageData(a,a);return o.qrToImageData(l.data,t,n),function(t,e,i){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=i,e.width=i,e.style.height=i+"px",e.style.width=i+"px"}(s,r,a),s.putImageData(l,0,0),r},e.renderToDataURL=function(t,i,o){var n=o;void 0!==n||i&&i.getContext||(n=i,i=void 0),n||(n={});var r=e.render(t,i,n),a=n.type||"image/png",s=n.rendererOpts||{};return r.toDataURL(a,s.quality)}},function(t,e,i){var o=i(664);function n(t,e){var i=t.a/255,o=e+'="'+t.hex+'"';return i<1?o+" "+e+'-opacity="'+i.toFixed(2).slice(1)+'"':o}function r(t,e,i){var o=t+e;return void 0!==i&&(o+=" "+i),o}e.render=function(t,e,i){var a=o.getOptions(e),s=t.modules.size,l=t.modules.data,c=s+2*a.margin,d=a.color.light.a?"<path "+n(a.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",p="<path "+n(a.color.dark,"stroke")+' d="'+function(t,e,i){for(var o="",n=0,a=!1,s=0,l=0;l<t.length;l++){var c=Math.floor(l%e),d=Math.floor(l/e);c||a||(a=!0),t[l]?(s++,l>0&&c>0&&t[l-1]||(o+=a?r("M",c+i,.5+d+i):r("m",n,0),n=0,a=!1),c+1<e&&t[l+1]||(o+=r("h",s),s=0)):n++}return o}(l,s,a.margin)+'"/>',h='viewBox="0 0 '+c+" "+c+'"',u='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+h+' shape-rendering="crispEdges">'+d+p+"</svg>\n";return"function"==typeof i&&i(null,u),u}},function(t,e,i){t.exports=i.p+"images/refresh.6bb41c0.svg"},function(t,e,i){t.exports=i.p+"images/next.42c899e.svg"},function(t,e,i){t.exports=i.p+"images/remove-account.dbff389.svg"},function(t,e,i){t.exports=i.p+"images/edit.1f58dcd.svg"},function(t,e,i){t.exports=i.p+"images/icon-download.1ceeaa3.svg"},function(t,e,i){t.exports=i.p+"images/pc.2c24744.svg"},function(t,e,i){t.exports=i.p+"images/pad.ad04b17.svg"},function(t,e,i){t.exports=i.p+"images/mobile.2e898a9.svg"},function(t,e,i){t.exports=i.p+"images/tips.c8b5b9a.svg"},function(t,e,i){t.exports=i.p+"images/avator.d181190.png"},function(t,e,i){t.exports=i.p+"images/douban_icon.a2ee6f8.png"},function(t,e,i){t.exports=i.p+"images/facebook_icon.8214bbc.png"},function(t,e,i){t.exports=i.p+"images/google_icon.e6f4a7e.png"},function(t,e,i){t.exports=i.p+"images/linked_icon.81a2e4d.png"},function(t,e,i){t.exports=i.p+"images/qq_icon.cc7a6d4.png"},function(t,e,i){t.exports=i.p+"images/all.056e60b.png"},function(t,e,i){t.exports=i.p+"images/barn-images.06fdb09.png"},function(t,e,i){t.exports=i.p+"images/bing.63f1e9a.png"},function(t,e,i){t.exports=i.p+"images/free-nature-stock.055d792.png"},function(t,e,i){t.exports=i.p+"images/infinity.a805a8d.png"},function(t,e,i){t.exports=i.p+"images/jay-mantri.c4e3fad.png"},function(t,e,i){t.exports=i.p+"images/life-of-pix.8d05ce1.png"},function(t,e,i){t.exports=i.p+"images/mmt.4fd5f2c.png"},function(t,e,i){t.exports=i.p+"images/picography.23b7fc6.png"},function(t,e,i){t.exports=i.p+"images/realistic-shots.fe0d48a.png"},function(t,e,i){t.exports=i.p+"images/skitter-photo.f0d1f9c.png"},function(t,e,i){t.exports=i.p+"images/startup-stock-photos.f18e9f1.png"},function(t,e,i){t.exports=i.p+"images/unsplash.40b97f2.png"},function(t,e,i){t.exports=i.p+"images/twitter_icon.9cd5d0f.png"},function(t,e,i){t.exports=i.p+"images/xinlang_icon.8ede9b1.png"},function(t,e,i){t.exports=i.p+"images/zone_icon.47ae7d6.png"},function(t,e,i){t.exports=i.p+"images/wallpaper_download.46fc473.png"},function(t,e,i){t.exports=function t(e,i,o){function n(a,s){if(!i[a]){if(!e[a]){if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[a]={exports:{}};e[a][0].call(c.exports,(function(t){return n(e[a][1][t]||t)}),c,c.exports,t,e,i,o)}return i[a].exports}for(var r=!1,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(t,e,i){"use strict";var o=t("inherits"),n=t("multimath"),r=t("./mm_unsharp_mask"),a=t("./mm_resize");function s(t){var e=t||[],i={js:e.indexOf("js")>=0,wasm:e.indexOf("wasm")>=0};n.call(this,i),this.features={js:i.js,wasm:i.wasm&&this.has_wasm()},this.use(r),this.use(a)}o(s,n),s.prototype.resizeAndUnsharp=function(t,e){var i=this.resize(t,e);return t.unsharpAmount&&this.unsharp_mask(i,t.toWidth,t.toHeight,t.unsharpAmount,t.unsharpRadius,t.unsharpThreshold),i},e.exports=s},{"./mm_resize":4,"./mm_unsharp_mask":9,inherits:19,multimath:20}],2:[function(t,e,i){"use strict";function o(t){return t<0?0:t>255?255:t}e.exports={convolveHorizontally:function(t,e,i,n,r,a){var s,l,c,d,p,h,u,g,f,m,b,y=0,v=0;for(f=0;f<n;f++){for(p=0,m=0;m<r;m++){for(h=a[p++],u=a[p++],g=y+4*h|0,s=l=c=d=0;u>0;u--)d=d+(b=a[p++])*t[g+3]|0,c=c+b*t[g+2]|0,l=l+b*t[g+1]|0,s=s+b*t[g]|0,g=g+4|0;e[v+3]=o(d+8192>>14),e[v+2]=o(c+8192>>14),e[v+1]=o(l+8192>>14),e[v]=o(s+8192>>14),v=v+4*n|0}v=4*(f+1)|0,y=(f+1)*i*4|0}},convolveVertically:function(t,e,i,n,r,a){var s,l,c,d,p,h,u,g,f,m,b,y=0,v=0;for(f=0;f<n;f++){for(p=0,m=0;m<r;m++){for(h=a[p++],u=a[p++],g=y+4*h|0,s=l=c=d=0;u>0;u--)d=d+(b=a[p++])*t[g+3]|0,c=c+b*t[g+2]|0,l=l+b*t[g+1]|0,s=s+b*t[g]|0,g=g+4|0;e[v+3]=o(d+8192>>14),e[v+2]=o(c+8192>>14),e[v+1]=o(l+8192>>14),e[v]=o(s+8192>>14),v=v+4*n|0}v=4*(f+1)|0,y=(f+1)*i*4|0}}}},{}],3:[function(t,e,i){"use strict";e.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAEXA2AAAGAGf39/f39/AGAHf39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMEAwABAgYGAX8AQQALB1cFEV9fd2FzbV9jYWxsX2N0b3JzAAAIY29udm9sdmUAAQpjb252b2x2ZUhWAAIMX19kc29faGFuZGxlAwAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAAK7AMDAwABC8YDAQ9/AkAgA0UNACAERQ0AA0AgDCENQQAhE0EAIQcDQCAHQQJqIQYCfyAHQQF0IAVqIgcuAQIiFEUEQEGAwAAhCEGAwAAhCUGAwAAhCkGAwAAhCyAGDAELIBIgBy4BAGohCEEAIQsgFCEHQQAhDiAGIQlBACEPQQAhEANAIAUgCUEBdGouAQAiESAAIAhBAnRqKAIAIgpBGHZsIBBqIRAgCkH/AXEgEWwgC2ohCyAKQRB2Qf8BcSARbCAPaiEPIApBCHZB/wFxIBFsIA5qIQ4gCEEBaiEIIAlBAWohCSAHQQFrIgcNAAsgC0GAQGshCCAOQYBAayEJIA9BgEBrIQogEEGAQGshCyAGIBRqCyEHIAEgDUECdGogCUEOdSIGQf8BIAZB/wFIGyIGQQAgBkEAShtBCHRBgP4DcSAKQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EQdEGAgPwHcSALQQ51IgZB/wEgBkH/AUgbIgZBACAGQQBKG0EYdHJyIAhBDnUiBkH/ASAGQf8BSBsiBkEAIAZBAEobcjYCACADIA1qIQ0gE0EBaiITIARHDQALIAxBAWoiDCACbCESIAMgDEcNAAsLCx4AQQAgAiADIAQgBSAAEAEgAkEAIAQgBSAGIAEQAQs="},{}],4:[function(t,e,i){"use strict";e.exports={name:"resize",fn:t("./resize"),wasm_fn:t("./resize_wasm"),wasm_src:t("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(t,e,i){"use strict";var o=t("./resize_filter_gen"),n=t("./convolve").convolveHorizontally,r=t("./convolve").convolveVertically;e.exports=function(t){var e=t.src,i=t.width,a=t.height,s=t.toWidth,l=t.toHeight,c=t.scaleX||t.toWidth/t.width,d=t.scaleY||t.toHeight/t.height,p=t.offsetX||0,h=t.offsetY||0,u=t.dest||new Uint8Array(s*l*4),g=void 0===t.quality?3:t.quality,f=t.alpha||!1,m=o(g,i,s,c,p),b=o(g,a,l,d,h),y=new Uint8Array(s*a*4);return n(e,y,i,a,s,m),r(y,u,a,s,l,b),f||function(t,e,i){for(var o=3,n=e*i*4|0;o<n;)t[o]=255,o=o+4|0}(u,s,l),u}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(t,e,i){"use strict";var o=t("./resize_filter_info");function n(t){return Math.round(16383*t)}e.exports=function(t,e,i,r,a){var s,l,c,d,p,h,u,g,f,m,b,y,v,w,x,_,k,O=o[t].filter,A=1/r,S=Math.min(1,r),I=o[t].win/S,j=Math.floor(2*(I+1)),$=new Int16Array((j+2)*i),C=0,E=!$.subarray||!$.set;for(s=0;s<i;s++){for(l=(s+.5)*A+a,c=Math.max(0,Math.floor(l-I)),p=(d=Math.min(e-1,Math.ceil(l+I)))-c+1,h=new Float32Array(p),u=new Int16Array(p),g=0,f=c,m=0;f<=d;f++,m++)g+=b=O((f+.5-l)*S),h[m]=b;for(y=0,m=0;m<h.length;m++)y+=v=h[m]/g,u[m]=n(v);for(u[i>>1]+=n(1-y),w=0;w<u.length&&0===u[w];)w++;if(w<u.length){for(x=u.length-1;x>0&&0===u[x];)x--;if(_=c+w,k=x-w+1,$[C++]=_,$[C++]=k,E)for(m=w;m<=x;m++)$[C++]=u[m];else $.set(u.subarray(w,x+1),C),C+=k}else $[C++]=0,$[C++]=0}return $}},{"./resize_filter_info":7}],7:[function(t,e,i){"use strict";e.exports=[{win:.5,filter:function(t){return t>=-.5&&t<.5?1:0}},{win:1,filter:function(t){if(t<=-1||t>=1)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*(.54+.46*Math.cos(e/1))}},{win:2,filter:function(t){if(t<=-2||t>=2)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/2)/(e/2)}},{win:3,filter:function(t){if(t<=-3||t>=3)return 0;if(t>-1.1920929e-7&&t<1.1920929e-7)return 1;var e=t*Math.PI;return Math.sin(e)/e*Math.sin(e/3)/(e/3)}}]},{}],8:[function(t,e,i){"use strict";var o=t("./resize_filter_gen"),n=!0;try{n=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(t){}function r(t,e,i){if(n)e.set(function(t){return new Uint8Array(t.buffer,0,t.byteLength)}(t),i);else for(var o=i,r=0;r<t.length;r++){var a=t[r];e[o++]=255&a,e[o++]=a>>8&255}}e.exports=function(t){var e=t.src,i=t.width,n=t.height,a=t.toWidth,s=t.toHeight,l=t.scaleX||t.toWidth/t.width,c=t.scaleY||t.toHeight/t.height,d=t.offsetX||0,p=t.offsetY||0,h=t.dest||new Uint8Array(a*s*4),u=void 0===t.quality?3:t.quality,g=t.alpha||!1,f=o(u,i,a,l,d),m=o(u,n,s,c,p),b=this.__align(0+Math.max(e.byteLength,h.byteLength)),y=this.__align(b+n*a*4),v=this.__align(y+f.byteLength),w=v+m.byteLength,x=this.__instance("resize",w),_=new Uint8Array(this.__memory.buffer),k=new Uint32Array(this.__memory.buffer),O=new Uint32Array(e.buffer);return k.set(O),r(f,_,y),r(m,_,v),(x.exports.convolveHV||x.exports._convolveHV)(y,v,b,i,n,a,s),new Uint32Array(h.buffer).set(new Uint32Array(this.__memory.buffer,0,s*a)),g||function(t,e,i){for(var o=3,n=e*i*4|0;o<n;)t[o]=255,o=o+4|0}(h,a,s),h}},{"./resize_filter_gen":6}],9:[function(t,e,i){"use strict";e.exports={name:"unsharp_mask",fn:t("./unsharp_mask"),wasm_fn:t("./unsharp_mask_wasm"),wasm_src:t("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":10,"./unsharp_mask_wasm":11,"./unsharp_mask_wasm_base64":12}],10:[function(t,e,i){"use strict";var o=t("glur/mono16");e.exports=function(t,e,i,n,r,a){var s,l,c,d,p;if(!(0===n||r<.5)){r>2&&(r=2);var h=function(t,e,i){for(var o,n,r,a,s=e*i,l=new Uint16Array(s),c=0;c<s;c++)o=t[4*c],n=t[4*c+1],r=t[4*c+2],a=o>=n&&o>=r?o:n>=r&&n>=o?n:r,l[c]=a<<8;return l}(t,e,i),u=new Uint16Array(h);o(u,e,i,r);for(var g=n/100*4096+.5|0,f=a<<8,m=e*i,b=0;b<m;b++)d=(s=h[b])-u[b],Math.abs(d)>=f&&(c=((l=(l=(l=s+(g*d+2048>>12))>65280?65280:l)<0?0:l)<<12)/(s=0!==s?s:1)|0,t[p=4*b]=t[p]*c+2048>>12,t[p+1]=t[p+1]*c+2048>>12,t[p+2]=t[p+2]*c+2048>>12)}}},{"glur/mono16":18}],11:[function(t,e,i){"use strict";e.exports=function(t,e,i,o,n,r){if(!(0===o||n<.5)){n>2&&(n=2);var a=e*i,s=4*a,l=2*a,c=2*a,d=4*Math.max(e,i),p=s,h=p+l,u=h+c,g=u+c,f=g+d,m=this.__instance("unsharp_mask",s+l+2*c+d+32,{exp:Math.exp}),b=new Uint32Array(t.buffer);new Uint32Array(this.__memory.buffer).set(b);var y=m.exports.hsv_v16||m.exports._hsv_v16;y(0,p,e,i),(y=m.exports.blurMono16||m.exports._blurMono16)(p,h,u,g,f,e,i,n),(y=m.exports.unsharp||m.exports._unsharp)(0,0,p,h,e,i,o,r),b.set(new Uint32Array(this.__memory.buffer,0,a))}}},{}],12:[function(t,e,i){"use strict";e.exports="AGFzbQEAAAAADAZkeWxpbmsAAAAAAAE0B2AAAGAEf39/fwBgBn9/f39/fwBgCH9/f39/f39/AGAIf39/f39/f30AYAJ9fwBgAXwBfAIZAgNlbnYDZXhwAAYDZW52Bm1lbW9yeQIAAAMHBgAFAgQBAwYGAX8AQQALB4oBCBFfX3dhc21fY2FsbF9jdG9ycwABFl9fYnVpbGRfZ2F1c3NpYW5fY29lZnMAAg5fX2dhdXNzMTZfbGluZQADCmJsdXJNb25vMTYABAdoc3ZfdjE2AAUHdW5zaGFycAAGDF9fZHNvX2hhbmRsZQMAGF9fd2FzbV9hcHBseV9kYXRhX3JlbG9jcwABCsUMBgMAAQvWAQEHfCABRNuGukOCGvs/IAC7oyICRAAAAAAAAADAohAAIgW2jDgCFCABIAKaEAAiAyADoCIGtjgCECABRAAAAAAAAPA/IAOhIgQgBKIgAyACIAKgokQAAAAAAADwP6AgBaGjIgS2OAIAIAEgBSAEmqIiB7Y4AgwgASADIAJEAAAAAAAA8D+gIASioiIItjgCCCABIAMgAkQAAAAAAADwv6AgBKKiIgK2OAIEIAEgByAIoCAFRAAAAAAAAPA/IAahoCIDo7Y4AhwgASAEIAKgIAOjtjgCGAuGBQMGfwl8An0gAyoCDCEVIAMqAgghFiADKgIUuyERIAMqAhC7IRACQCAEQQFrIghBAEgiCQRAIAIhByAAIQYMAQsgAiAALwEAuCIPIAMqAhi7oiIMIBGiIg0gDCAQoiAPIAMqAgS7IhOiIhQgAyoCALsiEiAPoqCgoCIOtjgCACACQQRqIQcgAEECaiEGIAhFDQAgCEEBIAhBAUgbIgpBf3MhCwJ/IAQgCmtBAXFFBEAgDiENIAgMAQsgAiANIA4gEKIgFCASIAAvAQK4Ig+ioKCgIg22OAIEIAJBCGohByAAQQRqIQYgDiEMIARBAmsLIQIgC0EAIARrRg0AA0AgByAMIBGiIA0gEKIgDyAToiASIAYvAQC4Ig6ioKCgIgy2OAIAIAcgDSARoiAMIBCiIA4gE6IgEiAGLwECuCIPoqCgoCINtjgCBCAHQQhqIQcgBkEEaiEGIAJBAkohACACQQJrIQIgAA0ACwsCQCAJDQAgASAFIAhsQQF0aiIAAn8gBkECay8BACICuCINIBW7IhKiIA0gFrsiE6KgIA0gAyoCHLuiIgwgEKKgIAwgEaKgIg8gB0EEayIHKgIAu6AiDkQAAAAAAADwQWMgDkQAAAAAAAAAAGZxBEAgDqsMAQtBAAs7AQAgCEUNACAGQQRrIQZBACAFa0EBdCEBA0ACfyANIBKiIAJB//8DcbgiDSAToqAgDyIOIBCioCAMIBGioCIPIAdBBGsiByoCALugIgxEAAAAAAAA8EFjIAxEAAAAAAAAAABmcQRAIAyrDAELQQALIQMgBi8BACECIAAgAWoiACADOwEAIAZBAmshBiAIQQFKIQMgDiEMIAhBAWshCCADDQALCwvRAgIBfwd8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIglEAAAAAAAAAMCiEAAiDLaMOAIUIAQgCZoQACIKIAqgIg22OAIQIAREAAAAAAAA8D8gCqEiCyALoiAKIAkgCaCiRAAAAAAAAPA/oCAMoaMiC7Y4AgAgBCAMIAuaoiIOtjgCDCAEIAogCUQAAAAAAADwP6AgC6KiIg+2OAIIIAQgCiAJRAAAAAAAAPC/oCALoqIiCbY4AgQgBCAOIA+gIAxEAAAAAAAA8D8gDaGgIgqjtjgCHCAEIAsgCaAgCqO2OAIYIAYEQANAIAAgBSAIbEEBdGogAiAIQQF0aiADIAQgBSAGEAMgCEEBaiIIIAZHDQALCyAFRQ0AQQAhCANAIAIgBiAIbEEBdGogASAIQQF0aiADIAQgBiAFEAMgCEEBaiIIIAVHDQALCwtxAQN/IAIgA2wiBQRAA0AgASAAKAIAIgRBEHZB/wFxIgIgAiAEQQh2Qf8BcSIDIAMgBEH/AXEiBEkbIAIgA0sbIgYgBiAEIAIgBEsbIAMgBEsbQQh0OwEAIAFBAmohASAAQQRqIQAgBUEBayIFDQALCwuZAgIDfwF8IAQgBWwhBAJ/IAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6AiC5lEAAAAAAAA4EFjBEAgC6oMAQtBgICAgHgLIQUgBARAIAdBCHQhCUEAIQYDQCAJIAIgBkEBdCIHai8BACIBIAMgB2ovAQBrIgcgB0EfdSIIaiAIc00EQCAAIAZBAnQiCGoiCiAFIAdsQYAQakEMdSABaiIHQYD+AyAHQYD+A0gbIgdBACAHQQBKG0EMdCABQQEgARtuIgEgCi0AAGxBgBBqQQx2OgAAIAAgCEEBcmoiByABIActAABsQYAQakEMdjoAACAAIAhBAnJqIgcgASAHLQAAbEGAEGpBDHY6AAALIAZBAWoiBiAERw0ACwsL"},{}],13:[function(t,e,i){"use strict";function o(t,e){this.create=t,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=e||2e3}o.prototype.acquire=function(){var t,e=this;return 0!==this.available.length?t=this.available.pop():((t=this.create()).id=this.lastId++,t.release=function(){return e.release(t)}),this.acquired[t.id]=t,t},o.prototype.release=function(t){var e=this;delete this.acquired[t.id],t.lastUsed=Date.now(),this.available.push(t),0===this.timeoutId&&(this.timeoutId=setTimeout((function(){return e.gc()}),100))},o.prototype.gc=function(){var t=this,e=Date.now();this.available=this.available.filter((function(i){return!(e-i.lastUsed>t.idle&&(i.destroy(),1))})),0!==this.available.length?this.timeoutId=setTimeout((function(){return t.gc()}),100):this.timeoutId=0},e.exports=o},{}],14:[function(t,e,i){"use strict";e.exports=function(t,e,i,o,n,r){var a=i/t,s=o/e,l=(2*r+2+1)/n;if(l>.5)return[[i,o]];var c=Math.ceil(Math.log(Math.min(a,s))/Math.log(l));if(c<=1)return[[i,o]];for(var d=[],p=0;p<c;p++){var h=Math.round(Math.pow(Math.pow(t,c-p-1)*Math.pow(i,p+1),1/c)),u=Math.round(Math.pow(Math.pow(e,c-p-1)*Math.pow(o,p+1),1/c));d.push([h,u])}return d}},{}],15:[function(t,e,i){"use strict";function o(t){var e=Math.round(t);return Math.abs(t-e)<1e-5?e:Math.floor(t)}function n(t){var e=Math.round(t);return Math.abs(t-e)<1e-5?e:Math.ceil(t)}e.exports=function(t){var e,i,r,a,s,l,c=t.toWidth/t.width,d=t.toHeight/t.height,p=o(t.srcTileSize*c)-2*t.destTileBorder,h=o(t.srcTileSize*d)-2*t.destTileBorder;if(p<1||h<1)throw new Error("Internal error in pica: target tile width/height is too small.");var u,g=[];for(a=0;a<t.toHeight;a+=h)for(r=0;r<t.toWidth;r+=p)(e=r-t.destTileBorder)<0&&(e=0),e+(s=r+p+t.destTileBorder-e)>=t.toWidth&&(s=t.toWidth-e),(i=a-t.destTileBorder)<0&&(i=0),i+(l=a+h+t.destTileBorder-i)>=t.toHeight&&(l=t.toHeight-i),u={toX:e,toY:i,toWidth:s,toHeight:l,toInnerX:r,toInnerY:a,toInnerWidth:p,toInnerHeight:h,offsetX:e/c-o(e/c),offsetY:i/d-o(i/d),scaleX:c,scaleY:d,x:o(e/c),y:o(i/d),width:n(s/c),height:n(l/d)},g.push(u);return g}},{}],16:[function(t,e,i){"use strict";function o(t){return Object.prototype.toString.call(t)}e.exports.isCanvas=function(t){var e=o(t);return"[object HTMLCanvasElement]"===e||"[object OffscreenCanvas]"===e||"[object Canvas]"===e},e.exports.isImage=function(t){return"[object HTMLImageElement]"===o(t)},e.exports.isImageBitmap=function(t){return"[object ImageBitmap]"===o(t)},e.exports.limiter=function(t){var e=0,i=[];function o(){e<t&&i.length&&(e++,i.shift()())}return function(t){return new Promise((function(n,r){i.push((function(){t().then((function(t){n(t),e--,o()}),(function(t){r(t),e--,o()}))})),o()}))}},e.exports.cib_quality_name=function(t){switch(t){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},e.exports.cib_support=function(t){return Promise.resolve().then((function(){if("undefined"==typeof createImageBitmap)return!1;var e=t(100,100);return createImageBitmap(e,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then((function(t){var i=10===t.width;return t.close(),e=null,i}))})).catch((function(){return!1}))},e.exports.worker_offscreen_canvas_support=function(){return new Promise((function(t,e){if("undefined"!=typeof OffscreenCanvas){var i=btoa("(".concat(function(t){"undefined"!=typeof createImageBitmap?Promise.resolve().then((function(){var t=new OffscreenCanvas(10,10);return t.getContext("2d").rect(0,0,1,1),createImageBitmap(t,0,0,1,1)})).then((function(){return t.postMessage(!0)}),(function(){return t.postMessage(!1)})):t.postMessage(!1)}.toString(),")(self);")),o=new Worker("data:text/javascript;base64,".concat(i));o.onmessage=function(e){return t(e.data)},o.onerror=e}else t(!1)})).then((function(t){return t}),(function(){return!1}))},e.exports.can_use_canvas=function(t){var e=!1;try{var i=t(2,1).getContext("2d"),o=i.createImageData(2,1);o.data[0]=12,o.data[1]=23,o.data[2]=34,o.data[3]=255,o.data[4]=45,o.data[5]=56,o.data[6]=67,o.data[7]=255,i.putImageData(o,0,0),o=null,12===(o=i.getImageData(0,0,2,1)).data[0]&&23===o.data[1]&&34===o.data[2]&&255===o.data[3]&&45===o.data[4]&&56===o.data[5]&&67===o.data[6]&&255===o.data[7]&&(e=!0)}catch(t){}return e},e.exports.cib_can_use_region=function(){return new Promise((function(t){if("undefined"!=typeof createImageBitmap){var e=new Image;e.src="data:image/jpeg;base64,/9j/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAABIAAAAAQAAAEgAAAAB/9sAQwAEAwMEAwMEBAMEBQQEBQYKBwYGBgYNCQoICg8NEBAPDQ8OERMYFBESFxIODxUcFRcZGRsbGxAUHR8dGh8YGhsa/9sAQwEEBQUGBQYMBwcMGhEPERoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoa/8IAEQgAAQACAwERAAIRAQMRAf/EABQAAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAF/P//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z",e.onload=function(){createImageBitmap(e,0,0,e.width,e.height).then((function(i){i.width===e.width&&i.height===e.height?t(!0):t(!1)}),(function(){return t(!1)}))},e.onerror=function(){return t(!1)}}else t(!1)}))}},{}],17:[function(t,e,i){"use strict";e.exports=function(){var e,i=t("./mathlib");onmessage=function(t){var o=t.data.opts,n=!1;if(!o.src&&o.srcBitmap){var r=new OffscreenCanvas(o.width,o.height),a=r.getContext("2d",{alpha:Boolean(o.alpha)});a.drawImage(o.srcBitmap,0,0),o.src=a.getImageData(0,0,o.width,o.height).data,r.width=r.height=0,r=null,o.srcBitmap.close(),o.srcBitmap=null,n=!0}e||(e=new i(t.data.features));var s=e.resizeAndUnsharp(o);if(n){var l=new ImageData(new Uint8ClampedArray(s),o.toWidth,o.toHeight),c=new OffscreenCanvas(o.toWidth,o.toHeight);c.getContext("2d",{alpha:Boolean(o.alpha)}).putImageData(l,0,0),createImageBitmap(c).then((function(t){postMessage({bitmap:t},[t])}))}else postMessage({data:s},[s.buffer])}}},{"./mathlib":1}],18:[function(t,e,i){var o,n,r,a,s,l;function c(t,e,i,o,n,r){var a,s,l,c,d,p,h,u,g,f,m,b,y,v;for(g=0;g<r;g++){for(h=g,u=0,c=d=(a=t[p=g*n])*o[6],m=o[0],b=o[1],y=o[4],v=o[5],f=0;f<n;f++)l=(s=t[p])*m+a*b+c*y+d*v,d=c,c=l,a=s,i[u]=c,u++,p++;for(u--,h+=r*(n-1),c=d=(a=t[--p])*o[7],s=a,m=o[2],b=o[3],f=n-1;f>=0;f--)l=s*m+a*b+c*y+d*v,d=c,c=l,a=s,s=t[p],e[h]=i[u]+c,p--,u--,h-=r}}e.exports=function(t,e,i,d){if(d){var p=new Uint16Array(t.length),h=new Float32Array(Math.max(e,i)),u=function(t){t<.5&&(t=.5);var e=Math.exp(.527076)/t,i=Math.exp(-e),c=Math.exp(-2*e),d=(1-i)*(1-i)/(1+2*e*i-c);return o=d,n=d*(e-1)*i,r=d*(e+1)*i,a=-d*c,s=2*i,l=-c,new Float32Array([o,n,r,a,s,l,(o+n)/(1-s-l),(r+a)/(1-s-l)])}(d);c(t,p,h,u,e,i),c(p,t,h,u,i,e)}}},{}],19:[function(t,e,i){"function"==typeof Object.create?e.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},{}],20:[function(t,e,i){"use strict";var o=t("object-assign"),n=t("./lib/base64decode"),r=t("./lib/wa_detect"),a={js:!0,wasm:!0};function s(t){if(!(this instanceof s))return new s(t);var e=o({},a,t||{});if(this.options=e,this.__cache={},this.__init_promise=null,this.__modules=e.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}s.prototype.has_wasm=r,s.prototype.use=function(t){return this.__modules[t.name]=t,this.options.wasm&&this.has_wasm()&&t.wasm_fn?this[t.name]=t.wasm_fn:this[t.name]=t.fn,this},s.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var t=this;return this.__init_promise=Promise.all(Object.keys(t.__modules).map((function(e){var i=t.__modules[e];return t.options.wasm&&t.has_wasm()&&i.wasm_fn?t.__wasm[e]?null:WebAssembly.compile(t.__base64decode(i.wasm_src)).then((function(i){t.__wasm[e]=i})):null}))).then((function(){return t})),this.__init_promise},s.prototype.__base64decode=n,s.prototype.__reallocate=function(t){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(t/65536)}),this.__memory;var e=this.__memory.buffer.byteLength;return e<t&&this.__memory.grow(Math.ceil((t-e)/65536)),this.__memory},s.prototype.__instance=function(t,e,i){if(e&&this.__reallocate(e),!this.__wasm[t]){var n=this.__modules[t];this.__wasm[t]=new WebAssembly.Module(this.__base64decode(n.wasm_src))}if(!this.__cache[t]){var r={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[t]=new WebAssembly.Instance(this.__wasm[t],{env:o(r,i||{})})}return this.__cache[t]},s.prototype.__align=function(t,e){var i=t%(e=e||8);return t+(i?e-i:0)},e.exports=s},{"./lib/base64decode":21,"./lib/wa_detect":22,"object-assign":23}],21:[function(t,e,i){"use strict";e.exports=function(t){for(var e=t.replace(/[\r\n=]/g,""),i=e.length,o=new Uint8Array(3*i>>2),n=0,r=0,a=0;a<i;a++)a%4==0&&a&&(o[r++]=n>>16&255,o[r++]=n>>8&255,o[r++]=255&n),n=n<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(a));var s=i%4*6;return 0===s?(o[r++]=n>>16&255,o[r++]=n>>8&255,o[r++]=255&n):18===s?(o[r++]=n>>10&255,o[r++]=n>>2&255):12===s&&(o[r++]=n>>4&255),o}},{}],22:[function(t,e,i){"use strict";var o;e.exports=function(){if(void 0!==o)return o;if(o=!1,"undefined"==typeof WebAssembly)return o;try{var t=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),e=new WebAssembly.Module(t);return 0!==new WebAssembly.Instance(e,{}).exports.test(4)&&(o=!0),o}catch(t){}return o}},{}],23:[function(t,e,i){
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
"use strict";var o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(t){o[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,s,l=a(t),c=1;c<arguments.length;c++){for(var d in i=Object(arguments[c]))n.call(i,d)&&(l[d]=i[d]);if(o){s=o(i);for(var p=0;p<s.length;p++)r.call(i,s[p])&&(l[s[p]]=i[s[p]])}}return l}},{}],24:[function(t,e,i){var o=arguments[3],n=arguments[4],r=arguments[5],a=JSON.stringify;e.exports=function(t,e){for(var i,s=Object.keys(r),l=0,c=s.length;l<c;l++){var d=s[l],p=r[d].exports;if(p===t||p&&p.default===t){i=d;break}}if(!i){i=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var h={};for(l=0,c=s.length;l<c;l++)h[d=s[l]]=d;n[i]=["function(require,module,exports){"+t+"(self); }",h]}var u=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[i]=i,n[u]=["function(require,module,exports){var f = require("+a(i)+");(f.default ? f.default : f)(self);}",g];var f={};!function t(e){for(var i in f[e]=!0,n[e][1]){var o=n[e][1][i];f[o]||t(o)}}(u);var m="("+o+")({"+Object.keys(f).map((function(t){return a(t)+":["+n[t][0]+","+a(n[t][1])+"]"})).join(",")+"},{},["+a(u)+"])",b=window.URL||window.webkitURL||window.mozURL||window.msURL,y=new Blob([m],{type:"text/javascript"});if(e&&e.bare)return y;var v=b.createObjectURL(y),w=new Worker(v);return w.objectURL=v,w}},{}],"/index.js":[function(t,e,i){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var o,n,r=[],a=!0,s=!1;try{for(i=i.call(t);!(a=(o=i.next()).done)&&(r.push(o.value),!e||r.length!==e);a=!0);}catch(t){s=!0,n=t}finally{try{a||null==i.return||i.return()}finally{if(s)throw n}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var r=t("object-assign"),a=t("webworkify"),s=t("./lib/mathlib"),l=t("./lib/pool"),c=t("./lib/utils"),d=t("./lib/worker"),p=t("./lib/stepper"),h=t("./lib/tiler"),u={},g=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(g=navigator.userAgent.indexOf("Safari")>=0)}catch(t){}var f=1;"undefined"!=typeof navigator&&(f=Math.min(navigator.hardwareConcurrency||1,4));var m={tile:1024,concurrency:f,features:["js","wasm","ww"],idle:2e3,createCanvas:function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i}},b={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0},y=!1,v=!1,w=!1,x=!1,_=!1;function k(){return{value:a(d),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var t=window.URL||window.webkitURL||window.mozURL||window.msURL;t&&t.revokeObjectURL&&this.value.objectURL&&t.revokeObjectURL(this.value.objectURL)}}}}function O(t){if(!(this instanceof O))return new O(t);this.options=r({},m,t||{});var e="lk_".concat(this.options.concurrency);this.__limit=u[e]||c.limiter(this.options.concurrency),u[e]||(u[e]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}O.prototype.init=function(){var e=this;if(this.__initPromise)return this.__initPromise;if("undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray)try{new ImageData(new Uint8ClampedArray(400),10,10),y=!0}catch(t){}"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?v=!0:this.debug("ImageBitmap does not support .close(), disabled"));var i=this.options.features.slice();if(i.indexOf("all")>=0&&(i=["cib","wasm","js","ww"]),this.__requested_features=i,this.__mathlib=new s(i),i.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{t("webworkify")((function(){})).terminate(),this.features.ww=!0;var o="wp_".concat(JSON.stringify(this.options));u[o]?this.__workersPool=u[o]:(this.__workersPool=new l(k,this.options.idle),u[o]=this.__workersPool)}catch(t){}var n,a,d=this.__mathlib.init().then((function(t){r(e.features,t.features)}));n=v?c.cib_support(this.options.createCanvas).then((function(t){e.features.cib&&i.indexOf("cib")<0?e.debug("createImageBitmap() resize supported, but disabled by config"):i.indexOf("cib")>=0&&(e.features.cib=t)})):Promise.resolve(!1),w=c.can_use_canvas(this.options.createCanvas),a=(a=v&&y&&-1!==i.indexOf("ww")?c.worker_offscreen_canvas_support():Promise.resolve(!1)).then((function(t){x=t}));var p=c.cib_can_use_region().then((function(t){_=t}));return this.__initPromise=Promise.all([d,n,a,p]).then((function(){return e})),this.__initPromise},O.prototype.__invokeResize=function(t,e){var i=this;return e.__mathCache=e.__mathCache||{},Promise.resolve().then((function(){return i.features.ww?new Promise((function(o,n){var r=i.__workersPool.acquire();e.cancelToken&&e.cancelToken.catch((function(t){return n(t)})),r.value.onmessage=function(t){r.release(),t.data.err?n(t.data.err):o(t.data)};var a=[];t.src&&a.push(t.src.buffer),t.srcBitmap&&a.push(t.srcBitmap),r.value.postMessage({opts:t,features:i.__requested_features,preload:{wasm_nodule:i.__mathlib.__}},a)})):{data:i.__mathlib.resizeAndUnsharp(t,e.__mathCache)}}))},O.prototype.__extractTileData=function(t,e,i,o,n){if(this.features.ww&&x&&(c.isCanvas(e)||_))return this.debug("Create tile for OffscreenCanvas"),createImageBitmap(o.srcImageBitmap||e,t.x,t.y,t.width,t.height).then((function(t){return n.srcBitmap=t,n}));if(c.isCanvas(e))return o.srcCtx||(o.srcCtx=e.getContext("2d",{alpha:Boolean(i.alpha)})),this.debug("Get tile pixel data"),n.src=o.srcCtx.getImageData(t.x,t.y,t.width,t.height).data,n;this.debug("Draw tile imageBitmap/image to temporary canvas");var r=this.options.createCanvas(t.width,t.height),a=r.getContext("2d",{alpha:Boolean(i.alpha)});return a.globalCompositeOperation="copy",a.drawImage(o.srcImageBitmap||e,t.x,t.y,t.width,t.height,0,0,t.width,t.height),this.debug("Get tile pixel data"),n.src=a.getImageData(0,0,t.width,t.height).data,r.width=r.height=0,n},O.prototype.__landTileData=function(t,e,i){var o;if(this.debug("Convert raw rgba tile result to ImageData"),e.bitmap)return i.toCtx.drawImage(e.bitmap,t.toX,t.toY),null;if(y)o=new ImageData(new Uint8ClampedArray(e.data),t.toWidth,t.toHeight);else if((o=i.toCtx.createImageData(t.toWidth,t.toHeight)).data.set)o.data.set(e.data);else for(var n=o.data.length-1;n>=0;n--)o.data[n]=e.data[n];return this.debug("Draw tile"),g?i.toCtx.putImageData(o,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth+1e-5,t.toInnerHeight+1e-5):i.toCtx.putImageData(o,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),null},O.prototype.__tileAndResize=function(t,e,i){var o=this,n={srcCtx:null,srcImageBitmap:null,isImageBitmapReused:!1,toCtx:null};return Promise.resolve().then((function(){if(n.toCtx=e.getContext("2d",{alpha:Boolean(i.alpha)}),c.isCanvas(t))return null;if(c.isImageBitmap(t))return n.srcImageBitmap=t,n.isImageBitmapReused=!0,null;if(c.isImage(t))return v?(o.debug("Decode image via createImageBitmap"),createImageBitmap(t).then((function(t){n.srcImageBitmap=t})).catch((function(t){return null}))):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')})).then((function(){if(i.canceled)return i.cancelToken;o.debug("Calculate tiles");var r=h({width:i.width,height:i.height,srcTileSize:o.options.tile,toWidth:i.toWidth,toHeight:i.toHeight,destTileBorder:i.__destTileBorder}).map((function(e){return function(e){return o.__limit((function(){if(i.canceled)return i.cancelToken;var r={width:e.width,height:e.height,toWidth:e.toWidth,toHeight:e.toHeight,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:e.offsetX,offsetY:e.offsetY,quality:i.quality,alpha:i.alpha,unsharpAmount:i.unsharpAmount,unsharpRadius:i.unsharpRadius,unsharpThreshold:i.unsharpThreshold};return o.debug("Invoke resize math"),Promise.resolve(r).then((function(r){return o.__extractTileData(e,t,i,n,r)})).then((function(t){return o.debug("Invoke resize math"),o.__invokeResize(t,i)})).then((function(t){return i.canceled?i.cancelToken:(n.srcImageData=null,o.__landTileData(e,t,n))}))}))}(e)}));function a(t){t.srcImageBitmap&&(t.isImageBitmapReused||t.srcImageBitmap.close(),t.srcImageBitmap=null)}return o.debug("Process tiles"),Promise.all(r).then((function(){return o.debug("Finished!"),a(n),e}),(function(t){throw a(n),t}))}))},O.prototype.__processStages=function(t,e,i,n){var a=this;if(n.canceled)return n.cancelToken;var s,l=o(t.shift(),2),c=l[0],d=l[1],p=0===t.length;return n=r({},n,{toWidth:c,toHeight:d,quality:p?n.quality:Math.min(1,n.quality)}),p||(s=this.options.createCanvas(c,d)),this.__tileAndResize(e,p?i:s,n).then((function(){return p?i:(n.width=c,n.height=d,a.__processStages(t,s,i,n))})).then((function(t){return s&&(s.width=s.height=0),t}))},O.prototype.__resizeViaCreateImageBitmap=function(t,e,i){var o=this,n=e.getContext("2d",{alpha:Boolean(i.alpha)});return this.debug("Resize via createImageBitmap()"),createImageBitmap(t,{resizeWidth:i.toWidth,resizeHeight:i.toHeight,resizeQuality:c.cib_quality_name(i.quality)}).then((function(t){if(i.canceled)return i.cancelToken;if(!i.unsharpAmount)return n.drawImage(t,0,0),t.close(),n=null,o.debug("Finished!"),e;o.debug("Unsharp result");var r=o.options.createCanvas(i.toWidth,i.toHeight),a=r.getContext("2d",{alpha:Boolean(i.alpha)});a.drawImage(t,0,0),t.close();var s=a.getImageData(0,0,i.toWidth,i.toHeight);return o.__mathlib.unsharp_mask(s.data,i.toWidth,i.toHeight,i.unsharpAmount,i.unsharpRadius,i.unsharpThreshold),n.putImageData(s,0,0),r.width=r.height=0,s=a=r=n=null,o.debug("Finished!"),e}))},O.prototype.resize=function(t,e,i){var o=this;this.debug("Start resize...");var n=r({},b);return isNaN(i)?i&&(n=r(n,i)):n=r(n,{quality:i}),n.toWidth=e.width,n.toHeight=e.height,n.width=t.naturalWidth||t.width,n.height=t.naturalHeight||t.height,0===e.width||0===e.height?Promise.reject(new Error("Invalid output size: ".concat(e.width,"x").concat(e.height))):(n.unsharpRadius>2&&(n.unsharpRadius=2),n.canceled=!1,n.cancelToken&&(n.cancelToken=n.cancelToken.then((function(t){throw n.canceled=!0,t}),(function(t){throw n.canceled=!0,t}))),n.__destTileBorder=Math.ceil(Math.max(3,2.5*n.unsharpRadius|0)),this.init().then((function(){if(n.canceled)return n.cancelToken;if(o.features.cib)return o.__resizeViaCreateImageBitmap(t,e,n);if(!w){var i=new Error("Pica: cannot use getImageData on canvas, make sure fingerprinting protection isn't enabled");throw i.code="ERR_GET_IMAGE_DATA",i}var r=p(n.width,n.height,n.toWidth,n.toHeight,o.options.tile,n.__destTileBorder);return o.__processStages(r,t,e,n)})))},O.prototype.resizeBuffer=function(t){var e=this,i=r({},b,t);return this.init().then((function(){return e.__mathlib.resizeAndUnsharp(i)}))},O.prototype.toBlob=function(t,e,i){return e=e||"image/png",new Promise((function(o){if(t.toBlob)t.toBlob((function(t){return o(t)}),e,i);else if(t.convertToBlob)o(t.convertToBlob({type:e,quality:i}));else{for(var n=atob(t.toDataURL(e,i).split(",")[1]),r=n.length,a=new Uint8Array(r),s=0;s<r;s++)a[s]=n.charCodeAt(s);o(new Blob([a],{type:e}))}}))},O.prototype.debug=function(){},e.exports=O},{"./lib/mathlib":1,"./lib/pool":13,"./lib/stepper":14,"./lib/tiler":15,"./lib/utils":16,"./lib/worker":17,"object-assign":23,webworkify:24}]},{},[])("/index.js")},function(t,e,i){t.exports=i.p+"images/empty.6075087.png"},function(t,e,i){t.exports=i.p+"images/libraryMask.124c230.jpg"},function(t,e,i){var o={"./chrome.png":802,"./close.png":667,"./edge.png":803,"./extfans.png":804,"./firefox.png":805,"./home.png":806,"./recommand.png":668};function n(t){var e=r(t);return i(e)}function r(t){if(!i.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}n.keys=function(){return Object.keys(o)},n.resolve=r,t.exports=n,n.id=801},function(t,e,i){t.exports=i.p+"images/chrome.b915791.png"},function(t,e,i){t.exports=i.p+"images/edge.ef8e0f9.png"},function(t,e,i){t.exports=i.p+"images/extfans.d471fcf.png"},function(t,e,i){t.exports=i.p+"images/firefox.6bc945d.png"},function(t,e,i){t.exports=i.p+"images/home.483cb16.png"},function(t,e,i){var o={"./1.png":808,"./2.png":809,"./3.png":810,"./4.png":811,"./5.png":812,"./6.png":813,"./arrow.png":670,"./close.png":669};function n(t){var e=r(t);return i(e)}function r(t){if(!i.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}n.keys=function(){return Object.keys(o)},n.resolve=r,t.exports=n,n.id=807},function(t,e,i){t.exports=i.p+"images/1.c6a8a92.png"},function(t,e,i){t.exports=i.p+"images/2.f260bed.png"},function(t,e,i){t.exports=i.p+"images/3.ca68e72.png"},function(t,e,i){t.exports=i.p+"images/4.e5f22bb.png"},function(t,e,i){t.exports=i.p+"images/5.9ede8df.png"},function(t,e,i){t.exports=i.p+"images/6.670ed54.png"},,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e),i.d(e,"level1",(function(){return Hc})),i.d(e,"level2",(function(){return Wc}));i(41),i(8),i(11),i(14);var o=i(6),n=i.n(o),r=i(1),a=i(197),s=i(621),l=(i(639),i(0)),c=i(17),d=r.b`:host {
  --topbar-bookmark-height: calc(30px + 6px);
  display: block;
  width: 100vw;
  height: var(--topbar-bookmark-height);
  background-color: #fff;
  border-bottom: 1px solid #e2e2e2;
  box-sizing: border-box;
  padding: 4px 8px;
  position: relative;
}
.bookmarks {
  width: 100%;
  height: 100%;
}
.bookmarks .bookmarks-topbar {
  width: inherit;
  height: inherit;
  display: flex;
  align-items: center;
  flex-flow: row nowrap;
}
.bookmarks .bookmarks-topbar .bookmark-dropdown-entry {
  display: block;
  width: 0;
  height: 100%;
  border-radius: 12px;
  background-repeat: no-repeat;
  background-size: 12px;
  background-position: center;
  margin-right: 3px;
  box-sizing: border-box;
}
.bookmarks .bookmarks-topbar .bookmark-split-line {
  display: block;
  width: 1px;
  height: 50%;
  background-color: #ccc;
  margin: 0 6px;
}
.bookmarks .bookmarks-topbar bookmark-item,
.bookmarks .bookmarks-topbar .bookmark-item {
  border-radius: calc(var(--topbar-bookmark-height) / 2);
  position: relative;
}
.bookmarks .bookmarks-topbar bookmark-item.active::before,
.bookmarks .bookmarks-topbar .bookmark-item.active::before {
  opacity: 0.05;
}
.bookmarks .bookmarks-topbar bookmark-item::before,
.bookmarks .bookmarks-topbar .bookmark-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  background-color: #000;
  border-radius: inherit;
  transition: opacity 400ms;
}
.bookmarks .bookmarks-topbar bookmark-item:hover::before,
.bookmarks .bookmarks-topbar .bookmark-item:hover::before {
  transition: opacity 200ms;
  opacity: 0.1;
}
.bookmarks .bookmarks-topbar .bookmark-items {
  flex: 1;
  width: 0;
  height: 100%;
  margin: 0;
  padding: 0;
  display: inline-flex;
  flex-flow: row wrap;
  overflow: hidden;
}
.bookmarks .bookmarks-topbar .bookmark-items > bookmark-item {
  margin-left: 3px;
}
.bookmarks .bookmarks-topbar .bookmark-items > bookmark-item:first-child {
  margin-left: 0;
}
.bookmarks .bookmarks-topbar .other-bookmark {
  display: inline-flex;
  width: auto;
  height: 100%;
  align-items: center;
}
.bookmarks .bookmarks-popup-mask {
  position: fixed;
  top: -var(--topbar-bookmark-height);
  left: 0;
  width: 100%;
  height: calc(100% - var(--topbar-bookmark-height));
  z-index: 99999;
}
`,p=r.b`:host(bookmark-item) {
  display: block;
  width: auto;
  height: 26px;
}
:host(.first) .bookmark-item {
  margin-top: 0 !important;
}
.bookmark-item {
  height: 100%;
  width: inherit;
  max-width: inherit;
  box-sizing: border-box;
  padding: 2px 10px;
  position: relative;
  border-radius: calc(var(--topbar-bookmark-height) / 2);
  flex-flow: row nowrap;
  align-items: center;
  list-style: none;
}
.bookmark-item .bookmark-icon {
  width: 16px;
  height: 16px;
}
.bookmark-item .bookmark-text {
  font-size: 12px;
  color: #333;
  margin-left: 7px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
}
.bookmark-item .item-folder-arrow {
  width: 12px;
  height: 12px;
  vertical-align: top;
}
.bookmark-item.popup {
  padding-left: 20px;
  padding-right: 20px;
  margin-top: 6px;
}
`,h=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const u="STAR",g="FOLDER",f="ITEM";class m extends r.a{constructor(){super(...arguments),this.folder_arrow=!1,this.inPopup=!1}render(){return r.e`
      <div
        class="bookmark-item${this.inPopup?" popup":""}"
        style="${this.folder_arrow?"display: flex;":"display: inline-flex;"}"
      >
        ${this.type===u?r.e` <img class="bookmark-icon" src=${i(561)} /> `:null}
        ${this.type===g?r.e` <img class="bookmark-icon" src=${i(527)} /> `:null}
        ${this.type===f?r.e` <i-favicon class="bookmark-icon" .url=${this.url}></i-favicon> `:null}
        <span class="bookmark-text" style="${this.text?"":"margin-left: 0;"}">${this.text}</span>
        ${this.type===g&&this.folder_arrow?r.e`<img class="item-folder-arrow" src=${i(634)} />`:null}
      </div>
    `}}m.styles=p,h([Object(r.g)({type:String})],m.prototype,"url",void 0),h([Object(r.g)({type:String})],m.prototype,"type",void 0),h([Object(r.g)({type:String})],m.prototype,"text",void 0),h([Object(r.g)({type:Boolean})],m.prototype,"folder_arrow",void 0),h([Object(r.g)({type:Boolean})],m.prototype,"inPopup",void 0),window.customElements.define("bookmark-item",m);var b=i(262),y=i(116);
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const v=new WeakMap,w=Object(y.e)(t=>e=>{if(!(e instanceof y.b))throw new Error("cache can only be used in text bindings");let i=v.get(e);void 0===i&&(i=new WeakMap,v.set(e,i));const o=e.value;if(o instanceof b.a){if(t instanceof y.d&&o.template===e.options.templateFactory(t))return void e.setValue(t);{let t=i.get(o.template);void 0===t&&(t={instance:o,nodes:document.createDocumentFragment()},i.set(o.template,t)),Object(y.g)(t.nodes,e.startNode.nextSibling,e.endNode)}}if(t instanceof y.d){const o=e.options.templateFactory(t),n=i.get(o);void 0!==n&&(e.setValue(n.nodes),e.commit(),e.value=n.instance)}e.setValue(t)});var x=i(4),_=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class k{constructor(){this.list=null,this.listInTopBar=[],this.listInDropdown=[],this.otherList=null,this.keep_open=!1,this.bookmarkBarHeight=36,this.popup_bottom=6,this.maxWidth=152,this.popupMaxWidth=2*this.maxWidth,this.minWidth=50}setKeepOpen(t){this.keep_open=t}async updateBookmarks(){const t=await new n.a(t=>chrome.bookmarks.getTree(t));let e,i;if(l.n){const{children:o}=t[0],[n,r]=["toolbar_____","unfiled_____"];[e,i]=[o.find(({id:t})=>t===n),o.find(({id:t})=>t===r)]}else[e,i]=t[0].children;this._updateList(e),this._updateOtherList(i)}_updateList(t){this.list=t}updateListInView(t,e){this.listInTopBar=t,this.listInDropdown=e}getListInView(){return[Object(x.j)(this.listInTopBar),Object(x.j)(this.listInDropdown)]}_updateOtherList(t){this.otherList=t}}_([x.g],k.prototype,"list",void 0),_([x.g],k.prototype,"listInTopBar",void 0),_([x.g],k.prototype,"listInDropdown",void 0),_([x.g],k.prototype,"otherList",void 0),_([x.g],k.prototype,"keep_open",void 0),_([x.b],k.prototype,"setKeepOpen",null),_([x.g],k.prototype,"maxWidth",void 0),_([x.g],k.prototype,"popupMaxWidth",void 0),_([x.g],k.prototype,"minWidth",void 0),_([x.b],k.prototype,"_updateList",null),_([x.b],k.prototype,"updateListInView",null),_([x.b],k.prototype,"getListInView",null),_([x.b],k.prototype,"_updateOtherList",null);var O=new k,A=i(264),S=i(265),I=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class j extends r.a{constructor(){super(...arguments),this.tree=[],this.open=!1,this.popupType="",this._open=!1,this._children=[],this._pos={},this._activeIndex=-1,this._update_threshold=180}handleOpenChange(t){this.hideAllChildrenPopup()}hideAllChildrenPopup(){this._open&&(this._open=!1),this._setActiveIndex(-1)}updated(t){t.has("open")&&this.handleOpenChange(this.open)}_clickToOpenFolder(t,e,i){O.setKeepOpen(!0);const o=t.currentTarget;this._setActiveIndex(i),this._openFolder(o,e,i)}_openFolder(t,e,i){this._pos={top:-5e3,right:-5e3},this._open||(this._open=!0),this._children=e,requestAnimationFrame(()=>{this._childrenPopup=this.shadowRoot.querySelector("bookmarks-popup"),this._updatePos(t)})}_whenMouseEnterItem(t,e,i){const o=t.currentTarget;this._update_throttle_timer&&(clearTimeout(this._update_throttle_timer),this._update_throttle_timer=void 0),this._update_throttle_timer=setTimeout(()=>{if(O.keep_open){if(Reflect.has(e,"children")){if(this._setActiveIndex(i),this._open){this._children=e.children;const t=Object.assign({},this._pos);Reflect.has(t,"bottom")&&Reflect.deleteProperty(t,"bottom"),this._pos=t,requestAnimationFrame(()=>{this._updatePos(o)})}else this._openFolder(o,e.children,i);return}this._setActiveIndex(-1),this._open&&(this._open=!1)}},this._update_threshold)}_updatePos(t){if(!this._childrenPopup)return;this._childrenPopup.hideAllChildrenPopup();const{innerHeight:e,innerWidth:i}=window,{x:o,y:n}=t.getBoundingClientRect(),{offsetWidth:r}=t.parentElement,{offsetHeight:a}=t,{offsetWidth:s,offsetHeight:l}=this._childrenPopup,c={},d=i-o-r,p=Math.max(o,d),h=()=>{let t;p===d?(t=i-d,this._popup_type="right"):(t=p-s,this._popup_type="left"),c.left=t};if(p>=s||i<s)if(this.popupType?"right"===this.popupType&&d>s?(c.left=i-d,this._popup_type=this.popupType):"left"===this.popupType&&o>s?(c.left=o-s,this._popup_type=this.popupType):h():h(),l>e)c.top=O.bookmarkBarHeight,c.bottom=O.popup_bottom;else{const t=e-n-O.popup_bottom;if(l<t)c.top=n;else{const e=l-t;c.top=n-e}}else if(i>s){c.left=o;const t=e-n-a,i=n-O.bookmarkBarHeight;Math.max(t,i)===t?(c.top=n+a,l>t&&(c.bottom=O.popup_bottom)):(c.bottom=e-n,l>i&&(c.top=O.bookmarkBarHeight))}this._pos=c}_clickToOpenUrl(t,e){this.closeFolder(),S.a.sendEvent({action:{openTopBookmark:c.a.getTargetLogDomain(t)}}),c.a.openUrl(t,s.settingStore.setting.link.bookmark,e)}_midClickToOpenUrl(t,e){S.a.sendEvent({action:{openTopBookmark:c.a.getTargetLogDomain(t)}}),c.a.openUrl(t,s.settingStore.setting.link.bookmark,e)}_setActiveIndex(t){this._activeIndex=t}render(){return r.e`
      <section class="bookmarks-popup">
        <ul
          class="bookmarks-popup-tree global-scrollbar"
          style="max-width: ${O.popupMaxWidth}px;min-width: ${O.maxWidth}px;"
          @scroll=${()=>this.hideAllChildrenPopup()}
        >
          ${0===this.tree.length?r.e`<li class="bookmark-item-empty">${i18n("empty")}</li>`:null}
          ${this.tree.map((t,e)=>r.e`
                  <bookmark-item
                    class="${this._activeIndex===e?"active":""}${0===e?" first":""}"
                    .title=${Reflect.has(t,"children")?"":t.title}
                    .text=${t.title}
                    .url=${t.url}
                    .type=${Reflect.has(t,"children")?"FOLDER":"ITEM"}
                    style="max-width: ${O.popupMaxWidth+"px"};height: 28px;"
                    ?folder_arrow=${!0}
                    ?inPopup=${!0}
                    @click=${i=>{Reflect.has(t,"children")?this._clickToOpenFolder(i,t.children,e):(this._setActiveIndex(-1),this._clickToOpenUrl(t.url,i))}}
                    @mouseenter=${i=>this._whenMouseEnterItem(i,t,e)}
                    @mousedown="${e=>{Reflect.has(t,"children")||1===e.button&&this._midClickToOpenUrl(t.url,e)}}"
                  ></bookmark-item>
                `)}
        </ul>
      </section>
      <!-- 试用上下树渲染会带来性能损耗 -->
      ${w(this._open?r.e`<bookmarks-popup
              .tree=${this._children}
              .popupType=${this._popup_type}
              .closeFolder=${this.closeFolder}
              ?open=${this._open}
              style="
              ${"top"in this._pos?"top: "+this._pos.top+"px; ":""}
              ${"left"in this._pos?"left: "+this._pos.left+"px; ":""}
              ${"right"in this._pos?"right: "+this._pos.right+"px; ":""}
              ${"bottom"in this._pos?"bottom: "+this._pos.bottom+"px; ":""}"
              @mouseenter=${()=>{this._update_throttle_timer&&(clearTimeout(this._update_throttle_timer),this._update_throttle_timer=void 0)}}
            ></bookmarks-popup>`:null)}
    `}}j.styles=[A.a,r.b`
      :host {
        width: auto;
        height: auto;
        min-width: 80px;
        position: fixed;
        overflow: hidden;
        background-color: #fff;
        border-radius: 6px;
        box-shadow: rgba(0, 0, 0, 0.2) 0 0 12px 3px;
      }

      .bookmarks-popup {
        width: 100%;
        height: 100%;
      }

      .bookmarks-popup .bookmarks-popup-tree {
        width: 100%;
        height: 100%;
        margin: 0;
        box-sizing: border-box;
        padding: 10px 0;
      }

      .bookmarks-popup .bookmarks-popup-tree .bookmark-item-empty {
        width: inherit;
        height: inherit;
        min-width: inherit;
        max-width: inherit;
        box-sizing: border-box;
        padding: 2px 10px;
      }

      .bookmarks-popup .bookmarks-popup-tree bookmark-item {
        position: relative;
      }

      .bookmarks-popup .bookmarks-popup-tree bookmark-item::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        background-color: #000;
        border-radius: inherit;
        transition: opacity 100ms;
      }
      // .bookmarks-popup .bookmarks-popup-tree bookmark-item.active::before {
      //   opacity: 0.1;
      // }
      .bookmarks-popup .bookmarks-popup-tree bookmark-item:hover::before {
        transition: opacity 100ms;
        opacity: 0.1;
      }
    `],I([Object(r.g)({type:Array})],j.prototype,"tree",void 0),I([Object(r.g)({type:Boolean})],j.prototype,"open",void 0),I([Object(r.g)({type:String})],j.prototype,"popupType",void 0),I([Object(r.g)({type:Object})],j.prototype,"closeFolder",void 0),I([Object(r.f)()],j.prototype,"_open",void 0),I([Object(r.f)()],j.prototype,"_children",void 0),I([Object(r.f)()],j.prototype,"_pos",void 0),I([Object(r.f)()],j.prototype,"_popup_type",void 0),window.customElements.define("bookmarks-popup",j);var $=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class C extends a.a{constructor(){super(),this._zindex=1e7,this._activeIndex=-1,this._popup_index=-1,this._children=[],this._open=!1,this._popup_pos={},this._popup_zindex=-1,this._emitUpdateList=()=>{this._throttleUpdateList()},this._bookmarks_url="chrome://bookmarks",this._closeFolder=()=>{this._popup_pos={},O.keep_open&&O.setKeepOpen(!1),this._open&&(this._open=!1),this._popup_zindex=-1,this._activeIndex=-1},c.a.send({key:"bg-run-start-watch-bookmarks"})}firstUpdated(){this._itemsContainer=this.shadowRoot.querySelector(".bookmark-items"),this._bookmarksPopup=this.shadowRoot.querySelector(".bookmarks-popup-comp"),this._initPage()}_bookmarksToLocal(t){var e;const i=Math.ceil(window.screen.width/this._itemsContainer.clientWidth)*t,o=Object(x.j)((null===(e=O.list)||void 0===e?void 0:e.children)||[]);o.length>i&&o.splice(i),localStorage.setItem("bookmarks",JSON.stringify(o))}_initPage(){this._throttleUpdateList=c.a.throttle(this._updateList,40),O.updateBookmarks().finally(()=>{n.a.resolve().then(()=>this.updateComplete).then(()=>{this.style.display="block"}).then(()=>this.updateComplete).then(()=>new n.a(t=>setTimeout(t,100))).finally(()=>{const t=document.querySelector(".top-bookmark");t&&t.parentElement.removeChild(t)})}),this._updateListDisposer=Object(x.h)(()=>O.list,()=>this._throttleUpdateList(!0)),this._updateOtherListDisposer=Object(x.h)(()=>O.otherList,()=>this._throttleUpdateList(!0)),this._watchListDisposer=Object(x.h)(()=>O.listInTopBar.length,t=>this._bookmarksToLocal(t),{fireImmediately:!0}),window.addEventListener("resize",this._emitUpdateList),window.addEventListener("blur",this._closeFolder)}_updateList(t=!1){this._open&&this._closeFolder();const{offsetWidth:e}=this._itemsContainer,{minWidth:i}=O;let o=Math.floor(e/i);l.i&&o--;const{children:n}=O.list,r=n.slice(0,o),a=n.slice(o);O.updateListInView(r,a),this.updateComplete.then(()=>{let t=0;const e=this.shadowRoot.querySelectorAll('.bookmark-items>bookmark-item:not([type="STAR"])');for(let i=0,o=e.length-1;o>=i;o--){if(!(e[o].offsetTop>10))break;t++}0!==t&&(a.unshift(...r.splice(-t)),O.updateListInView(r,a))})}disconnectedCallback(){this._throttleUpdateList&&(window.removeEventListener("resize",this._emitUpdateList),window.removeEventListener("blur",this._closeFolder)),this._updateListDisposer&&this._updateListDisposer(),this._updateOtherListDisposer&&this._updateOtherListDisposer(),this._watchListDisposer&&this._watchListDisposer()}_clickToOpenFolder(t,e,i){if(O.keep_open)return this._popup_pos={},this._open=!1,O.setKeepOpen(!1),this._popup_zindex=-1,void(this._activeIndex=-1);this._popup_index=i,this._setActiveIndex(i),O.setKeepOpen(!0),this._open=!0,this._children=e;const{offsetLeft:o}=t.currentTarget;requestAnimationFrame(()=>{this._updatePopupPos(o),this._popup_zindex=this._zindex})}_whenMouseEnterItem(t,e,i){if(O.keep_open){this._setActiveIndex(i);const o=e=>{this._popup_zindex=-1,this._open||(this._open=!0),this._children=e,this._popup_pos={};const{offsetLeft:i}=t.currentTarget;requestAnimationFrame(()=>{this._updatePopupPos(i),this._popup_zindex=this._zindex})},n=t=>{this._popup_index!==i&&this._bookmarksPopup.hideAllChildrenPopup(),this._popup_index=i,o(t)};Array.isArray(e)?n(e):Reflect.has(e,"children")&&n(e.children)}}_updatePopupPos(t){const{innerWidth:e,innerHeight:i}=window,{offsetWidth:o,offsetHeight:n}=this._bookmarksPopup,r=Object.assign({},this._popup_pos);t+o>e?r.right=0:r.left=t,r.top=O.bookmarkBarHeight,n>i&&(r.bottom=O.popup_bottom),this._popup_pos=r}_clickToOpenUrl(t,e){S.a.sendEvent({action:{openTopBookmark:c.a.getTargetLogDomain(t)}}),c.a.openUrl(t,s.settingStore.setting.link.bookmark,e)}_setActiveIndex(t){this._activeIndex=t}render(){return r.e`
      <section class="bookmarks">
        <section class="bookmarks-topbar">
          <section class="bookmark-items">
            ${l.i?r.e`
                  <bookmark-item
                    type="STAR"
                    .text=${i18n("bookmarks")}
                    .url=${this._bookmarks_url}
                    style="max-width: ${O.maxWidth+"px"}"
                    @click=${t=>this._clickToOpenUrl(this._bookmarks_url,t)}
                    @mousedown="${t=>{1===t.button&&this._clickToOpenUrl(this._bookmarks_url,t)}}"
                    .title=${i18n("bookmarks")}
                  ></bookmark-item>
                  <!-- @mouseenter=${()=>{this._open&&(this._open=!1)}} -->
                `:null}
            ${O.listInTopBar.map((t,e)=>r.e`
                    <bookmark-item
                      class="${this._activeIndex===e?"active":""}"
                      .title=${Reflect.has(t,"children")?"":t.title}
                      .text=${t.title}
                      .url=${t.url}
                      .type=${Reflect.has(t,"children")?"FOLDER":"ITEM"}
                      style="max-width: ${O.maxWidth+"px"}"
                      @click=${i=>{Reflect.has(t,"children")?this._clickToOpenFolder(i,t.children,e):(this._setActiveIndex(-1),this._clickToOpenUrl(t.url,i))}}
                      @mousedown="${e=>{Reflect.has(t,"children")||1===e.button&&this._clickToOpenUrl(t.url,e)}}"
                      @mouseenter=${i=>this._whenMouseEnterItem(i,t,e)}
                    ></bookmark-item>
                  `)}
          </section>

          <i
            class="bookmark-item bookmark-dropdown-entry${-2===this._activeIndex?" active":""}"
            style="background-image: url(${i(562)});${0===O.listInDropdown.length?"visibility: hidden;":""}"
            @click=${t=>this._clickToOpenFolder(t,O.listInDropdown,-2)}
            @mouseenter=${t=>this._whenMouseEnterItem(t,O.listInDropdown,-2)}
          ></i>
          <i class="bookmark-split-line"></i>
          <section
            @click=${t=>this._clickToOpenFolder(t,O.otherList.children,-3)}
            @mouseenter=${t=>this._whenMouseEnterItem(t,O.otherList,-3)}
            class="bookmark-item other-bookmark${-3===this._activeIndex?" active":""}"
            style="max-width: ${O.maxWidth}px"
          >
            <img class="bookmark-icon" src=${i(527)} />
            <span class="bookmark-text">${i18n("other_bookmarks")}</span>
          </section>
        </section>

        <!-- 点击bookmarks弹出的文件夹框和背景透明mask -->
        <section
          class="bookmarks-popup"
          style="
            ${this._open?"":"display: none;"}
          "
        >
          <section class="bookmarks-popup-mask" @click=${()=>this._closeFolder()}></section>
          <bookmarks-popup
            class="bookmarks-popup-comp"
            style="z-index: ${this._popup_zindex};
            ${"top"in this._popup_pos?"top: "+this._popup_pos.top+"px; ":""}
            ${"left"in this._popup_pos?"left: "+this._popup_pos.left+"px; ":""}
            ${"right"in this._popup_pos?"right: "+this._popup_pos.right+"px; ":""}
            ${"bottom"in this._popup_pos?"bottom: "+this._popup_pos.bottom+"px; ":""}"
            .tree=${this._children}
            ?open=${this._open}
            .closeFolder=${this._closeFolder.bind(this)}
          ></bookmarks-popup>
        </section>
      </section>
    `}}C.styles=[d,p],$([Object(r.f)()],C.prototype,"_children",void 0),$([Object(r.f)()],C.prototype,"_open",void 0),$([Object(r.f)()],C.prototype,"_popup_pos",void 0),$([Object(r.f)()],C.prototype,"_popup_zindex",void 0),window.customElements.define("topbar-bookmarks",C);var E=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let T=class extends a.a{firstUpdated(){this.style.zIndex="100000"}render(){const{withPermissionTopBookmark:t}=s.settingStore;return r.e`
      <div class="newtab-topbar">
        ${t?r.e` <topbar-bookmarks style="display: none;"></topbar-bookmarks> `:null}
      </div>
    `}};T.styles=r.b`
    .newtab-topbar {
      position: relative;
      z-index: 102;
    }
  `,T=E([Object(r.c)("newtab-topbar")],T);i(21);var P=i(105),R=r.b`.main {
  width: 100vw;
  height: 100%;
}
.hide {
  display: none !important;
}
.main-left,
.main-right {
  position: absolute;
  top: 0;
  z-index: 2;
  width: var(--main-side-width);
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #fff;
  opacity: 0;
}
.main-left[hidden],
.main-right[hidden] {
  display: none;
}
.main-left {
  left: 0;
}
.main-right {
  right: 0;
}
.main-middle {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.main-middle-center {
  width: 100vw;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}
.main-middle-center:active,
.main-middle-center:focus {
  border: none !important;
  outline: none !important;
}
.search {
  margin-top: var(--search-margin-top);
}
.swiper-container {
  flex-shrink: 0;
  position: relative;
  padding: 0 0 20px;
  width: 100%;
  overflow-x: hidden;
  overflow-y: visible;
  margin-top: calc(var(--icon-padding-top) * -1);
}
.swiper-container .swiper-content {
  height: calc(var(--icon-box-height) + var(--icon-padding-top));
  width: calc(var(--icon-box-width) + var(--main-icons-margin) * 2);
  box-sizing: border-box;
}
.swiper-container .swiper-pagination {
  position: absolute;
  left: 50%;
  bottom: 0;
  transform: translateX(-50%);
  display: flex;
}
.swiper-container .swiper-pagination .dot {
  margin: 0 10px;
  display: block;
  width: 10px;
  height: 10px;
  background-color: #fff;
  opacity: 0.4;
  border-radius: 50%;
  cursor: pointer;
  transition: opacity 0.3s ease;
}
.swiper-container .swiper-pagination .dot:hover {
  opacity: 0.6;
}
.swiper-container .swiper-pagination .dot.active {
  opacity: 1;
}
.swiper-btn-prev,
.swiper-btn-next {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
}
.swiper-btn-next {
  right: calc(var(--main-side-width) / 2);
}
.swiper-btn-prev {
  left: calc(var(--main-side-width) / 2);
  transform: translateY(-50%) rotate(180deg);
}
.swiper-btn.hide {
  opacity: 0;
  pointer-events: none;
}
.swiper-btn {
  margin-top: calc(var(--search-height) / 2);
  opacity: 0.2;
  transition-property: opacity;
  transition-duration: 300ms;
  transition-timing-function: ease;
  cursor: pointer;
}
.swiper-btn img {
  height: var(--icon-width);
  max-width: 42px;
  max-height: 125px;
}
.swiper-btn:hover {
  opacity: 0.8;
}
.swiper-btn::after {
  content: none;
}
.btn-setting-box {
  position: absolute;
  right: 20px;
  top: var(--settings-icon-top-offset);
  display: flex;
  justify-content: flex-end;
  pointer-events: none;
}
i-updater {
  pointer-events: auto;
}
.btn-setting,
.setting-home-box .btn-setting-home {
  margin-left: 30px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition-property: transform;
  transition-duration: 0.3s;
  transition-timing-function: ease;
  pointer-events: auto;
}
.btn-setting:hover {
  transform: scale(1.1);
}
.btn-settings {
  transition: transform 300ms ease 0s;
  width: 40px;
  height: 40px;
  background-color: rgba(0, 0, 0, 0.2);
  margin-left: 30px;
  border-radius: 50%;
  cursor: pointer;
  pointer-events: auto;
  display: flex;
  justify-content: center;
  align-items: center;
}
.btn-settings:hover {
  transform: scale(1.1);
}
.btn-settings .btn-settings-icon .icon-dash {
  width: 16px;
  height: 2px;
  background-color: #fff;
}
.btn-settings .btn-settings-icon .icon-dash:nth-child(2) {
  margin: 4px 0;
}
.setting-home-box {
  display: flex;
  flex-flow: column;
  justify-content: center;
  align-items: center;
}
.setting-home-box .btn-setting-home {
  margin: 0;
}
.setting-home-box .btn-setting-home:hover {
  transform: scale(1.1);
}
.setting-home-box .setting-home-text {
  position: absolute;
  top: -100px;
  text-align: center;
  font-size: 14px;
  font-family: PingFangSC-Regular, PingFang SC;
  font-weight: 400;
  color: #222222;
  line-height: 28px;
  min-width: 80px;
  padding: 0 10px;
  box-sizing: border-box;
  height: 28px;
  background: #ffffff;
  box-shadow: 0px 2px 6px 0px rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  white-space: nowrap;
}
.sync {
  position: absolute;
  left: 20px;
  bottom: 20px;
  display: flex;
}
.sync .syncing-img {
  width: 20px;
  height: 20px;
  animation: round 0.8s linear infinite;
}
.sync-end {
  align-items: center;
  height: 20px;
  font-size: 12px;
  font-weight: 400;
  color: #ffffff;
  line-height: 20px;
}
.sync-end img {
  width: 20px;
  height: 20px;
  margin-right: 6px;
}
@keyframes round {
  0% {
    transform: rotate(0deg);
  }
  25% {
    transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.windmill {
  position: absolute;
  right: 20px;
  bottom: 0;
  display: flex;
  flex-direction: column;
}
.windmill img {
  z-index: 1;
  cursor: pointer;
  width: 40px;
  height: 40px;
}
.windmill span {
  display: block;
  margin-top: -30px;
  margin-left: auto;
  margin-right: auto;
  width: 5px;
  height: 56px;
  background-color: #fefefe;
}
.icp {
  position: fixed;
  bottom: 16px;
  left: 0;
  right: 0;
  text-align: center;
  pointer-events: none;
}
.icp-link {
  color: #fff;
  font-size: 12px;
  opacity: 0.3;
  text-decoration: none;
  pointer-events: all;
}
.icp-link:hover {
  opacity: 0.8;
}
.hide {
  display: none;
}
`,L=i(399);class D extends L.a{}const M=Object(L.b)(new D);var U=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class N{constructor(){this.flipStatus=!1,this.iconEditing=!1,this.folderIndexs=null,this.folderFlipData=null,this.focusName=!1,this.offsetX=0,this.iconActive=!1}get folderStatus(){return null!==this.folderIndexs}get folderItem(){if(null===this.folderIndexs)return null;const t=this.folderIndexs[0],e=this.folderIndexs[1];return s.siteStore.sites[t][e]}changeIconEditing(t){this.iconEditing=t}openFolderWithIndexs(t){this.folderIndexs=t}closeFolder(){this.folderIndexs=null}changeFolderFlipData(t){if(t){const t={};this.folderFlipData=t}else this.folderFlipData=t}changeFlipStatus(t){this.flipStatus=t}changeFocusStatus(t){this.focusName=t}changeOffsetX(t){this.offsetX=t}changeIconActive(t){this.iconActive=t}}U([x.g],N.prototype,"flipStatus",void 0),U([x.g],N.prototype,"iconEditing",void 0),U([x.g],N.prototype,"folderIndexs",void 0),U([x.g],N.prototype,"folderFlipData",void 0),U([x.g],N.prototype,"focusName",void 0),U([x.g],N.prototype,"offsetX",void 0),U([x.g],N.prototype,"iconActive",void 0),U([x.e],N.prototype,"folderStatus",null),U([x.e],N.prototype,"folderItem",null),U([x.b],N.prototype,"changeIconEditing",null),U([x.b],N.prototype,"openFolderWithIndexs",null),U([x.b],N.prototype,"closeFolder",null),U([x.b],N.prototype,"changeFolderFlipData",null),U([x.b],N.prototype,"changeFlipStatus",null),U([x.b],N.prototype,"changeFocusStatus",null),U([x.b],N.prototype,"changeOffsetX",null),U([x.b],N.prototype,"changeIconActive",null);const B=new N,F=()=>{if(B.iconActive){if(s.pluginStore.pluginViews.includes("infinity://settings")||s.pluginStore.pluginViews.includes("profile")){const t=s.pluginStore.pluginViews.slice(-1)[0];if("infinity://settings"===t||"profile"===t){const t=(innerWidth-parseInt(document.body.style.getPropertyValue("--icon-box-width")))/2;if(t<350&&t>10)return void B.changeOffsetX(Math.max(t-400,-t))}}B.changeOffsetX(0)}else B.changeOffsetX(0)};Object(x.c)(F,{delay:50}),window.addEventListener("resize",c.a.throttle(()=>{document.querySelector("i-menu").toHide(),F()},50)),M.setAddIconActiveStatus=t=>{B.changeIconActive(t)};var z=r.b`:host {
  display: block;
  --left: 0;
  --top: 0;
}
.menu-container {
  pointer-events: none;
  position: absolute;
  z-index: 999;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
.menu-box {
  padding: 7px 0;
  pointer-events: all;
  display: flex;
  flex-direction: column;
  background-color: #fff;
  position: absolute;
  left: var(--left);
  top: var(--top);
  -moz-user-select: none;
       user-select: none;
  box-shadow: 0px 4px 19px 0px rgba(0, 0, 0, 0.12);
  border-radius: 6px;
  overflow: hidden;
  transition: 0.3s opacity;
  opacity: 1;
}
.menu-box .menu-item {
  display: flex;
  justify-content: space-between;
  margin: 1px 0;
  cursor: pointer;
  font-size: 13px;
  line-height: 1.4;
  padding: 8px 20px;
  color: #333;
  transition: none;
  background-color: #ffffff;
}
.menu-box .menu-item .text {
  white-space: nowrap;
}
.menu-box .menu-item .keyboard {
  min-width: 42px;
  white-space: nowrap;
  margin-left: 18px;
  color: #999999;
}
.menu-box .menu-item:hover {
  background-color: #f1f1f1;
}
`,H=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let W=null,q=class extends r.a{constructor(){super(...arguments),this.show=!1,this.menus=[],this.position={left:0,top:0},this._renderMenu=()=>this.menus.map(t=>r.e`<span
        class="menu-item"
        @click="${e=>{this.toHide(),t.handler(e)}}"
      >
        <div class="text">${t.text}</div>
        <div class="keyboard">${t.keyboard}</div>
      </span> `)}static create(){if(W)return W;const t=document.body;return W=document.createElement("i-menu"),t.appendChild(W),W}firstUpdated(){}destroy(){this.parentNode.removeChild(this)}updated(){const{left:t,top:e}=this.position,i={left:t,top:e},{clientWidth:o,clientHeight:n}=this.$menuBox,{width:r,height:a}=document.body.getBoundingClientRect();r<t+o&&(i.left-=o),a<e+n&&(i.top-=n),this.style.setProperty("--left",i.left+"px"),this.style.setProperty("--top",i.top+"px")}toShow(t,e){this.menus=t,this.position=e,this.show=!0}toHide(){this.show&&(this.show=!1)}render(){return r.e`
      <div class="menu-container" .hidden="${!this.show}">
        <div class="menu-box">${this._renderMenu()}</div>
      </div>
    `}};q.styles=z,H([Object(r.h)(".menu-box")],q.prototype,"$menuBox",void 0),H([Object(r.g)({type:Boolean})],q.prototype,"show",void 0),H([Object(r.g)({type:Array,attribute:!1})],q.prototype,"menus",void 0),H([Object(r.g)({type:Object})],q.prototype,"position",void 0),q=H([Object(r.c)("i-menu")],q);var G=i(485);const V=t=>{const e=[];return t?(t.querySelectorAll("[flipkey]").forEach(t=>{e.push(t)}),e):e};class Q{constructor({root:t=document.body,selector:e=V,duration:i=300,easing:o="ease",viewBox:n}){this.root=null,this.viewBox=null,this.selector=null,this.duration=null,this.easing=null,this._first={},this._last={},this._animations={},this.root=t,this.viewBox=n,this.selector=e,this.duration=i,this.easing=o,this._first={},this._last={},this._animations={}}_read(t){const e={},i=this.selector(this.root);let o;return this.viewBox&&(o=this.viewBox.getBoundingClientRect()),i.forEach(i=>{const n=i.getAttribute("flipkey");if(n&&"undefined"!==n){e[n]&&console.warn("当前[flipkey]重复：",n);const r=i.getBoundingClientRect(),{left:a,top:s,width:l,height:c}=r,d={left:a,top:s,width:l,height:c};!function(t,e){return e?t.top+t.height>=e.top&&t.left+t.width>=e.left&&t.bottom-t.height<=e.bottom&&t.right-t.width<=e.right:t.top+t.height>=0&&t.left+t.width>=0&&t.bottom-t.height<=window.innerHeight&&t.right-t.width<=window.innerWidth}(r,o)?e[n]=null:(t&&(d.elm=i),e[n]=d)}}),e}read(t={}){const e=this._read();return this._first=Object.assign(Object.assign({},e),t),this._first}cancel(t){this._animations[t]&&this._animations[t].cancel()}play({keepScale:t="",props:e=["scale","position"],created:i=null}={keepScale:"",props:["scale","position"],created:null}){return new n.a(o=>{this._last=this._read(!0);let n=0,r=0;Object.keys(this._last).forEach(a=>{const s={},l={},c=this._last[a],d=this._first[a];if(!c)return;const p={},h={duration:this.duration,easing:this.easing};if(d?(e.includes("position")&&(p.translateX=Math.round(d.left-c.left)||0,p.translateY=Math.round(d.top-c.top)||0),e.includes("scale")&&(p.scaleX=c.width>10?d.width/c.width:1,p.scaleY=c.height>10?d.height/c.height:1,"width"===t?p.scaleY=p.scaleX:"height"===t&&(p.scaleX=p.scaleY))):"scale"===i&&(p.scaleX=p.scaleY=.3,s.opacity="0",l.opacity="1",h.duration=200),s.transform=`matrix(${p.scaleX||1},0,0,${p.scaleY||1},${p.translateX||0},${p.translateY||0})`,l.transform="matrix(1,0,0,1,0,0)",l.transform!==s.transform&&Object.keys(s).length&&Object.keys(l).length){n+=1;const t=c.elm;t.style.pointerEvents="none";const e=t.animate([s,l],h);this._animations[a]=e,e.onfinish=()=>{this._animations[a]=null,t.style.pointerEvents="",r+=1,r===n&&o(r)},e.oncancel=()=>{this._animations[a]=null,t.style.pointerEvents="",r+=1,r===n&&o(r)}}}),0===n&&o(0)})}}var Y=i(385),X=i(630),Z=i(2),K=(i(521),i(193)),J=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class tt{constructor(){this.dragId="",this.dragIndexs=[],this.startMove=!1,this.mobileDrag=!1,this.dragXLimit=!1,this.dragStage=null,this.dragMergeHolderIndexs=null,this.dropTargetId="",this.dragIns=null,this.dragNone={dom:null,oraginOffsetX:0,oraginOffsetY:0,offsetX:0,offsetY:0,marginX:0,width:0,height:0,x:0,y:0},this.drag=Object.assign({},this.dragNone),this.folderTimer=null}get withHolderPageSites(){if(this.startMove&&this.dragIndexs.length>0){const t=s.siteStore.sites.length,e=s.siteStore.sites[t-1];return 2===this.dragIndexs.length&&1===e.length&&this.dragIndexs[0]===t-1?s.siteStore.sites:[...s.siteStore.sites,[]]}return s.siteStore.sites}setDragStatus(t,e=[]){this.dragId=t,this.dragIndexs=e}changeXLimitStatus(t){this.dragXLimit=t}setStartMove(t){this.startMove=t}clearDragStatus(){this.dragId="",this.dragIndexs=[],this.startMove=!1,this.dragStage=null,this.dragMergeHolderIndexs=null,this.dropTargetId=""}clearDragIndexs(){this.dragIndexs=[]}setMergeStatus(t,e){this.dragStage=t,this.dropTargetId=e}checkDragIndexs(){var t,e;const[i,o,n]=this.dragIndexs;let r=null;if(2===this.dragIndexs.length?r=s.siteStore.sites[i][o]:3===this.dragIndexs.length&&(r=null===(e=null===(t=s.siteStore.sites[i][o])||void 0===t?void 0:t.children)||void 0===e?void 0:e[n]),(null==r?void 0:r.id)===this.dragId)return;const a=s.siteStore.findIndex(0,this.dragId);this.dragIndexs=a||[]}setMobileDrag(t){this.mobileDrag=t}setHolderIndexs(t=[]){2===t.length&&2===this.dragIndexs.length&&t[0]===this.dragIndexs[0]&&t[1]>this.dragIndexs[1]?this.dragMergeHolderIndexs=[...this.dragIndexs]:this.dragMergeHolderIndexs=null}clearMergeStatus(){this.dragStage=null,this.dropTargetId=""}setDragIns(t){this.dragIns=t}sortSites(t,e){const[i,o,n]=this.dragIndexs,[r,a,l]=t;i===r&&(3===t.length&&3===this.dragIndexs.length?"left"===e&&l>n&&l%s.settingStore.setting.layout.col==0?e="right":"right"===e&&l<n&&l%s.settingStore.setting.layout.col==s.settingStore.setting.layout.col-1&&(e="left"):2===t.length&&2===this.dragIndexs.length&&("left"===e&&a>o&&a%s.settingStore.setting.layout.col==0?e="right":"right"===e&&a<o&&a%s.settingStore.setting.layout.col==s.settingStore.setting.layout.col-1&&(e="left")));const c=s.siteStore.sites[i][o];let d=c;3===this.dragIndexs.length&&(d=d.children[n]),"right"===e?2!==t.length||2===this.dragIndexs.length&&i===r&&o<a?3===t.length&&n>l&&(t[2]+=1):t[1]+=1:2===t.length&&2===this.dragIndexs.length&&i===r&&o<a?t[1]-=1:3===t.length&&n<l&&(t[2]-=1);const{data:p,clearPageIndex:h}=s.siteStore.delSites(this.dragIndexs,!1);s.siteStore.insertSite(t,p[0]);const u=s.siteStore.handelStatus(this.dragIndexs,t,c,d,h);this.dragIndexs=u}createFolder(t){const[e,i,o]=this.dragIndexs,[n,r]=t,a=s.siteStore.sites[e][i];let l=a;const d=s.siteStore.sites[n][r];3===this.dragIndexs.length&&(l=l.children[o]);const p={name:i18n("folder"),uuid:c.a.randomId("folder-"),id:c.a.randomId("folderId-"),children:[d,l],updatetime:Date.now()};s.siteStore.delSites(t,!1),s.siteStore.insertSite(t,p),this.setMergeStatus("merge",p.id);const{clearPageIndex:h}=s.siteStore.delSites(this.dragIndexs,!1),u=s.siteStore.handelStatus(this.dragIndexs,t,a,l,h);return this.dragIndexs=u,{folderId:p.id,uuid:p.uuid}}intoFolder(t){const[e,i,o]=this.dragIndexs,[n,r]=t,a=s.siteStore.sites[e][i];let l=a;const c=s.siteStore.sites[n][r];3===this.dragIndexs.length&&(l=l.children[o]);const d=c.children.length;et.setMergeStatus("merge",c.id),s.siteStore.insertSite([...t,d],l);const{clearPageIndex:p}=s.siteStore.delSites(this.dragIndexs,!1),h=s.siteStore.handelStatus(this.dragIndexs,t,a,l,p);this.dragIndexs=h}}J([x.g],tt.prototype,"dragId",void 0),J([x.g],tt.prototype,"dragIndexs",void 0),J([x.g],tt.prototype,"startMove",void 0),J([x.g],tt.prototype,"mobileDrag",void 0),J([x.g],tt.prototype,"dragXLimit",void 0),J([x.g],tt.prototype,"dragStage",void 0),J([x.g],tt.prototype,"dragMergeHolderIndexs",void 0),J([x.g],tt.prototype,"dropTargetId",void 0),J([x.g],tt.prototype,"dragIns",void 0),J([x.e],tt.prototype,"withHolderPageSites",null),J([x.b],tt.prototype,"setDragStatus",null),J([x.b],tt.prototype,"changeXLimitStatus",null),J([x.b],tt.prototype,"setStartMove",null),J([x.b],tt.prototype,"clearDragStatus",null),J([x.b],tt.prototype,"clearDragIndexs",null),J([x.b],tt.prototype,"setMergeStatus",null),J([x.b],tt.prototype,"checkDragIndexs",null),J([x.b],tt.prototype,"setMobileDrag",null),J([x.b],tt.prototype,"setHolderIndexs",null),J([x.b],tt.prototype,"clearMergeStatus",null),J([x.b],tt.prototype,"setDragIns",null),J([x.b],tt.prototype,"sortSites",null),J([x.b],tt.prototype,"createFolder",null),J([x.b],tt.prototype,"intoFolder",null);const et=new tt;Object(x.h)(()=>({dragId:et.dragId,folderStatus:B.folderStatus}),t=>{var e;if(t.dragId){const i=document.body.querySelector(".drag-icon-box");if(i){let o=0,n=0;if(t.folderStatus)B.folderFlipData&&(n=116),et.folderTimer=setTimeout(()=>{var t;const e=null===(t=document.querySelector("newtab-main").shadowRoot.querySelector("icon-folder").shadowRoot.querySelector("icon-box"))||void 0===t?void 0:t.shadowRoot.querySelector("icon-content");if(e){const{width:t,height:n}=e.getBoundingClientRect();i.style.width=t+"px",i.style.height=n+"px";const{width:r}=e.shadowRoot.querySelector(".icon-content").getBoundingClientRect();o=(t-r)/2,et.drag.width=r}const n=i.querySelector(".icon-content"),r=i.querySelector(".icon-name");n.style.width="calc(var(--icon-width) * 0.8)",n.style.height="calc(var(--icon-width) * 0.8)",r.style.width="calc(var(--icon-width) * 1.2)",et.drag.offsetX=.8*et.drag.oraginOffsetX+o,et.drag.offsetY=.8*et.drag.oraginOffsetY,et.drag.marginX=o;const a=et.drag.x-et.drag.offsetX,s=et.drag.y-et.drag.offsetY;i.style.left=a+"px",i.style.top=s+"px"},n);else{et.folderTimer&&clearTimeout(et.folderTimer);const t=null===(e=document.querySelector("newtab-main").shadowRoot.querySelector("newtab-icons").shadowRoot.querySelector("icon-box"))||void 0===e?void 0:e.shadowRoot.querySelector("icon-content");if(t){const{width:e,height:n}=t.getBoundingClientRect();i.style.width=e+"px",i.style.height=n+"px";const{width:r}=t.shadowRoot.querySelector(".icon-content").getBoundingClientRect();o=(e-r)/2,et.drag.width=r}const n=i.querySelector(".icon-content"),r=i.querySelector(".icon-name");n.style.width="var(--icon-width)",n.style.height="var(--icon-width)",r.style.width="calc(var(--icon-width) * 1.5)",et.drag.offsetX=et.drag.oraginOffsetX+o,et.drag.offsetY=et.drag.oraginOffsetY,et.drag.marginX=o;const a=et.drag.x-et.drag.offsetX,s=et.drag.y-et.drag.offsetY;i.style.left=a+"px",i.style.top=s+"px"}}}}),Object(x.c)(()=>{if(et.dragIns){const t=document.querySelector("newtab-main");B.folderStatus?et.dragIns.updateOption({dropPointShadowRoot:t.$folderBox.shadowRoot}):et.dragIns.updateOption({dropPointShadowRoot:t.$items.shadowRoot}),B.iconEditing?et.dragIns.updateOption({mobileStartDelayTime:0}):et.dragIns.updateOption({mobileStartDelayTime:500})}},{delay:20});var it=i(27),ot=i(486),nt=i(248),rt=i(93),at=i(123);const st={IS_WEB:{list:["history","bookmarks","extension","chrome-apps","extensions"],exec:t=>{s.settingStore.toggleSettingHomeModal(),s.settingStore.setWebClickName(t)}},IS_FIREFOX:{list:["infinity://extension","infinity://chrome-apps"],exec:()=>{rt.message.error(Object(Z.i18n)("browser_does_not_support_this_feature",Object(at.d)(l.D.vendor)))}},IS_SAFARI:{list:["infinity://extension","infinity://chrome-apps","infinity://history","infinity://bookmarks"],exec:()=>{rt.message.error(Object(Z.i18n)("browser_does_not_support_this_feature",Object(at.d)(l.D.vendor)))}}};function lt(t){if("string"!=typeof t)return!0;let e,i=!1;return l.s?(e=st.IS_WEB,t.startsWith("infinity://")?t=t.split("://")[1]:t.startsWith("chrome://")&&(t=t.split("://")[1].split("/")[0])):l.n?e=st.IS_FIREFOX:l.r&&(e=st.IS_SAFARI),e&&e.list.includes(t)&&(e.exec(t),i=!0),i}var ct=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let dt=class extends a.a{constructor(){super(...arguments),this.icon=null,this.indexs=[],this.flipkey="",this.mousedown=!1,this.isFolderItem=!1,this.menu=null,this.menus=[{text:Object(Z.i18n)("open_folder_icons"),handler:()=>{this.icon.children.forEach(t=>{if("web"===t.type){const e={url:t.target,active:!1};l.l?chrome.tabs.create(e):c.a.openUrl(t.target,!0)}})}},{text:Object(Z.i18n)("rename_folder"),handler:()=>{B.changeFolderFlipData({}),B.openFolderWithIndexs(this.indexs),B.changeFocusStatus(!0)}},{text:Object(Z.i18n)("del_folder"),handler:()=>{G.IConfirm.create().toShow({title:Object(Z.i18n)("del_folder"),text:Object(Z.i18n)("confirm_del_folder"),onConfirm:()=>{s.siteStore.delSites(this.indexs)}})}},{text:Object(Z.i18n)("unzip_folder_title"),handler:()=>{G.IConfirm.create().toShow({title:Object(Z.i18n)("unzip_folder_title"),text:Object(Z.i18n)("unzip_folder_content"),onConfirm:()=>{s.siteStore.manualDestroyFolder(this.indexs)}})}}],this._mouseUp=()=>{window.removeEventListener("mouseup",this._mouseUp,{capture:!0}),this.mousedown=!1},this.onMousedown=t=>{const{button:e}=t;if(1===e)return t.stopPropagation(),void this._handleClick(t);if(0===e){if(!0===this.mousedown)return;this.mousedown=!0,window.addEventListener("mouseup",this._mouseUp,{capture:!0})}},this.onTouchStart=t=>{!0!==this.mousedown&&(this.mousedown=!0,t.target.addEventListener("touchend",this._mouseUp))},this._handleClick=t=>{if(this.menu.toHide(),this.icon.children)B.changeFolderFlipData({}),B.openFolderWithIndexs(this.indexs),S.a.sendEvent({action:"openFolder"});else{const e=this.icon;if(B.iconEditing){if(e.target===K.i.target)return;s.siteStore.setEditSite(e.id),s.pluginStore.show("editIcon"),S.a.sendEvent({action:{openEditicon:c.a.getTargetLogDomain(e.target)}})}else{if(S.a.sendEvent({action:{openIcon:c.a.getTargetLogDomain(e.target)}}),lt(e.target))return;const{link:i}=s.settingStore.setting;if(e.target.startsWith("chrome-app://"))return void c.a.openChromeApp(e.target.split("chrome-app://")[1],i.icon,t);if(e.target.startsWith("infinity://"))return l.h&&"infinity://history"===e.target?void c.a.openUrl("chrome://history/",i.icon,t):"infinity://gmail"===e.target?void c.a.openUrl("https://mail.google.com/mail/ca",i.icon,t):"infinity://chrome-apps"===e.target?(s.pluginStore.show(e.target),void X.a.openModal()):!s.userStore.isLogin&&l.s?void s.userStore.toggleLoginTipModal():void s.pluginStore.show(e.target);c.a.openUrl(e.target,i.icon,t)}}}}static get styles(){return r.b`
      .icon-content {
        margin: auto;
        opacity: var(--icon-opacity);
        position: relative;
        cursor: pointer;
        transition-property: box-shadow, transform, border-radius, filter;
        transition-duration: 0.2s;
        transition-timing-function: ease;
        width: var(--icon-width);
        height: var(--icon-width);
      }
      .icon-content::after {
        position: absolute;
        content: '';
        width: 100%;
        height: 100%;
        z-index: -1;
      }
      .mousedown::after {
        transform: scale(1.2);
      }
      .with-drag {
        transition: none;
      }
      /* .icon-content:not(.folder) {
        backface-visibility: hidden;
      } */
      .folder-item {
        width: calc(var(--icon-width) * 0.8);
        height: calc(var(--icon-width) * 0.8);
        will-change: transform;
      }
      .mini-icon {
        /* backface-visibility: hidden; */
        overflow: hidden;
      }

      .mousedown:not(.with-drag) {
        transform: scale(0.9);
      }
      @media not all and (hover: none) {
        .icon-content:not(.with-drag):hover {
          animation: blinking ease 2s infinite;
          box-shadow: none;
        }
      }

      @keyframes blinking {
        0% {
          -webkit-filter: drop-shadow(0px 0px 3px rgba(33, 150, 243, 0.72));
        }
        50% {
          -webkit-filter: drop-shadow(0px 0px 10px rgba(33, 150, 243, 0.72));
        }
        100% {
          -webkit-filter: drop-shadow(0px 0px 3px rgba(33, 150, 243, 0.72));
        }
      }

      .del {
        position: absolute;
        width: 2vmin;
        height: 2vmin;
        max-width: 20px;
        max-height: 20px;
        min-width: 10px;
        min-height: 10px;
        box-sizing: border-box;
        padding: 0.5vmin;
        background-color: hsla(0, 0%, 100%, 0.5);
        border-radius: 50%;
        right: calc(0.25 * var(--icon-radius));
        top: calc(0.25 * var(--icon-radius));
        transform: translate(40%, -40%) scale(1.1);
        display: flex;
        justify-content: center;
        align-items: center;
        transition: transform, background-color 0.3s;
        cursor: auto;
      }
      .del i-usesvg {
        top: 0;
        width: 100%;
        height: 100%;
      }
      .del:hover {
        transform: translate(40%, -40%) scale(1.2);
        background-color: hsla(0, 0%, 100%, 1);
      }

      .icon-content.editing:not(.folder) {
        animation: spin 0.3s ease infinite;
        animation-delay: 0.3s;
        will-change: transform;
      }
      .mousedown.editing:not(.with-drag) {
        animation: spinscale 0.2s ease;
        /* animation-fill-mode: backwards; */
        animation-fill-mode: forwards;
        /* animation:none; */
      }
      @keyframes spinscale {
        from {
          transform: scale(1);
        }
        to {
          transform: scale(0.9);
        }
      }

      .icon-content.editing .op {
        display: block !important;
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: var(--icon-radius);
      }
      .icon-content.weather-item .edit-icon-box {
        display: none !important;
      }
      i-usesvg {
        position: relative;
        top: -5px;
        width: 100%;
        height: 100%;
        color: #ff4e50;
      }
      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        20% {
          transform: rotate(-2deg);
        }
        60% {
          transform: rotate(0deg);
        }
        80% {
          transform: rotate(2deg);
        }
        100% {
          transform: rotate(0deg);
        }
      }

      .icon-name {
        transition: 0.2s color;
        user-select: none;
      }
      .edit-icon-box {
        width: 100%;
        height: 100%;
        border-radius: var(--icon-radius);
        overflow: hidden;
        transition: opacity 0.3s;
        background: rgba(255, 255, 255, 0.4);
        opacity: 0;
      }
      .edit-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 40%;
        height: 40%;
      }
      .edit-icon-box:hover {
        opacity: 1;
      }
      .with-drag:hover .edit-icon-box {
        opacity: 0;
      }
      .mobile-drag .edit-icon {
        opacity: 0 !important;
      }
      .icon-content.editing .red-tag {
        display: none;
      }

      .red-tag {
        /* backface-visibility: hidden; */
        display: block;
        position: absolute;
        right: calc(0.25 * var(--icon-radius));
        top: calc(0.25 * var(--icon-radius));
        transform: translate(40%, -40%);
        font-size: calc(var(--icon-width) * 0.15);
        padding: 0 calc(var(--icon-width) * 0.075);
        border-radius: calc(var(--icon-width) * 0.21);
        color: #fff;
        background-color: #ff4e50;
        line-height: 1;
        min-width: 12px;
        box-sizing: border-box;
        height: calc(var(--icon-width) * 0.21);
        min-height: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
      }
      .red-tag > span {
        line-height: 1;
        margin-top: -1px;
      }
      .folder-item .red-tag {
        transform: translate(40%, -40%) scale(0.8);
      }
      .mini-icon-padding .red-tag {
        right: calc(0.2 * var(--icon-radius) + var(--icon-width) * 0.03);
        top: calc(0.2 * var(--icon-radius) + var(--icon-width) * 0.03);
        transform: translateX(50%) translateY(-50%) scale(0.3);
        z-index: 11;
      }

      .shake-item {
        transform: scale(1.1);
        filter: drop-shadow(0 0 5px rgba(33, 150, 243, 0.72)) !important;
        /* animation-name: shake;
        animation-duration: 300ms;
        animation-timing-function: ease-in-out;
        animation-iteration-count: 1; */
      }
      .hover-item {
        transition: all 0.2s;
        transform: scale(1.1);
        filter: drop-shadow(0 0 5px rgba(33, 150, 243, 0.72)) !important;
      }
      img {
        user-select: none;
      }
    `}async firstUpdated(){this.menu=q.create()}delAmimation(){return new n.a(t=>{this.$icon.animate([{transform:"scale(1)",opacity:1},{transform:"scale(0.1)",opacity:0}],{duration:300,easing:"ease-in-out"}).onfinish=t,setTimeout(()=>{t(null)},300)})}async _delItem(t){var e,i;if(t.stopPropagation(),await this.delAmimation(),s.siteStore.delSites(this.indexs),3===this.indexs.length){const[t,o]=this.indexs,n=s.siteStore.sites[t][o];0===(null===(e=n.children)||void 0===e?void 0:e.length)?(B.closeFolder(),s.siteStore.delSites(this.indexs)):1===(null===(i=n.children)||void 0===i?void 0:i.length)&&(B.closeFolder(),s.siteStore.destroyFolder(this.indexs))}}_rightClick(t){if(t.stopPropagation(),t.preventDefault(),s.userStore.isLogin||!l.s){if(this.icon.children){const e={left:t.pageX,top:t.pageY};return this.menus[0].text=Object(Z.i18n)("open_all")+"("+this.icon.children.filter(t=>"web"===t.type).length+")",this.menu.toShow(this.menus,e),!1}this.menu.toHide(),B.changeIconEditing(!0)}else s.userStore.toggleLoginTipModal()}_clickIcon(t){t.stopPropagation(),this._handleClick(t)}_renderTag(t){return"infinity://gmail"===t.target?s.settingStore.setting.notice.gmailNumber&&Number(s.gmailStore.unreadEmailCount)?r.e` <div hidden class="red-tag">
            <span>${s.gmailStore.unreadEmailCount>99?"99+":s.gmailStore.unreadEmailCount}</span>
          </div>`:null:"infinity://todos"===t.target&&s.settingStore.setting.notice.todoNumber&&Number(s.todoStore.listLength)?r.e` <div hidden class="red-tag">
            <span>${s.todoStore.listLength>99?"99+":s.todoStore.listLength}</span>
          </div>`:null}render(){const{startMove:t,dragStage:e,dropTargetId:o,mobileDrag:n}=et;if(!this.icon)return;const{bgType:a,bgImage:l,bgColor:c,children:d,bgColorImage:p,id:h,target:u}=this.icon;let g="box-sizing: border-box;background-size: cover;--svg-radius:var(--icon-radius);";g+="background-repeat: no-repeat;background-position: center;border-radius: var(--icon-radius);",g+="display: flex;justify-content: center;align-items: center;",u===K.i.target?(g+=`background-color:${c||K.i.bgColor};`,g+="background-size: 60% 60%;",g+="will-change: transform;",g+=`background-image:url(${Object(it.c)(l||K.i.bgImage)});`):"image"===a?(g+=`background-color:${c||"transparent"};`,g+=`background-image:url(${Object(it.c)(l)});`):"color"===a&&p&&(g+=`background-color:${c||"transparent"};`,g+=`background-image:url(${Object(it.c)(p)});`),s.settingStore.setting.icon.shadow&&(g+="filter: drop-shadow(1px 1px 5px rgba(0, 0, 0, 0.2));"),d&&(g+="padding: var(--mini-icon-padding);background-color: hsla(0, 0%, 78.4%, 0.75);will-change:transform;");let f="visibility: var(--icon-visible);overflow: hidden;text-overflow: ellipsis;white-space: nowrap;text-align: center;margin: auto;margin-top: 8%;max-width: calc(var(--icon-box-width) / var(--icon-col) / 1.5);min-width: calc(var(--icon-font-size) * 3);font-size: var(--icon-font-size);height: calc(var(--icon-font-size) * 1.4);color: var(--icon-font-color);opacity: var(--icon-opacity);";return s.settingStore.setting.font.shadow&&(f+=" text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);"),this.isFolderItem?f+="width: calc(var(--icon-width) * 1.2);":f+="width: calc(var(--icon-width) * 1.5);",r.e`
      <div class="icon-item">
        <section
          class="${Object(Y.a)({editing:B.iconEditing,"with-drag":t,mousedown:this.mousedown,"icon-content":!0,"icon-drag":!0,folder:d&&d.length,"folder-item":this.isFolderItem,"weather-item":u===K.i.target,"shake-item":"merge"===e&&h===o,"hover-item":"hover"===e&&h===o,"mobile-drag":n})}"
          data-dragid="${h}"
          style="${g}"
          @contextmenu="${this._rightClick}"
          @mousedown="${this.onMousedown}"
          @touchstart="${this.onTouchStart}"
          @click="${this._clickIcon}"
          flipkey="${this.flipkey}"
        >
          ${"color"!==a||p||u===K.i.target?"":Object(ot.a)(Object(nt.a)(this.icon))}
          ${d?r.e` <div
                class="mini-icon-box"
                style="width: 100%;height: 100%;display:flex;flex-wrap: wrap;align-content: flex-start;"
              >
                ${d.map((t,e)=>{if(e>8)return null;const{bgType:i,bgImage:o,bgColor:n,bgColorImage:a,target:s}=t;let l="position: relative;width:100%;height:100%;opacity:0.8;background-size: cover;background-repeat: no-repeat;background-position: center;";return l+="border-radius: var(--icon-radius);",l+="text-align: center; justify-content: center;align-items: center;",s===K.i.target?(l+=`background-image:url(${Object(it.c)(o||K.i.bgImage)});`,l+=`background-color:${n||K.i.bgColor};background-size: 60% 60%;`):"image"===i?(l+=`background-color:${n||"transparent"};`,l+=`background-image:url(${Object(it.c)(o)});`):"color"===i&&(a?(l+=`background-color:${n||"transparent"};`,l+=`background-image:url(${Object(it.c)(a)});`):l+="overflow:hidden;"),r.e`<div
                    class="mini-icon-padding"
                    style="--svg-radius:var(--icon-radius);position: relative;width:33%;height:33%;box-sizing:border-box;padding:4%;flex-shrink:0;"
                  >
                    <div class="mini-icon" style="${l}">
                      ${"color"!==i||a||s===K.i.target?"":Object(ot.a)(Object(nt.a)(t))}
                    </div>
                    ${this._renderTag(t)}
                  </div>`})}
              </div>`:r.e`
                <div class="op" style="display:none">
                  <div class="edit-icon-box">
                    <img
                      @dragstart="${t=>{t.preventDefault()}}"
                      draggable="false"
                      class="edit-icon"
                      src="${i(676)}"
                      alt=""
                    />
                  </div>
                  <span
                    class="del"
                    @mousedown="${t=>{t.stopPropagation()}}"
                    @touchstart="${t=>{t.stopPropagation()}}"
                    @click="${this._delItem}"
                  >
                    <i-usesvg type="infinity-pro-pure-icon-close"></i-usesvg>
                  </span>
                </div>
                ${this._renderTag(this.icon)}
              `}
        </section>
        <section class="icon-name" style="${f}">${this.icon.name}</section>
      </div>
    `}};ct([Object(r.g)({type:Object})],dt.prototype,"icon",void 0),ct([Object(r.g)({type:Array})],dt.prototype,"indexs",void 0),ct([Object(r.g)({type:String})],dt.prototype,"flipkey",void 0),ct([Object(r.g)({type:Boolean})],dt.prototype,"mousedown",void 0),ct([Object(r.g)({type:Boolean})],dt.prototype,"isFolderItem",void 0),ct([Object(r.h)(".icon-content")],dt.prototype,"$icon",void 0),dt=ct([Object(r.c)("icon-content")],dt);var pt=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let ht=class extends a.a{constructor(){super(...arguments),this.icon=null,this.indexs=[],this.flipkey="",this.isFolderItem=!1}static get styles(){return r.b`
      :host {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        will-change: transform;
      }
      .icon {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .hide {
        opacity: 0;
      }
      .icon-holder {
        background-color: red;
      }
    `}render(){return r.e`<div class="icon ${et.startMove&&this.icon.id===et.dragId?"hide":""}">
      <icon-content
        flipkey="${this.flipkey}"
        .isFolderItem=${this.isFolderItem}
        .icon=${this.icon}
        .indexs=${this.indexs}
      ></icon-content>
    </div>`}};pt([Object(r.g)({type:Object})],ht.prototype,"icon",void 0),pt([Object(r.g)({type:Array,hasChanged(t,e){if(t===e)return!1;if(t&&e&&Array.isArray(t)){if(t.every((t,i)=>t===e[i]))return!1}return!0}})],ht.prototype,"indexs",void 0),pt([Object(r.g)({type:String})],ht.prototype,"flipkey",void 0),pt([Object(r.g)({type:Boolean})],ht.prototype,"isFolderItem",void 0),ht=pt([Object(r.c)("icon-box")],ht);var ut=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let gt=class extends a.a{constructor(){super(...arguments),this.flipping=null,this.folderName=""}firstUpdated(){this.$foldername.addEventListener("keydown",t=>{if("Enter"===t.key)return t.stopPropagation(),t.preventDefault(),this.$foldername.blur(),!1}),this.$foldername.addEventListener("blur",t=>{const e=t.target.value;s.siteStore.changeFolderName(B.folderIndexs,e)}),this.flipping=new Q({root:this.$iconbox}),this.flipping.read()}update(t){this.flipping&&(B.changeFlipStatus(!0),this.flipping.read()),super.update(t)}updated(){var t;B.folderFlipData&&(this.$mask.animate([{opacity:"0"},{opacity:"1"}],{duration:window.__ANIMATION__.aniFolderBgTime,easing:window.__ANIMATION__.aniFolderBgFn}),this.$body.animate([{opacity:"0",transform:"scale(0.5)"},{opacity:"1",transform:"none"}],{duration:window.__ANIMATION__.aniFolderTime,easing:window.__ANIMATION__.aniFolderFn}),B.changeFolderFlipData(null),this.folderName=null===(t=B.folderItem)||void 0===t?void 0:t.name),this.flipping.play().then(()=>{B.changeFlipStatus(!1)}),B.focusName&&(this.focusName(),B.changeFocusStatus(!1))}close(){this.$foldername.blur(),B.closeFolder()}clickMask(t){t.stopPropagation(),document.querySelector("i-menu").toHide(),this.close()}_renderIcons(){if(!B.folderStatus)return null;const{children:t}=B.folderItem;return t?r.e` ${t.map((t,e)=>r.e`<icon-box
        class="icon-drop"
        data-dropid="${t.id}"
        .icon=${t}
        .isFolderItem=${!0}
        .indexs="${[...B.folderIndexs,e]}"
        flipkey="${t.id}"
      ></icon-box>`)}`:(B.closeFolder(),null)}_changeFolderName(t){const e=t.target.value;e.length>80&&(t.target.value=e.slice(0,80),s.siteStore.changeFolderName(B.folderIndexs,e.slice(0,80))),this.folderName=t.target.value}focusName(){this.shadowRoot.querySelector(".folder-name").focus()}render(){B.folderStatus?this.style.display="":this.style.display="none";const{name:t="",id:e=""}=B.folderItem||{};return r.e`
      <section @click="${this.clickMask}}" @contextmenu="${c.a.stopShowMenu}" class="mask"></section>
      <section class="icon-folder">
        <div class="name-box">
          <span class="folder-name-holder">${this.folderName}</span>
          <input type="text" @input="${this._changeFolderName}" class="folder-name" .value="${t}" />
        </div>
        <div class="icon-box-wrap" flipkey="${e}">
          <div
            style="
            margin: 10px 0;
            box-sizing: border-box;
            padding: calc(var(--icon-width) * 0.283);
            min-height: 100px;
            max-height: calc(100vh - 250px);
            "
            class="global-scrollbar"
          >
            <div class="icon-box icon-drop" data-dropid="end">${this._renderIcons()}</div>
          </div>
        </div>
      </section>
    `}};gt.styles=[A.a,r.b`
      :host {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        bottom: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      .mask {
        position: absolute;
        z-index: 2;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.7);
      }
      .icon-folder {
        margin-top: -3.5%;
        z-index: 2;
        position: fixed;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        pointer-events: none;
      }
      .name-box {
        position: relative;
        text-align: center;
        margin-bottom: 20px;
        pointer-events: all;
        min-height: 36px;
        box-sizing: border-box;
        height: calc(2.8vmin + 24px);
      }
      .folder-name-holder {
        opacity: 0;
        display: inline-block;
        min-width: 100px;
        max-width: 1000px;
        font-size: 2.8vmin;
        padding: 12px 40px;
        min-height: 36px;
        box-sizing: border-box;
        height: calc(2.8vmin + 24px);
        min-height: 36px;
        line-height: 1;
        word-break: keep-all;
        white-space: pre-wrap;
      }
      .folder-name {
        display: inline-block;
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        box-sizing: border-box;
        font-size: 2.8vmin;
        padding: 12px 10px;
        color: rgb(255, 255, 255);
        background: transparent;
        border-radius: 4px;
        border: none;
        outline: none;
        line-height: 1;
        text-align: center;
        transition-duration: 0.2s;
        transition-timing-function: ease;
        transition-property: background-color;
        color: var(--icon-font-color);
      }
      .folder-name:hover {
        background-color: hsla(0, 0%, 78.4%, 0.2);
      }
      .folder-name:focus {
        outline: none;
        border: none;
        background-color: hsla(0, 0%, 78.4%, 0.2);
      }
      .icon-box-wrap {
        min-width: 400px;
        max-width: 80vw;
        width: calc(var(--icon-box-width) * 0.8);
        border-radius: 4px;
        background-color: hsla(0, 0%, 78.4%, 0.75);
        pointer-events: all;
        box-shadow: 0 calc(var(--main-ratio) * 2px) calc(var(--main-ratio) * 4px) rgba(0, 0, 0, 0.2);
      }
      .icon-box icon-box {
        height: calc(var(--icon-one-height) * 0.8);
      }
      .icon-box {
        display: grid;
        grid-template-columns: repeat(var(--icon-col), calc(100% / var(--icon-col)));
        row-gap: 20px;

        align-items: center;
        justify-items: center;
      }
    `],ut([Object(r.h)(".mask")],gt.prototype,"$mask",void 0),ut([Object(r.h)(".icon-folder")],gt.prototype,"$body",void 0),ut([Object(r.h)(".icon-box")],gt.prototype,"$iconbox",void 0),ut([Object(r.h)(".folder-name")],gt.prototype,"$foldername",void 0),ut([Object(r.f)()],gt.prototype,"folderName",void 0),gt=ut([Object(r.c)("icon-folder")],gt);i(64);var ft=r.b`[hidden] {
  display: none !important;
}
ul {
  list-style: none;
  margin: 0;
  padding: 0;
}
button,
input {
  margin: 0;
  padding: 0;
  border: none;
  outline: none;
  line-height: 1;
}
input[type='search']::-webkit-search-cancel-button {
  -webkit-appearance: none;
  display: none;
}
button {
  cursor: pointer;
}
.show-up {
  z-index: 11;
}
.newtab-search {
  width: var(--search-width);
  min-width: 200px;
  max-width: 80vw;
  min-height: 50px;
  margin-bottom: var(--search-margin-bottom);
}
.minimode.newtab-search {
  margin-bottom: 0;
}
.search-type {
  display: flex;
  flex-direction: row;
  margin-bottom: calc(var(--search-height) * 0.388);
  margin-left: calc(var(--search-height) * 0.273);
}
.search-type-item {
  font-weight: 300;
  font-size: calc(var(--search-height) * 0.288);
  margin-right: calc(var(--search-height) * 0.91);
  color: var(--icon-font-color);
  opacity: 0.5;
  cursor: pointer;
  transition-property: color, text-shadow;
  transition-duration: 0.2s;
  transition-timing-function: ease;
}
.search-type-item:hover {
  opacity: 0.75;
}
.search-type-item.active {
  opacity: 1;
}
.search-card {
  position: relative;
  height: var(--search-height);
  min-height: 20px;
  width: 100%;
  display: flex;
  align-items: center;
  flex-direction: row;
  overflow: hidden;
  border-radius: calc(var(--search-height) * var(--search-radius));
  opacity: var(--search-opacity);
}
.search-card.shadow {
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.16), 0 0 0 1px rgba(0, 0, 0, 0.08);
}
.search-card:focus-within {
  opacity: 1;
}
.search-card-engine {
  width: calc(var(--search-height) * 1.091);
  min-width: 22px;
  height: 100%;
  flex-shrink: 0;
  flex-grow: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #fff;
  color: #cccccc;
  border-radius: 0;
  transition-duration: 0.2s;
  transition-timing-function: ease;
  transition-property: background-color;
}
.search-card-engine:hover {
  background-color: #eee;
}
.search-card-engine .search-icon-img,
.search-card-engine .search-icon {
  border-radius: 4px;
  width: calc(var(--search-height) * 0.485);
  height: calc(var(--search-height) * 0.485);
  margin-right: calc(var(--search-height) * 0.1);
  object-fit: cover;
}
.search-card-engine .search-icon {
  margin-bottom: 0;
}
.icon-down {
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 7px 4px 0;
  transform: scale(var(--search-ratio));
  border-color: #cccccc transparent transparent transparent;
}
.search-input-box {
  flex-grow: 1;
  flex-shrink: 1;
  height: 100%;
  position: relative;
  display: flex;
}
.search-card-input {
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  background-color: #fff;
  border-radius: 0;
  font-weight: 300;
  padding-left: calc(var(--search-height) * 0.155);
  padding-right: 2.5em;
  font-size: calc(var(--search-height) * 0.304);
  color: #333;
}
.search-card-input:not(:placeholder-shown) + .search-input-clear {
  opacity: 1;
  pointer-events: auto;
  cursor: pointer;
}
.search-card-input::placeholder {
  color: #999;
  font-size: calc(var(--search-height) * 0.304);
  font-weight: 300;
}
.search-input-clear {
  font-size: calc(var(--search-height) * 0.304);
  position: absolute;
  right: 1.5em;
  top: 50%;
  transform: translateY(-50%);
  color: #999;
  height: 1em;
  width: 1em;
  opacity: 0;
  pointer-events: none;
  transition: color 0.2s, opacity 0.2s;
}
.search-input-clear:hover {
  color: #333;
}
.search-card-btn {
  position: relative;
  width: calc(var(--search-height) * 1.136);
  min-width: 20px;
  height: 100%;
  flex-shrink: 0;
  flex-grow: 0;
  background-color: var(--search-btn-bgcolor);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
}
.icon-search {
  width: calc(var(--search-height) * 0.454);
  height: calc(var(--search-height) * 0.454);
}
.shortcut-list-ul {
  display: flex;
  flex-wrap: wrap;
  overflow: hidden;
}
.shortcut-list-ul-box {
  max-height: 100%;
}
.shortcut-list {
  position: absolute;
  margin-top: calc(var(--search-height) * 0.155);
  width: var(--search-width);
  overflow: hidden;
  border-radius: calc(var(--search-height) * var(--search-radius));
  background-color: #fff;
  transition-property: opacity;
  transition-duration: 300ms;
  transition-timing-function: ease;
}
.shortcut-list.hide {
  height: 0;
  opacity: 0;
  pointer-events: none;
}
.shortcut-list.hide .shortcut-list-ul-box {
  overflow: hidden;
}
.shortcut-list.show {
  height: auto;
  opacity: 1;
  pointer-events: auto;
}
.shortcut-list.show .shortcut-list-ul-box {
  overflow: auto;
}
.search-icon {
  width: calc(var(--search-height) * 0.543);
  height: calc(var(--search-height) * 0.543);
  margin-bottom: calc(var(--search-height) * 0.18);
  box-sizing: border-box;
  border-radius: 4px;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}
.search-icon .bg-text {
  display: flex;
  justify-content: center;
  overflow: hidden;
  color: #fff;
  white-space: nowrap;
}
.drag-fake-wrapper {
  position: absolute;
  z-index: 9999;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  pointer-events: none;
}
.drag-fake-wrapper.hide {
  display: none !important;
}
.has-drag .force-default {
  opacity: 0.4;
}
.has-drag .del-shortcut {
  display: none !important;
}
.shortcut-item {
  position: relative;
  width: calc(100% / 6);
  min-height: 40px;
  padding: calc(var(--search-height) * 0.31) 4px calc(var(--search-height) * 0.22);
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: center;
  border-right: 1px solid #f3f3f3;
  border-bottom: 1px solid #f3f3f3;
  overflow: hidden;
  cursor: pointer;
}
.shortcut-item:hover {
  background-color: #f3f3f3;
}
.shortcut-item:hover .del-shortcut:not(.hide) {
  display: block;
}
.shortcut-item.fake .del-shortcut {
  display: none !important;
}
.shortcut-item.dragd {
  opacity: 0.7;
}
.shortcut-item img {
  width: calc(var(--search-height) * 0.543);
  height: calc(var(--search-height) * 0.543);
  margin-bottom: calc(var(--search-height) * 0.18);
  object-fit: cover;
}
.shortcut-item .name {
  width: 100%;
  color: #5c5c5c;
  font-size: calc(var(--search-height) * 0.233);
  font-weight: 200;
  word-break: break-all;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  text-align: center;
}
.shortcut-item i-usesvg {
  color: #5c5c5c;
  width: calc(var(--search-height) * 0.543);
  height: calc(var(--search-height) * 0.543);
  transform: scale(0.6);
}
.del-shortcut {
  position: absolute;
  top: calc(var(--search-height) * -0.528);
  right: calc(var(--search-height) * -0.528);
  width: calc(var(--search-height) * 1.057);
  height: calc(var(--search-height) * 1.057);
  border-radius: 50%;
  background-color: #fff;
  background: rgba(0, 0, 0, 0.04);
  display: none;
}
.del-shortcut i-usesvg {
  color: #b6b6b6;
  position: absolute;
  width: calc(var(--search-height) * 0.317);
  height: calc(var(--search-height) * 0.317);
  left: calc(var(--search-height) * 0.176);
  bottom: calc(var(--search-height) * 0.176);
}
.search-suggest {
  position: absolute;
  margin-top: calc(var(--search-height) * 0.155);
  border-radius: calc(var(--search-height) * var(--search-radius));
  min-width: 200px;
  max-width: 80vw;
  width: var(--search-width);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background-color: #fff;
  box-shadow: 0px 4px 19px 0px rgba(0, 0, 0, 0.12);
}
.search-suggest.hide {
  height: 0;
  opacity: 0;
  pointer-events: none;
}
.search-suggest.hide .search-suggest-list-ul {
  overflow: hidden;
}
.search-suggest.show {
  height: auto;
  opacity: 1;
  pointer-events: auto;
}
.search-suggest.show .search-suggest-list-ul {
  overflow: auto;
}
.search-icon-img {
  border-radius: 4px;
}
.suggest-item {
  flex-shrink: 0;
  height: calc(var(--search-height) * 0.705);
  min-height: 20px;
  display: flex;
  align-items: center;
  background-color: #fff;
  transition-property: background-color;
  transition-duration: 200ms;
  transition-timing-function: ease;
  cursor: pointer;
  font-size: calc(var(--search-height) * 0.247);
  color: #666;
  box-sizing: border-box;
}
.suggest-item .icon-box {
  width: calc(var(--search-height) * 1.234);
  min-width: 30px;
  flex-shrink: 0;
  flex-grow: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
.suggest-item .icon-box .search-icon {
  width: calc(var(--search-height) * 0.423);
  height: calc(var(--search-height) * 0.423);
  border-radius: 50%;
  margin-bottom: 0;
}
.suggest-item .icon-box .search-icon-img {
  width: calc(var(--search-height) * 0.423);
  height: calc(var(--search-height) * 0.423);
  border-radius: 50%;
}
.suggest-item .icon-box .search-icon-img svg {
  border-radius: 50% !important;
}
.suggest-item .name {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  padding-right: 10px;
}
.suggest-item .name.add {
  color: #ff4e50;
}
.suggest-item:hover,
.suggest-item.active {
  background-color: #e6e6e6;
}
.suggest-tips {
  padding: 24px;
  box-sizing: border-box;
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.05);
}
.suggest-tips.hide {
  display: none;
}
.suggest-tips:focus {
  outline: none;
  border: none;
}
.suggest-tips-title {
  height: 26px;
  font-size: 16px;
  font-weight: 500;
  color: #333333;
  line-height: 26px;
}
.suggest-tips-body {
  margin-top: 4px;
  margin-bottom: 8px;
  font-size: 14px;
  font-weight: 400;
  color: #656565;
  line-height: 20px;
}
.sugges-btns {
  display: flex;
  justify-content: flex-end;
  padding-bottom: 4px;
}
.sugges-btns .btn {
  margin-left: 14px;
  widows: 100px;
}
`,mt=i(23),bt=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let yt=class extends r.a{constructor(){super(...arguments),this.zIndex=11,this.show=!1,this.box=null}clickModal(t){if(t.composedPath()[0]===this.box){const t=new CustomEvent("close",{detail:{message:""}});this.dispatchEvent(t)}}firstUpdated(){this.box=this.shadowRoot.querySelector(".i-mask")}render(){return r.e`
      <div
        @contextmenu="${c.a.stopShowMenu}"
        class="i-mask ${this.show?"show":"hide"}"
        @click="${this.clickModal}"
        style="z-index:${this.zIndex}"
      >
        <slot></slot>
      </div>
    `}};yt.styles=r.b`
    .i-mask {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.7);
      transition-property: opacity;
      transition-duration: 300ms;
      transition-timing-function: ease;
    }
    .hide {
      opacity: 0;
      pointer-events: none;
    }
    .show {
      opacity: 1;
      pointer-events: auto;
    }
  `,bt([Object(r.g)({type:Number})],yt.prototype,"zIndex",void 0),bt([Object(r.g)({type:Boolean})],yt.prototype,"show",void 0),yt=bt([Object(r.c)("i-mask")],yt);var vt=i(496),wt=function(t,e){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function xt(t,e){function i(){this.constructor=t}wt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function _t(t){return"function"==typeof t}var kt=!1,Ot={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;kt=t},get useDeprecatedSynchronousErrorHandling(){return kt}};function At(t){setTimeout((function(){throw t}),0)}var St={closed:!0,next:function(t){},error:function(t){if(Ot.useDeprecatedSynchronousErrorHandling)throw t;At(t)},complete:function(){}},It=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function jt(t){return null!==t&&"object"==typeof t}var $t=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),Ct=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var i=this._parentOrParents,o=this._ctorUnsubscribe,n=this._unsubscribe,r=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,i instanceof t)i.remove(this);else if(null!==i)for(var a=0;a<i.length;++a){i[a].remove(this)}if(_t(n)){o&&(this._unsubscribe=void 0);try{n.call(this)}catch(t){e=t instanceof $t?Et(t.errors):[t]}}if(It(r)){a=-1;for(var s=r.length;++a<s;){var l=r[a];if(jt(l))try{l.unsubscribe()}catch(t){e=e||[],t instanceof $t?e=e.concat(Et(t.errors)):e.push(t)}}}if(e)throw new $t(e)}},t.prototype.add=function(e){var i=e;if(!e)return t.EMPTY;switch(typeof e){case"function":i=new t(e);case"object":if(i===this||i.closed||"function"!=typeof i.unsubscribe)return i;if(this.closed)return i.unsubscribe(),i;if(!(i instanceof t)){var o=i;(i=new t)._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var n=i._parentOrParents;if(null===n)i._parentOrParents=this;else if(n instanceof t){if(n===this)return i;i._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return i;n.push(this)}var r=this._subscriptions;return null===r?this._subscriptions=[i]:r.push(i),i},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function Et(t){return t.reduce((function(t,e){return t.concat(e instanceof $t?e.errors:e)}),[])}var Tt=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Pt=function(t){function e(i,o,n){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=St;break;case 1:if(!i){r.destination=St;break}if("object"==typeof i){i instanceof e?(r.syncErrorThrowable=i.syncErrorThrowable,r.destination=i,i.add(r)):(r.syncErrorThrowable=!0,r.destination=new Rt(r,i));break}default:r.syncErrorThrowable=!0,r.destination=new Rt(r,i,o,n)}return r}return xt(e,t),e.prototype[Tt]=function(){return this},e.create=function(t,i,o){var n=new e(t,i,o);return n.syncErrorThrowable=!1,n},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Ct),Rt=function(t){function e(e,i,o,n){var r,a=t.call(this)||this;a._parentSubscriber=e;var s=a;return _t(i)?r=i:i&&(r=i.next,o=i.error,n=i.complete,i!==St&&(_t((s=Object.create(i)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=r,a._error=o,a._complete=n,a}return xt(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;Ot.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,i=Ot.useDeprecatedSynchronousErrorHandling;if(this._error)i&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)i?(e.syncErrorValue=t,e.syncErrorThrown=!0):At(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;At(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};Ot.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,i),this.unsubscribe()):(this.__tryOrUnsub(i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),Ot.useDeprecatedSynchronousErrorHandling)throw t;At(t)}},e.prototype.__tryOrSetError=function(t,e,i){if(!Ot.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,i)}catch(e){return Ot.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(At(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(Pt);var Lt=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Dt(t){return t}function Mt(t){return 0===t.length?Dt:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var Ut=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var o=this.operator,n=function(t,e,i){if(t){if(t instanceof Pt)return t;if(t[Tt])return t[Tt]()}return t||e||i?new Pt(t,e,i):new Pt(St)}(t,e,i);if(o?n.add(o.call(n,this.source)):n.add(this.source||Ot.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),Ot.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Ot.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,i=e.closed,o=e.destination,n=e.isStopped;if(i||n)return!1;t=o&&o instanceof Pt?o:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=Nt(e))((function(e,o){var n;n=i.subscribe((function(e){try{t(e)}catch(t){o(t),n&&n.unsubscribe()}}),o,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[Lt]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Mt(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=Nt(t))((function(t,i){var o;e.subscribe((function(t){return o=t}),(function(t){return i(t)}),(function(){return t(o)}))}))},t.create=function(e){return new t(e)},t}();function Nt(t){if(t||(t=Ot.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function Bt(t,e){return function(i){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return i.lift(new Ft(t,e))}}var Ft=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new zt(t,this.project,this.thisArg))},t}(),zt=function(t){function e(e,i,o){var n=t.call(this,e)||this;return n.project=i,n.count=0,n.thisArg=o||n,n}return xt(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Pt);function Ht(t,e,i,o){return _t(i)&&(o=i,i=void 0),o?Ht(t,e,i).pipe(Bt((function(t){return It(t)?o.apply(void 0,t):o(t)}))):new Ut((function(o){!function t(e,i,o,n,r){var a;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var s=e;e.addEventListener(i,o,r),a=function(){return s.removeEventListener(i,o,r)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var l=e;e.on(i,o),a=function(){return l.off(i,o)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(i,o),a=function(){return c.removeListener(i,o)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var d=0,p=e.length;d<p;d++)t(e[d],i,o,n,r)}n.add(a)}(t,e,(function(t){arguments.length>1?o.next(Array.prototype.slice.call(arguments)):o.next(t)}),o,i)}))}function Wt(t){return t&&"function"==typeof t.schedule}var qt=function(t){return function(e){for(var i=0,o=t.length;i<o&&!e.closed;i++)e.next(t[i]);e.complete()}};function Gt(t,e){return new Ut((function(i){var o=new Ct,n=0;return o.add(e.schedule((function(){n!==t.length?(i.next(t[n++]),i.closed||o.add(this.schedule())):i.complete()}))),o}))}function Vt(t,e){return e?Gt(t,e):new Ut(qt(t))}function Qt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[t.length-1];return Wt(i)?(t.pop(),Gt(t,i)):Vt(t)}function Yt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Xt=Yt(),Zt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Kt(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var Jt=function(t){if(t&&"function"==typeof t[Lt])return o=t,function(t){var e=o[Lt]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Zt(t))return qt(t);if(Kt(t))return i=t,function(t){return i.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,At),t};if(t&&"function"==typeof t[Xt])return e=t,function(t){for(var i=e[Xt]();;){var o=void 0;try{o=i.next()}catch(e){return t.error(e),t}if(o.done){t.complete();break}if(t.next(o.value),t.closed)break}return"function"==typeof i.return&&t.add((function(){i.return&&i.return()})),t};var e,i,o,n=jt(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+n+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function te(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[Lt]}(t))return function(t,e){return new Ut((function(i){var o=new Ct;return o.add(e.schedule((function(){var n=t[Lt]();o.add(n.subscribe({next:function(t){o.add(e.schedule((function(){return i.next(t)})))},error:function(t){o.add(e.schedule((function(){return i.error(t)})))},complete:function(){o.add(e.schedule((function(){return i.complete()})))}}))}))),o}))}(t,e);if(Kt(t))return function(t,e){return new Ut((function(i){var o=new Ct;return o.add(e.schedule((function(){return t.then((function(t){o.add(e.schedule((function(){i.next(t),o.add(e.schedule((function(){return i.complete()})))})))}),(function(t){o.add(e.schedule((function(){return i.error(t)})))}))}))),o}))}(t,e);if(Zt(t))return Gt(t,e);if(function(t){return t&&"function"==typeof t[Xt]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ut((function(i){var o,n=new Ct;return n.add((function(){o&&"function"==typeof o.return&&o.return()})),n.add(e.schedule((function(){o=t[Xt](),n.add(e.schedule((function(){if(!i.closed){var t,e;try{var n=o.next();t=n.value,e=n.done}catch(t){return void i.error(t)}e?i.complete():(i.next(t),this.schedule())}})))}))),n}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function ee(t,e){return e?te(t,e):t instanceof Ut?t:new Ut(Jt(t))}var ie=function(t){function e(e){var i=t.call(this)||this;return i.parent=e,i}return xt(e,t),e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(Pt),oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xt(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(Pt);function ne(t,e){if(!e.closed){if(t instanceof Ut)return t.subscribe(e);var i;try{i=Jt(t)(e)}catch(t){e.error(t)}return i}}function re(t,e,i){return void 0===i&&(i=Number.POSITIVE_INFINITY),"function"==typeof e?function(o){return o.pipe(re((function(i,o){return ee(t(i,o)).pipe(Bt((function(t,n){return e(i,t,o,n)})))}),i))}:("number"==typeof e&&(i=e),function(e){return e.lift(new ae(t,i))})}var ae=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new se(t,this.project,this.concurrent))},t}(),se=function(t){function e(e,i,o){void 0===o&&(o=Number.POSITIVE_INFINITY);var n=t.call(this,e)||this;return n.project=i,n.concurrent=o,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return xt(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new ie(this),i=this.destination;i.add(e);var o=ne(t,e);o!==e&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(oe);function le(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),re(Dt,t)}function ce(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=Number.POSITIVE_INFINITY,o=null,n=t[t.length-1];return Wt(n)?(o=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(i=t.pop())):"number"==typeof n&&(i=t.pop()),null===o&&1===t.length&&t[0]instanceof Ut?t[0]:le(i)(Vt(t,o))}var de=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.scheduler=e,o.work=i,o.pending=!1,o}return xt(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(o,this.id,e),this},e.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var i=!1,o=void 0;try{this.work(t)}catch(t){i=!0,o=!!t&&t||new Error(t)}if(i)return this.unsubscribe(),o},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,i=e.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&i.splice(o,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,i){return t.call(this)||this}return xt(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(Ct)),pe=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.scheduler=e,o.work=i,o}return xt(e,t),e.prototype.requestAsyncId=function(e,i,o){return void 0===o&&(o=0),null!==o&&o>0?t.prototype.requestAsyncId.call(this,e,i,o):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame((function(){return e.flush(null)}))))},e.prototype.recycleAsyncId=function(e,i,o){if(void 0===o&&(o=0),null!==o&&o>0||null===o&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,i,o);0===e.actions.length&&(cancelAnimationFrame(i),e.scheduled=void 0)},e}(de),he=function(){function t(e,i){void 0===i&&(i=t.now),this.SchedulerAction=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(i,e)},t.now=function(){return Date.now()},t}(),ue=function(t){function e(i,o){void 0===o&&(o=he.now);var n=t.call(this,i,(function(){return e.delegate&&e.delegate!==n?e.delegate.now():o()}))||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return xt(e,t),e.prototype.schedule=function(i,o,n){return void 0===o&&(o=0),e.delegate&&e.delegate!==this?e.delegate.schedule(i,o,n):t.prototype.schedule.call(this,i,o,n)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},e}(he),ge=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xt(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,i=this.actions,o=-1,n=i.length;t=t||i.shift();do{if(e=t.execute(t.state,t.delay))break}while(++o<n&&(t=i.shift()));if(this.active=!1,e){for(;++o<n&&(t=i.shift());)t.unsubscribe();throw e}},e}(ue))(pe);function fe(t,e){return function(i){return i.lift(new me(t,e))}}var me=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new be(t,this.predicate,this.thisArg))},t}(),be=function(t){function e(e,i,o){var n=t.call(this,e)||this;return n.predicate=i,n.thisArg=o,n.count=0,n}return xt(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(Pt);function ye(t,e){return"function"==typeof e?function(i){return i.pipe(ye((function(i,o){return ee(t(i,o)).pipe(Bt((function(t,n){return e(i,t,o,n)})))})))}:function(e){return e.lift(new ve(t))}}var ve=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new we(t,this.project))},t}(),we=function(t){function e(e,i){var o=t.call(this,e)||this;return o.project=i,o.index=0,o}return xt(e,t),e.prototype._next=function(t){var e,i=this.index++;try{e=this.project(t,i)}catch(t){return void this.destination.error(t)}this._innerSub(e)},e.prototype._innerSub=function(t){var e=this.innerSubscription;e&&e.unsubscribe();var i=new ie(this),o=this.destination;o.add(i),this.innerSubscription=ne(t,i),this.innerSubscription!==i&&o.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t){this.destination.next(t)},e}(oe);function xe(t){return function(e){return e.lift(new _e(t))}}var _e=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var i=new ke(t),o=ne(this.notifier,new ie(i));return o&&!i.seenValue?(i.add(o),e.subscribe(i)):i},t}(),ke=function(t){function e(e){var i=t.call(this,e)||this;return i.seenValue=!1,i}return xt(e,t),e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(oe),Oe=new ue(de),Ae={leading:!0,trailing:!1};function Se(t,e,i){return void 0===e&&(e=Oe),void 0===i&&(i=Ae),function(o){return o.lift(new Ie(t,e,i.leading,i.trailing))}}var Ie=function(){function t(t,e,i,o){this.duration=t,this.scheduler=e,this.leading=i,this.trailing=o}return t.prototype.call=function(t,e){return e.subscribe(new je(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),je=function(t){function e(e,i,o,n,r){var a=t.call(this,e)||this;return a.duration=i,a.scheduler=o,a.leading=n,a.trailing=r,a._hasTrailingValue=!1,a._trailingValue=null,a}return xt(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule($e,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(Pt);function $e(t){t.subscriber.clearThrottle()}var Ce=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}(),Ee=new Ut((function(t){return t.complete()}));function Te(t){return t?function(t){return new Ut((function(e){return t.schedule((function(){return e.complete()}))}))}(t):Ee}function Pe(t){return function(e){return 0===t?Te():e.lift(new Re(t))}}var Re=function(){function t(t){if(this.total=t,this.total<0)throw new Ce}return t.prototype.call=function(t,e){return e.subscribe(new Le(t,this.total))},t}(),Le=function(t){function e(e,i){var o=t.call(this,e)||this;return o.total=i,o.count=0,o}return xt(e,t),e.prototype._next=function(t){var e=this.total,i=++this.count;i<=e&&(this.destination.next(t),i===e&&(this.destination.complete(),this.unsubscribe()))},e}(Pt);const De=(t,e,i)=>{var o;for(let n=0;n<t.length;n++){const r=t[n];if(null===(o=r.matches)||void 0===o?void 0:o.call(r,e))return r;if(r===i)return null}return null},Me=(t,e,i,o)=>{let n=t,r=9;for(;n&&r&&(r--,!(n instanceof Document))&&!(n instanceof ShadowRoot);)n=n.parentNode;return((t,e)=>{var i,o;let n=9;if(null===(i=null==t?void 0:t.matches)||void 0===i?void 0:i.call(t,e))return t;for(;n&&t;)if(n--,null===(o=null==(t=t.parentElement)?void 0:t.matches)||void 0===o?void 0:o.call(t,e))return t;return null})(n.elementFromPoint(i,o),e)},Ue=t=>{t.stopPropagation(),window.removeEventListener("click",Ue,!0)},Ne=()=>{window.addEventListener("click",Ue,!0),setTimeout(()=>{document.body.click()},0)},Be=(t,e)=>Math.max(Math.abs(t.x-e.x),Math.abs(t.y-e.y));class Fe{constructor(t){this.dragElement=null,this.startMove=!1,this.option=t,this.init()}init(){const{dragRoot:t,dragSelector:e,dropRoot:i=document.body,dropSelector:o="",dropLine:n=null,dropPointShadowRoot:r,moveDistanceLimit:a=4}=this.option;this.option.dropPointShadowRoot=r||i;const s=Ht(document,"mouseup"),l=Ht(document,"mousemove"),c=Ht(t,"mousedown").pipe(Bt(t=>{const e=t.composedPath();return{event:t,path:e}})).pipe(Bt(({event:i,path:o})=>({event:i,dragElement:De(o,e,t)})),fe(({dragElement:t,event:e})=>{if(0===e.button&&null!==t)return!0}),Bt(({event:t,dragElement:e})=>{const i={type:"dragStart",payload:{x:t.clientX,y:t.clientY,dragElement:e}};return this.dragElement=e,this.startMove=!1,i})).pipe(ye(t=>Qt(t,Object.assign(Object.assign({},t),{fork:"forDrop"}),Object.assign(Object.assign({},t),{fork:"forMove"}))),re(t=>{if("forMove"===t.fork)return ce(l.pipe(xe(s),Se(0,ge),Bt(e=>{if(!this.startMove){Be(t.payload,{x:e.clientX,y:e.clientY})>a&&(this.startMove=!0)}return{type:"dragMove",payload:{x:e.clientX,y:e.clientY,startMove:this.startMove,dragElement:this.dragElement}}})),s.pipe(Bt(t=>{const e={type:"dragEnd",payload:{x:t.clientX,y:t.clientY,dragElement:this.dragElement,startMove:this.startMove}};return this.startMove&&Ne(),this.dragElement=null,this.startMove=!1,e}),Pe(1)));if("forDrop"===t.fork){const{x:e,y:r}=t.payload;return(n?l:Ht(i,"mousemove")).pipe(xe(s),Se(20),Bt(t=>{if(!o)return{event:t,target:document.body};if(n){let i=t.clientX,a=t.clientY;"x"===n?a=r:"y"===n&&(i=e);return{event:t,target:Me(this.option.dropPointShadowRoot,o,i,a)}}{const e=De(t.composedPath(),o,i);return{event:t,target:e}}}),fe(({target:t})=>!!t),Bt(({target:t,event:e})=>({type:"drop",payload:{x:e.clientX,y:e.clientY,dragElement:this.dragElement,dropElement:t}})))}return Qt(t)}));this.drag$=c}subscribe(t){this.subscription&&this.subscription.unsubscribe(),this.subscription=this.drag$.subscribe(t)}updateOption(t){this.option=Object.assign(Object.assign({},this.option),t)}}function ze(t){var e=t.error;t.subscriber.error(e)}var He;He||(He={});var We=function(){function t(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}},t.prototype.accept=function(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)},t.prototype.toObservable=function(){var t,e;switch(this.kind){case"N":return Qt(this.value);case"E":return t=this.error,new Ut(e?function(i){return e.schedule(ze,0,{error:t,subscriber:i})}:function(e){return e.error(t)});case"C":return Te()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();function qe(t,e){void 0===e&&(e=Oe);var i,o=(i=t)instanceof Date&&!isNaN(+i)?+t-e.now():Math.abs(t);return function(t){return t.lift(new Ge(o,e))}}var Ge=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new Ve(t,this.delay,this.scheduler))},t}(),Ve=function(t){function e(e,i,o){var n=t.call(this,e)||this;return n.delay=i,n.scheduler=o,n.queue=[],n.active=!1,n.errored=!1,n}return xt(e,t),e.dispatch=function(t){for(var e=t.source,i=e.queue,o=t.scheduler,n=t.destination;i.length>0&&i[0].time-o.now()<=0;)i.shift().notification.observe(n);if(i.length>0){var r=Math.max(0,i[0].time-o.now());this.schedule(t,r)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,i=new Qe(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(We.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(We.createComplete()),this.unsubscribe()},e}(Pt),Qe=function(){return function(t,e){this.time=t,this.notification=e}}();var Ye=function(){function t(t,e,i){void 0===i&&(i=!1),this.accumulator=t,this.seed=e,this.hasSeed=i}return t.prototype.call=function(t,e){return e.subscribe(new Xe(t,this.accumulator,this.seed,this.hasSeed))},t}(),Xe=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r.accumulator=i,r._seed=o,r.hasSeed=n,r.index=0,r}return xt(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,i=this.index++;try{e=this.accumulator(this.seed,t,i)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(Pt);function Ze(){}function Ke(t,e,i){return function(o){return o.lift(new Je(t,e,i))}}var Je=function(){function t(t,e,i){this.nextOrObserver=t,this.error=e,this.complete=i}return t.prototype.call=function(t,e){return e.subscribe(new ti(t,this.nextOrObserver,this.error,this.complete))},t}(),ti=function(t){function e(e,i,o,n){var r=t.call(this,e)||this;return r._tapNext=Ze,r._tapError=Ze,r._tapComplete=Ze,r._tapError=o||Ze,r._tapComplete=n||Ze,_t(i)?(r._context=r,r._tapNext=i):i&&(r._context=i,r._tapNext=i.next||Ze,r._tapError=i.error||Ze,r._tapComplete=i.complete||Ze),r}return xt(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(Pt);class ei{constructor(t){this.dragElement=null,this.touchTarget=null,this.mobileStartDelayLimit=2,this.startMove=!1,this.option=t,this.init()}init(){const{dragRoot:t,dragSelector:e,dropRoot:i,dropSelector:o,dropLine:n=null,dropPointShadowRoot:r,moveDistanceLimit:a=1}=this.option;this.option.dropPointShadowRoot=r||i;const s=Ht(t,"touchstart").pipe(Bt(t=>{const e=t.composedPath();return this.touchTarget=e[0],{event:t,path:e}})).pipe(re(({event:t,path:e})=>{var i;return Qt({event:t,path:e}).pipe(qe(null!==(i=this.option.mobileStartDelayTime)&&void 0!==i?i:200),xe(ce(Ht(this.touchTarget,"touchmove").pipe(function(t,e){var i=!1;return arguments.length>=2&&(i=!0),function(o){return o.lift(new Ye(t,e,i))}}(t=>t+1,0),fe(t=>t>this.mobileStartDelayLimit),Ke(()=>{this.touchTarget=null})),Ht(this.touchTarget,"touchend").pipe(Ke(()=>{this.touchTarget=null})))))}),Bt(({event:i,path:o})=>({event:i,dragElement:De(o,e,t)})),fe(({dragElement:t})=>this.touchTarget&&null!==t),Bt(({event:t,dragElement:e})=>{const i={type:"dragStart",payload:{x:t.touches[0].clientX,y:t.touches[0].clientY,dragElement:e}};return this.dragElement=e,this.startMove=!1,i})).pipe(ye(t=>Qt(t,Object.assign(Object.assign({},t),{fork:"forDrop"}),Object.assign(Object.assign({},t),{fork:"forMove"}))),re(t=>{if("forMove"===t.fork)return ce(Ht(this.touchTarget,"touchmove").pipe(xe(Ht(this.touchTarget,"touchend")),Se(0,ge),Bt(e=>{if(!this.startMove){Be(t.payload,{x:e.touches[0].clientX,y:e.touches[0].clientY})>a&&(this.startMove=!0)}return{type:"dragMove",payload:{x:e.touches[0].clientX,y:e.touches[0].clientY,startMove:this.startMove,dragElement:this.dragElement}}})),Ht(this.touchTarget,"touchend").pipe(Bt(t=>{const e={type:"dragEnd",payload:{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,dragElement:this.dragElement,startMove:this.startMove}};return this.startMove&&Ne(),this.dragElement=null,this.touchTarget=null,this.startMove=!1,e}),Pe(1)));if("forDrop"===t.fork){const{x:e,y:i}=t.payload;return Ht(this.touchTarget,"touchmove").pipe(xe(Ht(this.touchTarget,"touchend")),Se(50),Bt(t=>{if(!o)return{event:t,target:document.body};let r=t.touches[0].clientX,a=t.touches[0].clientY;"x"===n?a=i:"y"===n&&(r=e);return{event:t,target:Me(this.option.dropPointShadowRoot,o,r,a)}}),fe(({target:t})=>!!t),Bt(({target:t,event:e})=>({type:"drop",payload:{x:e.touches[0].clientX,y:e.touches[0].clientY,dragElement:this.dragElement,dropElement:t}})))}return Qt(t)}));this.drag$=s}subscribe(t){this.subscription&&this.subscription.unsubscribe(),this.subscription=this.drag$.subscribe(t)}updateOption(t){this.option=Object.assign(Object.assign({},this.option),t)}}class ii{constructor(t){this.pc=new Fe(t),window.TouchEvent&&(this.mobile=new ei(t))}subscribe(t){var e,i;this.mobile&&(null===(e=this.mobile.subscription)||void 0===e||e.unsubscribe(),this.mobile.subscription=this.mobile.drag$.subscribe(t)),this.pc&&(null===(i=this.pc.subscription)||void 0===i||i.unsubscribe(),this.pc.subscription=this.pc.drag$.subscribe(t))}updateOption(t){var e,i;null===(e=this.mobile)||void 0===e||e.updateOption(t),null===(i=this.pc)||void 0===i||i.updateOption(t)}}var oi=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let ni=class extends a.a{constructor(){super(...arguments),this.activeType=0,this.shortcutListStatus=!1,this.suggestList=[],this.suggesStatus=!1,this.suggesTipsStatus=!1,this.dragId=null,this.dragMoved=!1,this.dragFakeDom=null,this.suggestActiveIndex=null,this.dragOffsetX=0,this.dragOffsetY=0,this.focusElement=null,this.input=null,this.flipping=!1,this.oraginValue="",this.baseUrl="",this.setSearchCardMaxHeight=()=>{if(this.shortcutListStatus){const t=window.innerHeight,{top:e}=this.dragWrapper.getBoundingClientRect(),i=t-e;this.dragWrapper.style.maxHeight=Math.floor(i)-20+"px",this.$shortcutListUlBox.style.maxHeight=Math.floor(i)-20+"px"}else if(this.suggesStatus){const t=window.innerHeight,{top:e}=this.$suggesList.getBoundingClientRect(),i=t-e;this.$suggesList.style.maxHeight=Math.floor(i)-20+"px",this.$suggesListUl.style.maxHeight=Math.floor(i)-20+"px"}},this.initDrag=()=>{new ii({dragRoot:this.dragWrapper,dragSelector:".shortcut-drag",dropRoot:this.dragWrapper,dropSelector:".shortcut-drop",mobileStartDelayTime:0}).subscribe(t=>{switch(t.type){case"dragStart":document.querySelector("i-menu").toHide(),this.dragStart(t.payload);break;case"dragMove":this.dragMove(t.payload);break;case"dragEnd":this.dragEnd();break;case"drop":this.dragDrop(t.payload)}})},this.dragStart=({x:t,y:e,dragElement:i})=>{this.dragMoved=!1;const{left:o,top:n,width:r,height:a}=i.getBoundingClientRect();this.dragOffsetX=t-o,this.dragOffsetY=e-n,this.dragFakeDom=i.cloneNode(!0),this.dragFakeDom.style.position="fixed",this.dragFakeDom.style.top="-999px",this.dragFakeDom.style.left="-999px",this.dragFakeDom.style.width=r+"px",this.dragFakeDom.style.height=a+"px",this.dragFakeDom.classList.add("fake"),this.dragId=this.dragFakeDom.dataset.uuid,this.dragFakeWrapper.appendChild(this.dragFakeDom)},this.dragMove=({x:t,y:e,startMove:i})=>{const o=t-this.dragOffsetX,n=e-this.dragOffsetY;!this.dragMoved&&i?this.dragMoved=!0:i&&(this.dragFakeDom.style.left=o+"px",this.dragFakeDom.style.top=n+"px")},this.dragDrop=({dropElement:t})=>{if(this.flipping)return;const e=this.dragFakeDom.dataset.uuid,i=t.dataset.uuid;s.searchStore.sortShortcut(e,i)},this.dragEnd=()=>{this.dragMoved=!1,this.dragFakeDom&&(this.dragFakeWrapper.removeChild(this.dragFakeDom),this.dragFakeDom=null,this.dragId=null)},this.handleClick=t=>{s.searchStore.setActive(t),this.activeType=0,this.shortcutListStatus=!1},this.closeSugges=()=>{setTimeout(()=>{this.suggesStatus=!1,this.focusElement||(this.suggesTipsStatus=!1)},0)},this._renderShortcutList=t=>r.e` <div
      @contextmenu="${c.a.stopShowMenu}"
      data-uuid="all"
      class="shortcut-list shortcut-drop show-up ${this.dragMoved?"has-drag":""} ${this.shortcutListStatus?"show":"hide"}"
    >
      <div class="shortcut-list-ul-box global-scrollbar">
        <ul class="shortcut-list-ul">
          ${t.map((t,e)=>{if(!t)return null;let i=t.noDel;return 0===e&&(i=!0),r.e`<li
              class="shortcut-item shortcut-drop ${0===e?"force-default":""} ${this.dragId===t.uuid?"dragd":""}"
              data-uuid="${t.uuid}"
              flipkey="${t.uuid}"
              @click="${()=>{this.handleClick(e)}}"
            >
              ${Object(ot.a)(Object(vt.a)(t,!0,0!==e))}
              <span class="name">${t.name}</span>
              <div
                class="del-shortcut ${i?"hide":""}"
                @click="${e=>{e.stopPropagation(),this.delShortcutList(t.uuid)}}"
              >
                <i-usesvg type="infinity-pro-pure-icon-dustbin"></i-usesvg>
              </div>
            </li>`})}
          ${r.e`<li
            @click="${()=>{s.userStore.isLogin||!l.s?s.pluginStore.show("search"):s.userStore.toggleLoginTipModal()}}"
            class="shortcut-item"
            flipkey="add-btn"
          >
            <i-usesvg type="infinity-pro-pure-icon-plus"></i-usesvg>
            <span class="name">${Object(Z.i18n)("add")}</span>
          </li>`}
        </ul>
      </div>
    </div>`,this._renderSuggestList=()=>r.e`<div
      @contextmenu="${c.a.stopShowMenu}"
      class="search-suggest search-suggest-list show-up ${this.suggesStatus?"show":"hide"}"
    >
      <ul class="search-suggest-list-ul global-scrollbar">
        ${this.suggestList.map((t,e)=>r.e`<li
            @mousedown="${e=>{if(0!==e.button)return e.stopPropagation(),void e.preventDefault();let i="",o="";t.types?i=t.types[0].url:t.target?i=t.target:o=t.text,t.text&&(this.input.value=t.text),this.toSearch(i,o,e)}}"
            class="suggest-item ${this.suggestActiveIndex===e?"active":""}"
          >
            ${t.uuid?r.e`<div class="icon-box">${Object(ot.a)(Object(vt.a)(t))}</div>
                  <span class="name add">${Object(Z.i18n)("search_from",t.name)}</span>`:r.e`<div class="icon-box"></div>
                  <span class="name">${t.text}</span>`}
          </li>`)}
      </ul>
    </div>`,this._renderSuggestTips=()=>r.e`<ul
      @contextmenu="${c.a.stopShowMenu}"
      tabindex="0"
      @focus="${t=>{this.focusElement=t.target}}"
      @blur="${()=>{this.focusElement=null,this.closeSugges()}}"
      class="search-suggest suggest-tips show-up ${this.suggesTipsStatus?"show":"hide"}"
    >
      <div class="suggest-tips-title">${Object(Z.i18n)("search_suggest")}</div>
      <div class="suggest-tips-body">${Object(Z.i18n)("permission_serch_suggest_content")}</div>
      <div class="sugges-btns">
        <infinito-button class="btn" @mousedown="${this.closeSuggestTips}">${Object(Z.i18n)("ignore")}</infinito-button>
        <infinito-button primary class="btn" @mousedown="${this.openSearchSuggest}"
          >${Object(Z.i18n)("permission")}</infinito-button
        >
      </div>
    </ul>`}focusSearch(){setTimeout(()=>{s.searchStore.firstSync?this.input.focus():this.focusSearch()},50)}async firstUpdated(){this.input=this.shadowRoot.querySelector(".search-card-input"),(l.h||l.s)&&(document.referrer.includes(l.w)&&!sessionStorage.getItem("tutorial_reffer")||this.focusSearch()),this.initDrag(),this.flip=new Q({root:this.dragWrapper}),this.flip.read(),this.addEventListener("keydown",t=>{if("ArrowUp"===t.key)return t.preventDefault(),t.stopPropagation(),this.changeSuggesIndex("up"),!1;"ArrowDown"===t.key&&this.changeSuggesIndex("down")}),this.addEventListener("dragstart",t=>{t.preventDefault(),t.stopPropagation()}),document.querySelector("#fake_focus").addEventListener("focus",()=>{var t;null===(t=this.input)||void 0===t||t.focus()}),window.addEventListener("resize",c.a.throttle(()=>{this.setSearchCardMaxHeight()},56))}update(t){this.flip&&this.flip.read(),super.update(t)}updated(t){t.has("shortcutListStatus")||t.has("suggesStatus")?this.setSearchCardMaxHeight():0===s.pluginStore.pluginViews.length&&(this.flipping=!0,this.flip.play({props:["position"]}).then(()=>{this.flipping=!1}))}changeSuggesIndex(t){null===this.suggestActiveIndex&&(this.oraginValue=this.input.value),"up"===t?null===this.suggestActiveIndex?this.suggestActiveIndex=this.suggestList.length-1:(this.suggestActiveIndex-=1,this.suggestActiveIndex<0&&(this.suggestActiveIndex=null,this.input.value=this.oraginValue)):null===this.suggestActiveIndex?this.suggestActiveIndex=0:(this.suggestActiveIndex+=1,this.suggestActiveIndex>this.suggestList.length-1&&(this.suggestActiveIndex=null,this.input.value=this.oraginValue)),this.baseUrl=void 0;const e=this.suggestList[this.suggestActiveIndex];if((null==e?void 0:e.types)?(this.baseUrl=e.types[0].url,this.input.value=this.oraginValue):(null==e?void 0:e.target)?(this.baseUrl=e.target,this.input.value=this.oraginValue):(null==e?void 0:e.text)?this.input.value=e.text:this.input.value=this.oraginValue,"number"==typeof this.suggestActiveIndex){this.$suggesListUl.querySelectorAll(".suggest-item ")[this.suggestActiveIndex].scrollIntoView({behavior:"smooth",block:"nearest"})}}async changeInputVal(){this.suggestActiveIndex=null,this.focusInput();const t=this.input.value;if(!t)return void setTimeout(()=>{this.suggestList=[],this.suggesStatus=!1},0);let e=[];if(s.settingStore.withPermissionSearchSuggest||s.settingStore.setting.search.searchSuggest&&(l.h||l.s)){const{data:i,error:o}=await mt.d.getSearchSuggest(t);!o&&this.input.value&&(e=i)}this.input.value?(0===e.length&&this.suggestList.length>0||(e.length>7&&(e.length=7),this.suggestList=s.searchStore.searchEngine.addList.concat(e)),this.suggesStatus=!0):this.suggesStatus=!1}toSearch(t,e,i){var o,n;this.baseUrl=void 0,this.suggesStatus=!1;const{link:r}=s.settingStore.setting;if(!t){const{current:e}=s.searchStore.searchEngine;t=(null===(n=null===(o=e.types)||void 0===o?void 0:o[this.activeType])||void 0===n?void 0:n.url)||e.target}e||(e=this.input.value),S.a.sendBaidu(t),S.a.sendEvent({action:{search:c.a.getTargetLogDomain(t)}}),s.settingStore.setting.search.keepSearchInput||setTimeout(()=>{this.input.value="",this.suggesStatus=!1,this.suggestList=[]},50),t.indexOf("%s")>-1?c.a.openUrl(t.replace(/%s/g,encodeURIComponent(e)),r.search,i):c.a.openUrl(t+encodeURIComponent(e),r.search,i)}delShortcutList(t){s.searchStore.delShortcut(t)}closeSuggestTips(t){0===t.button?(s.searchStore.closeSuggestTips(),this.focusElement=null):(t.stopPropagation(),t.preventDefault())}openSearchSuggest(t){0===t.button?(s.settingStore.openSearchSuggest(),this.focusElement=null):(t.stopPropagation(),t.preventDefault())}focusInput(){this.focusElement=this.input,this.input.value?this.suggesTipsStatus&&(this.suggesTipsStatus=!1):!s.searchStore.ignoreSuggest&&s.settingStore.setting.search.searchSuggest&&-1===s.settingStore.permission.searchSuggest&&(this.suggesTipsStatus=!0)}clearSearch(){this.input.value="",setTimeout(()=>{this.input.focus()},0)}render(){const{allItems:t,searchEngine:e}=s.searchStore,{types:o}=e.current,{shadow:n,hideButton:a,hideCategory:d}=s.settingStore.setting.search,{miniMode:p}=s.settingStore.setting.icon;return r.e`
      <div class="newtab-search ${p?"minimode":""}">
        <ul .hidden="${d}" class="search-type">
          ${o&&o.length>1?o.map((t,e)=>r.e`<li
                  @contextmenu="${c.a.stopShowMenu}"
                  class="search-type-item ${this.activeType===e?"active":""}"
                  @click="${()=>this.activeType=e}"
                >
                  ${t.name}
                </li>`):r.e`<li class="search-type-item holder">&nbsp;</li>`}
        </ul>
        <form
          class="${Object(Y.a)({"search-card":!0,"show-up":this.suggesStatus,shadow:n})}"
          @contextmenu="${c.a.stopShowMenu}"
          @submit="${t=>{t.preventDefault(),t.stopPropagation(),this.toSearch(this.baseUrl,this.input.value,t)}}"
        >
          <button
            @click="${()=>{this.shortcutListStatus=!0,this.suggesStatus=!1}}"
            type="button"
            class="search-card-engine"
          >
            ${Object(ot.a)(Object(vt.a)(e.current))}
            <i class="icon-down"></i>
          </button>
          <div class="search-input-box">
            <input
              style="${et.startMove?"cursor: default;":""}"
              @input="${this.changeInputVal}"
              @focus="${this.focusInput}"
              @blur="${()=>{this.focusElement=null,this.closeSugges()}}"
              class="search-card-input"
              type="text"
              autocomplete="off"
              placeholder="${Object(Z.i18n)("input_and_search")}"
            />
            <i-svg
              @mousedown="${this.clearSearch}"
              class="search-input-clear"
              src="${i(640)}"
            ></i-svg>
          </div>

          <button
            @click="${t=>{t.stopPropagation(),t.preventDefault(),this.toSearch(void 0,void 0,t)}}"
            .hidden="${a}"
            class="search-card-btn"
            type="button"
          >
            <img class="icon-search" src="https://infinityicon.infinitynewtab.com/assets/search.svg" />
          </button>
        </form>
        <i-mask
          @close="${()=>{this.shortcutListStatus=!1,this.suggesStatus=!1}}"
          ?show="${this.shortcutListStatus}"
        ></i-mask>
        ${this._renderShortcutList(t)} ${this._renderSuggestList()}
        ${l.h||l.s?"":this._renderSuggestTips()}
      </div>
      <div class="drag-fake-wrapper ${this.dragId?"":"hide"}"></div>
    `}};ni.styles=[A.a,ft],oi([Object(r.g)({type:Number})],ni.prototype,"activeType",void 0),oi([Object(r.g)({type:Boolean})],ni.prototype,"shortcutListStatus",void 0),oi([Object(r.g)({type:Array})],ni.prototype,"suggestList",void 0),oi([Object(r.g)({type:Boolean})],ni.prototype,"suggesStatus",void 0),oi([Object(r.g)({type:Boolean})],ni.prototype,"suggesTipsStatus",void 0),oi([Object(r.f)()],ni.prototype,"dragId",void 0),oi([Object(r.f)()],ni.prototype,"dragMoved",void 0),oi([Object(r.f)()],ni.prototype,"dragFakeDom",void 0),oi([Object(r.f)()],ni.prototype,"suggestActiveIndex",void 0),oi([Object(r.h)(".shortcut-list")],ni.prototype,"dragWrapper",void 0),oi([Object(r.h)(".shortcut-list-ul-box")],ni.prototype,"$shortcutListUlBox",void 0),oi([Object(r.h)(".search-suggest-list")],ni.prototype,"$suggesList",void 0),oi([Object(r.h)(".search-suggest-list-ul")],ni.prototype,"$suggesListUl",void 0),oi([Object(r.h)(".drag-fake-wrapper")],ni.prototype,"dragFakeWrapper",void 0),ni=oi([Object(r.c)("newtab-search")],ni);var ri=i(677),ai=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let si=class extends a.a{constructor(){super(...arguments),this.isSliding=!1,this.currentPage=0,this.pageLength=1,this.lethargyX=new ri.Lethargy(5),this.lethargyY=new ri.Lethargy(5),this.mouseDownClientX=null,this.mouseMoveCount=0,this.firstTime=!0,this.layoutCol=s.settingStore.setting.layout.col,this.layoutRow=s.settingStore.setting.layout.row,this._touchDown=!1,this.pageOffset=0,this.inertia=localStorage.getItem("platforn-inertia"),this.wheelCount=0,this._mouseMove=c.a.throttle(t=>{if(null===this.mouseDownClientX)return;if(et.dragId)return;this.mouseMoveCount+=1;const e=this.$items.style.transform.split("("),i=e[e.length-1].split("%")[0];let o;o=window.TouchEvent&&t instanceof TouchEvent?t.touches[0].clientX:t.clientX;const n=o-this.mouseDownClientX;this.pageOffset=n;let r=i+"% ";r+=n>0?"+ "+Math.abs(n)+"px":"- "+Math.abs(n)+"px",this.$items.style.transform=`translateX(calc(${r}))`},20),this._mouseUp=t=>{if(this._touchDown=!1,this.pageOffset=0,window.removeEventListener("mousemove",this._mouseMove),window.removeEventListener("mouseup",this._mouseUp),window.removeEventListener("touchmove",this._mouseMove),window.removeEventListener("touchend",this._mouseUp),this.mouseMoveCount<3)return this.mouseDownClientX=null,void(this.mouseMoveCount&&this.changePage(this.currentPage));let e;e=window.TouchEvent&&t instanceof TouchEvent?t.changedTouches[0].clientX:t.clientX;const i=e-this.mouseDownClientX;Math.abs(i)>150&&et.withHolderPageSites.length>1?i>0?this.slideToLeft():this.slideToRight():(i||et.withHolderPageSites.length<2)&&this.changePage(this.currentPage),this.mouseDownClientX=null},this._scrollEnd=()=>{!1!==this.isSliding&&(-1===this.currentPage?(this.$items.style.transitionProperty="none",this.currentPage=this.pageLength-1,setTimeout(()=>{requestAnimationFrame(()=>{this.$items.style.transform=`translateX(${-1*(this.currentPage+1)*100}%)`,this.isSliding=!1})},0)):this.currentPage>=this.pageLength?(this.$items.style.transitionProperty="none",this.currentPage=0,setTimeout(()=>{requestAnimationFrame(()=>{this.$items.style.transform=`translateX(${-1*(this.currentPage+1)*100}%)`,this.isSliding=!1})},0)):this.isSliding=!1)},this.lastWheelTime=performance.now(),this.wheelFilter=()=>{const t=performance.now(),e=this.lastWheelTime;return this.lastWheelTime=t,!(t-e<90)},this.wheelScroll=t=>{var e,i;if((null===(e=this.searchComponent)||void 0===e?void 0:e.shortcutListStatus)||(null===(i=this.searchComponent)||void 0===i?void 0:i.suggesStatus))return;if(B.folderStatus)return;let o,n;t.stopPropagation(),t.preventDefault(),Math.abs(t.deltaX)>Math.abs(t.deltaY)?(o=this.lethargyX.check({deltaY:t.deltaX}),n=t.deltaX):(o=this.lethargyY.check(t),n=t.deltaY),this.inertia?o&&Math.abs(n)>1&&this.wheelFilter()&&(n<0?this.slideToLeft(void 0,!0):this.slideToRight(void 0,!0)):(!1===o?(this.wheelCount+=1,this.wheelCount>40&&(this.inertia="true",localStorage.setItem("platforn-inertia",this.inertia))):this.wheelCount=0,o&&Math.abs(n)>1&&(n<0?this.slideToLeft(void 0,!0):this.slideToRight(void 0,!0)))}}static get styles(){return r.b`
      :host {
        display: block;
        height: 100%;
        overflow: hidden;
        box-sizing: border-box;
        padding-top: var(--icon-padding-top);
        width: 100%;
        margin-left: calc((100vw - var(--icon-box-width) - (var(--main-icons-margin) * 2)) / 2);
      }
      .items-container {
        height: 100%;
        display: flex;
        transition-property: transform;
        will-change: transform;
        width: 100%;
      }
      .linear {
        transition-timing-function: ease-in-out;
        transition-duration: 350ms;
      }
      .elastic {
        transition-timing-function: cubic-bezier(0.41, 1.5, 0.5, 1.01);
        transition-duration: 620ms;
      }
      .opacity {
        transition-timing-function: ease-in;
        transition-duration: 450ms;
      }
      .opacity .items-card-wrap {
        opacity: 0.1;
      }
      .items-card-wrap {
        width: var(--icon-box-width);
        margin: 0 var(--main-icons-margin);
        padding: 0;
        flex-shrink: 0;
        box-sizing: border-box;
        transition: opacity 620ms ease-in;
      }
      .items-card-wrap.active {
        opacity: 1;
      }
      .items-card {
        height: 100%;
        display: grid;
        grid-template-columns: repeat(var(--icon-col), calc(100% / var(--icon-col)));
        grid-template-rows: repeat(var(--icon-row), calc(100% / var(--icon-row)));
        align-items: center;
        justify-items: center;
      }

      .offset-animate-right {
        animation: offsetAnimateRight 0.5s ease-in-out;
      }
      .offset-animate-left {
        animation: offsetAnimateLeft 0.5s ease-in-out;
      }
      .merge-holder {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        opacity: 0;
      }
      @keyframes offsetAnimateRight {
        50% {
          transform: translateX(6%);
        }
      }

      @keyframes offsetAnimateLeft {
        50% {
          transform: translateX(-6%);
        }
      }
    `}async firstUpdated(){this.flipping=new Q({root:this.$items,viewBox:document.querySelector("newtab-main").shadowRoot.querySelector("newtab-icons")}),this.flipping.read(),this.$items.addEventListener("transitionend",t=>{"opacity"===s.settingStore.setting.animation.easing?"opacity"===t.propertyName&&this._scrollEnd():"transform"===t.propertyName&&this._scrollEnd()}),this.addEventListener("mousedown",t=>{0===t.button&&!0!==this._touchDown&&(this._touchDown=!0,this.mouseDownClientX=t.clientX,this.mouseMoveCount=0,this.$items.style.transitionProperty="none",this.isSliding&&(this._scrollEnd(),this.isSliding=!1),window.addEventListener("mousemove",this._mouseMove),window.addEventListener("mouseup",this._mouseUp),document.querySelector("i-menu").toHide())}),this.addEventListener("touchstart",t=>{!0!==this._touchDown&&(this._touchDown=!0,this.mouseDownClientX=t.touches[0].clientX,this.mouseMoveCount=0,this.$items.style.transitionProperty="none",this.isSliding&&(this._scrollEnd(),this.isSliding=!1),window.addEventListener("touchmove",this._mouseMove),window.addEventListener("touchend",this._mouseUp),document.querySelector("i-menu").toHide())}),this.searchComponent=document.querySelector("newtab-main").shadowRoot.querySelector("newtab-search")}update(t){this.flipping&&!this.firstTime&&(B.changeFlipStatus(!0),this.flipping.read()),super.update(t)}updated(t){if(this.firstTime){if(s.siteStore.firstSync){this.firstTime=!1;const{col:t,row:e}=s.settingStore.setting.layout;this.layoutRow=e,this.layoutCol=t}}else{const{col:t,row:e}=s.settingStore.setting.layout;this.layoutCol!==t||this.layoutRow!==e?(0!==s.siteStore.currentPageIndex&&this.changePage(0),this.layoutRow=e,this.layoutCol=t,B.changeFlipStatus(!1),setTimeout(()=>{this.flipping.play({created:"scale",props:["position"]}).then(()=>{B.changeFlipStatus(!1)})},0)):requestAnimationFrame(()=>{this.flipping.play({created:"scale",props:["position"]}).then(()=>{B.changeFlipStatus(!1)})})}super.updated(t)}sendChangePage(t){const e=new CustomEvent("on-changepage",{detail:{type:t}});this.dispatchEvent(e)}slideToLeft(t=!1,e=!1){0!==this.pageOffset&&(t=!0),this.isSliding||(this.isSliding=!0,this.sendChangePage("left"),et.withHolderPageSites.length<2&&e?this._offsetAnimate(-1).then(()=>{this.isSliding=!1}):this.changePage(this.currentPage-1,t)),t&&(this.isSliding=!1)}slideToRight(t=!1,e=!1){0!==this.pageOffset&&(t=!0),this.isSliding||(this.sendChangePage("right"),this.isSliding=!0,et.withHolderPageSites.length<2&&e?this._offsetAnimate(1).then(()=>{this.isSliding=!1}):this.changePage(this.currentPage+1,t)),t&&(this.isSliding=!1)}_offsetAnimate(t){return new n.a(e=>{let i="";i=t>0?"offset-animate-left":"offset-animate-right",this.shadowRoot.querySelector(".active").classList.add(i),setTimeout(()=>{var t;null===(t=this.shadowRoot.querySelector("."+i))||void 0===t||t.classList.remove(i),e(null)},500)})}changePage(t,e=!1){let i=t;this.pageLength=et.withHolderPageSites.length;let o=" ";if(this.pageOffset>0?o+="+ "+Math.abs(this.pageOffset)+"px":o+="- "+Math.abs(this.pageOffset)+"px",et.withHolderPageSites.length<2)return s.siteStore.changeCurrentPage(0),this.currentPage=0,this.$items.style.transitionProperty=e?"none":"transform",void(this.$items.style.transform=`translateX(calc(-100%${o}))`);i<-1?i=-1:i>this.pageLength&&(i=this.pageLength),-1===i?s.siteStore.changeCurrentPage(this.pageLength-1):i===this.pageLength?s.siteStore.changeCurrentPage(0):s.siteStore.changeCurrentPage(i),this.currentPage=i,this.$items.style.transitionProperty=e?"none":"transform",l.r?requestAnimationFrame(()=>{this.$items.style.transform=`translateX(calc(${-1*(this.currentPage+1)*100}%${o}))`}):this.$items.style.transform=`translateX(calc(${-1*(this.currentPage+1)*100}%${o}))`}_renderItem(t,e){const i=et.withHolderPageSites[t]||[];return r.e`
      <div class="items-card-wrap ${t===s.siteStore.currentPageIndex?"active":""}">
        <div data-dropid="end" class="items-card icon-drop">
          ${i.filter(t=>t).map((i,o)=>"merge"===et.dragStage&&et.dragMergeHolderIndexs&&e&&et.dragMergeHolderIndexs[0]===t&&et.dragMergeHolderIndexs[1]===o?r.e` <div
                      class="icon-drop merge-holder"
                      data-dropid="holder"
                      data-dropindexs="${[t,o].join(",")}"
                    ></div>
                    <icon-box
                      class="icon-drop"
                      flipkey="${e?i.id:""}"
                      data-dropid="${i.id}"
                      .icon=${i}
                      .indexs="${[t,o]}"
                    ></icon-box>`:r.e`<icon-box
                class="icon-drop"
                flipkey="${e?i.id:""}"
                data-dropid="${i.id}"
                .icon=${i}
                .indexs="${[t,o]}"
              ></icon-box>`)}
        </div>
      </div>
    `}_renderEmptyItem(){return r.e`
      <div class="items-card-wrap">
        <div class="items-card"></div>
      </div>
    `}renderPage(t){return t.length>1?r.e` <!-- 最后一页图标，仅补位 -->
        ${this._renderItem(this.pageLength-1,!1)}
        <!-- 真实图标 -->
        ${t.map((t,e)=>r.e`${this._renderItem(e,!0)} `)}
        <!-- 第一页图标，仅补位 -->
        ${this._renderItem(0,!1)}`:(this.$items&&(this.$items.style.transitionProperty="none",this.$items.style.transform="translateX(-100%)"),s.siteStore.changeCurrentPage(0),r.e`
        ${this._renderEmptyItem()}
        ${t.map((t,e)=>r.e`${this._renderItem(e,!0)} `)}
      `)}render(){const{withHolderPageSites:t}=et;return this.pageLength=t.length,r.e`
      <div style="transform:translateX(-100%);" class="items-container ${s.settingStore.setting.animation.easing}">
        ${this.renderPage(t)}
      </div>
    `}};ai([Object(r.h)(".items-container")],si.prototype,"$items",void 0),si=ai([Object(r.c)("newtab-icons")],si);var li=r.b`.icon-search {
  position: absolute;
  z-index: 1;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding-top: 6vh;
  padding-bottom: 6vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background: rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(10px);
}
.icon-search.show {
  display: flex;
}
.icon-search.hide {
  display: none;
}
.input-box {
  flex-shrink: 0;
  width: 402px;
  height: 48px;
  border-radius: 24px;
  background: rgba(0, 0, 0, 0.15);
  overflow: hidden;
  display: flex;
  align-items: center;
}
.input-box .icon-search-img-box {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  width: 50px;
  height: 100%;
}
.input-box .icon-search-img-box .img {
  margin-left: 14px;
  width: 20px;
  height: 20px;
}
.input-box .input {
  flex-grow: 1;
  height: 100%;
  box-sizing: border-box;
  border: 0;
  outline: 0;
  padding-right: 50px;
  padding-left: 0;
  font-size: 14px;
  font-weight: 500;
  color: #ffffff;
  background-color: transparent;
}
.input-box .input::placeholder {
  font-size: 14px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.6);
}
.icon-box {
  flex-shrink: 0;
  margin-top: 3vh;
  height: calc(85vh - 48px);
  width: 100%;
  box-sizing: border-box;
  padding: 10px 0;
}
`,ci=r.b`.icon-search-icons {
  --width: calc(var(--icon-box-width) + var(--main-icons-margin));
  margin-left: calc((100% - var(--width)) / 2);
  width: var(--width);
  display: grid;
  grid-template-columns: repeat(var(--icon-col), calc(100% / var(--icon-col)));
  place-items: center;
  box-sizing: border-box;
}
.icon-search-icons.less-one-line {
  display: flex;
  justify-content: center;
}
icon-box {
  width: calc((var(--icon-box-width) + var(--main-icons-margin)) / var(--icon-col));
  height: calc(var(--icon-box-height) / var(--icon-row));
}
`,di=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let pi=class extends r.a{constructor(){super(...arguments),this.icons=[],this.cause="",this.stopClick=t=>{t.stopPropagation()}}firstUpdated(){this.flipping=new Q({root:this.$items}),this.flipping.read()}update(t){this.flipping&&"allIcons"===this.cause&&this.flipping.read(),super.update(t)}updated(t){"allIcons"===this.cause&&this.flipping.play({created:"scale",props:["position"]}).then(()=>{}),super.updated(t)}render(){return r.e`
      <section
        class="icon-search-icons ${this.icons.length<s.settingStore.setting.layout.col?"less-one-line":""}"
        style="--less-icon:${s.settingStore.setting.layout.col-this.icons.length}"
      >
        ${this.icons.map(({item:t,indexs:e})=>r.e` <icon-box flipkey="${t.id}" .icon=${t} .indexs="${e}"></icon-box> `)}
      </section>
    `}};pi.styles=ci,di([Object(r.h)(".icon-search-icons")],pi.prototype,"$items",void 0),di([Object(r.g)({type:Array})],pi.prototype,"icons",void 0),di([Object(r.g)({type:String})],pi.prototype,"cause",void 0),pi=di([Object(r.c)("icon-search-icons")],pi);var hi=i(495),ui=i.n(hi),gi=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let fi=class extends r.a{constructor(){super(...arguments),this.show=!1,this.icons=[],this.allIcons=[],this.searchKey="",this.cause="",this.onInputChange=t=>{const e=t.currentTarget.value;this.searchKey=e},this.changeIcons=t=>{this.cause=t||"",this.searchKey?this.icons=this.allIcons.filter(({item:t})=>{const e=this.searchKey.toLowerCase(),i=(""+t.name||"").toLowerCase(),o=(t.target||"").toLowerCase().split("?")[0];return(t.initials||"").toLowerCase()===e||(i.includes(e)||o.includes(e))}):this.icons=this.allIcons},this.searchIcons=ui()(this.changeIcons.bind(this,"search"),200,{leading:!1}),this.onClose=t=>{if(s.settingStore.setting.icon.miniMode&&B.iconEditing)return void B.changeIconEditing(!1);const e=new CustomEvent("on-close");this.dispatchEvent(e),setTimeout(()=>{this.icons=[],this.searchKey="",this.$input.value=""},0),t.stopPropagation()},this.stopClick=t=>{t.stopPropagation()}}firstUpdated(){this.oncontextmenu=t=>(t.stopPropagation(),!1)}updated(t){t.has("allIcons")?this.changeIcons("allIcons"):t.has("searchKey")&&this.searchIcons(),t.has("show")&&!0===this.show&&(this.$input.focus(),this.cause="show"),super.updated(t)}render(){return r.e`
      <section @click="${this.onClose}" class="icon-search ${this.show?"show":"hide"}">
        <div @click="${this.stopClick}" class="input-box">
          <div class="icon-search-img-box">
            <img class="img" src="https://infinityicon.infinitynewtab.com/assets/search.svg" />
          </div>
          <input
            @contextmenu="${t=>{t.stopPropagation()}}"
            class="input"
            autocomplete="off"
            type="text"
            .placeholder="${i18n("search")}"
            @input=${t=>{this.onInputChange(t)}}
          />
        </div>
        <div class="icon-box global-scrollbar">
          <icon-search-icons .cause="${this.cause}" .icons="${this.icons}"></icon-search-icons>
        </div>
      </section>
    `}};fi.styles=[A.a,li],gi([Object(r.h)(".input")],fi.prototype,"$input",void 0),gi([Object(r.g)({type:Boolean})],fi.prototype,"show",void 0),gi([Object(r.f)()],fi.prototype,"icons",void 0),gi([Object(r.f)()],fi.prototype,"allIcons",void 0),gi([Object(r.f)()],fi.prototype,"searchKey",void 0),gi([Object(r.f)()],fi.prototype,"cause",void 0),fi=gi([Object(r.c)("icon-search")],fi);var mi=i(634),bi=i.n(mi),yi=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let vi=class extends r.a{constructor(){super(...arguments),this.show=!1}async checkShow(){if(document.querySelector("i-updating").classList.contains("hide")){if(localStorage.getItem("user-checkout-old-data"))this.show=!1;else{const{checkOldLocalData:t}=await i.e(9).then(i.bind(null,836)),e=await t();this.show=e}}else this.show=!1}firstUpdated(){l.l&&requestIdleCallback(async()=>{this.checkShow()})}toDetail(){s.pluginStore.showRepair(),setTimeout(()=>{this.checkShow()},20)}render(){return this.show?r.e`
      <div class="content">
        <div class="mask"></div>
        <div class="tips">
          <span class="desc">${i18n("check_olddata_desc")}</span>
          <span class="btn" @click="${this.toDetail}">&nbsp; ${i18n("show_detail")}<i-svg .src=${bi.a}></i-svg></span>
        </div>
      </div>
    `:null}};vi.styles=r.b`
    .content {
      position: absolute;
      z-index: 99;
      height: 32px;
      width: 100vw;
      pointer-events: none;
    }
    .mask {
      position: absolute;
      width: 100%;
      height: 32px;
      background: rgba(51, 51, 51, 0.2);
    }
    .tips {
      text-align: center;
      height: 32px;
      font-size: 13px;
      font-weight: 400;
      color: #ffffff;
      line-height: 32px;
      display: flex;
      justify-content: center;
      padding: 0 10px;
      width: 100vw;
      box-sizing: border-box;
    }
    .btn {
      display: inline-flex;
      align-items: center;
      cursor: pointer;
      pointer-events: auto;
    }
    .desc {
      display: block;
      max-width: calc(100vw - 200px);
      min-width: 100px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    i-svg {
      width: 14px;
      height: 14px;
      color: #ffffff;
    }
  `,yi([Object(r.g)({type:Boolean})],vi.prototype,"show",void 0),vi=yi([Object(r.c)("i-check-olddata")],vi);var wi=r.b`.title {
  font-size: 18px;
  font-weight: 500;
  color: #333333;
  line-height: 25px;
}
.tip {
  margin-top: 6px;
  font-size: 13px;
  font-weight: 400;
  color: #8e8e8e;
  line-height: 22px;
}
.footer {
  margin-top: 16px;
  display: flex;
  justify-content: flex-end;
}
.btn,
delay-button {
  max-width: 160px;
  font-size: 13px;
}
.btn {
  display: flex;
  align-items: center;
  padding: 0 18px;
  height: 34px;
  box-sizing: border-box;
  border-radius: 6px;
  font-weight: 400;
  color: #333333;
  line-height: 18px;
  outline: none;
  border: none;
  cursor: pointer;
  transition: background 0.2s ease-out;
}
.btn.hover-light:hover {
  background: rgba(255, 102, 102, 0.8);
}
.btn-main {
  background: #ff6666;
  font-weight: 500;
  color: #ffffff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
}
.btn-main:hover {
  background: #ff6666;
}
delay-button {
  margin-left: 16px;
}
.level-1 {
  position: absolute;
  top: 58px;
  right: -70px;
  width: 377px;
  min-height: 160px;
  padding: 20px;
  box-sizing: border-box;
  background: #ffffff;
  box-shadow: 0px 4px 19px 0px rgba(0, 0, 0, 0.12);
  border-radius: 6px;
  background-color: #fff;
}
.level-1 .arrow {
  position: absolute;
  top: -20px;
  right: 80px;
  width: 0;
  height: 0;
  border: 10px solid;
  border-color: transparent transparent #fff;
}
`,xi=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let _i=class extends r.a{constructor(){super(...arguments),this.showList=!1,this.fontSize=13,this.list=[{label:i18n("two_hours_later"),delay:()=>Date.now()+72e5},{label:i18n("one_day_later"),delay:()=>{const t=new Date;return t.setHours(0,0,0,0),t.getTime()+864e5}},{label:i18n("one_week_later"),delay:()=>Date.now()+6048e5}],this.closeList=()=>{this.showList=!1},this.expandList=t=>{this.showList=!this.showList,t.stopImmediatePropagation()}}firstUpdated(){window.addEventListener("click",this.closeList)}disconnectedCallback(){window.removeEventListener("click",this.closeList),super.disconnectedCallback()}changeDelay(t){const e=new CustomEvent("on-changedelay",{bubbles:!0,composed:!0,detail:{value:t.delay()}});this.dispatchEvent(e)}render(){return r.e`<div class="delay-btn ${this.showList?"open":""}">
      <infinito-button @click="${this.expandList}">
        <div class="button-content" style="font-size:${this.fontSize}px;">
          <div class="btn-text">${i18n("show_later")}</div>
          <infinito-svg src="${i(678)}"></infinito-svg>
        </div>
      </infinito-button>
      <ul class="${this.showList?"show":"hide"}">
        ${this.list.map(t=>r.e`<li class="" @click="${()=>this.changeDelay(t)}">${t.label}</li> `)}
      </ul>
    </div>`}};_i.styles=[r.b`
      :host {
        --padding: 18px;
      }
      .delay-btn {
        height: 100%;
      }
      infinito-button {
        width: 100%;
        --button-padding: 0 var(--padding);
        height: inherit;
      }
      .btn-text {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .button-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      infinito-svg {
        margin-left: 5px;
        width: 12px;
        height: 12px;
        color: #666;
      }
      .delay-btn {
        position: relative;
        border-radius: 6px;
        background: #eeeeee;
      }
      .open {
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
      }
      ul.show {
        opacity: 1;
      }
      ul.hide {
        opacity: 0;
        pointer-events: none;
      }
      ul {
        margin: 0;
        padding: 0;
        /* width: 100%; */
        /* position: absolute; */
        right: 0;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        background: #eeeeee;
        border-bottom-left-radius: 6px;
        border-bottom-right-radius: 6px;
        transition: opacity 0.2s;
      }
      li {
        margin: 0;
        list-style: none;
        width: 100%;
        padding: 8px var(--padding);
        box-sizing: border-box;
        cursor: pointer;
        transition: background 0.2s ease-out;
        font-size: inherit;
        font-weight: 400;
        color: #616161;
        word-break: break-word;
        overflow-wrap: break-word;
      }
      li:last-of-type {
        border-bottom-left-radius: 6px;
        border-bottom-right-radius: 6px;
      }
      li:hover {
        background: #d9d9d9;
        color: #333;
      }
    `],xi([Object(r.f)()],_i.prototype,"showList",void 0),xi([Object(r.g)({type:Number})],_i.prototype,"fontSize",void 0),_i=xi([Object(r.c)("delay-button")],_i);var ki=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Oi=class extends r.a{firstUpdated(){}toSelectWay(){const t=new CustomEvent("on-toupdate");this.dispatchEvent(t)}render(){const{info:t}=this;return r.e`<div class="level-1">
      <div class="arrow"></div>
      <div class="title">${t.title}</div>
      <div class="tip">${t.shortTip}</div>
      <div class="footer">
        <button @click="${this.toSelectWay}" class="btn hover-light btn-main">${i18n("update_now")}</button>
        <delay-button style="--padding: 18px;height:34px;"></delay-button>
      </div>
    </div>`}};Oi.styles=wi,ki([Object(r.g)({type:Object})],Oi.prototype,"info",void 0),Oi=ki([Object(r.c)("update-level-1")],Oi);var Ai=r.b`.level-modal {
  width: 800px;
  height: 532px;
  display: flex;
  border-radius: 6px;
}
.left {
  flex-shrink: 0;
  width: 350px;
  height: 100%;
  border-top-left-radius: 6px;
  border-bottom-left-radius: 6px;
  overflow: hidden;
}
.left img {
  width: 100%;
  height: 100%;
}
.right {
  padding: 30px;
  display: flex;
  flex-direction: column;
  width: 450px;
  box-sizing: border-box;
}
.title {
  font-size: 24px;
  font-weight: 500;
  color: #333333;
  line-height: 37px;
  text-overflow: -o-ellipsis-lastline;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
}
.tip {
  min-height: 50px;
  max-height: 80px;
  overflow: auto;
  margin-top: 10px;
  font-size: 13px;
  font-weight: 400;
  color: #999999;
  line-height: 22px;
}
.footer {
  display: flex;
  justify-content: center;
}
.btn {
  display: block;
  padding: 0 30px;
  box-sizing: border-box;
  height: 44px;
  border-radius: 6px;
  font-weight: 400;
  line-height: 22px;
  color: #333333;
  outline: none;
  border: none;
  cursor: pointer;
  transition: background 0.2s ease-out;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.btn.hover-light:hover {
  background: rgba(255, 102, 102, 0.8);
}
.btn-main {
  background: #ff6666;
  font-weight: 500;
  color: #ffffff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: block;
}
.btn,
delay-button {
  max-width: 186px;
  font-size: 15px;
}
delay-button {
  margin-left: 16px;
}
.ic-content {
  margin: 30px 0;
  margin-top: 24px;
}
.conetnt-header {
  margin-bottom: 20px;
  text-align: center;
}
.conetnt-header img {
  width: 26px;
  height: 13px;
}
.conetnt-body {
  height: 140px;
  display: flex;
  overflow-x: hidden;
  overflow-y: auto;
}
.content-item {
  width: 100%;
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 0 20px;
  box-sizing: border-box;
  transition: transform 1s;
}
.content-item .item-title {
  font-size: 18px;
  font-weight: 500;
  color: #333333;
  line-height: 25px;
}
.content-item .item-body {
  margin-top: 16px;
  font-size: 14px;
  font-weight: 400;
  color: #656565;
  line-height: 22px;
}
.conetnt-footer {
  margin-top: 10px;
  display: flex;
  justify-content: center;
}
.conetnt-footer .dot {
  margin-right: 8px;
  display: block;
  width: 8px;
  height: 8px;
  box-sizing: border-box;
  border-radius: 50%;
  border: 2px solid #333333;
  cursor: pointer;
  background: #fff;
  transition: background 0.3s;
}
.conetnt-footer .dot:last-child {
  margin-right: 0;
}
.conetnt-footer .dot.active {
  background: #333333;
}
`,Si=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Ii=class extends r.a{constructor(){super(...arguments),this.force=!1,this.contentActive=0,this.timer=null,this.setLoop=()=>{clearInterval(this.timer),this.timer=setInterval(()=>{const t=(this.contentActive+1)%this.info.content.length;this.contentActive=t},6e3)},this.activeThis=t=>{t!==this.contentActive&&(this.contentActive=t,this.setLoop())}}firstUpdated(){this.setLoop()}disconnectedCallback(){clearInterval(this.timer),super.disconnectedCallback()}toSelectWay(){const t=new CustomEvent("on-toupdate",{composed:!0,bubbles:!0});this.dispatchEvent(t)}render(){const{info:t}=this;return r.e` <infinito-modal style="--modal-padding:0px" .closeable="${!1}" .open=${!0}>
      <div class="level-modal level-2" slot="body">
        <div class="left">
          <img src="${i(679)}" alt="" />
        </div>
        <div class="right">
          <div class="title">${t.title}</div>
          <div class="tip global-scrollbar">${t.tip}</div>
          <div class="ic-content">
            <div class="conetnt-header">
              <img src="${i(680)}" alt="" />
            </div>
            <div class="conetnt-body global-scrollbar">
              ${t.content.map(t=>r.e`
                  <div style="transform: translateX(${-390*this.contentActive}px);" class="content-item">
                    <div class="item-title">${t.title}</div>
                    <div class="item-body">${Object(ot.a)(t.body)}</div>
                  </div>
                `)}
            </div>
            <div class="conetnt-footer">
              ${t.content.map((t,e)=>r.e`
                  <span
                    @click="${()=>this.activeThis(e)}"
                    class="dot ${e===this.contentActive?"active":""}"
                  ></span>
                `)}
            </div>
          </div>
          <div class="footer">
            <button @click="${this.toSelectWay}" class="btn hover-light btn-main">${i18n("update_now")}</button>
            ${this.force?null:r.e`<delay-button fontSize="${15}" style="--padding:20px;height:44px;"></delay-button>`}
          </div>
        </div>
      </div>
    </infinito-modal>`}};Ii.styles=[A.a,Ai],Si([Object(r.g)({type:Boolean})],Ii.prototype,"force",void 0),Si([Object(r.g)({type:Object})],Ii.prototype,"info",void 0),Si([Object(r.g)({type:Number})],Ii.prototype,"contentActive",void 0),Ii=Si([Object(r.c)("update-level-2")],Ii);var ji=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let $i=class extends r.a{render(){const{info:t}=this;return r.e` <update-level-2 .force="${!0}" .info="${this.info}"></update-level-2>`}};ji([Object(r.g)({type:Object})],$i.prototype,"info",void 0),$i=ji([Object(r.c)("update-level-3")],$i);var Ci=r.b`.tabs {
  position: relative;
  width: 100%;
  display: flex;
  justify-content: center;
  --point-height: 4px;
}
.tabs.vertically {
  align-items: center;
}
.tabs.horizontally {
  flex-direction: column;
}
.tabs[style]::after {
  content: '';
}
.tabs.vertically::after {
  --width: 28;
  position: absolute;
  width: calc(var(--width) * 1px);
  left: calc((var(--target-left) + (var(--target-width) - var(--width)) / 2) * 1px);
  border-bottom: var(--point-height) solid #333;
  bottom: 0;
  transition: left 0.2s, width 0.2s;
}
.tabs.horizontally::after {
  position: absolute;
  width: 100%;
  height: calc(var(--target-height, 0) * 1px);
  top: calc(var(--target-top, -500) * 1px);
  border-right: var(--point-height) solid #333;
  right: 0;
  transition: top 0.2s, height 0.2s;
}
.way-modal {
  width: 760px;
  height: 70vh;
  min-height: 532px;
  max-height: 1032px;
  background: #ffffff;
  border-radius: 6px;
}
.way-header {
  display: flex;
  align-items: center;
  margin: 0 20px;
  padding: 6px 0 0;
  border-bottom: 1px solid #ebebeb;
}
.way-header-back {
  width: 20px;
  height: 20px;
  margin-left: -10px;
  margin-right: 20px;
  cursor: pointer;
}
.way-header-list {
  flex-grow: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}
.way-header-list .tab-item {
  cursor: pointer;
  margin-left: 40px;
  padding-bottom: 26px;
  font-size: 20px;
  font-weight: 400;
  color: #999;
}
.way-header-list .tab-item:first-of-type {
  margin-left: 10px;
}
.way-header-list .tab-item.active {
  color: #000;
}
.way-content {
  height: calc(70vh - 132px);
  max-height: 900px;
  min-height: 400px;
  margin: 20px auto;
  padding: 20px;
  overflow: auto;
  line-height: initial;
}
`,Ei=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Ti=class extends r.a{constructor(){super(...arguments),this.list=[],this.active=0,this.activeInited=!1}firstUpdated(){this.$content.addEventListener("click",t=>{const e=t.target;this.openStore(e.getAttribute("extension-store"))}),requestAnimationFrame(()=>{this.setActiveStyle(),this.activeInited=!0})}openStore(t){if("chrome"===t)return chrome.tabs.create({url:"chrome://extensions/"})}download(t){window.open(t)}onClose(){const t=new CustomEvent("on-close-way",{composed:!0,bubbles:!0});this.dispatchEvent(t)}onBack(){const t=new CustomEvent("on-back-level");this.dispatchEvent(t)}_activeThis(t,e){this.active=e,this.$content.scrollTop=0}_renderWay(t,e){return Object(ot.a)(t[e].content)}setActiveStyle(){const t=this.$tabs.querySelectorAll(".tab-item");if(t&&t.length>0){const e=t[this.active],i=this.$tabs.style,{offsetTop:o,offsetLeft:n,offsetWidth:r,offsetHeight:a}=e;i.setProperty("--target-width",r+""),i.setProperty("--target-height",a+""),i.setProperty("--target-left",n+""),i.setProperty("--target-top",o+"")}}updated(t){t.has("active")&&this.activeInited&&this.setActiveStyle()}render(){const{list:t,active:e}=this;return r.e` <infinito-modal .closeable="${!1}" .open=${!0} .onCancel=${this.onClose}>
      <div class="way-modal" slot="body">
        <div class="way-header">
          <img class="way-header-back" @click="${this.onBack}" src="${i(681)}" alt="" />
          <div class="way-header-list">
            <div class="tabs vertically">
              ${t.map((t,e)=>r.e`
                  <div
                    @click="${t=>this._activeThis(t,e)}"
                    class="tab-item ${this.active===e?"active":""}"
                  >
                    <span>${t.title}</span>
                  </div>
                `)}
            </div>
          </div>
        </div>
        <div class="way-content global-scrollbar">${this._renderWay(t,e)}</div>
      </div>
    </infinito-modal>`}};Ti.styles=[A.a,Ci],Ei([Object(r.g)({type:Array})],Ti.prototype,"list",void 0),Ei([Object(r.g)({type:Number})],Ti.prototype,"active",void 0),Ei([Object(r.h)(".way-content")],Ti.prototype,"$content",void 0),Ei([Object(r.h)(".tabs")],Ti.prototype,"$tabs",void 0),Ti=Ei([Object(r.c)("update-way")],Ti);var Pi=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Ri=class extends r.a{constructor(){super(...arguments),this.delay={version:"",date:0},this.step=0,this.platform="",this.localInfo={extId:l.D.extId,version:l.D.extVersion,lang:l.D.lang,platformVersion:l.D.platformVersion},this.info={level:0,latestVersion:"",currentVersion:l.D.extVersion,title:"",tip:"",shortTip:"",content:[],updateWayActive:0,updateWayList:[],contentHash:""},this.timer=null,this.GAP_TIME=12e4,this.init=()=>{const t=localStorage.getItem("infinity-updater");if(t)try{const{info:e,delay:i,updatetime:o}=JSON.parse(t);if(this.info.currentVersion!==e.currentVersion)return localStorage.removeItem("infinity-updater"),void this.requestLevel();this.info=e,this.delay=i,this.showCard(),Date.now()-o>this.GAP_TIME&&this.requestLevel()}catch(t){this.requestLevel()}else this.requestLevel()},this.requestLevel=async()=>{try{if(!c.a.requestFirefoxThrottle("get_ext_version",l.q?36e5:6e4,!0))return;const t=Object.keys(this.localInfo).map(t=>`${t}=${this.localInfo[t]}`),e="platform="+this.platform+"&"+t.join("&"),i=await window.fetch(l.y+"/get_ext_version?"+e),{code:o,data:n}=await i.json();if(0!==o)return;c.a.requestFirefoxThrottle("get_ext_version",!0,!0);const{level:r,latestVersion:a,contentHash:s}=n;if(0===r)return this.step=0,this.info.level=r,this.info.latestVersion=a,this.info.contentHash=s,void this.saveStorage();if(r===this.info.level&&a===this.info.latestVersion&&s===this.info.contentHash)return;this.getContent(e,{version:a,contentHash:s})}catch(t){}}}firstUpdated(){this.init(),this.timer=setInterval(()=>{this.requestLevel()},432e5)}saveStorage(){const t={info:this.info,delay:this.delay,updatetime:Date.now()};localStorage.setItem("infinity-updater",JSON.stringify(t))}async getContent(t,e){try{const i=await window.fetch(l.y+"/update_content?"+t),{code:o,data:n}=await i.json();if(0!==o)return;const{level:r,title:a,tip:s,shortTip:c,content:d,updateWayList:p,updateWayActive:h}=n;this.info.level=r,this.info.title=a,this.info.content=d,this.info.tip=s,this.info.shortTip=c,this.info.updateWayList=p,this.info.updateWayActive=h,this.info.latestVersion=e.version,this.info.contentHash=e.contentHash,this.showCard(),this.saveStorage()}catch(t){}}showCard(t){if(t)this.step=2;else{const{date:t}=this.delay;this.info.level>0&&Date.now()>t&&(1===this.info.level?this.step=1:this.step=2)}2===this.step&&this.preRender()}preRender(){this.info.updateWayList.forEach(t=>{document.createElement("div").innerHTML=t.content})}showWay(){this.step=3}showCardDetail(){this.showCard(!0)}changeDelay(t){const{value:e}=t.detail;this.step=0,this.delay={version:this.info.latestVersion,date:e},this.saveStorage()}closeWay(){}_renderCard(){if(1===this.step)return r.e`
        <update-level-1
          @on-toupdate="${this.showCardDetail}"
          @on-changedelay="${this.changeDelay}"
          .info="${this.info}"
        ></update-level-1>
      `;if(2===this.step)switch(this.info.level){case 1:case 2:return r.e`
            <update-level-2
              @on-toupdate="${this.showWay}"
              @on-changedelay="${this.changeDelay}"
              .info="${this.info}"
            ></update-level-2>
          `;case 3:return r.e` <update-level-3 @on-toupdate="${this.showWay}" .info="${this.info}"></update-level-3> `;default:return null}else if(3===this.step)return r.e`
        <update-way
          @on-close-way="${()=>this.showCard(!0)}"
          @on-back-level="${()=>this.showCard(!0)}"
          .active="${this.info.updateWayActive}"
          .list="${this.info.updateWayList}"
        ></update-way>
      `;return null}render(){return this.info.level?r.e`<div @click="${this.showCard}" class="startup">
          <img class="starup-img" src="https://infinityicon.infinitynewtab.com/assets/btn-update.png" alt="" />
        </div>
        ${this._renderCard()}`:null}};Ri.styles=r.b`
    :host {
      position: relative;
      line-height: normal;
    }
    .startup {
      width: 40px;
      height: 40px;
      cursor: pointer;
      transition-property: transform;
      transition-duration: 0.3s;
      transition-timing-function: ease;
    }
    .startup:hover {
      transform: scale(1.1);
    }
    .starup-img {
      width: 40px;
      height: 40px;
    }
  `,Pi([Object(r.f)()],Ri.prototype,"delay",void 0),Pi([Object(r.f)()],Ri.prototype,"step",void 0),Pi([Object(r.g)()],Ri.prototype,"platform",void 0),Pi([Object(r.f)()],Ri.prototype,"localInfo",void 0),Pi([Object(r.f)()],Ri.prototype,"info",void 0),Ri=Pi([Object(r.c)("i-updater")],Ri);var Li=i(119),Di=i(398),Mi=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Ui=class extends a.a{constructor(){super(...arguments),this.capture=!1,this.sidePageAnimate={$el:null,cb:null,instanceIn:null,instanceOut:null},this.menu=null,this.menus=[{keyboard:"",text:i18n("edit_icon"),handler:()=>{s.userStore.isLogin||!l.s?B.changeIconEditing(!0):s.userStore.toggleLoginTipModal()}},{text:i18n("random_wallpaper"),handler:()=>{S.a.sendEvent({action:{randomWallpaper:"rightClickMenu"}}),this.changeWallpaper()}}],this.moveTimer=null,this.moveArea="",this.dropId="",this.dropIndexs=[],this.dragFolderOragin=null,this.dragFolderTimer=null,this.clearAsideMethod=null,this.iconSearchShow=!1,this.showIconSearch=t=>{et.dragId||s.pluginStore.pluginViews.length||(null==t||t.preventDefault(),this.menu.toHide(),this.iconSearchShow=!0)},this.hideIconSearch=()=>{this.iconSearchShow=!1},this.clearDropStatus=()=>{this.moveTimer&&(clearTimeout(this.moveTimer),this.moveTimer=null,this.moveArea="",this.dropId="",this.dropIndexs=[])},this.dragToEnd=()=>{if(B.folderStatus)this.dropIndexs=[...B.folderIndexs,B.folderItem.children.length-1];else{const t=et.withHolderPageSites[s.siteStore.currentPageIndex].length-1;this.dropIndexs=[s.siteStore.currentPageIndex,t<0?0:t]}const t=this.dropIndexs[1]===s.settingStore.setting.layout.row*s.settingStore.setting.layout.col-1?"left":"right";et.sortSites(this.dropIndexs,t)},this._scheduler=(t,e)=>{if(e!==this.dropId||t!==this.moveArea){const i=200,o=500,n=350,{dragId:r}=et;if(clearTimeout(this.moveTimer),this.moveArea=t,this.dropId=e,et.checkDragIndexs(),0===et.dragIndexs.length)return;"center"!==t||B.folderStatus||!s.siteStore.isIcon(0,r)?this.moveTimer=setTimeout(()=>{if(et.clearMergeStatus(),"end"===e)if(B.folderStatus)this.dropIndexs=[...B.folderIndexs,B.folderItem.children.length-1];else{const t=et.withHolderPageSites[s.siteStore.currentPageIndex].length-1;this.dropIndexs=[s.siteStore.currentPageIndex,t<0?0:t]}et.sortSites(this.dropIndexs,t)},i):s.siteStore.isIcon(s.siteStore.currentPageIndex,e)?(et.setMergeStatus("hover",e),et.setHolderIndexs(this.dropIndexs),this.moveTimer=setTimeout(()=>{const{folderId:t}=et.createFolder(this.dropIndexs);this.dropId=t,this.moveTimer=setTimeout(()=>{this._handleFolderStatus(this.dropId)},o)},n)):(et.setMergeStatus("hover",e),et.setHolderIndexs(this.dropIndexs),this.moveTimer=setTimeout(()=>{et.intoFolder(this.dropIndexs),this.moveTimer=setTimeout(()=>{this._handleFolderStatus(this.dropId)},o)},n))}},this._toPrevPage=(t=!1)=>{this.$items.slideToLeft(t,!0)},this._toNextPage=()=>{this.$items.slideToRight(void 0,!0)},this._clearStatus=t=>{var e,i;!1!==this.capture&&(null===(e=this.sidePageAnimate.instanceIn)||void 0===e||e.cancel(),null===(i=this.sidePageAnimate.instanceOut)||void 0===i||i.cancel(),t.style.opacity="0",this.capture=!1)}}rotateWindMill(t){this._$windmill.style.transform=`rotate(${t}deg)`}flatIcons(t){const e=[];return t.forEach((t,i)=>{t.forEach((t,o)=>{Array.isArray(t.children)?t.children.forEach((t,n)=>{e.push({item:t,indexs:[i,o,n]})}):e.push({item:t,indexs:[i,o]})})}),e}async firstUpdated(){this.menu=q.create(),this.addEventListener("click",()=>{B.changeIconEditing(!1),this.menu.toHide()}),this.oncontextmenu=t=>(t.stopPropagation(),this.rightClickMenu(t)),this.$main.addEventListener("mouseleave",()=>{this.$main.blur()}),this.$main.addEventListener("wheel",this.$items.wheelScroll),window.addEventListener("keydown",t=>{this.keyboardScroll(t)}),this.initDrag(),document.body.addEventListener("mousemove",c.a.throttle(()=>{et.setMobileDrag(!1)},50)),document.body.addEventListener("touchmove",c.a.throttle(()=>{et.setMobileDrag(!0)},50)),document.addEventListener("keydown",t=>{!t.ctrlKey||"f"!==t.key.toLocaleLowerCase()||t.metaKey||t.altKey||t.shiftKey||this.showIconSearch(t)})}initDrag(){const t=new ii({dragRoot:this.$mainBox,dragSelector:".icon-drag",dropRoot:this.$mainBox,dropSelector:".icon-drop"});t.subscribe(t=>{switch(t.type){case"dragStart":this.dragStart(t.payload);break;case"dragEnd":this.dragEnd(t.payload);break;case"dragMove":this.dragMove(t.payload);break;case"drop":this.drop(t.payload)}}),et.setDragIns(t)}dragStart({x:t,y:e,dragElement:i}){const{left:o,top:n,width:r,height:a}=i.getBoundingClientRect(),s=t-o,l=e-n;B.folderStatus?(et.drag.oraginOffsetX=1.25*s,et.drag.oraginOffsetY=1.25*l):(et.drag.oraginOffsetX=s,et.drag.oraginOffsetY=l),et.drag.width=r,et.drag.height=a,et.drag.x=t,et.drag.y=e;const c=i.parentElement.cloneNode(!0);c.classList.add("drag-icon-box"),c.style.transformOrigin="top left",c.style.position="fixed",c.style.zIndex="10",c.style.pointerEvents="none",c.style.display="none",c.style.overflow="visible",et.drag.dom=c,document.body.appendChild(et.drag.dom);const d=i.dataset.dragid,p=i.parentElement.parentNode.host.indexs;et.setDragStatus(d,p)}dragEnd({x:t,y:e}){this.sidePageAnimate.$el&&this._clearStatus(this.sidePageAnimate.$el),et.changeXLimitStatus(!1),et.checkDragIndexs(),et.dragIndexs.length&&et.dragIndexs[0]!==s.siteStore.currentPageIndex?this.dragToEnd():B.folderStatus||et.dragStage||3!==et.dragIndexs.length||this.dragToEnd(),setTimeout(()=>{this.cancelDragAnimate(),this.dragEndAnimate(t,e),this.clearDropStatus()},20)}cancelDragAnimate(){this.$items.flipping.cancel(et.dragId),this.$folderBox.flipping.cancel(et.dragId)}dragEndAnimate(t,e){var i;if(!et.startMove||0===et.dragIndexs.length)return et.drag=Object.assign({},et.dragNone),this.tryRemoveFakerDom(),void et.clearDragStatus();let o=null;if(3===et.dragIndexs.length)if(B.folderStatus)o=this.$folderBox.shadowRoot.querySelector(`[flipkey="${et.dragId}"]`).shadowRoot.querySelector("icon-content").shadowRoot.querySelector(".icon-content");else{const t=this.$items.shadowRoot.querySelector(`[flipkey="${et.dropTargetId}"]`).shadowRoot.querySelector("icon-content").shadowRoot.querySelectorAll(".mini-icon");o=t[t.length-1]}else if(2===et.dragIndexs.length){const t=this.$items.shadowRoot.querySelector(`[flipkey="${et.dragId}"]`);o=null===(i=null==t?void 0:t.shadowRoot.querySelector("icon-content"))||void 0===i?void 0:i.shadowRoot.querySelector(".icon-content")}if(!o)return et.drag=Object.assign({},et.dragNone),this.tryRemoveFakerDom(),void et.clearDragStatus();const{left:n,top:r,width:a}=o.getBoundingClientRect();if(n>0&&n<innerWidth){const i=n-t+et.drag.offsetX-et.drag.marginX+"px",o=r-e+et.drag.offsetY+"px",s=a/et.drag.width,l=et.drag.dom.animate([{transform:"translate(0,0) scale(1)"},{transform:`translate(${i},${o}) scale(${Math.min(s,1)})`}],{duration:200,easing:"ease-in"});et.clearDragIndexs(),l.onfinish=()=>{et.drag=Object.assign({},et.dragNone),this.tryRemoveFakerDom(),et.clearDragStatus()}}else o.animate([{transform:"scale(0.1)",opacity:"0.1"},{transform:"scale(1)",opacity:"1"}],{duration:300,easing:"ease-in"}),et.drag=Object.assign({},et.dragNone),this.tryRemoveFakerDom(),et.clearDragStatus()}tryRemoveFakerDom(){try{document.body.removeChild(document.querySelector(".drag-icon-box"))}catch(t){}}dragMove({x:t,y:e,startMove:i}){if(!et.drag.dom)return;et.drag.x=t,et.drag.y=e;const o=t-et.drag.offsetX,n=e-et.drag.offsetY;!et.startMove&&i?(et.setStartMove(!0),et.setMobileDrag(!0),et.changeXLimitStatus(!0),et.drag.dom.style.left=o+"px",et.drag.dom.style.top=n+"px",et.drag.dom.style.display="block",this.menu.toHide()):et.startMove&&(et.drag.dom.style.left=o+"px",et.drag.dom.style.top=n+"px"),this.dragOutFolder(t,e)}drop({dropElement:t,x:e,y:i}){var o;if(!et.drag.dom)return;const{flipStatus:n}=B;if(n||this.$items.isSliding)return;const r=t.dataset.dropid;if("aside-left"===r)return this.clearDropStatus(),et.clearMergeStatus(),this._captureToPrev(),void(this.clearAsideMethod="_stopCaptureToPrev");if("aside-right"===r)return this.clearDropStatus(),et.clearMergeStatus(),this._captureToNext(),void(this.clearAsideMethod="_stopCaptureToNext");if(this.clearAsideMethod&&(this[this.clearAsideMethod](),this.clearAsideMethod=null),et.dragId===r||"wrapper"===r)return this.clearDropStatus(),void et.clearMergeStatus();this.dropIndexs=t.indexs||(null===(o=t.dataset.dropindexs)||void 0===o?void 0:o.split(",").map(t=>Number(t)));let a="";if("end"===r)a="right";else if("holder"===r)a="left";else{const{left:o,top:n,width:r,height:s}=t.shadowRoot.querySelector("icon-content").shadowRoot.querySelector(".icon-content").getBoundingClientRect(),l=e-et.drag.offsetX+et.drag.marginX+r/2,c=i-et.drag.offsetY+s/2;a=this._calcArea({pointX:e,centerX:l,centerY:c,targetX:o,targetY:n,targetWidth:r,targetHeight:s})}this._scheduler(a,r)}_calcArea({pointX:t,centerX:e,centerY:i,targetX:o,targetY:n,targetWidth:r,targetHeight:a}){let s="";return s=t>o+r/2?"right":"left",e>o+.2*r&&i>n&&e<o+.8*r&&i<n+a&&(s="center"),s}dragOutFolder(t,e){if(!B.folderStatus)return clearTimeout(this.dragFolderTimer),this.dragFolderOragin=null,void(this.dragFolderTimer=null);const{width:i,height:o,left:n,top:r}=this.$folderBox.shadowRoot.querySelector(".icon-box-wrap").getBoundingClientRect();if(t>n&&e>r&&t<n+i&&e<r+o)clearTimeout(this.dragFolderTimer),this.dragFolderTimer=null;else{if(null!==this.dragFolderTimer)return;null===this.dragFolderOragin&&(this.dragFolderOragin={x:t,y:e}),this.dragFolderTimer=setTimeout(()=>{(Math.abs(t-this.dragFolderOragin.x)>20||Math.abs(e-this.dragFolderOragin.y)>20)&&B.closeFolder(),this.dragFolderTimer=null},250)}}_handleFolderStatus(t){B.changeFolderFlipData({});const e=s.siteStore.findIndex(s.siteStore.currentPageIndex,t);B.openFolderWithIndexs(e),et.setMergeStatus("open",t)}updaterRightClick(t){t.stopPropagation(),t.preventDefault();const e=t.composedPath()[0];return!!c.a.isInputType(e)}rightClickMenu(t){var e;const i=t.composedPath()[0];if(c.a.isInputType(i))return this.menu.toHide(),!0;if(i&&"none"===i.getAttribute("data-menu"))return this.menu.toHide(),!1;{let i={left:0,top:0};t instanceof MouseEvent?i={left:t.pageX,top:t.pageY}:window.TouchEvent&&t instanceof TouchEvent&&(i={left:t.touches[0].pageX,top:null===(e=t.touches[0])||void 0===e?void 0:e.pageY});const o=[...this.menus];s.userStore.isLogin&&o.unshift({text:i18n("backup_now"),handler:()=>{G.IConfirm.create().toShow({title:i18n("backup_now"),text:i18n("confirm_cover_remote"),onConfirm:()=>{s.syncStore.manualBackup()}})}});const{type:n,id:r}=s.wallpaperStore;return r&&!r.includes("__wp_")&&["cloud","cloudAuto","color","bing"].includes(n)&&o.push({text:i18n("wallpaper_collect_current"),handler:()=>{s.userStore.isLogin?s.wallpaperStore.cloudCollection.includes(r)||Object(Li.collectionWallpaper)(r,1).then(()=>{s.wallpaperStore.addCollectionP(r)}).catch(console.warn):Di.default.popupLogin()}}),"color"!==n&&o.push({text:i18n("download_current_wallpaper"),handler:()=>{s.wallpaperStore.rawUrl?c.a.downloadImg(s.wallpaperStore.rawUrl,void 0,s.wallpaperStore.wpExt):c.a.downloadImg(Object(P.b)("wallpaper-src"),"wallpaper")}}),n.includes("Auto")&&o.push({text:i18n("wallpaper_switch_to_next_wallpaper"),handler:()=>{s.wallpaperStore.switchToNextWallpaper()}}),o.push({text:i18n("search_icons"),keyboard:"Ctrl + F",handler:()=>{this.showIconSearch()}}),s.wallpaperStore.firstSync&&this.menu.toShow(o,i),B.changeIconEditing(!1),!1}}keyboardScroll(t){var e;const i=t.composedPath()[0];c.a.isInputType(i)||s.pluginStore.pluginViews.length>0||B.folderStatus||(null===(e=this.shadowRoot.querySelector("newtab-search"))||void 0===e?void 0:e.shortcutListStatus)||("ArrowLeft"===t.key?this._toPrevPage():"ArrowRight"===t.key&&this._toNextPage())}openSetting(){s.userStore.isLogin||!l.s?s.pluginStore.show("profile"):s.userStore.toggleLoginTipModal()}clickChangeWallpaper(){S.a.sendEvent({action:{randomWallpaper:"windmill"}}),this.changeWallpaper()}changeWallpaper(){s.wallpaperStore.randomWallpaper()}__captureToChangeAnimate(){this.sidePageAnimate.instanceIn=this.sidePageAnimate.$el.animate([{opacity:.05},{opacity:.3}],{duration:300}),this.sidePageAnimate.instanceIn.onfinish=async()=>{this.capture&&(this.sidePageAnimate.$el.style.opacity="0.3",this.capture&&(this.sidePageAnimate.cb(),this.sidePageAnimate.instanceOut=this.sidePageAnimate.$el.animate([{opacity:.3},{opacity:.05}],{duration:600}),this.sidePageAnimate.instanceOut.onfinish=async()=>{this.capture&&(this.sidePageAnimate.$el.style.opacity="0.05",this.capture&&this.__captureToChangeAnimate())}))}}_captureToChange(t,e){!0===this.capture||B.folderStatus||(this.capture=!0,this.clearDropStatus(),et.clearMergeStatus(),this.sidePageAnimate.$el=t,this.sidePageAnimate.cb=e,this.__captureToChangeAnimate())}changePage(){this.clearDropStatus(),et.clearMergeStatus()}_captureToPrev(){this._captureToChange(this.$left,this._toPrevPage)}_stopCaptureToPrev(){this._clearStatus(this.$left)}_captureToNext(){this._captureToChange(this.$right,this._toNextPage)}_stopCaptureToNext(){this._clearStatus(this.$right)}toPage(t){t!==s.siteStore.currentPageIndex&&this.$items.changePage(t)}handleMouseOver(t){const e=window.innerWidth,i=t.target.getBoundingClientRect(),{right:o}=i,n=e-o;this.$settingTips.offsetWidth>=2*n&&(this.$settingTips.style.right="0px"),this.$settingTips.style.top="50px"}_renderSyncTips(){return s.syncStore.autoSyncing?r.e`<div class="sync">
        <img class="syncing-img" src="${Object(it.a)("syncing.png",!1)}" alt="" />
      </div>`:s.syncStore.syncFail?r.e`
        <div class="sync sync-end">
          <img src="${Object(it.a)("sync_failed.png",!1)}" alt="" /> ${s.syncStore.isBackup?i18n("backup_failed"):i18n("sync_fail")}${s.syncStore.syncFailMsg?" : "+s.syncStore.syncFailMsg:""}
        </div>
      `:null}render(){const{firstSync:t,setting:e}=s.settingStore,{icon:i,search:o}=e,{withHolderPageSites:n}=et;return this.style.display=t?"":"none",r.e`
      <main class="main">
        <i-check-olddata></i-check-olddata>
        <aside
          .hidden="${!1===et.dragXLimit||n.length<2}"
          @mouseleave="${this._stopCaptureToPrev}"
          @mouseenter="${this._captureToPrev}"
          class="main-left icon-drop"
          data-dropid="aside-left"
        ></aside>
        <section class="main-middle ${this.iconSearchShow?"hide":""}">
          <icon-folder></icon-folder>
          <aside style="${"transition:none"}" tabindex="0" data-dropid="wrapper" class="main-middle-center icon-drop">
            <section .hidden="${o.hide}" class="search">
              <newtab-search></newtab-search>
            </section>
            <section .hidden="${i.miniMode}" class="swiper-container">
              <div
                class="swiper-content"
                style="transition: transform 300ms ease-out;${B.offsetX?`transform:translateX(${B.offsetX}px)`:""}"
              >
                <newtab-icons @on-changepage="${this.changePage}"></newtab-icons>
              </div>
              <div class="swiper-pagination ${n.length>1?"":"hide"}">
                ${n.map((t,e)=>r.e`
                    <span
                      @click="${()=>this.toPage(e)}"
                      class="dot ${e===s.siteStore.currentPageIndex?"active":""}"
                    ></span>
                  `)}
              </div>
            </section>
          </aside>
          <div
            .hidden="${!e.view.pagin||e.icon.miniMode}"
            @click="${()=>this._toPrevPage()}"
            @contextmenu="${c.a.stopShowMenu}"
            class="swiper-btn-prev swiper-btn"
          >
            <img src="https://infinityicon.infinitynewtab.com/assets/arrow_right.svg" alt="" />
          </div>
          <div
            .hidden="${!e.view.pagin||e.icon.miniMode}"
            @click="${this._toNextPage}"
            @contextmenu="${c.a.stopShowMenu}"
            class="swiper-btn-next swiper-btn"
          >
            <img src="https://infinityicon.infinitynewtab.com/assets/arrow_right.svg" alt="" />
          </div>
          <!-- web端需要显示设为主页按钮 -->
          <aside data-menu="none" class="btn-setting-box">
            ${l.s&&s.settingStore.setting.view.isShowHomepageBtn?r.e`
                  <div class="setting-home-box" data-menu="none">
                    <img
                      class="btn-setting-home"
                      data-menu="none"
                      src="https://infinityicon.infinitynewtab.com/assets/home.png"
                      @click=${t=>{t.stopPropagation(),s.settingStore.toggleSettingHomeModal()}}
                      @mouseover=${this.handleMouseOver}
                      @mouseout=${()=>{this.$settingTips.style.top="-100px"}}
                    />
                    <div class="setting-home-text">${i18n("set_to_homepage")}</div>
                  </div>
                `:null}
            ${l.s?null:r.e`<i-updater
                  @contextmenu="${this.updaterRightClick}"
                  data-menu="none"
                  platform="${l.D.platform}"
                ></i-updater>`}
            ${l.s||"basic"===l.e?r.e`
                  <div class="btn-settings" @click="${this.openSetting}" data-menu="none">
                    <div data-menu="none" class="btn-settings-icon">
                      <div data-menu="none" class="icon-dash"></div>
                      <div data-menu="none" class="icon-dash"></div>
                      <div data-menu="none" class="icon-dash"></div>
                    </div>
                  </div>
                `:r.e`
                  <img
                    data-menu="none"
                    @click="${this.openSetting}"
                    class="btn-setting"
                    src="https://infinityicon.infinitynewtab.com/assets/btn-setting.png"
                    alt=""
                  />
                `}
          </aside>

          ${e.view.windmill?r.e`<div data-menu="none" class="windmill">
                <img
                  id="windmill"
                  data-menu="none"
                  @click="${this.clickChangeWallpaper}"
                  src="https://infinityicon.infinitynewtab.com/assets/windmill.svg"
                />
                <span data-menu="none"></span>
              </div>`:null}
          ${this._renderSyncTips()}
        </section>
        <aside
          .hidden="${!1===et.dragXLimit||n.length<2}"
          @mouseleave="${this._stopCaptureToNext}"
          @mouseenter="${this._captureToNext}"
          class="main-right icon-drop"
          data-dropid="aside-right"
        ></aside>
        <div class="icp ${Z.IS_ZH&&l.s&&!s.settingStore.setting.view.isHideIcp?"":"hide"}">
          <a class="icp-link" target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index"
            >渝ICP备15002199号-11</a
          >
        </div>
        <icon-search
          .allIcons="${this.flatIcons(s.siteStore.sites)}"
          .show="${this.iconSearchShow}"
          @on-close="${this.hideIconSearch}"
        ></icon-search>
      </main>
    `}};Ui.styles=R,Mi([Object(r.h)("newtab-icons")],Ui.prototype,"$items",void 0),Mi([Object(r.h)(".main-middle")],Ui.prototype,"$mainBox",void 0),Mi([Object(r.h)("icon-folder")],Ui.prototype,"$folderBox",void 0),Mi([Object(r.h)(".main-middle-center")],Ui.prototype,"$main",void 0),Mi([Object(r.h)(".main-left")],Ui.prototype,"$left",void 0),Mi([Object(r.h)(".main-right")],Ui.prototype,"$right",void 0),Mi([Object(r.h)("img#windmill")],Ui.prototype,"_$windmill",void 0),Mi([Object(r.h)(".setting-home-text")],Ui.prototype,"$settingTips",void 0),Mi([Object(r.g)({type:Boolean})],Ui.prototype,"iconSearchShow",void 0),Ui=Mi([Object(r.c)("newtab-main")],Ui);var Ni=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class Bi{constructor(){this.topSites=[],this.minWidth=60,this.maxWidth=160}getTopSites(){chrome.topSites.get(t=>this.setData(t))}setData(t){this.topSites=t,localStorage.setItem("topSites",JSON.stringify(t))}}Ni([x.g],Bi.prototype,"topSites",void 0),Ni([x.b],Bi.prototype,"getTopSites",null),Ni([x.b],Bi.prototype,"setData",null);var Fi=new Bi,zi=(i(637),function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a});let Hi=class extends a.a{constructor(){super(...arguments),this.store=Fi}openUrl(t,e){S.a.sendEvent({action:{openTopsite:c.a.getTargetLogDomain(t)}}),c.a.openUrl(t,s.settingStore.setting.link.icon,e)}render(){return r.e`
      <div class="topbar-useful">
        <div class="flex">
          ${Fi.topSites.map(t=>r.e`
              <div
                class="item"
                .title=${t.title}
                style="max-width: ${Fi.maxWidth}px;min-width: ${Fi.minWidth}px;"
                @click=${e=>this.openUrl(t.url,e)}
                @mousedown="${e=>{1===e.button&&this.openUrl(t.url,e)}}"
              >
                <i-favicon style="border-radius: 50%; overflow: hidden;" .url="${t.url}"></i-favicon>
                <span>${t.title}</span>
              </div>
            `)}
        </div>
      </div>
    `}firstUpdated(){this.store.getTopSites(),this._hideFake()}_hideFake(){n.a.resolve().then(()=>this.updateComplete).then(()=>new n.a(t=>setTimeout(t,100))).finally(()=>{const t=document.querySelector(".top-useful");t&&t.parentElement.removeChild(t)})}};Hi.styles=r.b`
    .topbar-useful {
      width: 100%;
      height: 36px;
    }

    .flex {
      display: flex;
      align-items: center;
      height: 100%;
      font-size: 12px;
      box-sizing: border-box;
      padding: 4px 8px;
      flex-flow: row wrap;
      overflow: hidden;
    }
    .item:not(:last-child) {
      margin-right: 5px;
    }
    .item {
      display: inline-flex;
      height: 100%;
      align-items: center;
      border-radius: 24px;
      flex-shrink: 0;
      position: relative;
      box-sizing: border-box;
      padding: 2px 10px;
      cursor: pointer;
    }
    .item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      background-color: #151517;
      border-radius: inherit;
      transition: opacity 200ms;
      pointer-events: none;
      cursor: pointer;
    }
    .item:hover::before {
      opacity: 0.12;
    }

    img,
    i-favicon {
      width: 16px;
      height: 16px;
      margin-right: 0;
    }
    span {
      margin-left: 6px;
      color: #ececec;
      text-decoration: none;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      position: relative;
      z-index: 1;
    }
  `,Hi=zi([Object(r.c)("topbar-useful")],Hi);var Wi=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let qi=class extends a.a{render(){return r.e`
      <div class="newtab-topsite">
        ${s.settingStore.withPermissionTopUseful?r.e`<topbar-useful></topbar-useful>`:null}
      </div>
    `}};qi=Wi([Object(r.c)("newtab-topsite")],qi);i(522);var Gi=i(163);var Vi=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Qi=class extends r.a{constructor(){super(...arguments),this.show=!1,this.maskClosable=!0,this.duration=window.__ANIMATION__.aniSideTime,this.statusQueue=[]}firstUpdated(){var t,e;const i=null===(t=this.$slot.assignedNodes())||void 0===t?void 0:t.find(t=>1===t.nodeType);null===(e=null==i?void 0:i.style)||void 0===e||e.setProperty("backface-visibility","hidden")}updated(t){t.has("show")&&!0===this.show&&this.onShow()}shouldUpdate(t){return!this.$content||(!t.has("show")||!1!==this.show||(this.onHide().then(()=>{0===this.statusQueue.length&&this.requestUpdate()}),!1))}maskClose(){this.maskClosable&&this.close()}close(){const t=new CustomEvent("on-close",{bubbles:!0,composed:!0});this.dispatchEvent(t)}async onShow(){0===this.statusQueue.length&&await this.callLifeCycle("beforeShow"),await this.transformAnimate(),0===this.statusQueue.length&&await this.callLifeCycle("afterShow")}async onHide(){0===this.statusQueue.length&&await this.callLifeCycle("beforeHide"),await this.transformAnimate(!0),0===this.statusQueue.length&&await this.callLifeCycle("afterHide")}async callLifeCycle(t){"beforeHide"===t?this.$close.classList.add("hide-close"):"afterShow"===t&&this.$close.classList.remove("hide-close");const e=this.$slot.assignedNodes().find(t=>1===t.nodeType);(null==e?void 0:e[t])&&await e[t]()}transformAnimate(t=!1){return new n.a(e=>{const i=`transform ${window.__ANIMATION__.aniSideTime}ms ${window.__ANIMATION__.aniSideFn} 0s`;0===this.statusQueue.length&&this.$content.style.setProperty("transition",i),this.statusQueue.push(t),requestAnimationFrame(async()=>{await new n.a(t=>setTimeout(t,0)),t?(this.$mask.style.setProperty("pointer-events","none"),this.$content.style.setProperty("transform","translateX(calc(100% * var(--side-ratio))) scale(var(--side-ratio)) translateZ(0)")):(this.$mask.style.setProperty("pointer-events","auto"),this.$content.style.setProperty("transform","translateX(0) scale(var(--side-ratio)) translateZ(0)")),setTimeout(()=>{this.statusQueue.shift(),0===this.statusQueue.length&&this.$content.style.removeProperty("transition"),e(null)},window.__ANIMATION__.aniSideTime)})})}render(){return r.e`
      <div .hidden="${!this.show}">
        <div @click="${this.maskClose}" class="mask"></div>
        <div class="content">
          <div @click="${this.close}" class="close hide-close">
            <img class="img" src="${i(645)}" alt="" />
          </div>
          <slot></slot>
        </div>
      </div>
    `}};Qi.styles=r.b`
    :host {
      --side-width: 420px;
    }
    [hidden] {
      display: none !important;
    }
    .mask {
      position: absolute;
      z-index: 100;
      top: var(--top-bar-height);
      right: 0;
      left: 0;
      bottom: 0;
    }
    .content {
      position: absolute;
      will-change: transform;
      top: var(--top-bar-height);
      right: 0;
      z-index: 101;
      width: var(--side-width);
      max-width: calc(100vw - 50px);
      height: calc((1 / var(--side-ratio)) * (100% - var(--top-bar-height)));
      transform-origin: top right;
      transform: translateX(calc(100% * var(--side-ratio))) scale(var(--side-ratio)) translateZ(0);
      box-shadow: #555 0 0 calc(var(--side-ratio) * 8px);
    }
    .close {
      position: absolute;
      top: 10px;
      left: -46px;
      width: 36px;
      height: 36px;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .close:hover {
      background-color: rgba(0, 0, 0, 0.15);
    }
    .close .img {
      width: 14px;
      height: 14px;
    }
    .hide-close {
      display: none;
    }
  `,Vi([Object(r.g)({type:Boolean})],Qi.prototype,"show",void 0),Vi([Object(r.g)({type:Boolean})],Qi.prototype,"maskClosable",void 0),Vi([Object(r.g)({type:Number})],Qi.prototype,"duration",void 0),Vi([Object(r.h)(".content")],Qi.prototype,"$content",void 0),Vi([Object(r.h)(".mask")],Qi.prototype,"$mask",void 0),Vi([Object(r.h)("slot")],Qi.prototype,"$slot",void 0),Vi([Object(r.h)(".close")],Qi.prototype,"$close",void 0),Qi=Vi([Object(r.c)("i-side2")],Qi);i(489);var Yi=i(682),Xi=i.n(Yi),Zi=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Ki=class extends r.a{constructor(){super(...arguments),this.title="",this.borderBottom=!0,this.showSetting=!1}handleSetting(t){t.stopPropagation();const e=new CustomEvent("on-setting",{bubbles:!0,composed:!0});this.dispatchEvent(e)}render(){return r.e`
      <div class="i-side2-header ${this.borderBottom?"border-bottom":""}">
        <slot name="content">
          <div class="default-content">
            <div class="default-title">${this.title}</div>
            ${this.showSetting?r.e`
                  <div class="default-setting" @click=${this.handleSetting}>
                    <i-svg class="default-setting-btn" src="${Xi.a}"></i-svg>
                  </div>
                `:""}
          </div>
        </slot>
        <slot name="setting"></slot>
      </div>
    `}};Ki.styles=r.b`
    .i-side2-header {
      height: var(--side-header-height);
      box-sizing: border-box;
      border-bottom: 1px solid transparent;
      background-color: #fff;
    }

    .border-bottom {
      border-bottom-color: rgb(239, 239, 239);
    }
    .default-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      height: 100%;
      box-sizing: border-box;
      padding: 0 30px;
    }

    .default-title {
      font-size: 27px;
      color: rgb(51, 51, 51);
    }
    .default-setting {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 44px;
      height: 44px;
      margin-right: 23px;
      transition: all ease 0.2s;
      border-radius: 6px;
      cursor: pointer;
      transform: translateZ(10px);
    }
    .default-setting:hover {
      background: rgba(0, 0, 0, 0.05);
    }
    :host(.setting-active) .default-setting {
      background: rgba(0, 0, 0, 0.05);
    }
    .default-setting-btn {
      width: 28px;
      height: 28px;
    }
    .default-setting-btn:hover {
      opacity: 0.8;
    }
  `,Zi([Object(r.g)({type:String})],Ki.prototype,"title",void 0),Zi([Object(r.g)({type:Boolean})],Ki.prototype,"borderBottom",void 0),Zi([Object(r.g)({type:Boolean})],Ki.prototype,"showSetting",void 0),Ki=Zi([Object(r.c)("i-side2-header")],Ki);var Ji=i(631),to=r.b`button {
  border: none;
  background: none;
  outline: none;
}
h1,
h2,
h3,
h4,
h5,
p {
  margin: 0;
}
.tips {
  padding: 24px 30px;
  height: 35px;
}
.tips > div {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 100%;
}
.tips > div > span {
  font-size: 12px;
  color: #999999;
  cursor: text;
}
.tips i-svg {
  width: 20px;
  cursor: pointer;
}
.container {
  display: flex;
  flex-direction: column;
  height: calc(100% - var(--side-header-height));
  overflow: hidden;
}
.container .main-list {
  box-sizing: border-box;
  width: 100%;
  flex: 1;
  padding-left: 30px;
  overflow-x: hidden;
}
.container .side-weather-list {
  width: 360px;
}
.unit-setting-wrapper {
  box-sizing: border-box;
  position: absolute;
  top: 90px;
  width: 360px;
  height: 76px;
  padding: 0 24px;
  left: 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #fff;
  box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.1);
  z-index: 9;
  border-radius: 6px;
}
.unit-setting-wrapper.hide {
  display: none;
}
.unit-setting-wrapper .unit {
  font-size: 20px;
  color: #999999;
}
.unit-setting-wrapper .unit .active {
  color: #333333;
}
.unit-setting-wrapper infinito-button {
  width: auto;
  height: auto;
}
/* weather-list */
.empty {
  margin: 75px 0 50px;
}
.empty img {
  display: block;
  margin: 0 auto;
  width: 86px;
  height: 86px;
}
.empty img + p {
  font-size: 14px;
  color: #999;
  text-align: center;
}
.item {
  box-sizing: border-box;
  padding: 12px 0;
}
.sort-item.hide {
  animation: hide 300ms 0s ease forwards;
}
@keyframes hide {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(200%);
  }
}
/* weather-item */
weather-item {
  display: block;
}
.drag-item {
  box-sizing: border-box;
  position: fixed;
  z-index: 9999;
  width: 360px;
  height: 99px;
  pointer-events: none;
  cursor: pointer;
}
.drag-item i-dot-expanded {
  opacity: 1;
}
.side-weather-item {
  position: relative;
  box-sizing: border-box;
  background: #0f7cff;
  border-radius: 6px;
  overflow: hidden;
  cursor: pointer;
}
.side-weather-item:hover i-dot-expanded {
  opacity: 1;
}
.side-weather-item.hide {
  animation: hide 300ms 0s ease forwards;
}
.side-weather-item .head-panel {
  box-sizing: border-box;
  position: relative;
  height: 99px;
  padding: 0 6px 0 20px;
}
.side-weather-item .head-panel .delete-btn {
  position: absolute;
  left: -12px;
  top: 50%;
  transform: translateY(-50%);
  color: red;
  transition: all 300ms;
  cursor: pointer;
}
.side-weather-item .head-panel .delete-btn img {
  width: 24px;
}
.side-weather-item .head-panel .drag-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  cursor: pointer;
  transition: all 300ms;
}
.side-weather-item .head-panel .drag-btn img {
  width: 14px;
  height: 14px;
}
.side-weather-item .head-panel .hidden {
  opacity: 0;
}
.side-weather-item .info-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 100%;
  color: #fff;
}
.side-weather-item .info-content .left {
  flex: 1;
  overflow: hidden;
  margin-right: 30px;
}
.side-weather-item .info-content .left .city-name {
  margin-bottom: 12px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 18px;
  font-weight: 400;
}
.side-weather-item .info-content .left .weather-status-wrapper {
  display: flex;
  align-items: center;
}
.side-weather-item .info-content .left .weather-status-wrapper .weather-status {
  font-size: 12px;
  font-weight: 300;
}
.side-weather-item .info-content .left .weather-status-wrapper .icon-tmp {
  width: 30px;
  height: 30px;
  margin-right: 6px;
  margin-left: -2px;
}
.side-weather-item .info-content .left .weather-status-wrapper .icon-tmp img {
  width: 100%;
  height: 100%;
}
.side-weather-item .info-content .right {
  box-sizing: border-box;
  display: flex;
  align-items: center;
  height: 100%;
}
.side-weather-item .info-content .right .temp {
  font-family: PingFangSC-Thin, PingFang SC;
  font-size: 42px;
  font-weight: 100;
  color: #fff;
}
.side-weather-item .body-panel {
  height: 0;
  overflow: hidden;
}
.side-weather-item .body-panel.open {
  animation: open 300ms 0s ease forwards;
}
.side-weather-item .body-panel.close {
  animation: close 300ms 0s ease forwards;
}
.side-weather-item .body-panel.hidden {
  height: 0;
}
.side-weather-item ul {
  display: flex;
  margin: 0;
  padding: 0;
  padding-top: 23px;
  box-sizing: border-box;
}
.side-weather-item ul li {
  width: 25%;
  list-style: none;
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.side-weather-item ul li .date {
  margin-bottom: 16px;
  max-width: 100px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.side-weather-item ul li img {
  box-sizing: border-box;
  width: 34px;
  height: 34px;
  margin-bottom: 12px;
}
.side-weather-item ul li .temp {
  margin-bottom: 27px;
  font-size: 12px;
}
.side-weather-item ul li .detail-name {
  margin-bottom: 8px;
  font-size: 12px;
  text-align: center;
}
.side-weather-item ul li .detail-num {
  font-size: 12px;
}
i-dot-expanded {
  margin-left: 6px;
  margin-bottom: auto;
  margin-top: 10px;
  --dot-color: #fff;
  --dot-hover: rgba(0, 0, 0, 0.15);
  opacity: 0;
  transition: opacity 0.3s;
  outline: none;
}
i-dot-expanded:focus {
  opacity: 1;
  background: var(--dot-hover);
}
@keyframes open {
  from {
    height: 0;
  }
  to {
    height: 310px;
  }
}
@keyframes close {
  from {
    height: 310px;
  }
  to {
    height: 0;
  }
}
@keyframes hide {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(200%);
  }
}
`,eo=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let io=class extends a.a{constructor(){super(...arguments),this.store=s.weatherStore,this.parentEle=this.parentElement}_slice(t,e=0,i=4){return t.slice(e,i)}renderDate(t){let e="";switch(new Date(t).getDay()){case 0:e=""+Object(Z.i18n)("sun");break;case 1:e=""+Object(Z.i18n)("mon");break;case 2:e=""+Object(Z.i18n)("tue");break;case 3:e=""+Object(Z.i18n)("wed");break;case 4:e=""+Object(Z.i18n)("thu");break;case 5:e=""+Object(Z.i18n)("fri");break;default:e=""+Object(Z.i18n)("sat")}return e}renderTemp(t){return"celsius"===this.store.unit?t:Math.floor(1.8*t+32)}handleToggle(t){t.preventDefault(),t.stopPropagation(),"true"===this.open?this.open="false":this.open="true"}delete(t,e){this.dispatchEvent(new CustomEvent("on-delete",{detail:{cid:e},bubbles:!0,composed:!0}))}toTop(t,e){this.store.toTop(this.cid,e)}render(){var t,e,i,o,n;const a=this.store.formateList.filter(t=>t.cid===this.cid),{name:s="",items:l=[],cid:c="",top:d=0}=a.length?a[0]:{},p=c===(null===(t=this.store.formateList[0])||void 0===t?void 0:t.cid);return r.e`
      <div class="side-weather-item" style="background: ${null===(e=null==l?void 0:l[0])||void 0===e?void 0:e._bgColor}">
        <div
          class="head-panel"
          @click="${this.handleToggle}"
        >
          <div class="info-content">
            <div class="left">
              <h4 class="city-name">${s}</h4>
              <div class="weather-status-wrapper">
                <div class="icon-tmp">
                  <img
                    draggable="false"
                    src="${null===(i=null==l?void 0:l[0])||void 0===i?void 0:i._bgImg}"
                    @dragstart=${t=>t.preventDefault()}
                  />
                </div>
                <p class="weather-status">${null===(o=null==l?void 0:l[0])||void 0===o?void 0:o._text}</p>
              </div>
            </div>
            <div class="right">
              <div class="temp">${this.renderTemp(null===(n=null==l?void 0:l[0])||void 0===n?void 0:n.tmpMax)}</div>
              <i-dot-expanded>
                ${p?null:r.e`
                      <li class="weather-dot-item" @click=${t=>this.toTop(t,d)}>
                        ${Object(Z.i18n)("set_top")}
                      </li>
                    `}
                <li class="weather-dot-item" @click="${t=>this.delete(t,c)}">${Object(Z.i18n)("del_folder")}</li>
              </i-dot-expanded>
            </div>
          </div>
        </div>
        <div
          class="body-panel"
          class=${Object(Y.a)({"body-panel":!0,open:"true"===this.open,close:"false"===this.open})}
          @click=${this.handleToggle}
        >
          <ul>
            ${this._slice(l).map(t=>r.e`
                <li>
                  <div class="date">${this.renderDate(t.time)}</div>
                  <img
                    draggable="false"
                    src="${t._bgImg}"
                    @dragstart=${t=>t.preventDefault()}
                  />
                  <div class="temp">${this.renderTemp(t.tmpMin)}/${this.renderTemp(t.tmpMax)}</div>
                  <div class="detail-name">${Object(Z.i18n)("wind_force")}</div>
                  <div class="detail-name">${t.windScale?t.windScale:Object(Z.i18n)("no_data")}</div>
                  <div class="detail-name">${Object(Z.i18n)("relative_humidity")}</div>
                  <div class="detail-name">${t.humidity?t.humidity+"%":Object(Z.i18n)("no_data")}</div>
                  <div class="detail-name">${Object(Z.i18n)("air_pressure")}</div>
                  <div class="detail-num">${t.pressure?t.pressure+" hPa":Object(Z.i18n)("no_data")}</div>
                </li>
              `)}
          </ul>
        </div>
      </div>
    `}createRenderRoot(){return this}};io.styles=to,eo([Object(r.h)(".body-panel")],io.prototype,"bodyPanel",void 0),eo([Object(r.g)({type:String,reflect:!0})],io.prototype,"cid",void 0),eo([Object(r.g)({type:String,reflect:!0})],io.prototype,"open",void 0),io=eo([Object(r.c)("weather-item")],io);var oo=i(683),no=i.n(oo),ro=i(646),ao=i.n(ro),so=i(684),lo=i.n(so),co=i(685),po=i.n(co),ho=i(686),uo=i.n(ho),go=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let fo=class extends a.a{constructor(){super(),this.store=s.weatherStore,this.selectedIdx=-1,document.addEventListener("keydown",t=>{const{citys:e}=this.store,i=t.keyCode;if(40===i||38===i){if(this.searchEle.blur(),e.length<1)return;for(const t in e)this.store.changeSelected(Number(t),!1);40===i?(this.selectedIdx<e.length-1&&this.selectedIdx++,this.scoll(this.selectedIdx,"down",!1)):(this.selectedIdx>0&&(this.selectedIdx--,this.scoll(this.selectedIdx,"up",!1)),-1===this.selectedIdx&&(this.selectedIdx=e.length-1,this.scoll(this.selectedIdx,"up",!0))),this.store.changeSelected(this.selectedIdx,!0)}if(13===i){const t=this.store.citys[this.selectedIdx];t&&this.addToLocal(t.cid,t.city)}})}scoll(t,e,i){const o=this.shadowRoot.querySelector(".list ul"),n=o.offsetTop;"up"===e&&t<5&&(o.scrollTop-=30),"down"===e&&t>5&&(o.scrollTop+=80),"up"===e&&i&&(o.scrollTop=n)}async handleSearch(t){const e=t.detail.text;await this.store.searchCitys(e),this.selectedIdx=-1}async reload(){const t=this.searchEle.value;await this.store.searchCitys(t),this.selectedIdx=-1}clear(){this.store.searchCitys("")}async addToLocal(t,e){try{await this.store.addCity(t,e),this.searchEle.clear()}catch(t){rt.message.error(t.message)}}close(){this.store.closeModal(),this.searchEle.clear()}updated(){this.store.isShowModal?this.searchEle.focus():this.searchEle.clear()}render(){return r.e` <div class="box">
      <!-- <i-svg class="close" src="${no.a}" @click="${this.close}"></i-svg> -->
      <div class="search-container">
        <span class="title">${Object(Z.i18n)("add_city")}</span>
        <div class="search-wrapper">
          <i-search
            placeholder="${Object(Z.i18n)("input_city")}"
            @i-search="${c.a.debounce(this.handleSearch,200)}"
            @i-clear=${this.clear}
          >
          </i-search>
        </div>
        <div class="list">
          <ul class="global-scrollbar">
            ${"none"!==this.store.searchState?this.renderSearchList():this.renderLocaleData()}
          </ul>
        </div>
      </div>
    </div>`}renderLocaleData(){const{localData:t,list:e}=this.store;if(!Object.keys(t||{}).length)return null;const{cid:i,city:o,country:n,selected:a}=t;return e.some(t=>t.cid===i)?null:r.e`
      <li class="default ${a?"selected":""}" @click="${()=>this.addToLocal(i,o)}">
        <div class="padding-box">
          <div class="pre">
            <i-svg class="location-icon" src="${lo.a}"></i-svg>
            <span>${o}，${n}</span>
          </div>
        </div>
      </li>
    `}renderSearchList(){const{citys:t,searchState:e}=this.store;return"ing"===e?r.e`
        <div class="no-data">
          <i-svg class="empty-icon" src="${po.a}"></i-svg>
          <p>${Object(Z.i18n)("searching")}</p>
        </div>
      `:"done"===e?t.length?r.e`
        ${t.map(t=>r.e`
            <li
              class="default ${t.selected?"selected":""} ${t.isAdded?"disabled":""}"
              @click="${()=>this.addToLocal(t.cid,t.city)}"
            >
              <div class="padding-box">
                <div class="pre">
                  <span>${t.city}，${t.country}</span>
                </div>
              </div>
            </li>
          `)}
      `:r.e`
          <div class="no-data">
            <i-svg class="empty-icon" src="${ao.a}"></i-svg>
            <p>${Object(Z.i18n)("no_search_result")}</p>
          </div>
        `:"error"===e?r.e`
        <div class="no-data">
          <i-svg class="empty-icon" src="${uo.a}"></i-svg>
          <p>${Object(Z.i18n)("search_error")} <span class="reload" @click=${this.reload}>${Object(Z.i18n)("reload")}</span></p>
        </div>
      `:void 0}};fo.styles=[A.a,r.b`
      :host {
        display: block;
      }
      ul {
        margin: 0;
        padding: 0;
      }
      li {
        list-style: none;
      }
      .box {
        display: block;
        width: 410px;
        max-height: 540px;
        min-height: 400px;
        height: 60vh;
        background: white;
        border-radius: 6px;
      }
      .close {
        position: absolute;
        right: 20px;
        top: 20px;
        width: 14px;
        height: 14px;
        cursor: pointer;
        transition: opacity 0.3s;
      }
      .close:hover {
        opacity: 0.4;
      }
      .search-container {
        box-sizing: border-box;
        display: flex;
        flex-flow: column;
        width: 100%;
        height: 100%;
        padding: 40px 0;
      }
      .search-wrapper {
        padding: 0 30px;
      }
      .list {
        margin-top: 8px;
        flex: 1;
        overflow: hidden;
      }
      .list ul {
        height: 100%;
        overflow-y: auto;
      }
      .list li {
        margin: 0;
        height: 52px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding: 0 30px;
      }
      .list li:hover {
        background: #f7f7f7;
      }
      .list .selected {
        background: #f7f7f7;
      }
      .list .selected span,
      .list .selected i-svg {
        color: #333 !important;
        font-weight: 500 !important;
      }
      .list li:hover .list li .padding-box {
        border-color: #f7f7f7 !important;
      }
      .list .padding-box i-svg {
        width: 22px;
        color: rgb(101, 101, 101);
        margin-right: 8px;
      }
      .list .padding-box span {
        color: #999;
      }
      .list .disabled span {
        color: rgba(0, 0, 0, 0.4);
      }
      .list .disabled {
        cursor: not-allowed;
      }
      .list .padding-box .location-icon {
        width: 14px;
      }
      .list li .padding-box {
        display: flex;
        width: 350px;
        border-bottom: 1px solid #f7f7f7;
        height: 100%;
        align-items: center;
        justify-content: space-between;
      }
      .list li .padding-box .pre {
        display: flex;
        align-items: center;
      }
      .list li:hover span,
      .list li:hover i-svg {
        color: #333 !important;
      }
      .list .disabled:hover span.list .disabled:hover i-svg {
        color: rgba(0, 0, 0, 0.4);
      }
      .title {
        display: block;
        width: 100%;
        margin-bottom: 30px;
        color: #333;
        font-size: 20px;
        text-align: center;
      }
      .no-data {
        display: flex;
        width: 100%;
        height: 100%;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        color: #656565;
      }
      .no-data .empty-icon {
        width: 40px;
        height: 40px;
        margin-bottom: 20px;
      }
      .no-data .reload {
        color: #333;
        cursor: pointer;
      }
    `],go([Object(r.g)({type:Number})],fo.prototype,"selectedIdx",void 0),go([Object(r.h)("i-search")],fo.prototype,"searchEle",void 0),fo=go([Object(r.c)("add-weather-modal")],fo);var mo=i(687),bo=i.n(mo),yo=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let vo=class extends a.a{constructor(){super(...arguments),this.store=s.weatherStore,this.flipping=!1,this.cloneEle=null,this.dragOffsetY=0,this.dropTime=0,this.endtime=0,this.startMove=!1,this.dragId=null,this.sortedList=[],this.opt="",this.itemHeight=99*s.settingStore.sideRatio,this.dragStart=({y:t,dragElement:e})=>{this.weatherMainContent.style.cursor="pointer";this.weatherWrapper.querySelectorAll(".item").forEach(t=>{t.querySelector("weather-item").removeAttribute("open")});const{top:i}=e.getBoundingClientRect();if(this.dragOffsetY=t-i>this.itemHeight?this.itemHeight:t-i,this.dragOffsetY=this.dragOffsetY<0?0:this.dragOffsetY,this.dragEndTimer&&(clearTimeout(this.dragEndTimer),this.dragEndTimer=void 0),!this.cloneEle){this.cloneEle=e.cloneNode(!0),this.cloneEle.className="drag-item";let t=document.body.style.getPropertyValue("--top-bar-height");t=Number(t.substring(0,t.length-2)),this.cloneEle.style.top=i/s.settingStore.sideRatio-t/s.settingStore.sideRatio+"px",this.cloneEle.dataset.id=e.dataset.id,this.weatherWrapper.appendChild(this.cloneEle),this.dragId=this.cloneEle.dataset.id}e.style.opacity=".4"},this.dragMove=({y:t})=>{let e=document.body.style.getPropertyValue("--top-bar-height");e=Number(e.substring(0,e.length-2)),this.cloneEle&&(this.cloneEle.style.top=(t-this.dragOffsetY)/s.settingStore.sideRatio-e+"px")},this.dragEnd=()=>{let t;if(this.startMove=!1,!this.cloneEle)return;const e=this.cloneEle.dataset.id;let i=document.body.style.getPropertyValue("--top-bar-height");i=Number(i.substring(0,i.length-2)),this.endtime=Date.now();if(this.endtime-this.dropTime>150){this.weatherWrapper.querySelectorAll(".weather-drag").forEach(o=>{if(o.dataset.id===e){const e=o.getBoundingClientRect().top;t=e/s.settingStore.sideRatio-i/s.settingStore.sideRatio}}),this.cloneEle.style.transition="all 0.3s ease-out",this.cloneEle.style.top=t+"px",this.dragEndTimer=setTimeout(()=>{this.cloneEle&&(this.weatherWrapper.removeChild(this.cloneEle),this.cloneEle=null,this.dragId=null),this.dragEndTimer=void 0},300)}else this.weatherWrapper.removeChild(this.cloneEle),this.cloneEle=null,this.dragId=null;this.weatherWrapper.querySelectorAll(".weather-drag").forEach(t=>{t.style.opacity="1"}),this.weatherMainContent.style.cursor="auto"},this.dragDrop=async({dropElement:t})=>{if(this.flipping)return;if(!this.cloneEle)return;this.dropTime=Date.now();const e=t.dataset.id,i=this.cloneEle.dataset.id;if(this.store.changeIndex(i,e),await this.updateComplete,e!==i){this.weatherWrapper.querySelectorAll(".weather-drag").forEach(t=>{const e=t.dataset.id;t.style.opacity=e===i?".4":"1"})}},this.closeModal=()=>{this.store.closeModal()}}firstUpdated(){this.initDrag();let t=300;s.settingStore.sideScaleRatio>1&&(t*=s.settingStore.sideScaleRatio),this.flip=new Q({root:this.weatherWrapper,duration:t}),this.flip.read(),window.addEventListener("click",()=>this.store.closeSetting())}update(t){this.flip&&this.flip.read(),super.update(t)}updated(){this.flipping=!0,"delete"!==this.opt&&this.flip.play({props:["position"]}).then(()=>{this.flipping=!1})}initDrag(){new ii({dragRoot:this,dragSelector:".weather-drag",dropRoot:this.shadowRoot,dropSelector:".weather-drop",dropLine:"y"}).subscribe(t=>{switch(t.type){case"dragStart":this.startMove=!1;break;case"dragMove":!this.startMove&&t.payload.startMove?(this.startMove=!0,this.dragStart(t.payload)):t.payload.startMove&&(this.opt="other",this.dragMove(t.payload));break;case"drop":this.dragDrop(t.payload);break;case"dragEnd":this.dragEnd()}})}handleSetting(t){t.stopPropagation(),this.store.toggleSetting()}changeUnit(t){t.stopPropagation(),this.store.changeUnit()}handleTabClose(){this.weatherWrapper.parentElement.scrollTop=0;const t=this.weatherWrapper.querySelectorAll(".item");t.length&&setTimeout(()=>{t.forEach(t=>{t.querySelector("weather-item").removeAttribute("open")})},500)}afterHide(){this.handleTabClose()}render(){const{isShowModal:t,unit:e,isShowSetting:i,formateList:o,lastUpdated:n}=this.store;return r.e`
      <i-side2-header
        class="weather-drop"
        class=${Object(Y.a)({"weather-drop":!0,"setting-active":i})}
        data-id="top"
        .showSetting=${!0}
        .title="${Object(Z.i18n)("weather")}"
        @on-setting="${this.handleSetting}"
      >
        <div
          slot="setting"
          style=${Object(Ji.a)({display:i?"block":"none",position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px","z-index":"8"})}
        >
          <div class="unit-setting-wrapper ${i?"":"hide"}" @click=${t=>t.stopPropagation()}>
            <div style="display:${"celsius"!==e?"flex":"none"}" class="unit">
              C/<span class="active">F</span>
            </div>
            <div style="display:${"celsius"===e?"flex":"none"}" class="unit">
              <span class="active">C</span>/F
            </div>
            <infinito-button @click="${this.changeUnit}" .scaleRatio=${s.settingStore.sideScaleRatio}>
              ${Object(Z.i18n)("switch_to")} ${"celsius"===e?""+Object(Z.i18n)("fahrenheit"):""+Object(Z.i18n)("celsius")}
            </infinito-button>
          </div>
        </div>
      </i-side2-header>
      <div class="container">
        <div class="last_time_update weather-drop" data-id="top">
          <span>${Object(Z.i18n)("last_time_update")}: ${c.a.fmtTime(n)}</span>
        </div>
        <div class="global-scrollbar main-list weather-drop" id="weather-main-content" data-id="bottom">
          <div class="side-weather-list" style="position: relative;">
            ${o.length?this.renderCityList():r.e`
                  <div class="empty">
                    <img src=${bo.a} />
                    <p>${Object(Z.i18n)("weather_empty")}</p>
                  </div>
                `}
          </div>
          <infinito-button class="add-city" @click="${this.addCity}" .scaleRatio=${s.settingStore.sideScaleRatio}
            >${Object(Z.i18n)("add_city")}</infinito-button
          >
        </div>
      </div>
      <infinito-portal-entrance destination="weather">
        <infinito-modal .open=${t} style="--modal-padding: 0;" .onCancel="${this.closeModal}">
          <div slot="body">
            <add-weather-modal></add-weather-modal>
          </div>
        </infinito-modal>
      </infinito-portal-entrance>
    `}renderCityList(){const{formateList:t}=this.store;return r.e`
      ${t.map(t=>r.e`
            <div class="item sort-item weather-drop" data-id=${t.cid} flipkey=${t.cid}>
              <weather-item
                class="weather-drag"
                .cid=${t.cid}
                data-id=${t.cid}
                @on-delete=${this.handleDelete}
              ></weather-item>
            </div>
          `)}
    `}async handleDelete(t){this.opt="delete",t.target.parentNode.classList.add("hide"),setTimeout(()=>{this.store.deleteCityWeather(t.detail.cid);this.weatherWrapper.querySelectorAll(".sort-item").forEach(t=>t.classList.remove("hide"))},200)}addCity(){this.store.initLocal(),this.store.openModal()}};vo.styles=[to,A.a,r.b`
      :host {
        display: block;
        height: 100%;
        background-color: #fff;
      }
      .last_time_update {
        padding: 24px 30px;
        color: #999;
        font-size: 12px;
      }
      .add-city {
        --border-color: #efefef;
        --button-color: #efefef;
        --hover-color: #dfdfdf;
        --hover-font-color: #333;
        display: block;
        width: 360px;
        height: 52px;
        margin: 12px 0 15px 0;
      }
    `],yo([Object(r.f)()],vo.prototype,"dragId",void 0),yo([Object(r.h)(".drag-fake-wrapper")],vo.prototype,"dragFakeWrapper",void 0),yo([Object(r.h)("#weather-main-content")],vo.prototype,"weatherMainContent",void 0),yo([Object(r.h)(".side-weather-list")],vo.prototype,"weatherWrapper",void 0),yo([Object(r.h)(".main-list")],vo.prototype,"mainWrapper",void 0),yo([Object(r.g)({type:Array})],vo.prototype,"sortedList",void 0),yo([Object(r.g)({type:String})],vo.prototype,"opt",void 0),vo=yo([Object(r.c)("side-weather")],vo);var wo=r.b`.side-todos-container {
  display: flex;
  flex-direction: column;
  position: relative;
  width: 100%;
  height: calc(100% - var(--side-header-height));
  overflow: auto;
  padding-top: 30px;
  box-sizing: border-box;
}
.side-todos-container .list {
  flex: 1;
}
.side-todos-remove {
  display: flex;
  justify-content: space-between;
  padding: 15px 30px;
}
.side-todos-remove button {
  padding: 0;
  border: none;
  background: none;
  color: #a2a2a2;
  outline: none;
  cursor: not-allowed;
  font-weight: 500;
}
.side-todos-remove button:hover {
  opacity: 0.7;
}
.side-todos-remove button.allow {
  color: #333333;
  cursor: pointer;
}
.side-todos-input-wrapper {
  position: relative;
  padding: 0 30px;
}
.side-todos-input-wrapper .side-todos-input {
  box-sizing: border-box;
  width: 360px;
  height: 52px;
  background: #ffffff;
  border: 1px solid #999;
  border-radius: 6px;
  padding: 12px;
  padding-right: 50px;
  outline: none;
  color: #333;
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
}
.side-todos-input-wrapper .side-todos-input:hover {
  border-color: #333;
}
.side-todos-input-wrapper .side-todos-input:focus {
  border-color: #333;
}
.side-todos-input-wrapper .icon {
  position: absolute;
  width: 14px;
  height: 14px;
  top: 18px;
  right: 50px;
  cursor: pointer;
}
.side-todos-input-wrapper .icon .clear-icon {
  width: 100%;
}
/**
 * checkbox 样式
 */
.i-checkbox {
  position: relative;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  margin: 3px 13px 0 0;
  border: 2px solid #333;
  border-radius: 6px;
}
.i-checkbox::after {
  content: ' ';
  position: absolute;
  top: 50%;
  left: 2px;
  display: table;
  width: 4px;
  height: 7px;
  border-top: 0;
  border-left: 0;
  opacity: 0;
  transform: rotate(45deg) scale(0) translate(-50%, -50%);
}
.i-checkbox.i-checkbox-checked {
  border-color: #999;
}
.i-checkbox.i-checkbox-checked::after {
  border: 2px solid #999;
  border-top: 0;
  border-left: 0;
  opacity: 1;
  transform: rotate(45deg) scale(1) translate(-50%, -50%);
}
.i-checkbox .i-checkbox-input {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  margin: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  cursor: pointer;
  opacity: 0;
}
/**
 * side-todo-item
 */
.side-todos-item {
  box-sizing: border-box;
  position: relative;
  padding: 24px 30px;
  min-height: 72px;
  cursor: pointer;
}
.side-todos-item::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 30px;
  right: 30px;
  height: 1px;
  background: #eeeeee;
}
.side-todos-item.normal:hover {
  background: #f6f6f6;
}
.side-todos-item.normal:hover .dot-container {
  opacity: 1;
}
.side-todos-item.normal:hover .side-todos-item-text {
  color: #999;
}
.side-todos-item.normal:focus-within {
  background: #f6f6f6;
}
.side-todos-item.normal:focus-within .dot-container {
  opacity: 1;
}
.side-todos-item.done .side-todos-item-text {
  text-decoration: line-through;
  color: #999;
}
.side-todos-item.done .date {
  color: #999 !important;
}
.side-todos-item .content {
  box-sizing: border-box;
  position: relative;
  display: flex;
  align-items: flex-start;
  cursor: pointer;
}
.side-todos-item .side-todos-item-text {
  font-family: PingFangSC-Regular, PingFang SC;
  box-sizing: border-box;
  flex: 1;
  font-size: 14px;
  color: #333;
  font-weight: 400;
  transition: all 0.1s ease-in-out;
  line-height: 22px;
  margin: 0;
  padding: 0;
  max-width: 300px;
  max-height: 90px;
  word-wrap: break-word;
  word-break: break-all;
}
.side-todos-item .side-todos-item-text.pure-text {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 4;
  line-clamp: 4;
  -webkit-box-orient: vertical;
}
.side-todos-item .side-todos-item-text.global-scrollbar.edit-text {
  overflow-x: hidden;
  width: 100%;
  cursor: auto;
  outline: none;
  border: none;
  background: none;
  overflow: auto;
  resize: none;
}
.side-todos-item .date {
  display: flex;
  align-items: center;
  position: absolute;
  right: 30px;
  bottom: 8px;
  font-size: 12px;
  color: #333;
  font-weight: 400;
  cursor: default;
}
.side-todos-item .date.red {
  color: #ea4747;
}
.side-todos-item .date > img {
  display: block;
  width: 16px;
  margin-right: 7px;
}
.side-todos-item .date > i {
  font-style: normal;
}
.side-todos-item .dot-container {
  box-sizing: border-box;
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-around;
  width: 32px;
  height: 32px;
  padding: 6px 0;
  margin-left: 12px;
  border-radius: 4px;
  margin-top: -10px;
  opacity: 0;
  transition: opacity 0.3s;
  outline: none;
}
.side-todos-item .dot-container:hover {
  background: rgba(0, 0, 0, 0.15);
}
.side-todos-item .dot-container:focus,
.side-todos-item .dot-container.active {
  opacity: 1;
  background: rgba(0, 0, 0, 0.15);
}
.side-todos-item .dot-container > span {
  width: 3px;
  height: 3px;
  border-radius: 50%;
  background: #333;
}
.side-todos-item .dot-container ul {
  display: none;
}
.side-todos-lists {
  width: 100%;
  height: auto;
}
`;function xo(t,e){const i=[];if(void 0===t||void 0===e){const i=new Date;t=i.getFullYear(),e=i.getMonth()+1}const o=new Date(t,e-1,1);let n=o.getDay();0===n&&(n=7),t=o.getFullYear(),e=o.getMonth()+1;const r=new Date(t,e-1,0).getDate(),a=n,s=new Date(t,e,0).getDate();for(let o=0;o<42;o++){const n=o+1-a;let l=n,c=e;n<=0?(c=e-1,l=r+n):n>s&&(c=e+1,l-=s),0===c&&(c=12),13===c&&(c=1),i.push({year:t,month:c,date:n,showDate:l})}return{year:t,month:e,days:i}}var _o=i(688),ko=i.n(_o),Oo=i(689),Ao=i.n(Oo),So=i(690),Io=i.n(So),jo=r.b`:host {
  --main-bg-color: #fff;
  --input-color: rgba(0, 0, 0, 0.65);
  --border-color: #c9c9c9;
  --th-color: rgba(0, 0, 0, 0.85);
  --td-color: var(--input-color);
  --td--prevmonth-color: rgba(0, 0, 0, 0.25);
}
.datepicker-wrapper {
  position: relative;
  width: 280px;
  height: 402px;
  background: var(--main-bg-color);
  border-radius: 6px;
}
.datepicker-header {
  padding: 16px;
  padding-bottom: 0;
  border-bottom: 1px solid var(--border-color);
}
.h-container {
  box-sizing: border-box;
  display: flex;
  width: 248px;
  height: 28px;
  border-radius: 4px;
  border: 1px solid var(--border-color);
  background: var(--main-bg-color);
}
.input-control {
  position: relative;
  flex: 1;
}
.icon {
  display: none;
  position: absolute;
  right: 5px;
  top: 3px;
  width: 10px;
  height: 10px;
  cursor: pointer;
}
.icon.show {
  display: block;
}
.icon:hover {
  opacity: 0.5;
}
.icon img {
  width: 100%;
  height: 100%;
}
.spacer {
  width: 1px;
  height: 12px;
  margin-top: 7px;
  background: var(--border-color);
}
input {
  width: 100%;
  height: 100%;
  padding: 10px 16px;
  color: var(--input-color);
  outline: none;
  border: none;
  background: none;
  box-sizing: border-box;
}
.year-month-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 0 8px;
}
.arrow {
  cursor: pointer;
}
.arrow img {
  width: 12px;
  height: 12px;
}
.arrow:hover {
  opacity: 0.5;
}
.year-month {
  margin: 0;
  font-size: 14px;
  color: rgba(0, 0, 0, 0.85);
}
.datepicker-body {
  padding: 16px 24px;
  border-bottom: 1px solid var(--border-color);
}
.datepicker-body table {
  width: 100%;
  border-collapse: collapse;
}
.datepicker-body th,
.datepicker-body td {
  height: 33px;
  line-height: 33px;
  text-align: center;
  padding: 0;
}
.datepicker-body th {
  color: var(--th-color);
  font-size: 14px;
  max-width: 34px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.datepicker-body td {
  font-size: 14px;
  cursor: pointer;
  color: var(--td-color);
}
.datepicker-body td.gray {
  color: var(--td--prevmonth-color);
}
.datepicker-body td.today {
  background: #eeeeee;
  border-radius: 2px;
}
.datepicker-body td.active {
  color: #fff;
  background: #333333;
  border-radius: 2px;
}
.datepicker-footer {
  display: flex;
  justify-content: center;
}
infinito-button {
  margin-top: 10px;
  width: 76px;
  height: 32px;
  background: #333333;
  box-shadow: 0px 12px 48px 16px rgba(0, 0, 0, 0.03);
  border-radius: 6px;
  color: #fff;
  outline: none;
  border: none;
  cursor: pointer;
}
.timer-dropdown {
  display: none;
  position: absolute;
  top: 44px;
  right: 16px;
  width: 123px;
  background: #fff;
  box-shadow: 0px 9px 28px 8px rgba(0, 0, 0, 0.05), 0px 6px 16px 0px rgba(0, 0, 0, 0.08), 0px 3px 6px -4px rgba(0, 0, 0, 0.12);
  border-radius: 4px;
}
.timer-dropdown.show {
  display: block;
}
.timer-dropdown .body {
  display: flex;
}
.timer-dropdown .body .time-range-wrapper {
  box-sizing: border-box;
  flex: 1;
  height: 196px;
  overflow: auto;
}
.timer-dropdown .body .time-range-wrapper > div::after {
  content: '';
  display: block;
  height: 164px;
}
.timer-dropdown .body .time-range-wrapper .range-item {
  height: 32px;
  font-size: 14px;
  line-height: 32px;
  padding-left: 16px;
  color: var(--td-color);
  transition: all 300ms ease-in-out;
  cursor: pointer;
  text-align: center;
  padding-left: 5px;
  box-sizing: border-box;
}
.timer-dropdown .body .time-range-wrapper .range-item.active {
  background: #f5f5f5;
}
.timer-dropdown .body .time-range-wrapper .range-item:hover {
  background: #f6f6f6;
}
.timer-dropdown .body .space {
  width: 1px;
  height: 196px;
  background: #efefef;
}
.timer-dropdown .header {
  box-sizing: border-box;
  display: flex;
  height: 38px;
  text-align: center;
  font-size: 14px;
  font-weight: 400;
  line-height: 38px;
  color: rgba(0, 0, 0, 0.65);
  border-bottom: 1px solid #efefef;
}
.timer-dropdown .header .h-item {
  flex: 1;
}
`,$o=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Co=class extends r.a{constructor(){super(...arguments),this.HEIGHT=32,this.monthData={},this.choosedDate="",this.choosedTime="",this.choosedHour="",this.choosedMins="",this.showTime=!1,this.hours=[],this.mins=[],this.defaultDates={},this.showClearTime=!1}firstUpdated(){this.monthData=xo(),this.datepickerWrapper.addEventListener("click",t=>{t.stopPropagation(),this.showTime=!1},!1);const{date:t,time:e,dueTimestamp:i}=this.defaultDates;if(this.choosedDate=t||this.format(new Date),this.choosedTime=e||"",this.choosedTime){const[t,e]=this.choosedTime.split(":");this.choosedHour=t,this.choosedMins=e}if(i)this.date=new Date(i);else{const e=c.a.internaDateToStan(t);e instanceof Date&&(this.date=new Date(e.getFullYear(),e.getMonth(),e.getDate(),+this.choosedHour,+this.choosedMins))}}updated(){const t=this.timeInput.value;this.showClearTime=!!t}setDefaultHour(){const t=(new Date).getHours();return t<=9?"0"+t:t}setDefaultMin(){const t=(new Date).getMinutes();return t<=9?"0"+t:t}async chooseTime(t){if(t.stopPropagation(),!this.choosedDate)return;this.showTime=!this.showTime;const{hours:e,mins:i}=function(){const t=[],e=[];for(let e=0;e<24;e++){const i=e<10?"0"+e:e;t.push(i)}for(let t=0;t<60;t++){const i=t<10?"0"+t:t;e.push(i)}return{hours:t,mins:e}}();this.hours=e,this.mins=i,this.choosedTime||(this.choosedHour=this.setDefaultHour()+"",this.choosedMins=this.setDefaultMin()+"",this.choosedTime=`${this.choosedHour}:${this.choosedMins}`,this.timeInput.value=this.choosedTime),await this.updateComplete,this.hoursPanel.scrollTop=Number(this.choosedHour)*this.HEIGHT,this.minsPanel.scrollTop=Number(this.choosedMins)*this.HEIGHT}selectHour(t,e){if(t.stopPropagation(),this.choosedHour=e,this.choosedTime){const t=this.choosedTime.split(":")[1];this.choosedTime=`${e}:${t}`,this.timeInput.value=`${e}:${t}`}else this.choosedTime=`${e}:${this.choosedMins}`,this.timeInput.value=`${e}:${this.choosedMins}`;this.hoursPanel.scrollTop=Number(e)*this.HEIGHT}selectMins(t,e){t.stopPropagation(),this.choosedMins=e,this.choosedTime=`${this.choosedHour}:${e}`,this.timeInput.value=`${this.choosedHour}:${e}`,this.minsPanel.scrollTop=Number(e)*this.HEIGHT,this.showTime=!1}listToMatrix(t,e){const i=[];for(let o=0,n=-1;o<t.length;o++)o%e==0&&(n++,i[n]=[]),i[n].push(t[o]);return i}format(t){return new Date(t).toLocaleDateString(l.D.lang)}changeMonth(t){const{monthData:{year:e,month:i}}=this;this.monthData=xo(e,"prev"===t?i-1:i+1)}handleClick(t){const{classList:e,dataset:i}=t.target,o=this.shadowRoot.querySelectorAll("td");Array.from(o).map(t=>t.classList.remove("active")),e.add("active");const{monthData:{year:n,month:r}}=this,a=new Date(n,r-1,i.date);this.choosedDate=this.format(a),this.monthData.date=i.date}submit(t){t.stopPropagation(),void 0===this.monthData.date&&(this.monthData.date=(new Date).getDate()),this.choosedHour||(this.choosedHour=String(9));const e=new Date(this.monthData.year,this.monthData.month-1,this.monthData.date,+this.choosedHour,+this.choosedMins).valueOf();this.dispatchEvent(new CustomEvent("on-submit",{detail:{data:e},bubbles:!0,composed:!0}))}setClasses(t,e){const i=t=>t<=9?"0"+t:t;let{month:o,showDate:n}=e;o=i(o),n=i(n);const r=e.date<=0?e.year-1:e.year;let a=!1,s=!1;const l=c.a.internaDateToStan(t);l instanceof Date&&(a=Number(r)===l.getFullYear()&&Number(o)===l.getMonth()+1&&Number(n)===l.getDate());const d=new Date;s=Number(r)===d.getFullYear()&&Number(o)===d.getMonth()+1&&Number(n)===d.getDate();return{active:a,today:s}}render(){const{choosedDate:t,choosedTime:e,monthData:{year:i="",month:o="",days:n=[]},showTime:a,hours:s,mins:l}=this,c=this.listToMatrix(n,7);return r.e`
      <div class="datepicker-wrapper">
        <div class="datepicker-header">
          <div class="h-container">
            <div class="input-control">
              <input name="date" placeholder="${Object(Z.i18n)("select_date")}" readonly value="${t}" />
              <div
                class="icon ${t?"show":""}"
                @click="${t=>{t.stopPropagation(),this.choosedDate="",this.choosedTime="",this.showTime=!1,this.choosedHour=this.setDefaultHour()+"",this.choosedMins=this.setDefaultMin()+"",this.timeInput.value=""}}"
              >
                <img src="${Io.a}" />
              </div>
            </div>
            <div class="spacer"></div>
            <div class="input-control" @click="${t=>this.chooseTime(t)}">
              <input readonly id="timeInput" placeholder="${Object(Z.i18n)("select_time")}" value="${e}" />
              <div
                class="icon ${this.showClearTime?"show":""}"
                @click=${t=>{t.stopPropagation(),this.choosedTime="",this.choosedHour=this.setDefaultHour()+"",this.choosedMins=this.setDefaultMin()+"",this.timeInput.value="",this.showClearTime=!1}}
              >
                <img src="${Io.a}" />
              </div>
            </div>
          </div>
          <div class="year-month-wrapper">
            <div class="arrow left-arrow" @click="${()=>this.changeMonth("prev")}">
              <img src="${ko.a}" />
            </div>
            <div class="t">
              <h2 class="year-month">${Object(Z.i18n)("year_month_date",[i,Object(Z.i18n)("month_"+o)])}</h2>
            </div>
            <div class="arrow right-arrow" @click="${()=>this.changeMonth("next")}">
              <img src="${Ao.a}" />
            </div>
          </div>
        </div>
        <div class="datepicker-body">
          <table>
            <thead>
              <tr>
                <th title="${Object(Z.i18n)("sun_min")}">${Object(Z.i18n)("sun_min")}</th>
                <th title="${Object(Z.i18n)("mon_min")}">${Object(Z.i18n)("mon_min")}</th>
                <th title="${Object(Z.i18n)("tue_min")}">${Object(Z.i18n)("tue_min")}</th>
                <th title="${Object(Z.i18n)("wed_min")}">${Object(Z.i18n)("wed_min")}</th>
                <th title="${Object(Z.i18n)("thu_min")}">${Object(Z.i18n)("thu_min")}</th>
                <th title="${Object(Z.i18n)("fri_min")}">${Object(Z.i18n)("fri_min")}</th>
                <th title="${Object(Z.i18n)("sat_min")}">${Object(Z.i18n)("sat_min")}</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              ${c.length?c.map(e=>r.e`<tr>
                      ${e.map(e=>r.e`<td
                          data-date="${e.date}"
                          class="? 'today' : ''}"
                          class=${Object(Y.a)(this.setClasses(t,e))}
                          @click="${t=>this.handleClick(t)}"
                        >
                          ${e.showDate}
                        </td>`)}
                    </tr>`):""}
            </tbody>
          </table>
        </div>
        <div class="datepicker-footer">
          <infinito-button primary @click="${t=>this.submit(t)}">${Object(Z.i18n)("done")}</infinito-button>
        </div>
        ${r.e`
          <div
            class=${Object(Y.a)({"timer-dropdown":!0,show:a})}
          >
            <div class="header">
              <div class="h-item">${Object(Z.i18n)("hour")}</div>
              <div class="h-item">${Object(Z.i18n)("mins")}</div>
            </div>
            <div class="body">
              <div class="global-scrollbar time-range-wrapper hours-panel">
                <div>
                  ${s.length?s.map(t=>r.e` <div
                          class=${Object(Y.a)({"range-item":!0,active:Number(t)===Number(this.choosedHour)})}
                          @click="${e=>this.selectHour(e,t)}"
                        >
                          ${t}
                        </div>`):""}
                </div>
              </div>
              <div class="space"></div>
              <div class="global-scrollbar time-range-wrapper mins-panel">
                <div>
                  ${l.length?l.map(t=>r.e` <div
                          class=${Object(Y.a)({"range-item":!0,active:Number(t)===Number(this.choosedMins)})}
                          @click="${e=>this.selectMins(e,t)}"
                        >
                          ${t}
                        </div>`):""}
                </div>
              </div>
            </div>
          </div>
        `}
      </div>
    `}};Co.styles=[A.a,jo],$o([Object(r.h)(".datepicker-wrapper")],Co.prototype,"datepickerWrapper",void 0),$o([Object(r.h)("#timeInput")],Co.prototype,"timeInput",void 0),$o([Object(r.h)(".hours-panel")],Co.prototype,"hoursPanel",void 0),$o([Object(r.h)(".mins-panel")],Co.prototype,"minsPanel",void 0),$o([Object(r.g)({type:Object})],Co.prototype,"monthData",void 0),$o([Object(r.g)({type:String})],Co.prototype,"choosedDate",void 0),$o([Object(r.g)({type:String})],Co.prototype,"choosedTime",void 0),$o([Object(r.g)({type:String})],Co.prototype,"choosedHour",void 0),$o([Object(r.g)({type:String})],Co.prototype,"choosedMins",void 0),$o([Object(r.g)({type:Boolean})],Co.prototype,"showTime",void 0),$o([Object(r.g)({type:Array})],Co.prototype,"hours",void 0),$o([Object(r.g)({type:Array})],Co.prototype,"mins",void 0),$o([Object(r.g)({type:Object})],Co.prototype,"defaultDates",void 0),$o([Object(r.g)({type:Boolean})],Co.prototype,"showClearTime",void 0),$o([Object(r.f)()],Co.prototype,"date",void 0),Co=$o([Object(r.c)("i-datepicker")],Co);var Eo=i(640),To=i.n(Eo),Po=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Ro=class extends r.a{constructor(){super(...arguments),this.isShowClear=!1}firstUpdated(){this.submit()}submit(){this.inputEle.addEventListener("keypress",t=>{13===t.keyCode&&(this.add(this.inputEle.value),this.inputEle.value="",this.isShowClear=!1)},!1)}add(t){this.dispatchEvent(new CustomEvent("on-submit",{detail:{text:t},bubbles:!0,composed:!0}))}focusing(t=!0){t&&this.inputEle.focus()}clear(t){this.inputEle.value="",this.focusing(t),this.isShowClear=!1}handleChange(t){t.target.value?this.isShowClear=!0:this.isShowClear=!1}render(){return r.e`
      <div class="side-todos-input-wrapper">
        <input
          placeholder="${Object(Z.i18n)("use_entry_key_add_todo_item")}"
          class="side-todos-input"
          maxlength="1000"
          @input=${this.handleChange}
        />
        ${this.isShowClear?r.e`
              <div class="icon">
                <img class="clear-icon" .src=${To.a} @click=${()=>this.clear(!0)} />
              </div>
            `:null}
      </div>
    `}};Ro.styles=wo,Po([Object(r.g)({type:Boolean})],Ro.prototype,"isShowClear",void 0),Po([Object(r.h)("input")],Ro.prototype,"inputEle",void 0),Ro=Po([Object(r.c)("side-todo-input")],Ro);var Lo=i(691),Do=i.n(Lo),Mo=i(692),Uo=i.n(Mo),No=i(400),Bo=r.b`.container {
  height: 100%;
  z-index: 100001;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.8);
  display: flex;
  flex-flow: column;
  justify-content: center;
  align-items: center;
}
.container[hidden] {
  display: none;
}
.container .top,
.container .bottom {
  flex-grow: 1;
}
.container .bottom {
  height: var(--modal-top, 15vh);
}
.body {
  width: 478px;
  padding: 30px;
  padding-bottom: 25px;
  box-sizing: border-box;
  background: #ffffff;
  box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.18);
  border-radius: 6px;
  position: relative;
  will-change: transform;
}
.body .close {
  position: absolute;
  right: 20px;
  top: 20px;
  cursor: pointer;
  transition: opacity 0.3s;
  opacity: 0.2;
}
.body .close:hover {
  opacity: 0.4;
}
.title,
.text {
  text-align: center;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  line-height: 24px;
}
.title {
  font-size: 13px;
  font-weight: 400;
  margin-bottom: 8px;
  color: #333;
}
.text {
  font-size: 11px;
  font-weight: 400;
  color: #ec414d;
  line-height: 20px;
  vertical-align: middle;
}
.text img {
  width: 14px;
  height: 14px;
  vertical-align: middle;
}
.footer {
  margin-top: 24px;
  display: flex;
  justify-content: center;
}
.footer infinito-button {
  width: 120px;
  height: 42px;
  --hover-color: #eee;
  --hover-font-color: #000;
}
.footer infinito-button[primary] {
  --hover-color: #000;
  --hover-font-color: #fff;
  width: 128px;
}
.footer infinito-button:not(:last-of-type) {
  margin-right: 20px;
}
`,Fo=i(693),zo=i.n(Fo),Ho=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Wo=null,qo=class extends r.a{constructor(){super(...arguments),this.defaultData={title:i18n("no_permission_title"),text:i18n("no_permission_text"),onConfirm:()=>{}},this.show=!1,this.title=this.defaultData.title,this.text=this.defaultData.text,this.onCancel=()=>{},this.onConfirm=()=>{}}static create(){if(Wo)return Wo;const t=document.body;return Wo=document.createElement("i-permission-popup"),t.appendChild(Wo),Wo}shouldUpdate(t){return!t.has("show")||!1!==this.show||(setTimeout(()=>{this.requestUpdate()},1),!1)}updated(t){t.has("show")&&this.show&&(this.$container.animate([{opacity:"0"},{opacity:"1"}],{duration:300,easing:"ease-in"}),this.$body.animate([{opacity:"0",transform:"scale(0.8)"},{opacity:"1",transform:"none"}],{duration:300,easing:"ease-in"}))}toShow(t){this.show=!0;const e=Object.assign(Object.assign({},this.defaultData),t);this.title=e.title,this.text=e.text,this.onCancel=e.onCancel,this.onConfirm=e.onConfirm}toHide(){this.show=!1}render(){return r.e`
      <div class="container" .hidden="${!this.show}">
        <div class="top"></div>
        <section class="body">
          <span class="close" @click=${()=>this.toHide()}>
            <svg width="14px" height="14px" viewBox="0 0 14 14">
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" opacity="1">
                <g transform="translate(-1086.000000, -226.000000)" fill="#333333" fill-rule="nonzero">
                  <g transform="translate(320.000000, 206.000000)">
                    <g>
                      <g transform="translate(766.000000, 20.000000)">
                        <g>
                          <path
                            d="M13.2303076,0.802251953 C12.8052342,0.377204963 12.1160812,0.377207829 11.6910113,0.802258354 L7.05672461,5.43633398 L7.05672461,5.43633398 L2.38977766,0.769621758 C1.96470002,0.344565503 1.27553537,0.344566517 0.850458984,0.769624023 C0.425408624,1.19465551 0.425393322,1.883783 0.850424806,2.30883336 C0.850436954,2.30884551 0.850449102,2.30885766 0.85046125,2.3088698 L5.5174082,6.97558203 L5.5174082,6.97558203 L0.866831437,11.6259476 C0.441760949,12.0509988 0.441745304,12.7401586 0.866796493,13.1652291 C0.866798899,13.1652315 0.866801305,13.1652339 0.866803711,13.1652363 C1.29186357,13.5903075 1.98103035,13.5903186 2.40610392,13.1652611 L7.05671094,8.51483008 L7.05671094,8.51483008 L11.6909746,13.1489765 C12.1160521,13.5740432 12.8052287,13.5740389 13.2303008,13.1489668 C13.6553632,12.7239044 13.6553632,12.034742 13.2303008,11.6096796 C13.2302959,11.6096747 13.230291,11.6096699 13.2302862,11.609665 L8.59602734,6.97558203 L8.59602734,6.97558203 L13.2303169,2.34146831 C13.6553572,1.91644415 13.6553703,1.22733077 13.2303461,0.802290481 C13.2303333,0.802277638 13.2303205,0.802264795 13.2303076,0.802251953 Z"
                          ></path>
                        </g>
                      </g>
                    </g>
                  </g>
                </g>
              </g>
            </svg>
          </span>

          <div class="title">${this.title}</div>
          <div class="text">
            <img src=${zo.a} width="14" />
            <span>${this.text}</span>
          </div>
          <div class="footer">
            <infinito-button
              @click="${()=>{this.toHide(),this.onConfirm()}}"
              primary
              >${i18n("confirm")}</infinito-button
            >
          </div>
        </section>
        <div class="bottom"></div>
      </div>
    `}};qo.styles=Bo,Ho([Object(r.g)({type:Boolean})],qo.prototype,"show",void 0),Ho([Object(r.g)({type:String})],qo.prototype,"title",void 0),Ho([Object(r.g)({type:String})],qo.prototype,"text",void 0),Ho([Object(r.g)({attribute:!1})],qo.prototype,"onCancel",void 0),Ho([Object(r.g)({attribute:!1})],qo.prototype,"onConfirm",void 0),Ho([Object(r.h)(".container")],qo.prototype,"$container",void 0),Ho([Object(r.h)(".body")],qo.prototype,"$body",void 0),qo=Ho([Object(r.c)("i-permission-popup")],qo);var Go=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Vo=class extends a.a{constructor(){super(...arguments),this.store=s.todoStore,this.timer=null,this.MAX_LENGTH=1e3,this.isExpired=!1,this.data={},this.index=0}handleDotClick(t){t.stopPropagation();const e=document.createElement("div");e.className="dot-wrapper";const i=document.createElement("div");i.className="infinity-modal";const o=t.currentTarget.querySelector("ul").cloneNode(!0);if(this.dotEle.classList.add("active"),e.appendChild(i),e.appendChild(o),document.body.appendChild(e),"DIV"===t.currentTarget.tagName){const e=t.currentTarget.getBoundingClientRect(),{bottom:i,right:n,top:r}=e,a=window.innerWidth,l=document.body.clientHeight;o.style.right=a-n+"px";const c=o.clientHeight,d=this.dotEle.clientHeight*s.settingStore.sideScaleRatio;o.style.top=r+c+d>=l?r-c+"px":i+"px"}o.addEventListener("click",async t=>{const i=t.target;if("LI"===i.tagName){const t=i.classList;if(document.body.removeChild(e),this.dotEle.classList.remove("active"),t.contains("edit")&&this.handleEdit(),t.contains("delete")&&this.delete(),t.contains("show")){if("denied"===Notification.permission)return void qo.create().toShow();await Object(No.a)(),Object(x.i)(()=>{s.settingStore.permission.todoNotice=1,s.settingStore.permission.gmailNotice=1}),this.dotEle.focus(),this.showDate()}t.contains("remove")&&this.remove()}}),i.addEventListener("click",()=>{this.dotEle.classList.remove("active"),document.body.removeChild(e)})}firstUpdated(){this.invalidTime()}startSchedule(){const{dueDate:t="",done:e}=this.data;t&&!e&&(this.timer=setInterval(()=>{this.invalidTime()},2e3))}removeSchedule(){clearInterval(this.timer)}updated(){var t;this.checkboxEle.checked=null===(t=this.data)||void 0===t?void 0:t.done,this.invalidTime()}invalidTime(){const{dueDate:t="",dueTime:e="",done:i,dueTimestamp:o=null}=this.data;if(i||!t)return;const n=e||"23:59";let r=!1;const a=+new Date;let s;if("number"==typeof o)s=o;else{const e=c.a.internaDateToStan(t);if(e instanceof Date){const[t,i]=n.split(":");s=+new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,i)}}r=s<a,this.isExpired=r}renderCheckbox(){const t=this.data.done;return r.e`
      <span class=${Object(Y.a)({"i-checkbox":!0,"i-checkbox-checked":t})}>
        <input
          type="checkbox"
          class="i-checkbox-input"
          .checked=${t}
          @change=${this.handleCheckbox}
          @click=${t=>t.stopPropagation()}
        />
      </span>
    `}renderDot(){const{done:t,dueDate:e=""}=this.data;return r.e`
      <div class="dot-container" @click=${this.handleDotClick} tabindex="0">
        <span></span>
        <span></span>
        <span></span>
        <ul class="dot-ul">
          ${t?null:r.e`
                <li class="opt-item show" @click=${this.showDate}>
                  ${e?i18n("change_remind_time"):i18n("set_remind_time")}
                </li>
                ${e?r.e`<li class="opt-item remove" @click=${this.remove}>${i18n("cancel_remind_time")}</li>`:null}
                <li class="opt-item edit" @click=${this.handleEdit}>${i18n("edit_content")}</li>
              `}
          <li class="opt-item delete" @click=${this.delete}>${i18n("del_folder")}</li>
        </ul>
      </div>
    `}renderDate(){const{dueDate:t="",dueTime:e=""}=this.data;return t||e?r.e`
        <span class=${Object(Y.a)({date:!0,red:this.isExpired})} @click=${t=>t.stopPropagation()}>
          <img src="${Uo.a}" />
          <i>${this.data.dueDate} ${this.data.dueTime}</i>
        </span>
      `:r.e``}render(){const{done:t,edit:e,text:i}=this.data,o={"side-todos-item":!0,done:t,edit:e,normal:!e};return r.e`
      ${e?r.e`
            <div class=${Object(Y.a)(o)}>
              <div class="content">
                ${this.renderCheckbox()}
                <textarea
                  class="global-scrollbar side-todos-item-text edit-text"
                  @blur=${this.handleBlur}
                  @keydown=${this.handleKeyDown}
                  @keypress=${this.handleKeyPress}
                  @paste=${this.handleEditorPaste}
                  @click=${t=>t.stopPropagation()}
                >
${i}</textarea
                >
                ${this.renderDot()}
              </div>
              ${this.renderDate()}
            </div>
          `:r.e`
            <div class=${Object(Y.a)(o)} @click=${this.toggle}>
              <div class="content">
                ${this.renderCheckbox()}
                <div class="side-todos-item-text pure-text">${i}</div>
                ${this.renderDot()}
              </div>
              ${this.renderDate()}
            </div>
          `}
    `}async handleEdit(){const t=this.textEle.clientHeight;this.store.edit(this.data.todoId),await this.updateComplete;const e=await this.editEle;if(e){if(e.style.height=t+10+"px",e.focus(),e.setSelectionRange){const t=2*e.value.length;setTimeout(()=>e.setSelectionRange(t,t),1)}else this.editEle.value=e.value;e.scrollTop=999999}}handleBlur(t){const e=t.target.value;e?(this.store.updateTodo(this.data.todoId,{text:e}),this.store.toggleState("done")):this.store.deleteTodo(this.data.todoId)}handleKeyDown(t){t.stopPropagation(),13!==t.keyCode&&27!==t.keyCode||(t.preventDefault(),this.store.updateTodo(this.data.todoId,{text:t.target.value}),this.store.toggleState("done"))}handleKeyPress(t){const e=t.target.value;if((null==e?void 0:e.length)>this.MAX_LENGTH)return rt.message.error(i18n("limit_input_length")),t.stopPropagation(),t.preventDefault(),!1;t.stopPropagation(),Do()(t.target),this.store.toggleState("editing")}handleEditorPaste(t){const e=t.target.value,i=(t.originalEvent||t).clipboardData.getData("text/plain");if((null==e?void 0:e.length)+(null==i?void 0:i.length)>this.MAX_LENGTH){rt.message.error(i18n("limit_input_length")),t.stopPropagation(),t.preventDefault();const o=e+i;return t.target.value=o.substring(0,this.MAX_LENGTH),!1}t.stopPropagation(),Do()(t.target),this.store.toggleState("editing")}showDate(){const t=document.createElement("div");t.className="dot-wrapper";const e=document.createElement("div");e.className="infinity-modal";const i=document.createElement("todo-tooltip");t.appendChild(e),t.appendChild(i),document.body.appendChild(t);const o=this.dotEle.getBoundingClientRect(),{top:n,left:r,width:a,height:s}=o;i.setAttribute("rect",JSON.stringify({top:n,left:r,width:a,height:s}));const{dueDate:l="",dueTime:c="",todoId:d,dueTimestamp:p}=this.data;i.setAttribute("time",JSON.stringify({dueDate:l,dueTime:c,dueTimestamp:p})),i.setAttribute("todoId",d),e.addEventListener("click",()=>document.body.removeChild(t))}remove(){this.store.removeTime(this.data.todoId)}delete(){this.store.deleteTodo(this.data.todoId)}handleCheckbox(){this.store.toggleTodo(this.data.todoId)}toggle(){"editing"!==this.store.currenetState&&this.handleCheckbox()}};Vo.styles=[A.a,wo],Go([Object(r.j)(".edit-text")],Vo.prototype,"editEle",void 0),Go([Object(r.h)(".dot-container")],Vo.prototype,"dotEle",void 0),Go([Object(r.h)(".i-checkbox-input")],Vo.prototype,"checkboxEle",void 0),Go([Object(r.h)(".side-todos-item")],Vo.prototype,"todoItemEle",void 0),Go([Object(r.h)(".side-todos-item-text")],Vo.prototype,"textEle",void 0),Go([Object(r.g)({type:Boolean})],Vo.prototype,"isExpired",void 0),Go([Object(r.g)({type:Object})],Vo.prototype,"data",void 0),Go([Object(r.g)({type:Number})],Vo.prototype,"index",void 0),Vo=Go([Object(r.c)("side-todo-item")],Vo);var Qo=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Yo=class extends r.a{render(){return r.e`
      <div class="side-todos-tips">
        <img src="${ao.a}" alt="${Object(Z.i18n)("no_reminders")}" />
        <p>${Object(Z.i18n)("current_no_reminders")}</p>
        <p>${Object(Z.i18n)("enter_key_to_input_reminders")}</p>
      </div>
    `}};Yo.styles=r.b`
    .side-todos-tips {
      margin: 80px 0;
      text-align: center;
    }
    img {
      width: 40px;
      height: 40px;
      margin-bottom: 20px;
    }
    p {
      margin: 0;
      line-height: 22px;
      color: rgba(101,101,101,1);
    }
  `,Yo=Qo([Object(r.c)("side-todo-empty")],Yo);var Xo=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Zo=class extends r.a{render(){const{dueDate:t="",dueTime:e="",dueTimestamp:i}=JSON.parse(this.time);return r.e`
      <div class="wrapper">
        <div class="arrow"></div>
        <i-datepicker
          defaultDates=${JSON.stringify({date:t,time:e,dueTimestamp:i})}
          @on-submit="${t=>this.settingTime(t.detail)}"
        ></i-datepicker>
      </div>
    `}firstUpdated(){this.initPosition()}settingTime({data:t}){const e=new Date(t),i=e.toLocaleDateString(l.D.lang),o=`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`,n={todoId:this.todoId,dueDate:i,dueTime:o,dueTimestamp:t};s.todoStore.updateTodo(this.todoId,n);const r=document.querySelector(".dot-wrapper");r&&document.body.removeChild(r)}initPosition(){if(this.rect){const t=JSON.parse(this.rect),{top:e,left:i,width:o,height:n}=t,r=window.innerWidth,a=document.body.clientHeight,s=20;this.arrowDiv.style.top=e-s/2+o/2+"px",this.arrowDiv.style.right=r-i+"px";const l=this.clientHeight;if(this.style.right=r-i+s+"px",e+l/2>=a)this.style.bottom="0px";else{const t=e+n/2-l/2;this.style.top=t<=0?"0px":t+"px"}}}};Zo.styles=r.b`
    :host {
      position: absolute;
      z-index: 10000;
      display: block;
      width: 280px;
      height: 402px;
    }
    .wrapper {
      background: #fff;
      border-radius: 6px;
      box-shadow: 0px 12px 48px 16px rgba(0, 0, 0, 0.03), 0px 9px 28px 8px rgba(0, 0, 0, 0.05),
        0px 6px 16px 0px rgba(0, 0, 0, 0.08), 0px 3px 6px -4px rgba(0, 0, 0, 0.12);
      z-index: 1000;
    }
    .arrow {
      position: fixed;
      z-index: 1000;
      width: 0;
      height: 0;
      border: 10px solid transparent;
      border-left-color: #fff;
    }
  `,Xo([Object(r.h)(".arrow")],Zo.prototype,"arrowDiv",void 0),Xo([Object(r.g)({type:String,reflect:!0})],Zo.prototype,"rect",void 0),Xo([Object(r.g)({type:String,reflect:!0})],Zo.prototype,"time",void 0),Xo([Object(r.g)({type:String,reflect:!0})],Zo.prototype,"todoId",void 0),Zo=Xo([Object(r.c)("todo-tooltip")],Zo);var Ko=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Jo=class extends r.a{emit(t){this.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0}))}render(){return r.e`
      <div class="wrapper">
        <p>${i18n("confirm_delete_done_todos")}</p>
        <div class="btns">
          <infinito-button @click=${()=>this.emit("cancel")}> ${i18n("cancel")} </infinito-button>
          <infinito-button primary class="ok" @click=${()=>this.emit("ok")}> ${i18n("confirm")} </infinito-button>
        </div>
      </div>
    `}};Jo.styles=r.b`
    infinito-button {
      width: 120px;
      height: 42px;
      line-height: 42px;
      font-weight: 500;
      border-radius: 4px;
      transition: opacity 300ms ease 0s;
    }
    infinito-button:not(:last-child) {
      margin-right: 16px;
    }
    .wrapper {
      width: 300px;
    }
    .btns {
      display: flex;
      justify-content: center;
      margin-top: 40px;
    }
    p {
      margin: 10px 0;
      text-align: center;
    }
  `,Jo=Ko([Object(r.c)("todo-delete-tips")],Jo);var tn=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let en=class extends a.a{constructor(){super(...arguments),this.store=s.todoStore,this.deleteModal=!1,this.cancelDelete=()=>{this.deleteModal=!1}}handleAddTodo({text:t}){const e=t.substring(0,200);this.store.addTodo(e)}afterShow(){this.handleTabOpend()}handleTabOpend(){this.inputEle.focusing(),this.$todoItem.forEach(t=>{t.invalidTime(),t.startSchedule()})}handleTabClose(){this.$todoItem.forEach(t=>{t.removeSchedule()}),this.inputEle.clear(!1)}afterHide(){this.handleTabClose()}render(){const{store:{hasDoneTodo:t,todoList:e}}=this;return r.e`
      <i-side2-header .title="${Object(Z.i18n)("todos")}"></i-side2-header>
      <div class="side-todos-container">
        <div class="up">
          <side-todo-input @on-submit="${t=>this.handleAddTodo(t.detail)}"></side-todo-input>
          <div class="side-todos-remove">
            <button class="${t?"allow":""}" @click="${this.remove}">${Object(Z.i18n)("remove_done")}</button>
          </div>
        </div>
        <div class="global-scrollbar list">
          <div class="side-todos-lists">
            ${e.length?e.map((t,e)=>r.e` <side-todo-item .data=${t} .index=${e}> </side-todo-item> `):r.e`<side-todo-empty></side-todo-empty>`}
          </div>
        </div>
      </div>
      <infinito-portal-entrance destination="delete-todo-modal">
        <infinito-modal
          style="--modal-padding: 30px; --modal-top: 30vh;"
          ?open=${this.deleteModal}
          .closeable=${!1}
          .onCancel=${this.cancelDelete}
        >
          <todo-delete-tips slot="body" @ok=${this.confirmDelete} @cancel=${this.cancelDelete}> </todo-delete-tips>
        </infinito-modal>
      </infinito-portal-entrance>
    `}remove(){this.store.hasDoneTodo&&(this.deleteModal=!0)}confirmDelete(){this.deleteModal=!1,this.store.removeTodo()}};en.styles=[A.a,wo,r.b`
      :host {
        display: block;
        height: 100%;
        background-color: #fff;
      }
    `],tn([Object(r.g)({type:Boolean})],en.prototype,"deleteModal",void 0),tn([Object(r.h)("side-todo-input")],en.prototype,"inputEle",void 0),tn([Object(r.i)("side-todo-item")],en.prototype,"$todoItem",void 0),en=tn([Object(r.c)("side-todos")],en);var on=i(89),nn=i.n(on),rn=i(36),an=i.n(rn);function sn(t,e){return!(t!==e&&!t.contains(e))}function ln(t){return t&&t.replace(/&nbsp;|\u202F|\u00A0/g," ")}var cn=i(694),dn=i.n(cn),pn=r.b`:host {
  --border-color: #ededed;
}
/* side-notes-list */
.side-notes-list {
  height: calc(100% - 55px);
}
/* side-notes-item */
.note-item {
  position: relative;
  padding-left: 30px;
  height: 80px;
  background: #fff;
  z-index: 1;
  cursor: pointer;
}
.note-item.active {
  z-index: 2;
  background-color: #f9f9f9;
}
.note-item.active .border {
  border-color: #fff;
}
.note-item .sticky-tag {
  position: absolute;
  top: 0;
  left: 8px;
  width: 12px;
  height: 16px;
}
.note-item .border {
  box-sizing: border-box;
  display: flex;
  align-items: center;
  height: 100%;
  border-bottom: 1px solid #eeeeee;
}
.note-item .header {
  flex: 1;
  width: 3px;
}
.note-item .title {
  margin: 0;
  margin-bottom: 6px;
  font-size: 16px;
  color: #333;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.note-item .date {
  margin: 0;
  font-size: 12px;
  color: #999999;
}
/* note-editor */
.note-editor {
  display: flex;
  flex-direction: column;
  height: 100%;
}
.note-editor .main-body {
  box-sizing: border-box;
  display: flex;
  flex-flow: column;
  flex: 1;
  height: 0;
  height: 100%;
  padding: 20px 0;
  padding-bottom: 0;
  overflow: hidden;
}
.note-editor .main-body .time {
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 12px;
  text-align: center;
  color: #999999;
}
.note-editor .edit-area {
  flex: 1;
  height: 0;
  display: flex;
  flex-flow: column;
  overflow: hidden;
}
.note-editor .edit-area .edit-wrapper {
  flex: 1;
  padding-left: 30px;
  margin-top: 10px;
}
.note-editor .btns {
  display: flex;
  justify-content: space-between;
  margin-top: 60px;
}
.note-editor button {
  padding: 0;
  margin: 0;
  width: 155px;
  height: 52px;
  border: 1px solid #333333;
  border-radius: 4px;
  outline: none;
  background: none;
  font-size: 16px;
  cursor: pointer;
  transition: all 300ms;
}
.note-editor button.primary {
  background: #333333;
  color: #fff;
}
.note-editor button:hover {
  opacity: 0.9;
}
.note-item:hover i-dot-expanded {
  opacity: 1;
}
i-dot-expanded {
  width: 32px;
  --dot-hover: rgba(0, 0, 0, 0.15);
  opacity: 0;
  outline: none;
  transition: opacity 0.3s;
  display: block;
  margin-right: 12px;
}
`,hn=i(695),un=i.n(hn),gn=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let fn=class extends r.a{emit(t){this.dispatchEvent(new CustomEvent(t,{bubbles:!0,composed:!0}))}render(){return r.e`
      <div class="wrapper">
        <p>${i18n("confirm_delete_note")}</p>
        <div class="btns">
          <infinito-button @click=${()=>this.emit("cancel")}> ${i18n("cancel")} </infinito-button>
          <infinito-button primary class="ok" @click=${()=>this.emit("ok")}> ${i18n("confirm")} </infinito-button>
        </div>
      </div>
    `}};fn.styles=r.b`
    infinito-button {
      width: 120px;
      height: 42px;
      line-height: 42px;
      font-weight: 500;
      border-radius: 4px;
      transition: opacity 300ms ease 0s;
    }
    infinito-button:not(:last-child) {
      margin-right: 16px;
    }
    .wrapper {
      width: 300px;
    }
    .btns {
      display: flex;
      justify-content: center;
      margin-top: 40px;
    }
    p {
      margin: 10px 0;
      text-align: center;
    }
  `,fn=gn([Object(r.c)("note-delete-tips")],fn);var mn=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let bn=class extends a.a{constructor(){super(...arguments),this.store=s.noteStore,this.data={}}check(t,e){t.stopPropagation(),this.store.updateId(e),this.dispatchEvent(new CustomEvent("check",{bubbles:!0,composed:!0}))}delete(){this.dispatchEvent(new CustomEvent("delete",{detail:{id:this.data.id},bubbles:!0,composed:!0}))}_formatTime(t){return c.a.fmtTime(t,{month:"long",day:"2-digit"})}setTop(){this.dispatchEvent(new CustomEvent("set-top",{detail:{id:this.data.id},bubbles:!0,composed:!0}))}cancelSetTop(){this.dispatchEvent(new CustomEvent("cancel-set-top",{detail:{id:this.data.id},bubbles:!0,composed:!0}))}render(){const{data:{title:t,time:e,id:o,sticky:n},store:a}=this;return r.e`
      <div class="note-item ${o===a.checkedId?"active":""}" @click="${t=>this.check(t,o)}">
        ${n?r.e`<img class="sticky-tag" .src=${i(696)} />`:null}

        <div class="border">
          <div class="header">
            <h3 class="title">${t||i18n("no_title")}</h3>
            <p class="date">${this._formatTime(e)}</p>
          </div>

          <i-dot-expanded class="note-item-menu" tabindex="0">
            ${n?r.e`<li class="note-dot-item" @click=${this.cancelSetTop}>${i18n("cancel_set_top")}</li>`:r.e`<li class="note-dot-item" @click=${this.setTop}>${i18n("set_top")}</li>`}
            <li class="note-dot-item" @click=${this.delete}>${i18n("del_folder")}</li>
          </i-dot-expanded>
        </div>
      </div>
    `}};bn.styles=pn,mn([Object(r.g)({type:Object})],bn.prototype,"data",void 0),bn=mn([Object(r.c)("side-notes-item")],bn);var yn=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let vn=class extends r.a{constructor(){super(...arguments),this.data=[]}render(){return r.e`
      <div class="global-scrollbar side-notes-list">
        ${this.data.map(t=>r.e`
            <side-notes-item
              .data=${t}
              @check=${this.handleCheck}
              @delete=${this.handleDelete}
              @set-top=${this.handleSetTop}
              @cancel-set-top=${this.handleCancelSetTop}
            ></side-notes-item>
          `)}
      </div>
    `}handleCheck(){this.dispatchEvent(new CustomEvent("on-check",{bubbles:!0,composed:!0}))}handleDelete(t){this.dispatchEvent(new CustomEvent("on-delete",{detail:{id:t.detail.id},bubbles:!0,composed:!0}))}handleSetTop({detail:t}){t.id&&s.noteStore.setTop(t.id)}handleCancelSetTop({detail:t}){t.id&&s.noteStore.cancelSetTop(t.id)}};vn.styles=[A.a,pn],yn([Object(r.g)({type:Array})],vn.prototype,"data",void 0),vn=yn([Object(r.c)("side-notes-list")],vn);var wn=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let xn=class extends a.a{constructor(){super(...arguments),this.store=s.noteStore}async add(){this.store.add({}),await this.updateComplete,this.dispatchEvent(new CustomEvent("add",{bubbles:!0,composed:!0}))}render(){return r.e`
      <div class="side-notes-add" @click="${t=>this.add()}">
        <svg viewBox="0 0 1024 1024">
          <path d="M32 416h960c19.2 0 32 12.8 32 32v128c0 19.2-12.8 32-32 32H32C12.8 608 0 595.2 0 576V448c0-19.2 12.8-32 32-32z"></path>
          <path d="M448 0h128c19.2 0 32 12.8 32 32v960c0 19.2-12.8 32-32 32H448c-19.2 0-32-12.8-32-32V32c0-19.2 12.8-32 32-32z"></path>
        </svg>
      </div>
    `}};xn.styles=r.b`
    :host {
      --border-color: #ededed;
    }
    .side-notes-add {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 54px;
      color: #333;
      cursor: pointer;
      border-top: 1px solid var(--border-color);
      transition: all 300ms ease-in-out;
    }
    .side-notes-add:hover {
      background: rgb(249, 249, 249);
    }
    .side-notes-add svg {
      width: 14px;
      height: 14px;
    }
  `,xn=wn([Object(r.c)("add-note-btn")],xn);var _n=i(697),kn=i.n(_n),On=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let An=class extends r.a{render(){return r.e`
      <div class="wrapper">
        <img src="${kn.a}" alt="icon" />
        <p>${Object(Z.i18n)("add_first_note")}</p>
      </div>
    `}};An.styles=r.b`
    .wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: calc(100% - 55px);
    }
    img {
      width: 86px;
      height: 86px;
    }
    p {
      margin: 0;
      color: #999;
      font-size: 14px;
    }
  `,An=On([Object(r.c)("note-empty")],An);var Sn=i(698),In=i.n(Sn),jn=i(699),$n=i.n(jn),Cn=i(700),En=i.n(Cn),Tn=i(701),Pn=i.n(Tn),Rn=i(702),Ln=i.n(Rn),Dn=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Mn=class extends r.a{constructor(){super(...arguments),this.txt="",this.titleError="",this.urlError=""}firstUpdated(){this.titleInput&&this.titleInput.focus()}render(){return r.e`
      <div class="note-link">
        <h2>${Object(Z.i18n)("add_link")}</h2>
        <div class="form">
          <div class="input-control">
            <div class="label">${Object(Z.i18n)("text")}</div>
            <input
              name="title"
              .placeholder="${Object(Z.i18n)("please_enter_text")}"
              .value=${this.txt}
              autocomplete="off"
              @input="${this.handleTxtChange}"
              @focus=${()=>{this.titleError=""}}
            />
            <span class="error">${this.titleError}</span>
          </div>
          <div class="input-control">
            <div class="label">URL</div>
            <input
              name="url"
              placeholder="${Object(Z.i18n)("type_link")}"
              @input="${this.handleUrlChange}"
              @keypress=${t=>this.handleKeyUp(t)}
              @focus=${()=>{this.urlError=""}}
              autocomplete="off"
            />
            <span class="error">${this.urlError}</span>
          </div>
        </div>
        <div class="btns">
          <infinito-button style="width: 155px; height: 52px;" @click="${this.cancel}"
            >${Object(Z.i18n)("cancel")}</infinito-button
          >
          <infinito-button style="width: 155px; height: 52px;" primary @click="${this.confirm}"
            >${Object(Z.i18n)("confirm")}</infinito-button
          >
        </div>
      </div>
    `}reset(){this.titleInput.value="",this.urlInput.value=""}handleTxtChange(t){this.dispatchEvent(new CustomEvent("txt-change",{detail:{value:t.target.value}}))}handleUrlChange(t){this.dispatchEvent(new CustomEvent("url-change",{detail:{value:t.target.value}}))}handleKeyUp(t){13===t.keyCode&&this.confirm()}cancel(){this.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0})),this.reset()}confirm(){const t=this.titleInput.value;let e=this.urlInput.value;if(!t)return void(this.titleError=Object(Z.i18n)("type_text"));if(!e)return void(this.urlError=Object(Z.i18n)("please_type_link"));if(!this.isUrl(e))return void(this.urlError=Object(Z.i18n)("please_type_right_link"));const i=e.startsWith("chrome://")||e.startsWith("http://")||e.startsWith("https://");e=i?e:"http://"+e,this.dispatchEvent(new CustomEvent("ok",{detail:{title:t,url:e}})),this.reset()}isUrl(t){return/^[^\u4e00-\u9fa5]+$/.test(t)}};Mn.styles=r.b`
    :host {
      box-sizing: border-box;
      display: block;
      width: 370px;
      height: 370px;
      padding: 20px;
    }
    h2 {
      margin: 0;
      margin-bottom: 30px;
      font-size: 20px;
      font-weight: 500;
      color: #333;
      text-align: center;
    }
    .input-control {
      position: relative;
      width: 100%;
      margin-bottom: 40px;
    }
    .error {
      position: absolute;
      right: 0;
      bottom: -20px;
      font-size: 12px;
      color: #ea4747;
    }
    input {
      width: 100%;
      padding: 10px 0;
      border: none;
      background: none;
      outline: none;
      border-bottom: 1px solid#656565;
    }
    .btns {
      display: flex;
      justify-content: space-between;
      margin-top: 60px;
    }
    infinito-button {
      width: 155px;
      height: 52px;
    }
  `,Dn([Object(r.g)({type:String})],Mn.prototype,"txt",void 0),Dn([Object(r.g)({type:String})],Mn.prototype,"titleError",void 0),Dn([Object(r.g)({type:String})],Mn.prototype,"urlError",void 0),Dn([Object(r.h)('input[name="title"]')],Mn.prototype,"titleInput",void 0),Dn([Object(r.h)('input[name="url"]')],Mn.prototype,"urlInput",void 0),Mn=Dn([Object(r.c)("add-note-link")],Mn);var Un=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Nn=class extends a.a{constructor(){super(...arguments),this.store=s.noteStore,this.txt="",this.handleCancel=()=>{this.store.toogleLinkModal(),this.emit("cancelLink")}}emit(t,e){const i=new CustomEvent(t,{detail:Object.assign({},e),bubbles:!0,composed:!0});this.dispatchEvent(i)}render(){return r.e`
      <div class="edit-options">
        <div class="area fonts-area">
          <button
            class=${Object(Y.a)({"bold-button":!0,active:this.store.boldActive})}
            @click="${this.toggleBold}"
          >
            <img src="${In.a}" />
          </button>
          <button
            @click=${()=>{this.emit("increase",{focus:!0})}}
            @touchend=${t=>{t.stopPropagation(),t.preventDefault(),this.emit("increase",{focus:!1})}}
          >
            <img src="${$n.a}" />
          </button>
          <button
            @click=${()=>{this.emit("decrease",{focus:!0})}}
            @touchend=${t=>{t.stopPropagation(),t.preventDefault(),this.emit("decrease",{focus:!1})}}
          >
              <img src="${En.a}" />
            </button>
        </div>
        <div class="area media-area">
          <button @click=${this.createLink}><img src="${Pn.a}" /></button>
          <div class="insert-img-wrapper">
            <button @click="${this.handleUploadImg}"><img src="${Ln.a}" /></button>
            <input type="file" hidden @change=${this.uploadInputChange} accept="image/png, image/jpeg"/>
          </div>
        </div>
      </div>
      ${this.store.linkModal?r.e`
            <infinito-modal
              .open=${this.store.linkModal}
              .onCancel=${this.handleCancel}
            >
              <div slot="body">
                <add-note-link
                  .txt=${this.txt}
                  @cancel=${this.handleCancel}
                  @ok=${this.handleOk}
                >
                </add-note-link>
              </div>
            </infinito-modal>
          `:null}
    `}handleOk(t){this.store.toogleLinkModal(),this.emit("insertLink",Object.assign({},t.detail))}createLink(){this.store.toogleLinkModal(),this.emit("createLink")}toggleBold(t){const e=t.currentTarget.classList.contains("active");this.emit("bold",{state:!e}),this.store.setBoldActive(!e)}handleUploadImg(t){t.stopPropagation();const{isLogin:e}=s.userStore;e?this.input.click():Di.default.popupLogin()}async uploadInputChange(){const t=this.input.files[0];this.emit("insertImg",{file:t}),this.input.value=""}};Nn.styles=r.b`
    .edit-options {
      display: flex;
      height: 55px;
    }
    .area {
      flex: 1;
      height: 100%;
      display: flex;
      align-items: center;
    }
    button {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 34px;
      height: 34px;
      padding: 0;
      border: none;
      border-radius: 6px;
      background: none;
      outline: none;
      transition: background .3s;
    }
    button:hover {
      background: rgba(0, 0, 0, .05);
    }
    button.active {
      background: rgba(0, 0, 0, .08);
    }
    img {
      width: 26px;
      height: 26px;
    }
    img {
      cursor: pointer;
    }
    .fonts-area button {
      margin-left: 30px;
    }
    .media-area {
      justify-content: flex-end;
    }
    .media-area button {
      margin-right: 30px;
    }
    .insert-img-wrapper {
      position: relative;
      width: 38px;
      height: 31px;
      margin-right: 30px;
      cursor: pointer;
    }
    .insert-img-wrapper:hover {
      opacity: .8;
    }
    .insert-img-wrapper button {
      margin: 0;
      cursor: pointer;
    }
  `,Un([Object(r.g)({type:String,reflect:!0})],Nn.prototype,"txt",void 0),Un([Object(r.h)("input")],Nn.prototype,"input",void 0),Nn=Un([Object(r.c)("note-editor-options")],Nn);var Bn=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Fn=class extends a.a{constructor(){super(...arguments),this.store=s.noteStore}_formatTime(t){return t?c.a.fmtTime(t):""}render(){const{checkedNote:t}=this.store;return r.e`
      <div class="note-editor">
        <div class="main-body">
          <p class="time">${this._formatTime(null==t?void 0:t.time)}</p>
          <div class="edit-area">
            <slot name="title"></slot>
            <div class="global-scrollbar edit-wrapper">
              <slot name="editor"></slot>
            </div>
          </div>
        </div>
        <slot name="options"></slot>
      </div>
    `}};Fn.styles=[A.a,pn],Bn([Object(r.h)(".edit-wrapper")],Fn.prototype,"editWrapper",void 0),Fn=Bn([Object(r.c)("note-editor")],Fn);var zn=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Hn=class extends a.a{constructor(){super(...arguments),this.store=s.noteStore,this.MAX_LENGTH=2e5,this.deleteModal=!1,this.deleteId="",this.debounceHandleScrollCursor=c.a.debounce(this.handleScrollCursor,50),this.cancelDelete=()=>{this.deleteModal=!1}}opened(){this.inputEle&&this.inputEle.focus()}handleTabClose(){this.store.linkModal&&this.store.toogleLinkModal()}firstUpdated(){var t;if(this.editBox){if(document.execCommand("defaultParagraphSeparator",!1,"p"),this.editBox.addEventListener("contextmenu",t=>(t.stopPropagation(),!0),{capture:!0}),this.editBox.addEventListener("mouseup",()=>{const t=document.queryCommandState("bold");this.store.setBoldActive(t)}),null===(t=this.store)||void 0===t?void 0:t.checkedNote){const{content:t}=this.store.checkedNote;this.editBox.innerHTML=t?this.store.checkedNote.content:"<p><br></p>"}this.editBox.addEventListener("drop",t=>{t.preventDefault()})}}shouldUpdated(){const{content:t=""}=this.store.checkedNote;if(this.editBox&&ln(this.editBox.innerHTML)!==ln(t))return!0}updated(){var t;if(this.editBox&&(null===(t=this.store)||void 0===t?void 0:t.checkedNote)){const{content:t}=this.store.checkedNote;ln(this.editBox.innerHTML)!==ln(t)&&(this.editBox.innerHTML=t||"<p><br></p>"),t&&"<p><br></p>"!==t&&"<br>"!==t||this.store.setBoldActive(!1)}}afterShow(){this.opened()}afterHide(){this.handleTabClose()}render(){var t,e,i;const{store:o}=this;return r.e`
      <i-side2-header .title="${Object(Z.i18n)("notes")}"></i-side2-header>
      <div class="side-notes">
        <div class="side-notes-left">
          ${o.isEmpty?r.e`<note-empty></note-empty>`:r.e` <side-notes-list
                .data=${o.noteList}
                @on-check=${this.handleCheck}
                @on-delete=${this.handleDelete}
              ></side-notes-list>`}
          <add-note-btn @add=${this.handleAdd}></add-note-btn>
        </div>
        <div class="side-notes-right">
          ${o.checkedNote?r.e`
                <note-editor>
                  <div slot="title" class="note-title-wrapper">
                    <input
                      name="title"
                      autocomplete="off"
                      .placeholder="${Object(Z.i18n)("note_title")}"
                      .value=${null===(t=this.store.checkedNote)||void 0===t?void 0:t.title}
                      @keydown=${t=>{t.target.keyEvent=!0}}
                      @compositionstart=${t=>{t.target.isNeedPrevent=!0}}
                      @compositionend=${t=>{t.target.isNeedPrevent=!1}}
                      @input=${t=>{t.target.keyEvent||this.handleTitleInput(t)}}
                      @keyup=${t=>{t.target.isNeedPrevent||(this.handleTitleInput(t),t.target.keyEvent=!1)}}
                      @keypress=${t=>this.handleTitleKeyPress(t)}
                    />
                  </div>
                  <div
                    slot="editor"
                    class="note-editor"
                    contenteditable="true"
                    spellcheck="false"
                    style="font-size: ${null===(i=null===(e=this.store)||void 0===e?void 0:e.checkedNote)||void 0===i?void 0:i.fontSize}px"
                    @blur=${this.handleEditorBlur}
                    @keypress="${this.checkContent}"
                    @input=${this.handleEditorChange}
                    @click=${this.handleEditorClick}
                    @paste=${this.handleEditorPaste}
                  ></div>
                  <note-editor-options
                    slot="options"
                    @bold=${this.execBoldCommand}
                    @increase=${t=>this.handleChangeSize(t,"increase")}
                    @decrease=${t=>this.handleChangeSize(t,"decrease")}
                    @createLink=${this.handleCreateLink}
                    @insertLink=${this.handleInsertLink}
                    @cancelLink=${()=>this.reStorePosition()}
                    @insertImg=${this.handleInsertImg}
                  >
                  </note-editor-options>
                </note-editor>
              `:null}
        </div>
      </div>
      <infinito-portal-entrance destination="delete-note-modal">
        <infinito-modal
          style="--modal-padding: 30px; --modal-top: 30vh;"
          ?open=${this.deleteModal}
          .closeable=${!1}
          .onCancel=${this.cancelDelete}
        >
          <note-delete-tips slot="body" @ok=${this.confirmDelete} @cancel=${this.cancelDelete}> </note-delete-tips>
        </infinito-modal>
      </infinito-portal-entrance>
    `}createRenderRoot(){return this}handleCheck(){this.handleAdd()}handleDelete(t){this.deleteId=t.detail.id,this.deleteModal=!0}confirmDelete(){this.store.delete(this.deleteId),this.deleteModal=!1,this.handleAdd()}async handleAdd(){await this.updateComplete,this.inputEle&&this.inputEle.focus()}handleTitleInput(t){const e=t.target.value;this.updateContent({title:e})}handleTitleKeyPress(t){13===t.keyCode&&this.editBox.focus()}updateContent(t){const e=Object.assign(Object.assign(Object.assign({},this.store.checkedNote),t),{time:+new Date});this.store.updateNote(e)}saveCursorPosition(){const t=window.getSelection(),e={range:null,collapsed:!0,text:""};t.rangeCount>0&&sn(this.editBox,t.anchorNode)&&sn(this.editBox,t.focusNode)&&(e.collapsed=t.isCollapsed,e.range=t.getRangeAt(0),e.text=t.toString()),this.prevEditorSelection=e}reStorePosition(){var t;const e=window.getSelection();e.removeAllRanges();let i=null;return(null===(t=this.prevEditorSelection)||void 0===t?void 0:t.range)?i=this.prevEditorSelection.range:(i=document.createRange(),i.selectNodeContents(this.editBox),i.collapse(!1)),e.addRange(i),o=100,new n.a(t=>setTimeout(t,o));var o}handleEditorBlur(){this.saveCursorPosition()}checkContent(t){const e=t.target.innerHTML;if((null==e?void 0:e.length)>this.MAX_LENGTH)return rt.message.error(Object(Z.i18n)("limit_input_length")),t.stopPropagation(),t.preventDefault(),!1}handleEditorChange(t){const e=t.target.innerHTML;(null==e?void 0:e.length)>this.MAX_LENGTH&&"deleteContentBackward"!==t.inputType&&(rt.message.error(Object(Z.i18n)("limit_input_length")),t.target.blur()),this.updateContent({content:e})}handleEditorClick(t){const e=function(t,e,i=document.body){for(;!t.matches||!t.matches(e);)if(!(t=t.parentElement)||t===i){t=null;break}return t}(t.target,"a",this.editBox);if(e){const i=e.getAttribute("href");c.a.openUrl(i,s.settingStore.setting.link.icon,t)}}handleEditorPaste(t){var e;t.preventDefault();let i=null;const o=(t.originalEvent||t).clipboardData;let n=o.getData("text/html");if((null===(e=this.editBox.innerHTML)||void 0===e?void 0:e.length)+(null==n?void 0:n.length)>this.MAX_LENGTH)rt.message.error(Object(Z.i18n)("limit_input_length"));else{if(0===n.length){if(n=o.getData("text/plain"),0===n.length)return;i=n.split(/\r\n?|\n/g).map(t=>{if(0===nn()(t).call(t).length)return"<br/>";const e=document.createElement("div");return e.innerText=t.replace(/\s/g," "),e.outerHTML}).join("")}else i=dn.a.sanitize(n,{ALLOWED_TAGS:["a","img","ul","ol","nl","li","div","p","pre","code","br"],ALLOWED_ATTR:["href","target","src"],ALLOW_DATA_ATTR:!1});setTimeout(()=>{document.execCommand("insertHTML",!1,i),this.updateContent({content:this.editBox.innerHTML})},0)}}async execBoldCommand({detail:t}){var e;await this.reStorePosition();const i=window.getSelection(),o=i.getRangeAt(0);if(null===(e=this.prevEditorSelection)||void 0===e?void 0:e.collapsed)if(t.state)document.execCommand("insertHTML",!1,"<b>&#8203;</b>");else if(l.n){const t=document.createRange();t.setStartAfter(o.endContainer.parentNode),t.collapse(!0),i.removeAllRanges(),i.addRange(t)}else document.execCommand("insertHTML",!1,"&#8203;");else document.execCommand("bold",!1,null)}async handleChangeSize(t,e){var i;const o=t.detail.focus;let n=null===(i=this.store.checkedNote)||void 0===i?void 0:i.fontSize;switch(e){case"increase":n+=2;break;case"decrease":n-=2;break;default:return}if(n>=20&&(n=20),n<=12&&(n=12),o)await this.reStorePosition();else{window.getSelection().removeAllRanges()}this.updateContent({fontSize:n}),this.debounceHandleScrollCursor()}handleScrollCursor(){const t=this.noteEditor.editWrapper,{y:e}=function(){const t=window,e=t.document,i=t.getSelection();let o,n,r,a=0,s=0;if(i.rangeCount&&(o=i.getRangeAt(0).cloneRange(),o.getClientRects&&(o.collapse(!0),n=o.getClientRects(),n.length>0&&(r=n[0]),r&&(a=r.left,s=r.top)),0===a&&0===s||void 0===r)){const t=e.createElement("span");if(t.getClientRects){t.appendChild(e.createTextNode("​")),o.insertNode(t),r=t.getClientRects()[0],a=r.left,s=r.top;const i=t.parentNode;i.removeChild(t),i.normalize()}}return{x:a,y:s}}(),i=e+t.scrollTop-t.getBoundingClientRect().height;t.scrollTop=i}handleCreateLink(){var t,e;this.editOptions.txt=null!==(e=null===(t=this.prevEditorSelection)||void 0===t?void 0:t.text)&&void 0!==e?e:""}async handleInsertLink({detail:t}){var e;await this.reStorePosition();const{title:i,url:o}=t,n=document.createElement("a");n.classList.add("link"),n.setAttribute("href",o),n.innerText=i,(null===(e=this.prevEditorSelection)||void 0===e?void 0:e.text)?(this.prevEditorSelection.range.deleteContents(),this.prevEditorSelection.range.insertNode(n)):(document.execCommand("insertHTML",!1,n.outerHTML),document.execCommand("insertHTML",!1,"<span>&#8203;</span>"));const r=this.editBox.innerHTML;this.debounceHandleScrollCursor(),this.updateContent({content:r})}async handleInsertImg({detail:t}){await this.reStorePosition();const e=c.a.randomId("note-"),{file:i}=t;if((null==i?void 0:i.size)>16048584)return void rt.message.error(Object(Z.i18n)("note_upload_img_15"));const o=an.a.createObjectURL(i),{width:r,height:a}=await function(t){return new n.a(e=>{const i=new Image;i.onload=function(){e({width:i.width,height:i.height})},i.src=t})}(o);!function(t){let e,i;if(window.getSelection&&(e=window.getSelection(),e.getRangeAt&&e.rangeCount)){i=e.getRangeAt(0),i.deleteContents();const o=document.createElement("div");o.innerHTML=t;const n=document.createDocumentFragment();let r,a;for(;r=o.firstChild;)a=n.appendChild(r);i.insertNode(n),a&&(i=i.cloneRange(),i.setStartAfter(a),i.collapse(!0),e.removeAllRanges(),e.addRange(i))}}(`<span\n        class="note-img-wrapper uploading"\n        data-width="${r}"\n        data-height="${a}"\n        data-picture="${e}.png"\n      ><img class="main-img" src=${o} /><img class="uploading-text" src=${un.a} /></span>`),this.debounceHandleScrollCursor();try{const{data:t,error:n}=await this.store.upload(i,e);if(!Object.keys(t).length)throw new Error(n);{let{url:e,key:i}=t;i=i.split("/")[2];const n=this.editBox.querySelector(`span[data-picture="${i}"]`);n.classList.remove("uploading");n.querySelector(".main-img").src=e;n.querySelector(".uploading-text").remove(),an.a.revokeObjectURL(o)}}catch(t){this.editBox.querySelector(`span[data-picture="${e}.png"]`).remove(),rt.message.error(Object(Z.i18n)("upload_image_error"))}const s=this.editBox.innerHTML;this.updateContent({content:s})}};Hn.styles=pn,zn([Object(r.g)({type:Boolean})],Hn.prototype,"deleteModal",void 0),zn([Object(r.g)({type:String})],Hn.prototype,"deleteId",void 0),zn([Object(r.h)(".note-editor")],Hn.prototype,"editBox",void 0),zn([Object(r.h)("note-editor")],Hn.prototype,"noteEditor",void 0),zn([Object(r.h)("note-editor-options")],Hn.prototype,"editOptions",void 0),zn([Object(r.h)('input[name="title"]')],Hn.prototype,"inputEle",void 0),Hn=zn([Object(r.c)("side-notes")],Hn);var Wn=r.b`:host {
  position: relative;
  display: block;
  height: 100%;
  --point-height: 2px;
  --display: none;
}
.tabs {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
}
.tabs.vertically {
  align-items: center;
}
.tabs.horizontally {
  flex-direction: column;
}
.tabs[style]::after {
  content: '';
}
.tabs.vertically::after {
  display: var(--display, none);
  --width: 28;
  position: absolute;
  width: calc(var(--width) * 1px);
  left: calc((var(--target-left) + (var(--target-width) - var(--width)) / 2) * 1px);
  border-bottom: var(--point-height) solid #333;
  bottom: 0;
  transition: left 0.2s, width 0.2s;
}
.tabs.horizontally::before {
  display: var(--display, none);
  content: '';
  position: absolute;
  z-index: 0;
  width: 100%;
  height: calc(var(--target-height, 0) * 1px);
  top: calc(var(--target-top, -9000) * 1px);
  left: 0;
  background: #f5f5f5;
  border-radius: 6px;
  transition: top 0.2s, height 0.2s;
}
`,qn=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Gn=class extends r.a{constructor(){super(...arguments),this.type="vertically",this.active=0}setActiveStyle(){var t,e;const i=null===(e=null===(t=this.$slot)||void 0===t?void 0:t.assignedNodes())||void 0===e?void 0:e.filter(t=>1===t.nodeType);if(i&&i.length>0){const t=i[this.active],e=this.$tabsbox.style,{offsetTop:o,offsetLeft:n,offsetWidth:r,offsetHeight:a}=t;if(0===r&&0===a)return void e.setProperty("--display","none");e.setProperty("--display","block"),e.setProperty("--target-width",r+""),e.setProperty("--target-height",a+""),e.setProperty("--target-left",n+""),"horizontally"===this.type&&e.setProperty("--target-top",o+"")}}updated(t){t.has("active")&&this.setActiveStyle()}render(){return r.e`
      <div class="tabs ${this.type}">
        <slot></slot>
      </div>
    `}};Gn.styles=Wn,qn([Object(r.g)({type:String})],Gn.prototype,"type",void 0),qn([Object(r.g)({type:Number})],Gn.prototype,"active",void 0),qn([Object(r.h)(".tabs")],Gn.prototype,"$tabsbox",void 0),qn([Object(r.h)("slot")],Gn.prototype,"$slot",void 0),Gn=qn([Object(r.c)("i-tabs")],Gn);var Vn=r.b`:host {
  display: block;
  padding: 30px;
  padding-top: 41px;
  box-sizing: border-box;
  height: 100%;
  overflow-y: auto;
  text-align: center;
}
.card {
  padding: 8px 16px 12px;
  display: flex;
  flex-direction: column;
  background: #fff;
  border-radius: 6px;
  width: 100%;
  box-sizing: border-box;
}
.card {
  margin-bottom: 32px;
  text-align: left;
}
.card-header {
  display: flex;
  align-items: center;
  height: 20px;
}
.card-header .img-box {
  position: relative;
  margin-top: -8px;
  width: 52px;
  height: 52px;
  background: #ffffff;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
}
.card-header .added-icon {
  width: 14px;
  height: 14px;
  position: absolute;
  bottom: 6px;
  right: 4px;
}
.card-header .img-icon-box {
  width: 40px;
  height: 40px;
  border: 1px solid #eee;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  box-sizing: border-box;
}
.card-header .img-icon {
  border-radius: 50%;
  object-fit: cover;
  box-sizing: border-box;
}
.card-header .title {
  max-width: 120px;
  margin-right: 6px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  height: 20px;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
}
.card-content {
  margin-top: 16px;
  margin-bottom: 10px;
  font-size: 12px;
  font-weight: 400;
  color: #999999;
  line-height: 18px;
}
.card-content .desc {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}
.card-footer {
  display: flex;
  justify-content: flex-end;
}
.card-footer .add-btn {
  min-width: 94px;
  height: 34px;
}
`,Qn=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Yn=class extends a.a{firstUpdated(){}addSearch(t){var e,i;s.searchStore.updateShortcut(t),S.a.sendEvent({action:{addDefaultSearchEngine:c.a.getTargetLogDomain(null===(i=null===(e=t.types)||void 0===e?void 0:e[0])||void 0===i?void 0:i.url)}})}render(){const{list:t,searchEngine:e}=s.searchStore;return r.e`
      ${t.filter(t=>!t.hide).map(t=>{const o=e.all.some(e=>t.uuid.toLocaleLowerCase()===e.uuid.toLocaleLowerCase());return r.e`
            <section class="card">
              <div class="card-header">
                <div class="img-box">
                  <div class="img-icon-box">
                    <img class="img-icon" width="32" height="32" src="${Object(it.b)(t.logo)}" alt="" />
                  </div>
                  ${o?r.e` <img class="added-icon" src="${i(703)}" alt="" />`:r.e``}
                </div>
                <div class="title">${t.name}</div>
              </div>
              <div class="card-content">
                <div class="desc">${t.desc}</div>
              </div>
              <div class="card-footer">
                ${o?r.e`<infinito-button white class="add-btn" disabled>${Object(Z.i18n)("icon_added")}</infinito-button>`:r.e`<infinito-button white class="add-btn" @click="${()=>this.addSearch(t)}"
                      >${Object(Z.i18n)("add")}</infinito-button
                    >`}
              </div>
            </section>
          `})}
      <span style="color: #b6b6b6;">${Object(Z.i18n)("no_more")}</span>
    `}};Yn.styles=Vn,Yn=Qn([Object(r.c)("side-search-default")],Yn);var Xn=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class Zn{constructor(){this.editing=!1,this.editData={},this.editIndex=null}changeStatus(t,e=null){this.editing=t,this.editIndex=e,this.editData={},null!==e&&("add"===this.editing?this.editData=Object.assign({},s.searchStore.searchEngine.addList[e]):"custom"===this.editing&&(this.editData=Object.assign({},s.searchStore.searchEngine.custom[e])))}async submit(t){const{editIndex:e}=this;let i=null;if("color"===t.bgType?delete t.logo:"image"===t.bgType&&(delete t.bgFont,delete t.bgText,delete t.bgColorImage),t.updatetime=await c.a.getTimestamp(),"add"===this.editing)i=s.searchStore.createEngineAdd(t,e);else if("custom"===this.editing){const o=Object.assign({},t);o.types=[{name:t.name,url:t.target}],i=s.searchStore.createEngine(o,e)}return Object(x.i)(()=>{this.editing=!1}),i}cancel(){this.editing=!1}}Xn([x.g],Zn.prototype,"editing",void 0),Xn([x.g],Zn.prototype,"editData",void 0),Xn([x.g],Zn.prototype,"editIndex",void 0),Xn([x.b],Zn.prototype,"changeStatus",null),Xn([x.b],Zn.prototype,"submit",null),Xn([x.b],Zn.prototype,"cancel",null);const Kn=new Zn;var Jn=r.b`.btn-add {
  width: 360px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #ffffff;
  border-radius: 6px;
  cursor: pointer;
}
.btn-add-text {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
}
.btn-add-text i-usesvg {
  margin-right: 4px;
  width: 18px;
  height: 18px;
  color: #333;
}
.btn-add-text div {
  max-width: calc(100% - 100px);
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
custom-engine-card {
  margin-bottom: 20px;
}
`,tr=r.b`:host {
  display: block;
}
.container {
  position: relative;
  display: flex;
  background: #ffffff;
}
.main {
  display: flex;
  align-items: center;
  padding: 16px;
}
.main .left {
  flex-shrink: 0;
  margin-right: 14px;
  width: 56px;
  height: 56px;
  border: 1px solid #eeeeee;
  border-radius: 6px;
  overflow: hidden;
}
.main .left.add {
  border-radius: 50%;
}
.main .left.add svg {
  border-radius: 50% !important;
}
.main .left img {
  width: 100%;
  height: 100%;
}
.main .search-icon {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  border-radius: 4px;
  display: flex;
  justify-content: center;
  align-items: center;
}
.main .search-icon .bg-text {
  display: flex;
  justify-content: center;
  overflow: hidden;
  color: #fff;
  white-space: nowrap;
}
.main .right .name {
  width: 170px;
  height: 20px;
  font-size: 18px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.main .right .target {
  margin-top: 6px;
  width: 224px;
  height: 18px;
  font-size: 12px;
  font-weight: 400;
  color: #999999;
  line-height: 18px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.container:hover > .dot-container,
.dot-container.active {
  opacity: 1;
  pointer-events: auto;
  cursor: pointer;
}
.dot-container {
  position: absolute;
  top: 28px;
  right: 20px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2;
  box-sizing: border-box;
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-around;
  width: 32px;
  height: 32px;
  padding: 6px 0;
  border-radius: 4px;
  transition: opacity 0.3s;
  outline: none;
}
.dot-container:hover {
  background: #f2f2f2;
}
.dot-container:focus,
.dot-container.active {
  opacity: 1;
  background: #f2f2f2;
}
.dot-container > span {
  width: 3px;
  height: 3px;
  border-radius: 50%;
  background: #999;
}
.dot-container ul {
  display: none;
}
`,er=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let ir=class extends a.a{constructor(){super(...arguments),this.data={logo:"",name:"",target:""},this.isShortcut=!1,this.noDel=!1,this.type="add"}_edit(){const t=new CustomEvent("on-edit");this.dispatchEvent(t)}_del(){const t=new CustomEvent("on-del");this.dispatchEvent(t)}_add(){const t=new CustomEvent("on-add");this.dispatchEvent(t)}handleDotClick(t){t.stopPropagation();const e=document.createElement("div");e.className="dot-wrapper";const i=document.createElement("div");i.className="infinity-modal";const o=t.currentTarget.querySelector("ul").cloneNode(!0);if(this.dotEle.classList.add("active"),e.appendChild(i),e.appendChild(o),document.body.appendChild(e),"DIV"===t.currentTarget.tagName){const e=t.currentTarget.getBoundingClientRect(),{bottom:i,right:n,top:r}=e,a=window.innerWidth,l=document.body.clientHeight;o.style.right=a-n+"px";const c=o.clientHeight,d=this.dotEle.clientHeight*s.settingStore.sideScaleRatio;o.style.top=r+c+d>=l?r-c+"px":i+"px"}o.addEventListener("click",async t=>{const i=t.target;if("LI"===i.tagName){const t=i.classList;document.body.removeChild(e),this.dotEle.classList.remove("active"),t.contains("edit")?this._edit():t.contains("delete")?this._del():t.contains("add")&&this._add()}},{once:!0}),i.addEventListener("click",()=>{this.dotEle.classList.remove("active"),document.body.removeChild(e)},{once:!0})}render(){return r.e`
      <div class="container">
        <main class="main">
          <div
            class="${Object(Y.a)({left:!0,add:"add"===this.type})}"
          >
            ${Object(ot.a)(Object(vt.a)(this.data,!1,!1,"6px"))}
          </div>
          <div class="right">
            <div class="name">${this.data.name}</div>
            <div class="target">${this.data.target}</div>
          </div>
        </main>
        <div class="dot-container" @click=${this.handleDotClick} tabindex="0">
          <span></span>
          <span></span>
          <span></span>
          <ul class="dot-ul">
            ${"custom"===this.type&&this.isShortcut?r.e`<li class="op-item added disabled">${i18n("icon_added")}</li>`:null}
            ${"custom"!==this.type||this.isShortcut?null:r.e`<li class="op-item add" @click=${this._add}>${i18n("add")}</li>`}
            <li class="op-item edit" @click="${this._edit}">${i18n("edit")}</li>
            <li .hidden="${this.noDel}" class="op-item delete" @click="${this._del}">${i18n("del_folder")}</li>
          </ul>
        </div>
      </div>
    `}};ir.styles=[tr],er([Object(r.g)({type:Object})],ir.prototype,"data",void 0),er([Object(r.g)({type:Boolean})],ir.prototype,"isShortcut",void 0),er([Object(r.g)({type:Boolean})],ir.prototype,"noDel",void 0),er([Object(r.g)({type:String})],ir.prototype,"type",void 0),er([Object(r.h)(".dot-container")],ir.prototype,"dotEle",void 0),ir=er([Object(r.c)("custom-engine-card")],ir);var or=i(402),nr=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let rr=class extends a.a{_addCustom(){Kn.changeStatus("custom")}_addShortcut(t){s.searchStore.updateShortcut(t)}_edit(t){Kn.changeStatus("custom",t)}_del(t){s.searchStore.delEngine(t)}async _onSubmit(t){const{bgType:e,bgColor:i,bgFont:o,bgText:n,name:r,target:a,bgImage:l,bgColorImage:d}=t.detail.value,p={bgType:e,logo:l,bgColor:i,bgFont:o,bgText:n,name:r,target:a,bgColorImage:d};null===Kn.editIndex&&S.a.sendEvent({action:{addCustomSearchEngine:c.a.getTargetLogDomain(a)}});const h=await Kn.submit(p);s.searchStore.updateShortcut(h)}cancel(){Kn.cancel()}_renderList(){const{custom:t,all:e,current:i}=s.searchStore.searchEngine;return r.e`
      ${t.map((t,o)=>{const n=e.some(e=>t.uuid===e.uuid);return r.e` <custom-engine-card
          @on-add="${()=>this._addShortcut(t)}"
          @on-edit="${()=>this._edit(o)}"
          @on-del="${()=>this._del(o)}"
          .isShortcut="${n}"
          .data="${t}"
          .noDel="${i.uuid===t.uuid}"
          type="custom"
        ></custom-engine-card>`})}
      <div @click="${this._addCustom}" class="btn-add">
        <div class="btn-add-text">
          <i-usesvg iconfont type="icon-icon-xinjian"></i-usesvg>
          <div>${Object(Z.i18n)("add_new_search_engine")}</div>
        </div>
      </div>
    `}render(){const t=Object.assign(Object.assign({},or.a.defaultValue),Kn.editData);return Kn.editData.logo&&(t.bgImage=Kn.editData.logo,Kn.editData.bgType||(t.bgType="image")),r.e`${Kn.editing?r.e`
          <i-editicon
            .sideRatio="${s.settingStore.sideRatio}"
            iconType="search-engine-custom"
            .value="${t}"
            @on-cancel="${this.cancel}"
            @on-submit="${this._onSubmit}"
          ></i-editicon>
        `:this._renderList()} `}};rr.styles=Jn,rr=nr([Object(r.c)("custom-engine")],rr);var ar=r.b`.btn-add {
  width: 360px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #ffffff;
  border-radius: 6px;
  cursor: pointer;
}
.btn-add-text {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.btn-add-text i-usesvg {
  margin-right: 4px;
  width: 18px;
  height: 18px;
  color: #333;
}
.btn-add-text div {
  max-width: calc(100% - 100px);
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
custom-engine-card {
  margin-bottom: 20px;
}
.tips {
  width: 360px;
  height: 196px;
  margin-bottom: 20px;
}
.tips img {
  width: 100%;
  height: 100%;
}
`,sr=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let lr=class extends a.a{_addCustom(){Kn.changeStatus("add")}_edit(t){Kn.changeStatus("add",t)}_del(t){s.searchStore.delEngineAdd(t)}async _onSubmit(t){const{bgType:e,bgColor:i,bgFont:o,bgText:n,name:r,target:a,bgImage:s,bgColorImage:l}=t.detail.value,d={bgType:e,logo:s,bgColor:i,bgFont:o,bgText:n,name:r,target:a,bgColorImage:l};null===Kn.editIndex&&S.a.sendEvent({action:{addAddonSearchEngine:c.a.getTargetLogDomain(a)}}),await Kn.submit(d)}cancel(){Kn.cancel()}_renderList(){const{addList:t}=s.searchStore.searchEngine;return r.e`
      <div class="tips">
        <img src="${Object(it.a)("add_engine.gif",!1)}" alt="" />
      </div>
      ${t.map((t,e)=>r.e` <custom-engine-card
          @on-edit="${()=>this._edit(e)}"
          @on-del="${()=>this._del(e)}"
          type="add"
          .data="${t}"
        ></custom-engine-card>`)}
      <div @click="${this._addCustom}" class="btn-add">
        <div class="btn-add-text">
          <i-usesvg iconfont type="icon-icon-xinjian"></i-usesvg>
          <div>${Object(Z.i18n)("add_new_search_engine")}</div>
        </div>
      </div>
    `}render(){const t=Object.assign(Object.assign({},or.a.defaultValue),Kn.editData);return Kn.editData.logo&&(t.bgImage=Kn.editData.logo,Kn.editData.bgType||(t.bgType="image")),r.e`${Kn.editing?r.e`
          <i-editicon
            .sideRatio="${s.settingStore.sideRatio}"
            .value="${t}"
            @on-cancel="${this.cancel}"
            @on-submit="${this._onSubmit}"
            iconType="search-engnie-add"
          ></i-editicon>
        `:this._renderList()} `}};lr.styles=ar,lr=sr([Object(r.c)("custom-engine-add")],lr);var cr=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let dr=class extends a.a{constructor(){super(...arguments),this.active=0,this.tabs=[Object(Z.i18n)("search_engine"),Object(Z.i18n)("additional_search_engine")],this.clickTab=t=>{this.active!==t&&(this.active=t,Kn.cancel())}}render(){return r.e`
      <div class="header-box">
        <div class="header">
          ${this.tabs.map((t,e)=>r.e`
              <div @click="${()=>this.clickTab(e)}" class="tab ${this.active===e?"active":""}">
                <span class="text">${t}</span>
              </div>
            `)}
        </div>
      </div>
      <main class="main">
        ${0===this.active?r.e` <custom-engine></custom-engine> `:r.e` <custom-engine-add></custom-engine-add> `}
      </main>
    `}};dr.styles=r.b`
    :host {
      display: block;
      padding: 30px;
      padding-top: 18px;
      height: 100%;
      box-sizing: border-box;
      overflow-y: auto;
    }
    .main {
      margin-top: 18px;
    }
    .header-box {
      width: 360px;
      display: flex;
      justify-content: center;
    }
    .header {
      max-width: 100%;
      height: 32px;
      box-sizing: border-box;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.05);
      font-size: 14px;
      font-weight: 400;
      color: #454545;
    }
    .header .tab {
      margin: 2px;
      padding: 4px 18px;
      box-sizing: content-box;
      height: 20px;
      line-height: 20px;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.2s, color 0.2s;
      word-break: keep-all;
      text-overflow: ellipsis;
      overflow: hidden;
    }
    .tab:hover {
      background: #ffffff;
      color: #333333;
    }
    .tab:last-of-type {
      margin-left: 0;
    }
    .tab.active {
      border-radius: 6px;
      background: #ffffff;
      color: #333333;
    }
  `,cr([Object(r.g)({type:Number})],dr.prototype,"active",void 0),dr=cr([Object(r.c)("side-search-custom")],dr);var pr=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let hr=class extends a.a{constructor(){super(...arguments),this.tabsActive=0,this.tabs=[Object(Z.i18n)("default"),Object(Z.i18n)("custom")],this.firstShow=!1,this.changeTabs=t=>{this.tabsActive=t}}firstUpdated(){}beforeShow(){this.firstShow||(this.firstShow=!0,setTimeout(()=>{this.$itabs.setActiveStyle()},20))}render(){return r.e`
      <i-side2-header .title="${Object(Z.i18n)("add_search_engine")}"></i-side2-header>
      <i-tabs class="nav" .active=${this.tabsActive}>
        ${this.tabs.map((t,e)=>r.e`
            <div @click="${()=>this.changeTabs(e)}" class="tab ${this.tabsActive===e?"active":""}">
              <span>${t}</span>
            </div>
          `)}
      </i-tabs>
      <main class="main">
        ${0===this.tabsActive?r.e`<side-search-default class="global-scrollbar"></side-search-default>`:r.e` <side-search-custom></side-search-custom>`}
      </main>
    `}};hr.styles=[A.a,r.b`
      :host {
        display: block;
        height: 100%;
        background-color: #fff;
      }
      .nav {
        height: 50px;
        margin: 0 30px;
        background-color: #fff;
      }
      .main {
        height: calc(100% - var(--side-header-height) - 50px);
        background-color: #ededed;
      }
      .tab {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        padding: 0 10px;
        font-weight: 400;
        color: rgba(101, 101, 101, 1);
        cursor: pointer;
        margin-right: 30px;
      }
      .tab:last-of-type {
        margin-right: 0;
      }
      .tab.active {
        font-weight: 500;
        color: #333333;
      }
    `],pr([Object(r.g)({type:Number})],hr.prototype,"tabsActive",void 0),pr([Object(r.h)("i-tabs")],hr.prototype,"$itabs",void 0),hr=pr([Object(r.c)("side-search")],hr);i(266);var ur=i(75),gr=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const fr=({type:t})=>"hosted_app"===t||"packaged_app"===t||"legacy_packaged_app"===t,mr=async()=>{let t=[];return t=await new n.a(t=>window.chrome.management.getAll(t)),t=t.filter(fr).map(t=>({name:t.name,uid:t.id,src:t.icons&&t.icons.length>0?t.icons[t.icons.length-1].url:null,url:"chrome-app://"+t.id,description:t.description,_footer:t.description||Object(Z.i18n)("no_description")})),t},br=[{type:"search",text:Object(Z.i18n)("search_result"),logo:i(704)},{type:"popular",text:Object(Z.i18n)("popular"),logo:i(705)},{source:"shareByUser",text:Object(Z.i18n)("share_by_user"),logo:i(706)},{type:"app",text:Object(Z.i18n)("application"),logo:i(707)},{type:"news",text:Object(Z.i18n)("news"),logo:i(708)},{type:"music",text:Object(Z.i18n)("music_video"),logo:i(709)},{type:"photos",text:Object(Z.i18n)("photos"),logo:i(710)},{type:"shopping",text:Object(Z.i18n)("shopping"),logo:i(711)},{type:"social",text:Object(Z.i18n)("social"),logo:i(712)},{type:"sports",text:Object(Z.i18n)("sports"),logo:i(713)},{type:"life",text:Object(Z.i18n)("life_style"),logo:i(714)},{type:"games",text:Object(Z.i18n)("games"),logo:i(715)},{type:"education",text:Object(Z.i18n)("education"),logo:i(716)},{type:"tech",text:Object(Z.i18n)("tech"),logo:i(717)},{type:"finance",text:Object(Z.i18n)("finance"),logo:i(718)},{type:"read",text:Object(Z.i18n)("read"),logo:i(719)},{type:"others",text:Object(Z.i18n)("others"),logo:i(720)}];class yr{constructor(){this.listData=[],this.params={page:-1,type:"popular"},this.loading=null,this.activeNav=1,this.last=!1,this.networkError=!1,this.noAppPermission=null,this.reqPermission=async()=>{try{await ur.a.request(["management"]);const t=await mr();Object(x.i)(()=>{this.noAppPermission=!1,this.listData=t.concat(this.listData)})}catch(t){}}}async getList(t,e=!1){this.loading=!0,this.networkError=!1,this.last=!1,this.params=t;const{data:i,error:o}=await mt.b.getIcon(Object.assign({},t));o?Object(x.i)(()=>{o.__CANCEL__||(this.loading=!1,this.networkError=!0)}):Object(x.i)(()=>{this.loading=!1,i.totalPages===i.nextPage&&(this.last=!0),this.listData=e?this.listData.concat(i.icons):i.icons})}async loadNextPage(){if(this.last)return;let t=this.params.page;this.networkError||(t+=1),this.getList(Object.assign(Object.assign({},this.params),{page:t}),!0)}async search(t){this.getList(t)}async changeNav(t){if(this.activeNav=t,0===t)return;const e=br[t],{type:i,source:o}=e,n={page:0};if(i&&(n.type=i),o&&(n.source=o),l.i&&"app"===i){let t=[];const e=await ur.a.has(["management"]);e&&(t=await mr()),Object(x.i)(()=>{this.listData=t,this.noAppPermission=!e})}else this.listData=[];this.getList(n,"app"===i)}}gr([x.g],yr.prototype,"listData",void 0),gr([x.g],yr.prototype,"params",void 0),gr([x.g],yr.prototype,"loading",void 0),gr([x.g],yr.prototype,"activeNav",void 0),gr([x.g],yr.prototype,"last",void 0),gr([x.g],yr.prototype,"networkError",void 0),gr([x.g],yr.prototype,"noAppPermission",void 0),gr([x.b],yr.prototype,"getList",null),gr([x.b],yr.prototype,"loadNextPage",null),gr([x.b],yr.prototype,"search",null),gr([x.b],yr.prototype,"changeNav",null),gr([x.b],yr.prototype,"reqPermission",void 0);const vr=new yr;var wr=r.b`:host {
  display: block;
  height: 100%;
}
[hidden] {
  display: none !important;
}
.content-header {
  display: flex;
  align-items: center;
  height: 80px;
  box-sizing: border-box;
  padding: 0 20px;
  border-bottom: 1px solid #efefef;
}
.content-header .default-title {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.content-header .default-title .search-box {
  background-color: #fff;
  width: 320px;
  height: 40px;
  border-radius: 6px;
}
.content-header .default-title .custom-btn {
  position: relative;
  background-color: #fff;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  cursor: pointer;
}
.content-header .default-title .custom-btn:hover {
  opacity: 0.8;
}
.content-header .default-title .custom-btn .img {
  width: 24px;
  height: 24px;
}
.content-header .custom-title {
  display: flex;
  align-items: center;
  padding: 10px;
  font-size: 13px;
  font-weight: 500;
  color: #656565;
  line-height: 18px;
  cursor: pointer;
}
.content-header .custom-title .img {
  width: 16px;
  height: 16px;
  margin-right: 6px;
  color: #555;
}
.content-header .custom-title:hover {
  color: #555;
}
.content {
  height: calc(100% - 80px);
}
.custom-icon-scroll-box {
  height: 100%;
}
icons-custom {
  z-index: 1111;
}
icons-custom[show] {
  display: block;
}
`,xr=(i(647),r.b`:host {
  --nav-item-height: 46px;
  display: flex;
  height: 100%;
  overflow: hidden;
}
.side-nav.hide-search {
  margin-top: calc(18px - var(--nav-item-height));
}
.aside-scrollbar {
  width: 160px;
  background-color: #fff;
}
.side-nav {
  position: relative;
  padding-top: 0;
  margin-top: 18px;
  padding-left: 10px;
  padding-right: 6px;
  padding-bottom: 20px;
  box-sizing: border-box;
  width: 100%;
  display: flex;
  flex-direction: column;
  background-color: #fff;
  overflow-y: auto;
  transition: margin 0.2s;
}
.side-nav .nav-item:first-child {
  pointer-events: none;
}
.side-nav .nav-item {
  position: relative;
  z-index: 1;
  padding: 12px 0;
  padding-left: 4px;
  font-size: 13px;
  font-weight: 400;
  color: #999;
  line-height: 18px;
  height: 18px;
  cursor: pointer;
  transition: color 0.2s, height 0.2s;
  display: flex;
  align-items: center;
}
.side-nav .nav-item:hover {
  color: #333333;
}
.side-nav .nav-item:hover:after {
  content: '';
  position: absolute;
  z-index: -1;
  left: 0;
  top: 0;
  height: 100%;
  width: 100%;
  transition: background 0.2s;
  background: rgba(245, 245, 245, 0.8);
  border-radius: 6px;
}
.side-nav .nav-item:hover .nav-item-logo {
  color: rgba(51, 51, 51, 0.8);
}
.side-nav .nav-item.active {
  color: #333;
  font-weight: 500;
  border-radius: 6px;
}
.side-nav .nav-item.active .nav-item-logo {
  color: #333;
}
.side-nav .nav-item-logo {
  width: 16px;
  height: 16px;
  margin-right: 10px;
  color: #bbb;
  transition: color 0.2s;
}
.side-nav .nav-item-text {
  word-break: keep-all;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.side-nav .nav-item-holder {
  flex-shrink: 0;
}
.side-nav::after {
  position: absolute;
  width: 100%;
  height: calc(var(--target-height, 0) * 1px);
  top: calc(var(--target-top, -500) * 1px);
  border-right: 2px solid #333;
  right: 0;
  transition: top 0.2s, height 0.2s;
}
.side-nav[style]::after {
  content: '';
}
.main {
  width: 220px;
  height: auto;
  box-sizing: content-box;
  padding-top: 32px;
  padding-bottom: 10px;
  padding-left: 20px;
}
.observer-holder {
  height: 40px;
}
.no-content {
  text-align: center;
}
.no-content img {
  display: block;
  margin: auto;
  margin-top: 100px;
  width: 86px;
  height: 86px;
}
.no-content span {
  margin-top: 6px;
  height: 24px;
  font-size: 14px;
  font-weight: 300;
  color: #999999;
  line-height: 24px;
}
.card {
  padding: 8px 16px 12px;
  display: flex;
  flex-direction: column;
  background: #fff;
  border-radius: 6px;
  width: 100%;
  box-sizing: border-box;
}
.card:not(:last-of-type) {
  margin-bottom: 32px;
}
.card-header {
  display: flex;
  align-items: center;
  height: 20px;
  justify-content: space-between;
}
.card-header .title-left {
  display: flex;
  align-items: center;
}
.card-header .img-box {
  position: relative;
  margin-top: -8px;
  width: 52px;
  height: 52px;
  background: #ffffff;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
}
.card-header .added-icon {
  width: 14px;
  height: 14px;
  position: absolute;
  bottom: 6px;
  right: 4px;
}
.card-header .img-icon {
  border-radius: 50%;
  object-fit: cover;
  box-sizing: border-box;
  border: 1px solid #eeeeee;
}
.card-header .title {
  max-width: 120px;
  margin-right: 6px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  height: 20px;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
}
.card-header .link-box {
  flex-shrink: 0;
  position: relative;
  width: 18px;
  height: 18px;
  cursor: pointer;
}
.card-header .link-box:after {
  position: absolute;
  content: '';
  top: -6px;
  left: -6px;
  right: -6px;
  bottom: -6px;
}
.card-header .link,
.card-header .link-hover {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}
.card-header .link-hover {
  visibility: hidden;
  color: #c3c3c3;
  transition: 0.2s color;
}
.card-header .link-box:hover .link-hover {
  visibility: visible;
  color: #333;
}
.card-header .link-box:hover .link {
  visibility: hidden;
}
.card-content {
  margin-top: 16px;
  margin-bottom: 10px;
  font-size: 12px;
  font-weight: 400;
  color: #999999;
  line-height: 18px;
}
.card-content .user-desc {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.card-content .desc {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}
.card-footer {
  display: flex;
  justify-content: flex-end;
}
.card-footer .add-btn {
  min-width: 94px;
  height: 34px;
}
.no-more,
.loading-more {
  margin-top: 20px;
  text-align: center;
  color: #b6b6b6;
  line-height: 1.3;
}
.loading-more-mask {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0);
}
.loading-more-mask span {
  color: #b6b6b6;
}
.loading-more-mask[hidden] {
  display: none;
}
.loading-error-line[hidden],
.loading-error-mask[hidden] {
  display: none;
}
.loading-error-line {
  margin-top: 15px;
  display: flex;
  justify-content: center;
  align-items: center;
}
.loading-error-mask {
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
}
.loading-error-mask .loading-error-content {
  margin-top: 120px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}
.loading-error-mask .loading-error-content .img {
  width: 86px;
  height: 86px;
  margin-bottom: 10px;
}
.networkerr-text-box {
  height: 24px;
  line-height: 24px;
  background: #ebebeb;
  border-radius: 6px;
  display: flex;
  justify-content: center;
  align-items: center;
  max-width: 100%;
  padding: 0 10px;
  box-sizing: border-box;
  cursor: pointer;
}
.networkerr-text-box .networkerr-text {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  height: 17px;
  font-size: 12px;
  font-weight: 400;
  color: #333333;
  line-height: 17px;
  margin-right: 4px;
}
.networkerr-text-box .networkerr-text-reload {
  color: #333;
  width: 12px;
  height: 12px;
}
.networkerr-text-box:hover .networkerr-text,
.networkerr-text-box:hover .networkerr-text-reload {
  color: #555;
}
.no-app-permission-box {
  margin: -10px auto 25px;
  display: flex;
  justify-content: center;
  align-items: center;
}
.no-app-permission {
  display: flex;
  justify-content: center;
  align-items: center;
  max-width: 100%;
  cursor: pointer;
  height: 24px;
  background: #ebebeb;
  border-radius: 6px;
  padding: 0 10px;
  box-sizing: border-box;
}
.no-app-permission .dot {
  margin-right: 4px;
  width: 6px;
  height: 6px;
  background: #fb7f0c;
  border-radius: 50%;
}
.no-app-permission .text {
  height: 17px;
  font-size: 12px;
  font-weight: 400;
  color: #333333;
  line-height: 17px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.no-app-permission .text:hover {
  color: #555;
}
`),_r=i(722),kr=i.n(_r);async function Or(t){t||(t=kr.a);const e=await async function({img:t,isApp:e}){const i=document.createElement("canvas");i.setAttribute("width","300"),i.setAttribute("height","300");const o=i.getContext("2d"),r=new Image;if(r.src=t,r.setAttribute("crossOrigin","Anonymous"),await new n.a((t,e)=>{r.addEventListener("load",t),r.addEventListener("error",e)}),e){const t={width:r.width,height:r.height},e=t.height/t.width;t.width=180,t.height=e*t.width,o.drawImage(r,(300-t.width)/2,(300-t.height)/2,t.width,t.height)}else o.drawImage(r,0,0,300,300);return i.toDataURL("image/png")}({img:t,isApp:!0}),{data:i,error:o}=await mt.f.uploadFile(c.a.convertBase64ToBlob(e),c.a.randomId("appicon-")+".png","custom-icon");return o?null:i.url}var Ar=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Sr=class extends a.a{constructor(){super(...arguments),this.observer=null,this.intiateScrollObserver=()=>{const t={root:this.$main,rootMargin:"0px 0px 200px"};this.observer=new IntersectionObserver(t=>{t[0].intersectionRatio>0&&this._scrollBottom()},t),this.observer.observe(this.$observer)},this.setActiveStyle=()=>{this.$itabs.setActiveStyle()}}firstUpdated(){this.intiateScrollObserver(),this._activeThis(1)}disconnectedCallback(){this.observer.disconnect(),super.disconnectedCallback()}_scrollBottom(){vr.last||vr.loading||vr.loadNextPage()}_activeThis(t){if(t!==vr.activeNav){if(0===vr.activeNav&&0!==t){const e=new CustomEvent("clear-search",{bubbles:!0,composed:!0,detail:{value:t}});this.dispatchEvent(e)}vr.changeNav(t),this.scrollToTop()}}scrollToTop(){this.$main.scrollTop=0}scrollSideToTop(){this.$side.scrollTop=0}async _addApp(t){const e={name:t.name,uuid:t.uid,bgType:"image",bgImage:t.src,updatetime:Date.now(),id:c.a.randomId("siteId-"),target:t.url};if(e.target.startsWith("infinity://")){if(e.type="app",e.target===K.i.target){const{getCurrentWeather:t}=await Promise.resolve().then(i.bind(null,623)),o=t();e.name=o.name||K.i.name,e.bgColor=o.bgColor||K.i.bgColor,e.bgImage=o.bgImg||K.i.bgImage,e.updatetime=Date.now()}}else e.type="web";if(e.target.startsWith("chrome-app://")&&(e.bgColor="#fff",e.bgImage=await Or(e.bgImage),!e.bgImage))return void rt.message.error(Object(Z.i18n)("upload_file_error"));const o=s.siteStore.addSite(e,s.siteStore.currentPageIndex);S.a.sendEvent({action:{addDefaultIcon:c.a.getTargetLogDomain(e.target)}}),document.querySelector("newtab-main").toPage(o)}_openApp({url:t,uid:e},i){if(S.a.sendEvent({action:{openDefaultIcon:c.a.getTargetLogDomain(t)}}),lt(t))return void i.stopPropagation();if("infinity://settings"===t){const t=new CustomEvent("open-setting",{bubbles:!0,composed:!0});return void this.dispatchEvent(t)}const{link:o}=s.settingStore.setting;t.startsWith("chrome-app://")?c.a.openChromeApp(e,o.icon,i):t.startsWith("infinity://")?"infinity://gmail"===t?c.a.openUrl("https://mail.google.com/mail/ca",o.icon,i):"infinity://chrome-apps"===t?(s.pluginStore.show(t),X.a.openModal()):s.pluginStore.show(t):c.a.openUrl(t,o.icon,i)}_replaceErrorImg(t){t.currentTarget.src=i(723)}render(){const{activeNav:t}=vr,{uids:e}=s.siteStore;return r.e`
      <div
        class="aside-scrollbar global-scrollbar"
        style="
          flex-shrink: 0;
          height: 100%;
        "
      >
        <i-tabs
          type="horizontally"
          .active="${vr.activeNav}"
          class="side-nav ${0===t?"":"hide-search"}"
          style="overflow: hidden; height: auto;"
        >
          ${br.map((t,e)=>r.e`<div
              @click="${()=>this._activeThis(e)}"
              class="nav-item ${e===vr.activeNav?"active":""}"
            >
              <i-svg class="nav-item-logo" src="${t.logo}"></i-svg>
              <span class="nav-item-text">${t.text}</span>
            </div>`)}
          <div class="nav-item-holder"></div>
        </i-tabs>
      </div>

      <div
        class="main-scrollbar global-scrollbar"
        style="
        height: 100%;
        position: relative;
        flex-grow: 1;
        "
      >
        <main class="main">
          ${vr.noAppPermission&&"app"===br[t].type?r.e`
                <div class="no-app-permission-box">
                  <div
                    class="no-app-permission"
                    @click="${()=>{vr.reqPermission()}}"
                  >
                    <span class="dot"></span>
                    <span class="text">${Object(Z.i18n)("get_app_permission")}</span>
                  </div>
                </div>
              `:null}
          ${vr.listData.map(o=>r.e`<section class="card">
              <div class="card-header">
                <div class="title-left">
                  <div class="img-box">
                    <img
                      class="img-icon"
                      width="40"
                      height="40"
                      loading="lazy"
                      @error="${this._replaceErrorImg}"
                      src="${Object(it.c)(o.src)}"
                      alt=""
                    />
                    ${e.has(o.uid+"#"+o.url)?r.e` <img class="added-icon" src="${i(724)}" alt="" />`:r.e``}
                  </div>
                  <div class="title">${o.name}</div>
                </div>

                <div @click="${t=>this._openApp(o,t)}" class="link-box">
                  <img class="link" src="${i(648)}" />
                  <i-svg class="link-hover" src="${i(648)}"></i-svg>
                </div>
              </div>
              <div class="card-content">
                ${"shareByUser"===br[t].source?r.e` <div class="user-desc">${Object(Z.i18n)("come_from")} ${o.userName}</div> `:""}
                <div class="desc">${o._footer}</div>
              </div>
              <div class="card-footer">
                <infinito-button white class="add-btn" @click="${()=>this._addApp(o)}"
                  >${Object(Z.i18n)("add")}</infinito-button
                >
              </div>
            </section>`)}
          <!-- 末尾的网络错误 -->
          <div .hidden="${!(vr.networkError&&0!==vr.listData.length)}" class="loading-error-line">
            <div
              @click="${()=>{vr.loadNextPage()}}"
              class="networkerr-text-box"
            >
              <span class="networkerr-text">${Object(Z.i18n)("icon_network_error")}</span
              ><i-svg class="networkerr-text-reload" src="${i(649)}"></i-svg>
            </div>
          </div>
          <!-- 铺满的网络错误 -->
          <div .hidden="${!(vr.networkError&&0===vr.listData.length)}" class="loading-error-mask">
            <div class="loading-error-content">
              <img class="img" src="${i(725)}" alt="" />
              <div
                @click="${()=>{vr.loadNextPage()}}"
                class="networkerr-text-box"
              >
                <span class="networkerr-text">${Object(Z.i18n)("icon_network_error")}</span
                ><i-svg class="networkerr-text-reload" src="${i(649)}"></i-svg>
              </div>
            </div>
          </div>
          <!-- 末尾的loading -->
          <div .hidden="${!(0!==vr.listData.length&&vr.loading)}" class="loading-more">
            <infinito-spin spinning .isSvg=${l.p} style="width:60px;height:30px;margin:auto"></infinito-spin>
          </div>
          <!-- 铺满的loading -->
          <div .hidden="${!(0===vr.listData.length&&vr.loading)}" class="loading-more-mask">
            <infinito-spin spinning .isSvg=${l.p} style="width:60px;height:30px"></infinito-spin>
          </div>
          <!-- 没有更多了 -->
          <div .hidden="${!(vr.last&&0!==vr.listData.length)}" class="no-more">${Object(Z.i18n)("no_more")}</div>
          <!-- 搜索没有数据 -->
          ${!1!==vr.loading||0!==vr.listData.length||vr.networkError?"":r.e`
                <div class="no-content">
                  <img src="${i(726)}" alt="" />
                  <span>${Object(Z.i18n)("no_search_result")}</span>
                </div>
              `}
          <div class="observer-holder"></div>
        </main>
      </div>
    `}};Sr.styles=[A.a,xr],Ar([Object(r.h)("i-tabs")],Sr.prototype,"$itabs",void 0),Ar([Object(r.h)(".aside-scrollbar")],Sr.prototype,"$side",void 0),Ar([Object(r.h)(".main-scrollbar")],Sr.prototype,"$main",void 0),Ar([Object(r.h)(".observer-holder")],Sr.prototype,"$observer",void 0),Ar([Object(r.d)({once:!0})],Sr.prototype,"_replaceErrorImg",null),Sr=Ar([Object(r.c)("icons-default")],Sr);i(528),i(529),i(530),i(531);var Ir=r.b`:host,
.mask {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}
:host {
  display: none;
}
.ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.mask {
  background-color: rgba(0, 0, 0, 0.4);
}
.custom-card {
  width: 360px;
  min-height: 264px;
  box-sizing: border-box;
  padding: 0;
  background: #ffffff;
}
.title-box,
.step-0 {
  margin-left: 20px;
  margin-right: 20px;
}
.title-box {
  margin-bottom: 4px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.title-box .title-side-back {
  cursor: pointer;
}
.title-box .title-side {
  display: flex;
  align-items: center;
  width: calc(100% - 30px);
}
.title-box .back {
  width: 20px;
  height: 20px;
  margin-right: 8px;
}
.title-box .title {
  height: 28px;
  font-size: 20px;
  font-weight: 500;
  color: #333333;
  line-height: 28px;
}
.title-box .close {
  width: 14px;
  height: 14px;
  cursor: pointer;
  transition: opacity 0.3s;
  opacity: 0.3;
}
.title-box .close:hover {
  opacity: 0.5;
}
i-input {
  display: block;
  margin-top: 20px;
}
.step-btn {
  width: 260px;
  height: 40px;
  margin: auto;
  margin-top: 30px;
}
.step-0 .step-btn {
  margin-top: 30px;
}
.step-0,
.step-1 {
  overflow: auto;
  overflow-x: hidden;
}
.step-1 {
  max-height: calc(100vh - 280px);
  max-height: calc((100vh - 280px * var(--side-ratio)) / var(--side-ratio));
}
.step-1 .item {
  margin-top: 20px;
  margin-left: 20px;
  margin-right: 20px;
}
.step-1 .label-box {
  max-width: 100%;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
}
.step-1 .label-box .label {
  height: 20px;
  font-size: 14px;
  font-weight: 500;
  color: #333333;
  line-height: 20px;
  white-space: nowrap;
}
.step-1 .target-content {
  position: relative;
  height: 20px;
  font-size: 14px;
  font-weight: 400;
  color: #999999;
  line-height: 20px;
  display: flex;
  align-items: center;
}
.step-1 .target-content .target-name {
  position: relative;
  max-width: 40%;
}
.step-1 .target-content .target-gap {
  margin-left: 4px;
  margin-right: 4px;
  flex-shrink: 0;
  width: 1px;
  height: 14px;
  background-color: #999999;
}
.step-1 .imgs-box {
  display: flex;
}
.step-1 .img-item-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 60px;
}
.step-1 .img-item-box .name {
  margin-top: 8px;
  max-width: 80px;
  height: 16px;
  font-size: 11px;
  line-height: 16px;
  font-weight: 400;
  color: #b3b3b3;
}
.step-1 .active .img-item {
  box-shadow: 0px 4px 8px 0px rgba(59, 62, 64, 0.73);
}
.step-1 .active .name {
  font-weight: 500;
  color: #4d4d4d;
}
.step-1 .img-item {
  width: 60px;
  height: 60px;
  border-radius: 6px;
  cursor: pointer;
  transition: 0.2s box-shadow;
}
.step-1 .color-img {
  overflow: hidden;
}
.step-1 .cloud-imgs-box {
  display: flex;
}
.step-1 .cloud-imgs-box .cloud-img-box:not(:last-of-type) {
  margin-right: 10px;
}
.step-1 .color-img-box {
  margin-right: 17px;
  position: relative;
}
.step-1 .color-img-box:after {
  position: absolute;
  top: 8px;
  content: '';
  right: -17px;
  width: 1px;
  height: 48px;
  background: #eceeee;
}
.step-1 .local-img-box {
  position: relative;
  margin-left: 17px;
}
.step-1 .cloud-imgs-box + .local-img-box:after {
  position: absolute;
  top: 8px;
  content: '';
  left: -17px;
  width: 1px;
  height: 48px;
  background: #eceeee;
}
.step-1 .cloud-imgs-box {
  margin: 0 17px;
}
.step-1 .color-type-box {
  position: relative;
  margin-top: 18px;
  padding: 20px;
  padding-top: 1px;
  margin-left: 20px;
  margin-right: 20px;
  background: #f5f8fa;
}
.step-1 .color-type-box:after {
  position: absolute;
  content: '';
  top: -19px;
  left: 20px;
  width: 0;
  height: 0;
  border: 10px solid transparent;
  border-bottom: 10px solid #f5f8fa;
}
.permission-img {
  background: #ffffff;
  background-image: url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23C3C3C3FF' stroke-width='1' stroke-dasharray='5%2c 6' stroke-dashoffset='12' stroke-linecap='butt'/%3e%3c/svg%3e");
  display: flex;
  align-items: center;
  justify-content: center;
}
.permission-img img {
  width: 28px;
  height: 28px;
}
.error {
  margin-left: 6px;
  font-size: 14px;
  font-weight: 400;
  color: #ea4747;
}
`,jr=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let $r=class extends a.a{constructor(){super(...arguments),this.value=Object.assign({},or.a.defaultValue),this.step=0,this.hasPermission=!1,this.subSpin=!1,this.imgType=null,this.imgIndex=0,this.localImageError=!1,this.localImagePreViewUrl="",this.cloudImgs=[],this.position="default",this.initName="",this.initTarget="",this.show=!1,this.isAutoName=!0,this.colors=["rgba(255,71,52,1)","rgba(255,122,9,1)","rgba(255,207,12,1)","rgba(42,233,121,1)","rgba(44,214,223,1)","rgba(0,116,255,1)","rgba(109,9,255,1)","rgba(255,36,160,1)"],this.close=()=>{const t=new CustomEvent("on-close");this.dispatchEvent(t),this.reset()},this.toNextStep=async()=>{const t=this.$step0.querySelectorAll("i-input");if((await n.a.all(Array.prototype.map.call(t,async t=>await t.checkValidity()))).includes(!1))return;const{name:e}=this.value;let i="";i=e.length>3?e.substr(0,2):e,this.cloudImgs=[],this.changeValue({bgText:i}),(this.hasPermission||l.s)&&this.getUrlIcon(),this.step=1},this.back=()=>{1===this.step&&(this.step=0,this.changeValue({bgType:"color"}),this.cloudImgs=[])},this.submit=async()=>{this.subSpin=!0;try{await this.saveImage()}catch(t){if(this.subSpin=!1,!this.localImagePreViewUrl)return;return void(t&&t.message?rt.message.error(t.message):rt.message.error(t||"upload error"))}this.subSpin=!1;const t={value:Object.assign({},this.value)};"color"!==this.value.bgType||this.value.bgColor||(t.value.bgColor=this.colors[0]),t.value.target=this.getFormateUrl(this.value.target),S.a.sendEvent({action:{addCustomIcon:c.a.getTargetLogDomain(t.value.target)}}),s.siteStore.submitSite(t.value),this.close()},this.getPermissionUrl=()=>{let t=[];return t=l.k?["http://*/","https://*/"]:l.r?"<all_urls>":["<all_urls>"],t}}changeValue(t){this.value=Object.assign(Object.assign({},this.value),t)}changeTarget(t){this.changeValue({target:t.currentTarget.value}),this.getTargetInfo()}async getTargetInfo(){let t=this.value.target;if(!t)return;t.includes(":")||(t="http://"+t);if(!/^https?:\/\/(.+\.)+.+/.test(t))return;const{data:e,error:i}=await mt.b.getUrlInfoWithPermission(t.split("?")[0]);if(1===this.step||(null==i?void 0:i.__CANCEL__))return;if(i)return this.isAutoName&&this.changeValue({name:""}),null;const{name:o}=e;this.changeValue({name:o}),this.isAutoName=!0}choosetextImg(){this.changeValue({bgType:"color"})}chooseCloudImg(t){this.changeValue({bgType:"image"}),this.imgType="cloud",this.imgIndex=t}chooseLocalImg(){this.changeValue({bgType:"image"}),this.imgType="local"}async saveImage(){if("color"===this.value.bgType){const t=await this.$texticon.getImg();this.changeValue({bgColorImage:t})}else if("image"===this.value.bgType){let t={};if("cloud"===this.imgType){const e=this.$cloudIcons.querySelectorAll("i-imgicon")[this.imgIndex];t=await e.getImg()}else if("local"===this.imgType){if(!this.localImagePreViewUrl)throw this.localImageError=!0,new Error("none img");t=await this.$localicon.getImg()}this.changeValue({bgImage:t.url,bgColor:t.bgColor})}}getFormateUrl(t){return t.includes(":")?t:"http://"+this.value.target}reset(t=!0){var e;this.step=0,this.value=Object.assign({},or.a.defaultValue);this.$step0.querySelectorAll("i-input").forEach(t=>{t.reset()}),t&&(null===(e=this.$localicon)||void 0===e||e.reset())}updated(t){t.has("show")&&(this.show?this.value=Object.assign(Object.assign({},this.value),{name:this.initName,target:this.initTarget}):this.reset())}renderCloudImgs(){return r.e`
      <div class="cloud-imgs-box">
        ${this.cloudImgs.map((t,e)=>r.e`<div
            class="img-item-box cloud-img-box ${"image"===this.value.bgType&&"cloud"===this.imgType&&this.imgIndex===e?"active":""}"
          >
            <div class="img-item cloud-img">
              <i-imgicon
                .preViewImgUrl="${t.url}"
                .bgColor="${"transparent"}"
                .canDelete="${!1}"
                .active="${"image"===this.value.bgType&&"cloud"===this.imgType&&this.imgIndex===e}"
                @on-change="${()=>{this.chooseCloudImg(e)}}"
              ></i-imgicon>
            </div>
            <div class="name ellipsis">${i18n("icon")}${"0"+(e+1)}</div>
          </div>`)}
      </div>
    `}async getUrlIcon(){const t=this.getFormateUrl(this.value.target),e=(await mt.b.getLogoList(t)).data||[];if(e.length<2&&l.l){const i=await mt.b.getUrlIcon(t.split("?")[0]);i.data&&i.data.length>0&&(e.push(...i.data),e.length=2)}this.cloudImgs=e.map(t=>({url:t}))}async getPermission(){try{await ur.a.request([],this.getPermissionUrl()),this.hasPermission=!0,window.__INFINITY__.hasAllUrlPermission=this.hasPermission,this.getUrlIcon()}catch(t){console.log("getPermission ~ error",t)}}async checkPermission(){try{const t=await ur.a.has([],this.getPermissionUrl());this.hasPermission=!!t,window.__INFINITY__.hasAllUrlPermission=this.hasPermission}catch(t){console.log("checkPermission ~ error",t)}}renderPermissionIcon(){return r.e`
      <div class="cloud-imgs-box">
        <div class="img-item-box cloud-img-box ">
          <div @click="${this.getPermission}" class="img-item permission-img">
            <img src="${i(727)}" alt="" />
          </div>
          <div class="name ellipsis">${i18n("get_cloud_icon")}</div>
        </div>
      </div>
    `}firstUpdated(){this.checkPermission()}render(){const t=s.settingStore.sideRatio>.7?0:300*(s.settingStore.sideRatio-.7);return r.e`
      <infinito-modal style="--modal-padding:30px 0;" .onCancel="${this.close}" .open=${this.show}>
        <!-- <div class="mask"></div> -->
        <div class="custom-card ${this.position}" slot="body">
          <div class="title-box">
            <div @click="${this.back}" class="title-side ${1===this.step?"title-side-back":""}">
              ${1===this.step?r.e`<img src="${Object(it.a)("back.svg",!1)}" class="back" alt="" /> `:null}
              <span class="title ellipsis">${i18n("custom_site")}</span>
            </div>
            <!-- <img @click="${this.close}" src="${i(728)}" class="close" alt="" /> -->
          </div>
          <div .hidden=${0!==this.step} class="step-0">
            <div class="form-box">
              <i-input
                name="target"
                .value="${this.value.target}"
                .label="${i18n("website_address")}"
                .placeholder=${i18n("please_enter_url")}
                .validateMsg=${i18n("please_enter_url")}
                .validate="${async t=>!!t}"
                @on-change="${this.changeTarget}"
              ></i-input>
              <i-input
                name="name"
                .value="${this.value.name}"
                .label=${i18n("website_name")}
                .placeholder=${i18n("name_error")}
                @on-change="${t=>{this.changeValue({name:t.currentTarget.value}),this.isAutoName=!1}}"
              ></i-input>
            </div>
            <infinito-button
              class="step-btn"
              @click="${()=>{this.toNextStep()}}"
              >${i18n("next")}</infinito-button
            >
          </div>
          <div .hidden="${1!==this.step}" class="step-1 global-scrollbar">
            <div class="form-box">
              <div class="item">
                <div class="label-box">
                  <span class="label">${i18n("website_address")}</span>
                </div>
                <div class="target-content">
                  ${this.value.name?r.e`<div class="target-name ellipsis">${this.value.name}</div>
                        <div class="target-gap"></div>`:null}
                  <div class="target-target ellipsis">${this.value.target}</div>
                </div>
              </div>
              <div class="item">
                <div class="label-box">
                  <span class="label">${i18n("select_icon")}</span>
                  <span
                    .hidden="${"image"!==this.value.bgType||"local"!==this.imgType||!this.localImageError}"
                    class="error ellipsis"
                    >* ${i18n("please_upload_photos")}</span
                  >
                </div>
                <div class="imgs-box">
                  <div class="img-item-box color-img-box ${"color"===this.value.bgType?"active":""}">
                    <div class="img-item color-img" @click="${this.choosetextImg}">
                      <i-texticon
                        .bgColor="${this.value.bgColor||this.colors[0]}"
                        .bgFont="${this.value.bgFont}"
                        .bgText="${this.value.bgText}"
                      ></i-texticon>
                    </div>
                    <div class="name ellipsis">${i18n("color_icon")}</div>
                  </div>
                  ${this.cloudImgs.length?this.renderCloudImgs():!1===this.hasPermission&&l.l&&!l.h?this.renderPermissionIcon():null}
                  <div
                    class="img-item-box local-img-box ${"image"===this.value.bgType&&"local"===this.imgType?"active":""}"
                  >
                    <div class="img-item local-img">
                      <i-imgicon
                        class="local-img-icon"
                        .preViewImgUrl="${this.value.bgImage}"
                        .bgColor="${"transparent"}"
                        .canDelete="${!0}"
                        .active=${"image"===this.value.bgType&&"local"===this.imgType}
                        @on-change="${t=>{this.localImagePreViewUrl=t.detail.preViewImgUrl,this.localImagePreViewUrl&&this.chooseLocalImg()}}"
                      ></i-imgicon>
                    </div>
                    <div class="name ellipsis">${i18n("local_icon")}</div>
                  </div>
                </div>
              </div>
              <div .hidden="${"color"!==this.value.bgType}" class="color-type-box">
                <i-input name="displayname" .label=${i18n("icon_bg_text")} .placeholder=${i18n("please_input_bg_text")}>
                  <div class="bg-text" slot="input">
                    <i-textarea
                      .value="${this.value.bgText}"
                      .placeholder="${i18n("show_name")}"
                      @on-change="${t=>{this.changeValue({bgText:t.detail.value})}}"
                    ></i-textarea>
                  </div>
                </i-input>
                <i-input name="displayfont" .label=${i18n("font_size")}>
                  <div class="slider" style="margin-top: -2px;" slot="input">
                    <infinito-slider
                      style="--bg-color: #f5f8fa;"
                      @on-change="${t=>{this.changeValue({bgFont:t.detail.value})}}"
                      .value=${this.value.bgFont}
                      .min=${14}
                      .max=${74}
                    ></infinito-slider>
                  </div>
                </i-input>
                <i-input name="displaycolor" style="margin-top: 16px;" .label=${i18n("color")}>
                  <div class="color" style="margin-top:14px;" slot="input">
                    <i-colorpicker
                      .side="${!0}"
                      .value="${this.value.bgColor||this.colors[0]}"
                      .colors="${this.colors}"
                      .offsetRight="${t}"
                      @on-change="${t=>{this.changeValue({bgColor:t.detail.value})}}"
                    ></i-colorpicker>
                  </div>
                </i-input>
              </div>
            </div>
            <infinito-button class="step-btn" primary .loading="${this.subSpin}" @click="${this.submit}"
              >${i18n("add")}</infinito-button
            >
          </div>
        </div>
      </infinito-modal>
    `}};$r.styles=[A.a,Ir],jr([Object(r.f)()],$r.prototype,"value",void 0),jr([Object(r.f)()],$r.prototype,"step",void 0),jr([Object(r.f)()],$r.prototype,"hasPermission",void 0),jr([Object(r.f)()],$r.prototype,"subSpin",void 0),jr([Object(r.f)()],$r.prototype,"imgType",void 0),jr([Object(r.f)()],$r.prototype,"imgIndex",void 0),jr([Object(r.f)()],$r.prototype,"localImageError",void 0),jr([Object(r.f)()],$r.prototype,"localImagePreViewUrl",void 0),jr([Object(r.f)()],$r.prototype,"cloudImgs",void 0),jr([Object(r.g)({type:String})],$r.prototype,"position",void 0),jr([Object(r.g)({type:String})],$r.prototype,"initName",void 0),jr([Object(r.g)({type:String})],$r.prototype,"initTarget",void 0),jr([Object(r.g)({type:Boolean,reflect:!0})],$r.prototype,"show",void 0),jr([Object(r.h)(".step-0")],$r.prototype,"$step0",void 0),jr([Object(r.h)(".cloud-imgs-box")],$r.prototype,"$cloudIcons",void 0),jr([Object(r.h)("i-texticon")],$r.prototype,"$texticon",void 0),jr([Object(r.h)(".local-img-icon")],$r.prototype,"$localicon",void 0),$r=jr([Object(r.c)("icons-custom")],$r);var Cr=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class Er{constructor(){this.customIconCardShow=!1,this.customIconUrl="",this.customIconTitle=""}showCustomIconCard(t="",e=""){this.customIconCardShow=!0,this.customIconUrl=t,this.customIconTitle=e}hideCustomIconCard(){this.customIconCardShow=!1,this.customIconUrl="",this.customIconTitle=""}}Cr([x.g],Er.prototype,"customIconCardShow",void 0),Cr([x.g],Er.prototype,"customIconUrl",void 0),Cr([x.g],Er.prototype,"customIconTitle",void 0),Cr([x.b],Er.prototype,"showCustomIconCard",null),Cr([x.b],Er.prototype,"hideCustomIconCard",null);const Tr=new Er;var Pr=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Rr=class extends a.a{constructor(){super(...arguments),this.handleSearch=t=>{const e=t.detail.text;e?(this.$iconsDefault.scrollToTop(),vr.search({page:0,type:"search",keyword:e}),0!==vr.activeNav&&(vr.changeNav(0),this.$iconsDefault.scrollSideToTop())):0===vr.activeNav&&vr.changeNav(1)},this.clear=()=>{0===vr.activeNav&&vr.changeNav(1)},this.clearSearch=()=>{var t;null===(t=this.$search)||void 0===t||t.clear(!1)},this.focusSearch=()=>{var t;c.a.isTouchScreendevice()||null===(t=this.$search)||void 0===t||t.focus()},this.showAddIcon=()=>{Tr.showCustomIconCard()}}setActiveStyle(){var t;null===(t=this.$iconsDefault)||void 0===t||t.setActiveStyle()}setActiveType(t){0===t&&(Tr.hideCustomIconCard(),0===vr.activeNav&&vr.changeNav(1),setTimeout(()=>{this.focusSearch()},20))}render(){return r.e` <div class="content-header">
        <div class="default-title">
          <i-search
            type="white"
            class="search-box"
            .searchBtnPosition="${"left"}"
            style="--height:40px"
            placeholder="${Object(Z.i18n)("search_website")}"
            @i-search="${this.handleSearch}"
            @i-clear=${this.clear}
          >
          </i-search>
          <div @click="${()=>this.showAddIcon()}" class="custom-btn">
            <img src="${i(729)}" alt="" class="img" />
          </div>
        </div>
      </div>
      <div class="content">
        <icons-default @clear-search="${this.clearSearch}"></icons-default>
      </div>`}};Rr.styles=[A.a,wr],Pr([Object(r.h)("icons-default")],Rr.prototype,"$iconsDefault",void 0),Pr([Object(r.h)("i-search")],Rr.prototype,"$search",void 0),Rr=Pr([Object(r.c)("side-icons")],Rr);var Lr=r.b`.user-info {
  position: relative;
  display: flex;
  padding: 4px 0 12px 0;
}
.user-info > div {
  box-sizing: border-box;
  display: flex;
  align-items: center;
  width: 100%;
  cursor: pointer;
}
.user-info.login {
  padding-bottom: 24px;
}
.user-info .avatar-img {
  flex-shrink: 0;
  width: 56px;
  height: 56px;
  margin-right: 14px;
  border-radius: 50%;
  cursor: pointer;
}
.user-info .user-name-wrapper {
  flex: 1;
  overflow: hidden;
}
.user-info .qr-code {
  position: absolute;
  width: 24px;
  height: 24px;
  top: -16px;
  right: -16px;
  overflow: hidden;
  cursor: pointer;
}
.user-info .qr-code img {
  width: 100%;
}
.user-info .user-name {
  display: flex;
  align-items: center;
  margin-bottom: 2px;
  cursor: pointer;
}
.user-info .name {
  margin-right: 6px;
  font-size: 18px;
  font-weight: 500;
  cursor: pointer;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: pre;
  padding: 0 0 2px 4px;
}
.user-info .gender {
  width: 16px;
  height: 16px;
}
.user-info .email {
  font-size: 14px;
  font-weight: 300;
  color: #828282;
}
.user-info .svg {
  margin-left: auto;
  cursor: pointer;
}
.user-info i-svg {
  width: 16px;
  height: 16px;
}
.user-info + infinito-modal {
  --border-radius: 6px;
}
.synchronous {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 16px 0;
  border-width: 1px 0;
  border-style: solid;
  border-color: #eee;
}
.synchronous .title {
  color: #333;
  font-size: 12px;
  font-weight: 500;
}
.synchronous .time {
  margin-top: 8px;
  font-size: 12px;
  color: #6f6f6f;
}
.synchronous .time.hide {
  display: none;
}
.backup-wrapper,
.backup-wrapper .mange-backup,
.backup-wrapper .backup-btn {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 12px;
}
.backup-wrapper i-svg {
  width: 16px;
  height: 16px;
  cursor: pointer;
}
.backup-wrapper .mange-backup {
  margin: 0;
  cursor: pointer;
}
.backup-wrapper .mange-backup i-svg {
  margin-left: 5px;
}
.backup-wrapper span {
  color: #333;
  font-size: 12px;
  font-weight: 500;
}
.backup-wrapper .backup-btn {
  margin: 0;
  cursor: pointer;
}
.backup-wrapper .backup-btn i-svg {
  margin-right: 5px;
}
infinito-card[close] + infinito-card:not([close]) {
  margin-top: 30px;
}
infinito-card:not([close]) + infinito-card[close] {
  margin-top: 30px;
}
infinito-card {
  transition: margin-top 0.3s ease-in-out;
}
infinito-card p {
  margin: 0;
  margin-top: 12px;
  color: #656565;
  font-size: 12px;
  line-height: 22px;
}
infinito-card infinito-button {
  --button-color: #efefef;
  --border-color: none;
  --hover-color: #dfdfdf;
  --hover-font-color: #333;
  width: 122px;
  height: 42px;
}
infinito-card infinito-button.use-basic-version {
  width: 182px;
}
infinito-card .btns {
  display: flex;
  justify-content: space-between;
  margin-top: 24px;
}
infinito-card .btns.rating {
  padding: 0 30px;
}
infinito-card .payment .payment-cover {
  display: block;
  width: 280px;
  margin: 0 auto;
  margin-top: 40px;
}
infinito-card .payment + .btns {
  margin-bottom: 10px;
}
infinito-card .wechat_desc {
  -moz-user-select: text;
       user-select: text;
}
infinito-card .wechat {
  width: 132px;
  height: 132px;
  margin: 30px auto 0;
  box-shadow: 0px 12px 20px -8px rgba(0, 0, 0, 0.1);
}
infinito-card .wechat img {
  width: 100%;
  height: 100%;
}
.choose-plan {
  display: flex;
  justify-content: center;
  margin-top: 30px;
}
.suport {
  margin-top: 30px;
}
.suport infinito-button {
  position: relative;
  --hover-color: inherit;
  --button-padding: 0;
  --border-width: 0;
  width: 150px;
  height: 40px;
  transition: opacity 0.2s;
}
.suport infinito-button:hover {
  opacity: 0.7;
}
.suport infinito-button.facebook-group span {
  width: 105px;
  left: 35px;
  line-height: 20px;
}
.suport infinito-button.qq-group span {
  left: 60px;
  line-height: 20px;
}
.suport infinito-button img {
  width: 100%;
  height: 100%;
}
.suport infinito-button span {
  position: absolute;
  top: 10px;
  color: #fff;
  transition: all 300ms;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}
.suport infinito-button span:hover {
  opacity: 0.7;
}
.suport infinito-button span img {
  width: 100%;
  height: 100%;
}
.version {
  margin: 12px 0 8px;
}
ul {
  margin: 0;
  padding: 0;
  display: flex;
  flex-wrap: wrap;
}
li {
  list-style: none;
  width: 33%;
  margin-top: 16px;
}
li span {
  display: block;
  width: 100%;
  word-break: break-all;
  font-size: 14px;
  color: #333;
  text-decoration: none;
  cursor: pointer;
  transition: all 0.2s;
}
li span:hover {
  opacity: 0.8;
}
.icons {
  display: flex;
  flex-wrap: wrap;
}
.icons p {
  width: 40px;
  height: 40px;
  margin-top: 30px;
  margin-right: 30px;
  transition: all 300ms;
  cursor: pointer;
}
.icons p:hover {
  opacity: 0.6;
}
.icons p:nth-child(5n) {
  margin-right: 0;
}
.icons img {
  width: 100%;
  height: 100%;
}
.use-basic-account-migration {
  padding: 20px;
  background: #fff;
}
.use-basic-account-migration .logo {
  padding: 10px 0 30px;
}
.use-basic-account-migration .logo img {
  display: block;
  width: 68px;
  margin: 0 auto;
}
.use-basic-account-migration .control {
  margin-bottom: 20px;
}
.use-basic-account-migration .control .top {
  display: flex;
}
.use-basic-account-migration .control span {
  color: #333;
  font-weight: 500;
}
.use-basic-account-migration .control span.red-msg {
  margin-left: 4px;
  color: #ea4747;
  font-size: 14px;
  font-weight: 400;
}
.use-basic-account-migration .control input {
  width: 100%;
  padding: 10px 0;
  background: none;
  border: none;
  border-bottom: 1px solid #eee;
  outline: none;
}
.use-basic-account-migration .btns {
  margin: 60px 0 20px;
}
.use-basic-account-migration infinito-button {
  display: block;
  width: 220px;
  height: 38px;
  margin: 0 auto;
}
.use-basic-account-migration infinito-button.cancel {
  --border-color: #eee;
  --button-color: #eee;
  margin-top: 14px;
}
.backup-recovery {
  --padding-bottom: 0;
  --margin-left: 0;
  --margin-right: 0;
}
.backup-btn-box .backup-btn-card {
  padding: 0 20px;
}
.backup-btn-box .backup-btn-content {
  padding: 20px 0;
  border-top: 1px solid #eeeeee;
}
.backup-btn-box .backup-btn-card:first-of-type {
  margin-top: 4px;
}
.backup-btn-box .backup-btn-card:first-of-type .backup-btn-content {
  border-top-color: transparent;
}
.backup-btn-box .repair-card.focus {
  animation: focusblink 1.2s ease-in-out;
}
@keyframes focusblink {
  0% {
    transform: scale(0.95);
    box-shadow: 0px 4px 21px 0px rgba(0, 0, 0, 0);
    background: #fff;
  }
  35% {
    transform: scale(1.05);
    box-shadow: 0px 4px 21px 0px rgba(0, 0, 0, 0.2);
    background: #fcfcfc;
  }
  70% {
    transform: scale(1);
    box-shadow: 0px 4px 21px 0px rgba(0, 0, 0, 0);
    background: #fff;
  }
  100% {
    transform: scale(1);
    box-shadow: none;
    background: #fff;
  }
}
.backup-btn-box .backup-btn {
  min-height: 44px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  justify-content: center;
  cursor: pointer;
}
.backup-btn-box .backup-btn-title {
  display: flex;
  justify-content: space-between;
}
.backup-btn-box .backup-btn-title-text {
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  line-height: 20px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.backup-btn-box .backup-btn-desc {
  margin-top: 8px;
  font-size: 11px;
  font-weight: 400;
  color: #b3b3b3;
  line-height: 16px;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}
.backup-btn-box i-svg {
  width: 16px;
  height: 16px;
  color: #333234;
}
.icp {
  margin-top: 30px;
  text-align: center;
  pointer-events: none;
}
.icp-link {
  color: #333;
  font-size: 12px;
  opacity: 0.3;
  text-decoration: none;
  pointer-events: all;
}
.icp-link:hover {
  opacity: 0.9;
}
.hide {
  display: none;
}
`,Dr=i(650),Mr=i.n(Dr),Ur=i(651),Nr=i.n(Ur),Br=i(652),Fr=i.n(Br),zr=i(730),Hr=i.n(zr),Wr=i(120);function qr(t){const e=document.createElement("div");e.innerHTML=t;const i=e.firstChild;return(null==i?void 0:i.textContent)?i.textContent.substring(0,20):e.textContent.substring(0,20)}const Gr=async t=>{let e="";const i={list:t.map(t=>{const{_v2:i={}}=t;return t.__select__&&(e=(null==i?void 0:i.id)||""+t.time),{content:t.text,time:t.time,id:i.id||""+t.time,title:i.title||qr(t.text),updatetime:i.updatetime||+Date.now(),fontSize:14}})};return i.checkedId=e||i.list[0].id,i},Vr={c34f380f9d9136fc3b4dbd32f24feea3:"c4ba1648d4014bad7fdea130cd421589","9001elkctdjjfkgmudthhs3li21nez":"6dcbbe4e9dc6ef2fd68da7d8befd117c"},Qr={c26068f55492ef9e93e05e34a3b31139:"C26068F55492EF9E93E05E34A3B31139"},Yr=((t=>{const e={};for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){e[t[i]]=i}})(Vr),{pagin:!1,scaleSide:1,scaleMain:1,rowGap:.2,colGap:.3,easing:"linear",iconShadow:!1,iconScale:.5,searchSuggest:!0,searchShadow:!0,searchScale:.82,searchRadius:.5,searchOpacity:1,fontShadow:!0,fontSize:15,folderInfo:{},noteFontsize:14,customItem:[3,4],url:"https://infinitypro-img.infinitynewtab.com/findaphoto/bigLink/default.png",rawUrl:"https://infinitypro-img.infinitynewtab.com/findaphoto/bigLink/default.png",wallpaperOpacity:40}),Xr=(t,e)=>{const i=[];return t.forEach(t=>{t.forEach(t=>{t.children&&1===t.children.length&&(Object.assign(t,t.children[0]),t.children=void 0)}),i.push(...((t,e)=>{const i=[];if(t.length<=e)return[t];const o=Math.ceil(t.length/e);for(let n=0;n<o;n++){const o=e*n;i.push(t.slice(o,o+e))}return i})(t,e))}),i.filter(t=>t.length)},Zr="eed2a9287b324510678cd5e714888e99",Kr="https://infinityicon.infinitynewtab.com/assets/weather/default.png",Jr="#36B3FF",ta=async t=>{function e(t){const e={uuid:t.seId||c.a.randomId("v1-search-"),logo:t.logo,name:t.name,desc:t.desc,updatetime:t.updatetime};return e.uuid=Qr[e.uuid]||e.uuid,t.bgColor&&("transparent"===t.bgColor?e.bgColor="transparent":e.bgColor="#"+t.bgColor),t.types&&(e.types=t.types),e}const i=e(t.current);t.current.isCustom?i.target=t.current.types[0].url:i.types=t.current.types;return{searchEngine:{current:i,all:(t.all||[]).map(t=>{const i=e(t);return t.isCustom?i.target=t.types[0].url:i.types=t.types,i}),addList:(t.additions||[]).map(t=>{const i=e(t);return i.target=t.url,i}),custom:(t.customEngines||[]).map(t=>{const i=e(t);return i.target=t.types[0].url,i})}}},ea=async(t,e)=>{function i(t){return Number((t/100).toFixed(2))}let o=!0;const n=function(t,e){let i=null;switch(t+"*"+e){case"2*4":case"2*5":i={iconScale:.5,colGap:.3,rowGap:.2,searchScale:.82};break;case"2*6":i={iconScale:.6,colGap:.3,rowGap:.3,searchScale:.9};break;case"2*7":i={iconScale:.7,colGap:.3,rowGap:.3,searchScale:.9};break;case"3*3":i={iconScale:.7,colGap:.24,rowGap:.2,searchScale:.82}}return i}(t.column,t.row);return n&&n.rowGap===e.rowGap&&n.colGap===e.colGap&&(o=!1),{setting:{notice:{gmail:t.isOpentGmailNotication,gmailVoice:t.isOpentGmailRingNotication,gmailNumber:t.isShowGmailNum,todoNumber:t.isShowToDoNumbersInIco},link:{icon:t.isOpenLinkInNewTab,search:t.isSearchInNewTab,bookmark:t.isOpenBookmarkInNewTab,history:t.isOpenBookmarkInNewTab},view:{topBookmark:t.isShowTopBar&&"bookmarks"===t.topBarType,topUseful:t.isShowTopBar&&"topsites"===t.topBarType,windmill:t.isShowRandomWallpaperBtn,pagin:e.pagin,scaleSide:e.scaleSide,scaleMain:e.scaleMain},layout:{row:t.column,col:t.row,rowGap:e.rowGap,colGap:e.colGap,custom:o,customItem:o?[t.column,t.row]:e.customItem},animation:{easing:e.easing},icon:{miniMode:t.isMinimalistMode,shadow:e.iconShadow,opacity:i(parseInt(t.iconOpacity,10)),radius:i(Math.floor(t.iconBorderRadius/2)),scale:e.iconScale,startAnimation:t.isOpenStartAnimation,isHideIconName:t.isHideIconName||!1},search:{hide:!t.isShowSearchBox,searchSuggest:e.searchSuggest,hideCategory:!t.isShowSearchType,hideButton:!t.isShowSearchBtn,shadow:e.searchShadow,scale:e.searchScale,radius:e.searchRadius,opacity:e.searchOpacity},font:{shadow:e.fontShadow,size:e.fontSize,color:t.fontColor},_v1Setting:{isAutoBackUp:t.isAutoBackUp,gmailUnreadNum:t.gmailUnreadNum,toDoNumber:t.toDoNumber,wallpaperType:t.wallpaperType,woeid:t.woeid,tempUnitC:t.tempUnitC,isBlurWallpaper:t.isBlurWallpaper,bingMd5:t.bingMd5,autoWallpaper:t.autoWallpaper,"random-wallpaper":t["random-wallpaper"]}}}};var ia=i(99),oa=i.n(ia);const na=async(t,e,i)=>{function o(t){var e;const{_v2:i={}}=t,o={name:t.name,id:t.id||c.a.randomId("site-"),uuid:(Vr[t.uid]?Vr[t.uid]:t.uid)||c.a.randomId("siteid-"),updatetime:t.updateTime||Date.now(),target:t.url||"",type:0===(null===(e=t.url)||void 0===e?void 0:e.indexOf("infinity://"))?"app":"web",bgImage:t.src,bgType:t.src?"image":"color",bgText:t.showText||"",bgFont:i.bgFont||30};return o.uuid===Zr&&(o.bgColor=Jr,o.bgImage=Kr),t.bgColor?"transparent"===t.bgColor||t.bgColor.startsWith("rgb")||t.bgColor.startsWith("#")?o.bgColor=t.bgColor:o.bgColor="#"+t.bgColor:o.bgColor="rgba(255,71,52,1)",o}const{folderInfo:n={}}=i,r={},a=t.map(t=>oa()(t).call(t,(t,e)=>{const{_v2:i={}}=e,a=i.folderId;if(a){if(r[a])return r[a].children.push(o(e)),t;r[a]=Object.assign(Object.assign({},n[a]),{children:[o(e)]}),t.push(r[a])}else t.push(o(e));return t},[]));return{sites:Xr(a,e.row*e.column)}},ra=async t=>{const{todos:e=[],dones:i=[]}=t;return{todoList:[...e,...i].map(t=>{const{_v2:e={}}=t;return{done:t.isDo,text:t.text,todoId:t.todoId,time:e.time||Date.now(),updatetime:e.updatetime||Date.now(),dueDate:e.dueDate,dueTime:e.dueTime}})}},aa=async(t,e)=>{const i={type:"cloud",url:t["random-wallpaper"]||e.url,rawUrl:t["random-wallpaper"]||e.rawUrl,opacity:e.wallpaperOpacity,blur:t.isBlurWallpaper?30:0};if("local"===t.wallpaperType&&(i.type="local"),"auto"===t.wallpaperType){i.type="cloudAuto",i.switchType="one-day",i.wpSource="InfinityLandscape";const t=new Date,e=`https://wallpaper.infinitynewtab.com/InfinityWallpaper/${t.getMonth()+1}_${t.getDate()}.jpg`;i.url=e,i.rawUrl=e}if("bing"===t.wallpaperType){i.type="bing",i.wpSource="bing",i.id=void 0;const e="https://img.infinitynewtab.com/bingWallpaper/bg.jpg?md5="+t.bingMd5;i.url=e,i.rawUrl=e}return i},sa={Google:{name:"Google",seId:"a22dcc25c75de3f58cb518e32c576865",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/google.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://www.google.com/search?q="},{name:"images",url:"https://www.google.com/search?tbm=isch&q="},{name:"news",url:"https://www.google.com/search?tbm=nws&q="},{name:"videos",url:"https://www.google.com/search?tbm=vid&q="},{name:"maps",url:"https://www.google.com/maps/preview?q="}]},search:{name:"search",seId:"dd3af9cc97ad7de8984baaf59514bb52",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/mychromesearch.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://mychromesearch.com/search?ac=6891140047&q="},{name:"images",url:"https://www.google.com/search?tbm=isch&q="},{name:"news",url:"https://www.google.com/search?tbm=nws&q="},{name:"videos",url:"https://www.google.com/search?tbm=vid&q="},{name:"maps",url:"https://www.google.com/maps/preview?q="}]},Yahoo:{name:"Yahoo",seId:"C26068F55492EF9E93E05E34A3B31139",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/yahoo.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://search.yahoo.com/search?p="},{name:"images",url:"https://images.search.yahoo.com/search/images?p="},{name:"news",url:"https://news.search.yahoo.com/search?p="},{name:"videos",url:"https://video.search.yahoo.com/search/video?p="}]},Bing:{name:"Bing",seId:"5a6afaa65c95a841f6149c4e1591a637",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/bing_new.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://www.bing.com/search?isource=infinity&iname=bing&itype=web&q="},{name:"images",url:"https://www.bing.com/images/search?isource=infinity&iname=bing&q="},{name:"news",url:"https://global.bing.com/news/search?isource=infinity&iname=bing&q="},{name:"videos",url:"https://www.bing.com/videos/search?isource=infinity&iname=bing&q="},{name:"maps",url:"https://www.bing.com/ditu/?isource=infinity&iname=bing&q="}]},"百度":{name:"Baidu",seId:"0c47016a8cd2d631bc618d4f3a741335",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/baidu.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://www.baidu.com/s?tn=02003390_hao_pg&ie=utf-8&wd="},{name:"images",url:"https://image.baidu.com/search/index?tn=baiduimage&ie=utf-8&word="},{name:"news",url:"https://news.baidu.com/ns?tn=news&ie=utf-8&word="},{name:"videos",url:"http://video.baidu.com/v?ie=utf-8&word="},{name:"maps",url:"http://map.baidu.com/?newmap=1&ie=utf-8&s=s%26wd%3D"}]},Sogou:{name:"sogou",seId:"a3e908082e31a92396970f8b58583863",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/sougou.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://www.sogou.com/sogou?pid=sogou-site-7985672db979303a&query="},{name:"images",url:"https://pic.sogou.com/pics?ie=utf8&query="},{name:"news",url:"http://news.sogou.com/news?ie=utf8&query="},{name:"videos",url:"http://v.sogou.com/v?ie=utf8&query="},{name:"weixin",url:"http://weixin.sogou.com/weixin?ie=utf8&query="}]},se360:{name:"360search",seId:"70adaba7374f6089aca0374dea85df00",logo:"https://infinity-permanent.infinitynewtab.com/infinity/search-add/360.png",desc:"",bgColor:"transparent",types:[{name:"web",url:"https://www.so.com/s?src=lm&ls=sm2054017&lm_extend=ctype:4&q="},{name:"images",url:"https://image.so.com/i?q="},{name:"news",url:"http://news.so.com/ns?q="},{name:"videos",url:"http://video.so.com/v?q="}]}},la={weather:{uid:"eed2a9287b324510678cd5e714888e99",name:"weather",url:"infinity://weather",src:"https://infinityicon.infinitynewtab.com/user-share-icon/b6a95410ed77627337567fea2cbb157c.png",iconType:"official"},todos:{uid:"c09f31db43d7faca5bf659fadad3967c",name:"todos",url:"infinity://todos",src:"https://infinityicon.infinitynewtab.com/user-share-icon/6e49210c084629259f22609980c48ecf.png",iconType:"official"},notepad:{uid:"ea5ac5d9e9e08c1d57ad413e9e38d376",name:"notes",url:"infinity://notes",src:"https://infinityicon.infinitynewtab.com/user-share-icon/006b88c07a2e87d5a61f3c969a70575c.png",iconType:"official"},bookmarks:{uid:"96646a13688f5bfd0aaf4811a579aee1",name:"bookmarks",url:"infinity://bookmarks",src:"https://infinityicon.infinitynewtab.com/user-share-icon/31a36139ccf4b9b005ec55445bf833b0.png",iconType:"official"},history:{uid:"4528cef4f8d66e661cb3143af733694e",name:"history",url:"infinity://history",src:"https://infinityicon.infinitynewtab.com/user-share-icon/faa06f85d37cdd552e2e57cb282ad0f7.png",iconType:"official"},gmail:{uid:"c5cb65ab55611b1d8bb2e09ad143b797",name:"Gmail",url:"infinity://gmail",src:"https://infinityicon.infinitynewtab.com/user-share-icon/7b6cee8dfbfeff522a7668c924429ad7.png",iconType:"official"},setting:{uid:"552fa3a378b29375843fa3d021cbe129",name:"settings",url:"infinity://settings",src:"https://infinityicon.infinitynewtab.com/user-share-icon/9622b98e90dd4f107d23481566095b34.png",iconType:"official"},apps:{uid:"194dd7b46ac16ac93becf5386f14bcca",name:"extension",url:"infinity://extension",src:"https://infinityicon.infinitynewtab.com/icon/194dd7b46ac16ac93becf5386f14bcca.png",iconType:"official"}},ca=t=>{var e,i;let o=t.settings,n=null===(e=t.otherData)||void 0===e?void 0:e.notes,r=null===(i=t.otherData)||void 0===i?void 0:i.todos,a=t.searches,s=t.icons;if(!(o&&n&&r&&a&&s)){const{setting:e,main:i}=t,l=JSON.parse(decodeURIComponent(e)),d=JSON.parse(decodeURIComponent(i));o||(o=(t=>{const e={column:2,row:5,isAutoBackUp:!1};if(t.iconNum){const[i,o]=t.iconNum.split("x");e.column=parseInt(i)||2,e.row=parseInt(o)||5}return e.isAutoBackUp=t.isAutoBackUp||!1,e.bingMd5=(new Date).getTime(),e.isOpenLinkInNewTab=t.openInNewtab,e.isSearchInNewTab=t.searchInNewtab,e.isOpenBookmarkInNewTab=t.OpenBookmarksInNewtab,e.isOpentGmailNotication=t.GmailMessage,e.isOpentGmailRingNotication=t.notificationSound,e.isShowSearchBox=t.searchBox,e.isShowSearchType=t.searchType,e.iconBorderRadius=t.iconFillet,e.iconOpacity=t.iconOpacity,e.tempUnitC="Celsius"===t.temperatureUnit,e.fontColor=t.fontColor,e.isMinimalistMode=t.minimalistMode,e.isShowTopBar=t.displayAtTop,e.topBarType="Bookmarksbar"===t.displayTopType?"bookmarks":"topsites",e.isOpenStartAnimation=t.startAnimation,e.wallpaperType="local","infinity"===t.bgType?e.wallpaperType="auto":"bing"===t.bgType?e.wallpaperType="bing":"random"===t.bgType&&(e.wallpaperType="random"),e["random-wallpaper"]=t.lastWallpaper,e.isBlurWallpaper=t.blurWallpaper,e})(l)),n||(n=(t=>{const e=t.notes||[];return e.length?e.map(t=>({title:t.title,content:t.text,time:Date.now(),id:"note-"+Date.now(),updatetime:Date.now(),fontSize:14})):[]})(l)),r||(r=(t=>{const e=t.todostrue||[],i=t.todosfalse||[];return[...e.map(t=>({text:t,done:!0})),...i.map(t=>({text:t,done:!1}))].map(t=>Object.assign(Object.assign({},t),{todoId:"todo-"+Date.now(),time:Date.now(),updatetime:Date.now()}))})(l)),a||(a=(t=>({current:sa[t.searchEngine]||sa.search,all:Object.keys(sa).filter(t=>"search"!==t).map(t=>sa[t]),customEngines:[],additions:[]}))(l)),s||(s=(t=>{try{for(let e=0;e<t.length;e++){const i=t[e];for(let t=0;t<i.length;t++){const e=i[t];let o={};if(e.bgColor&&"rgba(0,0,0,0)"===e.bgColor.replace(/\s/g,"")&&(e.bgColor="transparent"),Object.prototype.hasOwnProperty.call(la,e.type))o=la[e.type],o.name=e.name||o.name;else if("ico"!==e.type||e.title)if("custom"===e.type||e.title)o.bgColor=e.bgColor?e.bgColor:"transparent",o.iconType="custom",o.name=e.name,o.showText=e.title.substr(0,2),o.url=e.url,e.ico?(o.customType="image",o.src=e.ico):(o.customType="text",o.src=""),o.uid=c.a.randomId("basic-old");else{if("app"!==e.type)continue;o.bgColor=e.bgColor,o.iconType="app",o.src=e.ico,o.name=e.name,o.url=e.url}else{o.iconType="official",o.name=e.name,o.url=e.url;const t=e.ico.indexOf("ouddn.com");if(t>0){const i=e.ico.substr(t+9,e.ico.length);o.src="https://infinityicon.infinitynewtab.com"+i}else o.src=e.ico;if(0===o.src.indexOf("https")){let t;try{t=new an.a(o.src),o.src=t.origin+t.pathname}catch(t){}}o.bgColor=e.bgColor?e.bgColor:"transparent",o.uid=c.a.randomId("basic-old")}i[t]=o}}}catch(t){console.error("兼容旧数据getV1Icons ~ e:",t)}return t||[[]]})(d))}return{v1sSettings:o,v1Notes:n,v1Todos:r,v1Searches:a,v1Icons:s}},da=async t=>await(async t=>{const{v1sSettings:e,v1Icons:i,v1Notes:o,v1Searches:r,v1Todos:a}=ca(t),s=(t=>{let e={};switch(t.column+"*"+t.row){case"2*5":e={iconScale:.6,colGap:.5,rowGap:.35,searchScale:.93};break;case"3*4":e={iconScale:.8,colGap:.6,rowGap:.6,searchScale:.93};break;case"3*5":e={iconScale:.8,colGap:.5,rowGap:.7,searchScale:.93};break;case"3*6":e={iconScale:.75,colGap:.45,rowGap:.7,searchScale:.93}}return e})(e),l=Object.assign(Object.assign({},Yr),s),[c,d,p,h,u,g]=await n.a.all([ea(e,l),Gr(o),ra(a),ta(r),na(i,e,l),aa(e,l)]);return{setting:c,note:d,todo:p,searcher:h,site:u,wallpaper:g}})(t);i(731);var pa=r.b`.reward-modal-wrapper {
  width: 370px;
}
.reward-modal-wrapper .t {
  margin: 20px 0;
  color: #333;
  font-size: 20px;
  font-weight: 500;
  text-align: center;
}
.reward-modal-wrapper .reward-body {
  padding: 0 20px;
}
.reward-modal-wrapper .reward-head {
  display: flex;
  padding: 0 70px;
  justify-content: space-between;
  color: #999;
  font-size: 14px;
  border-bottom: 1px solid #EBEBEB;
}
.reward-modal-wrapper .reward-head > div {
  position: relative;
  padding-bottom: 13px;
  cursor: pointer;
}
.reward-modal-wrapper .reward-head > div::after {
  content: "";
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  height: 2px;
  background: #fff;
}
.reward-modal-wrapper .reward-head > div.active {
  color: #333;
}
.reward-modal-wrapper .reward-head > div.active::after {
  background: #333;
}
.reward-modal-wrapper .reward-qrcode {
  padding-top: 25px;
}
.reward-modal-wrapper .reward-qrcode + p {
  margin: 22px 0 4px;
  font-size: 20px;
  text-align: center;
}
`,ha=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const ua={0:i(732),10:i(733),15:i(734),20:i(735),25:i(736)},ga={0:i(737),10:i(738),15:i(739),20:i(740),25:i(741)};let fa=class extends r.a{constructor(){super(...arguments),this.payType="",this.donateMoney=""}render(){return r.e`
      ${"alipay"===this.payType?r.e`<img .src=${ua[this.donateMoney]} alt="qrcode" />`:r.e`<img .src=${ga[this.donateMoney]} alt="qrcode" />`}
    `}};fa.styles=r.b`
    :host {
      display: block;
      width: 220px;
      height: 220px;
      margin: 0 auto;
    }
    img {
      width: 220px;
      height: 220px;
    }
  `,ha([Object(r.g)({type:String})],fa.prototype,"payType",void 0),ha([Object(r.g)({type:String})],fa.prototype,"donateMoney",void 0),fa=ha([Object(r.c)("donate-qrcode")],fa);var ma=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let ba=class extends r.a{constructor(){super(...arguments),this.open=!1,this.payType="",this.donateMoney="",this.handleClose=()=>{this.open=!1,this.dispatchEvent(new CustomEvent("on-cancel"))}}render(){return r.e`
      <infinito-modal .open=${this.open} .onCancel=${this.handleClose}>
        <div slot="body" class="reward-modal-wrapper">
          <h2 class="t">${Object(Z.i18n)("give_money")}</h2>
          <div class="reward-body">
            <div class="reward-head">
              <div class="${"alipay"===this.payType?"active":""}" @click=${()=>this.payType="alipay"}>
                ${Object(Z.i18n)("zhifubao")}
              </div>
              <div class="${"weixin"===this.payType?"active":""}" @click=${()=>this.payType="weixin"}>
                ${Object(Z.i18n)("wechat")}
              </div>
            </div>
            <div class="reward-qrcode">
              <donate-qrcode payType="${this.payType}" donateMoney="${this.donateMoney}"></donate-qrcode>
            </div>
            <p>${Object(Z.i18n)("currency_symbol")}${0===Number(this.donateMoney)?Object(Z.i18n)("any_money"):this.donateMoney}</p>
          </div>
        </div>
      </infinito-modal>
    `}};ba.styles=pa,ma([Object(r.g)({type:Boolean,reflect:!0})],ba.prototype,"open",void 0),ma([Object(r.g)({type:String})],ba.prototype,"payType",void 0),ma([Object(r.g)({type:String})],ba.prototype,"donateMoney",void 0),ba=ma([Object(r.c)("donate-section")],ba);var ya=r.b`.modal-wrapper {
  width: 370px;
}
.modal-wrapper .t {
  margin: 20px 0;
  color: #333;
  font-size: 20px;
  font-weight: 500;
  text-align: center;
}
.qrcode-box {
  display: flex;
  justify-content: center;
  align-items: center;
  padding-bottom: 20px;
}
.qrcode-img {
  width: 220px;
  height: 220px;
}
.footer-text {
  margin: 22px 0 4px;
  font-size: 20px;
  text-align: center;
}
`,va=i(742),wa=i.n(va),xa=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let _a=class extends r.a{constructor(){super(...arguments),this.open=!1,this.handleClose=()=>{this.open=!1,this.dispatchEvent(new CustomEvent("on-cancel"))}}render(){return r.e`
      <infinito-modal .open=${this.open} .onCancel=${this.handleClose}>
        <div slot="body" class="modal-wrapper">
          <h2 class="t">${Object(Z.i18n)("qq_group")}</h2>
          <div class="modal-body">
            <div class="qrcode-box">
              <img class="qrcode-img" .src=${wa.a} alt="qrcode" />
            </div>
            <!-- <p class="footer-text">${Object(Z.i18n)("currency_symbol")}</p> -->
          </div>
        </div>
      </infinito-modal>
    `}};_a.styles=ya,xa([Object(r.g)({type:Boolean,reflect:!0})],_a.prototype,"open",void 0),_a=xa([Object(r.c)("qqgroup-section")],_a);var ka=i(743),Oa=i.n(ka),Aa=i(744),Sa=i.n(Aa),Ia=i(653),ja=i.n(Ia),$a=i(654),Ca=i.n($a),Ea=r.b`.login-wrapper {
  display: flex;
}
.login-wrapper .bg {
  width: 380px;
  min-height: 500px;
}
.login-wrapper .form {
  box-sizing: border-box;
  width: 420px;
  padding: 40px 45px 24px;
  background: #f9f9f9;
  border-radius: 0px 6px 6px 0px;
}
.login-wrapper .large-title {
  font-size: 28px;
  font-weight: 600;
  margin: 0;
  margin-bottom: 5px;
}
.login-wrapper .large-title + p {
  font-size: 14px;
  font-weight: 300;
  margin: 0;
  font-family: PingFangSC-Light, PingFang SC;
  height: 23px;
  color: #333;
  line-height: 20px;
}
.login-wrapper .form-control {
  margin-top: 30px;
}
.login-wrapper .form-control infinito-button {
  --button-color: #333;
  width: 100%;
  height: 52px;
}
.login-wrapper .form-control infinito-input {
  min-height: 80px;
}
.login-wrapper .no-account {
  display: flex;
  width: 100%;
  justify-content: space-between;
  margin-top: 10px;
  font-weight: 400;
  font-family: PingFangSC-Regular, PingFang SC;
}
.login-wrapper .no-account p {
  margin: 0;
  font-size: 13px;
  color: #333;
  text-decoration: none;
  cursor: pointer;
  transition: opacity 300ms;
}
.login-wrapper .no-account p:hover {
  opacity: 0.8;
}
.login-wrapper .third-party {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 36px;
}
.login-wrapper .third-party span {
  font-size: 12px;
  color: #ccc;
}
.login-wrapper .third-party .icons {
  display: flex;
  width: 100%;
  margin-top: 20px;
  justify-content: center;
}
.login-wrapper .third-party p {
  cursor: pointer;
  margin-top: 0;
  margin-bottom: 0;
}
.login-wrapper .third-party p:not(:last-child) {
  margin-right: 30px;
}
.login-wrapper .third-party p:hover {
  opacity: 0.8;
}
.login-wrapper .third-party img {
  width: 32px;
  height: 32px;
}
.abandon-tips {
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
  width: 100%;
  padding: 11px 20px;
  box-sizing: border-box;
  position: absolute;
  bottom: 43px;
  left: 0;
  min-height: 30px;
  background: #ffefc7;
  border-radius: 4px;
  border: 1px solid #f6e4b6;
  font-size: 12px;
  color: #333333;
  line-height: 17px;
  --bubble-left: 9999px;
}
.abandon-tips:before,
.abandon-tips:after {
  pointer-events: none;
  content: '';
  width: 0;
  height: 0;
  position: absolute;
  border-style: solid;
  border-width: 7px 6px;
  border-color: #f6e4b6 transparent transparent;
  left: var(--bubble-left);
  bottom: -14px;
}
.abandon-tips:after {
  border-color: #ffefc7 transparent transparent;
  bottom: -13px;
}
.abandon:hover ~ .abandon-tips {
  opacity: 1;
  pointer-events: all;
}
.abandon {
  width: 32px;
  height: 32px;
  -webkit-mask-image: var(--logo);
          mask-image: var(--logo);
  background-color: #ccc;
  -webkit-mask-repeat: no-repeat;
          mask-repeat: no-repeat;
  -webkit-mask-size: contain;
          mask-size: contain;
}
`,Ta=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const Pa=[{name:"google",src:"icon_google"},{name:"qq",src:"icon_qq"},{name:"wechat",src:"icon_wechat"},{name:"sina",src:"icon_sina",abandon:!0},{name:"facebook",src:"icon_facebook",abandon:!0}].map(t=>Object.assign(Object.assign({},t),{src:i(655)(`./${t.src}.png`)}));let Ra=class extends r.a{constructor(){super(...arguments),this.store=s.userStore,this.emailError="",this.passwordError="",this.modalOpen=!1,this.loading=!1}setBubbleLeft(t){const e=10+62*t+10;this.abandonTips.style.setProperty("--bubble-left",e+"px")}updated(t){t.forEach((t,e)=>{"modalOpen"===e&&(!1===t?setTimeout(()=>{this.emailInput.shadowRoot.querySelector("input").focus()},500):setTimeout(()=>{this.emailInput.value="",this.passwordInput.value="",this.passwordInput._show=!1,this.passwordError="",this.emailError=""},500))})}render(){return r.e`
      <div class="login-wrapper">
        <div
          class="bg"
          style=${Object(Ji.a)({background:`url(${Object(it.b)("https://infinityicon.infinitynewtab.com/assets/background_image/login-bg.png")})`,backgroundSize:"cover"})}
        ></div>
        <div class="form">
          <div>
            <h2 class="large-title">${Object(Z.i18n)("welcome_infinity")}</h2>
            <p>${Object(Z.i18n)("login_now")}</p>
          </div>
          <div class="form-control">
            <infinito-input
              name="email"
              placeholder="${Z.IS_ZH?Object(Z.i18n)("email_or_phone_number_tips"):Object(Z.i18n)("email")}"
              .error=${this.emailError}
              @onfocus=${()=>{this.emailError=""}}
            >
            </infinito-input>
            <infinito-input
              name="password"
              type="password"
              .isShowEye=${!1}
              placeholder=${Object(Z.i18n)("password")}
              .error=${this.passwordError}
              @onfocus=${()=>{this.passwordError=""}}
              @keyup=${this.handleKeyUp}
            >
            </infinito-input>
            <infinito-button primary .loading=${this.loading} @click="${this.handleLogin}">
              ${Object(Z.i18n)("next")}
            </infinito-button>
          </div>
          <div class="no-account">
            <p style="margin-right:10px" @click="${this.toRegister}">${Object(Z.i18n)("no_account_register")}</p>
            <p @click="${this.toFindPassword}">${Object(Z.i18n)("forget_password")}</p>
          </div>
          <div class="third-party">
            <span>${Object(Z.i18n)("thirt_party")}</span>
            <div class="icons">
              ${Pa.map((t,e)=>t.abandon?r.e`
                    <p
                      class="abandon"
                      style="--logo:url(${t.src})"
                      @mouseover="${()=>this.setBubbleLeft(e)}"
                      @click="${e=>this.onClick(e,t.name)}"
                    ></p>
                  `:r.e`
                  <p @click="${e=>this.onClick(e,t.name)}">
                    <img .src="${t.src}" />
                  </p>
                `)}
              <div class="abandon-tips">${Object(Z.i18n)("login_abandon_tips")}</div>
            </div>
          </div>
        </div>
      </div>
    `}toFindPassword(t){t.preventDefault();let e="/find-password/index.html";l.l&&(e=window.chrome.runtime.getURL(e)),c.a.openUrl(e,!0,t)}toRegister(t){t.preventDefault();let e="/user-register/index.html";l.l&&(e=window.chrome.runtime.getURL(e)),c.a.openUrl(e,!0,t)}onClick(t,e){t.preventDefault(),this.store.thirdPartyLogin(e)}handleKeyUp(t){13===t.keyCode&&(t.preventDefault(),this.handleLogin(t))}async handleLogin(t){if(t.stopPropagation(),this.loading)return;const e=this.emailInput.value,i=this.passwordInput.value,o=this.checkEmailOrPhone(nn()(e).call(e));if(this.emailError=o.error,!this.emailError)if(i){try{this.loading=!0,await this.store.login({account:e,password:i,type:o.type}),setTimeout(()=>{this.emailInput.value="",this.passwordInput.value=""},1e3)}catch(t){"3006"===t.message&&setTimeout(()=>{this.passwordInput.value="",this.passwordInput.shadowRoot.querySelector("input").focus()},500)}this.loading=!1}else this.passwordError=Object(Z.i18n)("password_dont_empty")}checkEmailOrPhone(t){return t?/^\w+([+-.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)?{type:"email"}:/^1[3456789]\d{9}$/.test(t)?{type:"phone"}:{error:Z.IS_ZH?Object(Z.i18n)("please_enter_right_account"):Object(Z.i18n)("email_format_error")}:{error:Object(Z.i18n)("cannot_empty")}}};Ra.styles=Ea,Ta([Object(r.h)('infinito-input[name="email"]')],Ra.prototype,"emailInput",void 0),Ta([Object(r.h)(".abandon-tips")],Ra.prototype,"abandonTips",void 0),Ta([Object(r.h)('infinito-input[name="password"]')],Ra.prototype,"passwordInput",void 0),Ta([Object(r.g)({type:String})],Ra.prototype,"emailError",void 0),Ta([Object(r.g)({type:String})],Ra.prototype,"passwordError",void 0),Ta([Object(r.g)({type:Boolean,reflect:!0})],Ra.prototype,"modalOpen",void 0),Ta([Object(r.g)({type:Boolean})],Ra.prototype,"loading",void 0),Ra=Ta([Object(r.c)("user-login")],Ra);var La=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Da=class extends r.a{constructor(){super(...arguments),this.store=s.userStore}render(){return r.e`
      <div class="loading-wrapper">
        <infinito-spin spinning .isSvg=${l.p}></infinito-spin>
        <div class="tips">${Object(Z.i18n)("loging")}</div>
        <infinito-button @click="${this.handleClick}">${Object(Z.i18n)("cancel_login")}</infinito-button>
      </div>
    `}async handleClick(){this.store.cancelLogin()}};Da.styles=r.b`
    .loading-wrapper {
      display: flex;
      flex-flow: column;
      justify-content: center;
      align-items: center;
      width: 800px;
      height: 500px;
      background: #fff;
      border-radius: 6px;
    }
    .tips {
      margin: 80px 0 40px;
      font-size: 20px;
      font-weight: 300;
      color: #333;
    }
    infinito-button {
      --button-color: #efefef;
      --border-color: #efefef;
      --hover-color: #dfdfdf;
      --hover-font-color: #333;
      width: 155px;
      height: 52px;
    }
  `,Da=La([Object(r.c)("logining-loading")],Da);var Ma=i(745),Ua=i.n(Ma),Na=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Ba=class extends a.a{constructor(){super(...arguments),this.url="",this.expire=0,this.firestRender=!1,this.refreshQRcode=()=>{this.dispatchEvent(new CustomEvent("on-refresh"))}}updated(t){t.has("url")&&this.url&&(Ua.a.toCanvas(this.$qrcode,this.url,{width:200,height:200},t=>{t&&console.error(t)}),this.firestRender||(this.firestRender=!0))}transformTime(t){if(!t)return"";const e=Math.floor(t/60),i=t%60;return`${e<10?"0"+e:e}:${i<10?"0"+i:i}`}render(){return r.e`
      <div class="wrapper">
        <h2 class="title">${i18n("mobile_devices")}</h2>
        <div class="qrcode">
          <canvas id="qrcode"></canvas>
          <div
            class="qrcode-mask ${(this.url||this.firestRender)&&0===this.expire?"show":"hide"}"
            @click="${this.refreshQRcode}"
          >
            <img class="qrcode-refresh-btn" src="${i(766)}" alt="" />
          </div>
        </div>
        ${this.expire>0?r.e` <p class="expire-title">${this.transformTime(this.expire)}</p>`:0===this.expire&&(this.url||this.firestRender)?r.e` <p class="expire-title expired" @click="${this.refreshQRcode}">${i18n("refresh_qrcode")}</p>`:r.e` <p class="expire-title holder">&nbsp;</p>`}
        <p class="sub-title">${i18n("use_mobile_screen")}</p>
      </div>
    `}};Ba.styles=r.b`
    .wrapper {
      font-family: PingFangSC-Regular, PingFang SC;
      box-sizing: border-box;
      width: 350px;
      height: 380px;
      text-align: center;
      padding-top: 22px;
    }
    .title {
      margin: 0 0 30px 0;
      font-size: 20px;
      font-family: PingFangSC-Medium, PingFang SC;
      font-weight: 500;
      color: #333333;
      line-height: 28px;
    }
    .sub-title {
      margin: 0 0 16px 0;
      font-size: 14px;
      font-weight: 400;
      color: #656565;
      line-height: 20px;
    }
    .expire-title {
      margin: 0 0 16px 0;
      display: inline-block;
      height: 32px;
      font-size: 12px;
      font-weight: 400;
      color: #c7c7cc;
      line-height: 32px;
      transition: color 0.1s;
    }
    .expired {
      cursor: pointer;
    }
    .expired:hover {
      color: #999;
    }
    .qrcode {
      position: relative;
      margin: 0 auto;
      box-sizing: border-box;
      width: 200px;
      height: 200px;
    }
    .qrcode-mask.hide {
      background-color: rgba(255, 255, 255, 0);
      opacity: 0;
      pointer-events: none;
      cursor: none;
    }
    .qrcode-mask {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      background-color: rgba(255, 255, 255, 0.9);
      transition: background-color 0.1s;
    }
    .qrcode-mask:hover {
      background-color: rgba(255, 255, 255, 0.85);
    }
    .qrcode-mask:hover .qrcode-refresh-btn {
      opacity: 1;
    }
    .qrcode-refresh-btn {
      cursor: pointer;
      width: 36px;
      height: 36px;
      opacity: 0.8;
      transition: opacity 0.1s;
    }
    .desc {
      margin: 20px 0 12px;
      font-size: 14px;
      font-weight: 400;
      color: #656565;
      line-height: 20px;
    }
    .website {
      user-select: text;
      margin: 0;
      font-weight: 400;
      color: #656565;
      line-height: 22px;
    }
  `,Na([Object(r.g)({type:String})],Ba.prototype,"url",void 0),Na([Object(r.g)({type:Number})],Ba.prototype,"expire",void 0),Na([Object(r.f)()],Ba.prototype,"firestRender",void 0),Na([Object(r.h)("#qrcode")],Ba.prototype,"$qrcode",void 0),Ba=Na([Object(r.c)("mobile-qrcode")],Ba);var Fa=r.b`.user-profile {
  display: flex;
  width: 560px;
  border-radius: var(--border-radius);
  overflow: hidden;
}
button {
  outline: none;
  border: none;
  padding: 0;
  margin: 0;
}
.text {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.profile-side {
  position: relative;
  flex-grow: 0;
  width: 160px;
  background: #f5f5f5;
}
.profile-side .side-user {
  text-align: center;
  padding-top: 48px;
  padding-bottom: 44px;
}
.profile-side .side-user .user-avatar {
  border-radius: 50%;
  overflow: hidden;
  width: 60px;
  height: 60px;
  margin-bottom: 12px;
}
.profile-side .side-user .user-name {
  margin: 0;
  font-size: 16px;
  font-weight: 500;
  color: #333;
  line-height: 22px;
  height: 22px;
  padding: 0 20px;
}
.profile-side .side-content {
  height: 290px;
  box-sizing: border-box;
  border-top: solid 1px #eee;
  padding: 20px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.profile-side .side-content .settings-item:hover {
  background-color: rgba(51, 51, 51, 0.05);
}
.profile-side .side-content .settings-item {
  width: 120px;
  height: 32px;
  box-sizing: border-box;
  padding: 0 6px;
  border-radius: 4px;
  font-weight: 500;
  font-size: 14px;
  color: #333;
  background-color: transparent;
  margin-top: 12px;
  cursor: pointer;
  transition: background-color 0.3s;
}
.profile-side .side-content .settings-item.active {
  background-color: rgba(51, 51, 51, 0.05);
}
.profile-side .side-content .settings-item:first-child {
  margin-top: 0;
}
.profile-side .logout {
  margin: 0 auto;
  width: 120px;
  height: 32px;
  --border-color: #fff;
}
.profile-side .logout:hover {
  --border-color: #efefef;
}
.profile-content {
  flex-grow: 1;
  box-sizing: border-box;
  border-left: 1px solid #eee;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
}
.profile-content .info-content {
  margin: 48px 60px 24px;
  border-bottom: 1px solid #eee;
  display: flex;
  flex-direction: column;
}
.profile-content .avatar-item {
  margin-bottom: 15px;
}
.profile-content .avatar-item .item-content {
  position: relative;
  width: 58px;
  height: 58px;
}
.profile-content .avatar-item .item-content .user-avatar,
.profile-content .avatar-item .item-content .loading,
.profile-content .avatar-item .item-content .edit-avatar,
.profile-content .avatar-item .item-content input[type='file'] {
  position: absolute;
  top: 0;
  left: 0;
  box-sizing: border-box;
  width: 58px;
  height: 58px;
  border-radius: 50%;
  cursor: pointer;
}
.profile-content .avatar-item .item-content input[type='file'] {
  padding-top: 58px;
}
.profile-content .avatar-item .item-content input[type='file'],
.profile-content .avatar-item .item-content .edit-avatar {
  opacity: 0;
  z-index: 1;
}
.profile-content .avatar-item .item-content .loading {
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.2);
}
.profile-content .avatar-item .item-content .edit-avatar {
  display: flex;
  justify-content: center;
  align-items: center;
  transition: opacity 0.2s;
  background-color: rgba(0, 0, 0, 0.5);
  pointer-events: none;
}
.profile-content .avatar-item .item-content .edit-avatar .edit-avatar-img {
  width: 20px;
  height: 20px;
}
.profile-content .avatar-item .item-content:hover .edit-avatar {
  opacity: 1;
}
.profile-content .account-content {
  margin: 24px 60px;
}
.profile-content .info-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}
.profile-content .item-title {
  width: 70px;
  margin-right: 8px;
  font-weight: 500;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.profile-content .item-contents {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-grow: 1;
}
.profile-content .item-content {
  max-width: 120px;
  color: #656565;
}
.profile-content .item-password {
  display: flex;
  align-items: center;
}
.profile-content .dot {
  display: block;
  width: 4px;
  height: 4px;
  background: #656565;
  border-radius: 50%;
  margin-right: 4px;
}
.profile-content .item-op {
  --border-color: #fff;
}
.profile-third .third-bind {
  margin: 68px 60px 0;
  height: 360px;
}
.remove-account {
  width: 280px;
  height: 32px;
  margin: 0 auto;
  --font-color: #ff5a5a;
}
.remove-account .btn-content {
  display: flex;
  justify-content: center;
  align-items: center;
}
.remove-account .img {
  width: 16px;
  height: 16px;
  margin-right: 8px;
}
`,za=i(403),Ha=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Wa=class extends a.a{constructor(){super(...arguments),this.store=s.userStore,this.closeModal=()=>this.store.closeLogoutConfirm()}render(){return r.e`
      <infinito-modal .open=${this.store.isShowLogoutConfirm} .onCancel="${this.closeModal}">
        <div slot="body">
          <div class="container">
            ${"logout"===this.store.showConfirmOpt?r.e`
                  <h2 class="title">${Object(Z.i18n)("ensure_logout")}</h2>
                  <p class="tips">${Object(Z.i18n)("logout_tips")}</p>
                  <div class="options">
                    <div class="checkbox-div">
                      <input
                        type="checkbox"
                        id="checkbox"
                        @change="${this.handleChange}"
                        .disabled=${this.store.loading}
                      />
                      <label for="checkbox"></label>
                    </div>
                    <p @click=${this.handleClick}>${Object(Z.i18n)("logout_clear_something")}</p>
                  </div>
                  <div class="btns">
                    <infinito-button primary .loading=${this.store.loading} @click="${()=>this.store.exitAccount()}"
                      >${Object(Z.i18n)("confirm_logout")}</infinito-button
                    >
                    <infinito-button class="cancel" @click="${()=>this.store.closeLogoutConfirm()}"
                      >${Object(Z.i18n)("cancel")}</infinito-button
                    >
                  </div>
                `:r.e`
                  <h2 class="title">${Object(Z.i18n)("request_logout_confirm")}</h2>
                  <p class="tips">${Object(Z.i18n)("logout_warn")}</p>
                  <div class="options">
                    <div class="checkbox-div">
                      <input
                        type="checkbox"
                        id="checkbox"
                        @change="${this.handleChange}"
                        .disabled=${this.store.loading}
                      />
                      <label for="checkbox"></label>
                    </div>
                    <p @click=${this.handleClick}>${Object(Z.i18n)("logout_clear_something")}</p>
                  </div>
                  <div class="btns">
                    <infinito-button
                      class="cancel"
                      .disabled=${this.store.removeAccountDisableSec>0}
                      .loading=${this.store.loading}
                      @click="${()=>{this.store.removeAccountDisableSec>0||this.store.deleteAccount()}}"
                    >
                      ${Object(Z.i18n)("remove_account")}${this.store.removeAccountDisableSec>0?`(${this.store.removeAccountDisableSec}s)`:""}
                    </infinito-button>
                    <infinito-button primary @click="${()=>this.store.closeLogoutConfirm()}">
                      ${Object(Z.i18n)("cancel")}
                    </infinito-button>
                  </div>
                `}
          </div>
        </div>
      </infinito-modal>
    `}handleChange(t){this.store.loading||this.store.toggleClear(t.target.checked)}handleClick(){if(this.store.loading)return;const t=this.inputEle.checked;this.inputEle.checked=!t,this.store.toggleClear(this.inputEle.checked)}};Wa.styles=r.b`
    .container {
      box-sizing: border-box;
      width: 370px;
      padding: 0 20px;
    }
    .title {
      margin: 20px 0 24px;
      color: #333333;
      font-size: 20px;
      font-weight: 500;
      text-align: center;
    }
    .tips {
      margin: 0;
      font-size: 14px;
      font-weight: 400;
      color: #656565;
    }
    .options {
      display: flex;
      align-items: center;
      margin: 30px 0 40px;
    }
    .options p {
      margin: 0;
      margin-left: 10px;
    }
    .btns {
      margin-bottom: 12px;
      display: flex;
      justify-content: space-between;
    }
    infinito-button {
      width: 155px;
      height: 42px;
    }
    .cancel {
      --button-color: #efefef;
      --border-color: #efefef;
      --hover-color: #dfdfdf;
      --hover-font-color: #333;
    }
    .checkbox-div {
      position: relative;
      width: 16px;
      height: 16px;
    }
    label {
      box-sizing: border-box;
      position: absolute;
      top: 0;
      left: 0;
      width: 16px;
      height: 16px;
      border: 2px solid #333;
      border-radius: 8px;
      cursor: pointer;
    }
    label::after {
      content: '';
      width: 9px;
      height: 5px;
      position: absolute;
      top: 1px;
      left: 1px;
      border: 2px solid #333;
      border-top: none;
      border-right: none;
      background: transparent;
      opacity: 0;
      transform: rotate(-45deg);
    }

    input[type='checkbox'] {
      visibility: hidden;
    }
    input[type='checkbox']:checked + label::after {
      opacity: 1;
    }
  `,Ha([Object(r.h)("input")],Wa.prototype,"inputEle",void 0),Wa=Ha([Object(r.c)("logout-confirm")],Wa);var qa=r.b`input {
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
  width: 100%;
  height: 36px;
  box-sizing: border-box;
  background: #f5f5f5;
  border-radius: 4px;
  outline: none;
  border: none;
  padding: 0 12px;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
}
input::placeholder {
  color: #adadad;
}
.container {
  box-sizing: border-box;
  width: 300px;
  padding: 20px;
}
.form-content {
  display: flex;
  flex-direction: column;
}
.modal-input {
  margin-bottom: 22px;
  background: #f5f5f5;
  border-radius: 4px;
  --error-left: 1px;
}
.footer {
  margin-top: 2px;
  width: 100%;
  display: flex;
  justify-content: space-between;
}
infinito-button {
  width: 120px;
  height: 36px;
}
.imgcode-input-box {
  display: flex;
  margin-bottom: 22px;
}
.imgcode-input-box .img-code {
  margin-left: 12px;
  width: 108px;
  height: 36px;
  background: #d6d6d6;
  border-radius: 4px;
  cursor: pointer;
}
.imgcode-input-box .img-code svg {
  width: 100%;
  height: 100%;
}
.imgcode-input-box .modal-input {
  margin-bottom: 0;
  width: 140px;
  height: 36px;
  background: #f5f5f5;
  border-radius: 4px;
}
.input-phone-prefix {
  flex-shrink: 0;
  width: 50px;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.input-phone-prefix .area-code {
  border-right: 1px solid rgba(28, 28, 30, 0.15);
  height: 14px;
  line-height: 20px;
  font-size: 14px;
  font-weight: 400;
  color: #1c1c1e;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}
.input-code-suffix {
  flex-shrink: 0;
  width: 98px;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 2px;
}
.input-code-suffix .send-code {
  --border-color: #f5f5f5;
  --border-raduis: 2px;
  margin-right: 4px;
  width: 90px;
  height: 30px;
  background: #ffffff;
  border-radius: 2px;
}
.input-code-suffix .sendcode-text {
  font-size: 12px;
}
i-mask {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
i-mask.hide {
  display: none;
}
.area-list {
  position: absolute;
  margin-top: 42px;
  padding: 0;
  box-sizing: border-box;
  width: 260px;
  height: 250px;
  display: flex;
  flex-direction: column;
  overflow-y: scroll;
  border-radius: 4px;
  background-color: #fff;
}
.area-list.hide {
  height: 0;
  opacity: 0;
  pointer-events: none;
}
.area-list.show {
  height: auto;
  opacity: 1;
  pointer-events: auto;
}
.area-list.show-up {
  z-index: 11;
}
.area-list .area-item {
  display: flex;
}
[name='emailOrPhone'] {
  position: relative;
  z-index: 11;
}
.header {
  text-align: center;
  height: 25px;
  font-size: 18px;
  font-weight: 500;
  color: #1c1c1e;
  line-height: 25px;
}
.desc {
  margin: 16px auto;
  font-size: 14px;
  font-weight: 400;
  color: #3a3a3c;
  line-height: 20px;
}
.unbind-box {
  margin-top: 2px;
  margin-bottom: 24px;
  display: flex;
}
.unbind-box .unbind-btn {
  display: flex;
  align-items: center;
  height: 20px;
  font-size: 14px;
  font-weight: 400;
  color: #3a3a3c;
  line-height: 20px;
  transition: color 0.2s;
  cursor: pointer;
}
.unbind-box .unbind-btn img {
  margin-left: 4px;
}
.unbind-box .unbind-btn:hover {
  color: #333;
}
`,Ga=i(624),Va=i(87),Qa=i.n(Va),Ya=r.b`:host {
  display: block;
  width: 260px;
  height: 36px;
  background: #f5f5f5;
  border-radius: 4px;
  --error-left: 1px;
}
.ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.error {
  position: absolute;
  bottom: -17px;
  margin-left: var(--error-left);
  font-size: 12px;
  font-weight: 400;
  color: #ea4747;
}
.item {
  position: relative;
  height: 100%;
}
.input-box {
  height: 100%;
  display: flex;
  align-items: center;
}
.input {
  background-color: transparent;
  outline: none;
  border: none;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  padding: 0 12px;
  color: #333;
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
  font-family: 'PingFang SC', 'Microsoft Yahei', Helvetica, Arial, sans-serif;
}
.input::placeholder {
  color: #adadad;
}
.input:-moz-read-only {
  cursor: not-allowed;
  color: #999999;
}
.input:read-only {
  cursor: not-allowed;
  color: #999999;
}
`,Xa=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const Za=async t=>"";let Ka=class extends r.a{constructor(){super(...arguments),this.name="",this.type="text",this.value="",this.placeholder=i18n("please_enter_text"),this.readonly=!1,this.validate=Za,this.errMsg="",this.onChange=async t=>{const e=t.currentTarget.value;if(this.errMsg){const t=await this.validate(e);this.errMsg=t}this.value=e,this.emitChangeEvent(e)},this.emitChangeEvent=t=>{const e=new CustomEvent("on-change",{detail:{value:t}});this.dispatchEvent(e)},this.checkValidity=async()=>(this.errMsg=await this.validate(this.value),this.errMsg),this.clearValidate=()=>{this.errMsg=""}}render(){return r.e`
      <div class="item">
        <div class="input-box">
          <slot name="prefix"></slot>
          <slot name="input">
            <input
              class="input"
              .name="${this.name}"
              autocomplete="off"
              .type="${this.type}"
              .value="${this.value||""}"
              .placeholder="${this.placeholder}"
              .readOnly="${this.readonly}"
              @blur="${this.checkValidity}"
              @input=${t=>{this.onChange(t)}}
            />
          </slot>
          <slot name="suffix"></slot>
        </div>
        <span .hidden="${!this.errMsg}" class="error ellipsis">${this.errMsg}</span>
      </div>
    `}};Ka.styles=Ya,Xa([Object(r.g)({type:String})],Ka.prototype,"name",void 0),Xa([Object(r.g)({type:String})],Ka.prototype,"type",void 0),Xa([Object(r.g)({type:String})],Ka.prototype,"value",void 0),Xa([Object(r.g)({type:String})],Ka.prototype,"placeholder",void 0),Xa([Object(r.g)({type:Boolean})],Ka.prototype,"readonly",void 0),Xa([Object(r.g)({attribute:!1})],Ka.prototype,"validate",void 0),Xa([Object(r.g)({type:String})],Ka.prototype,"errMsg",void 0),Ka=Xa([Object(r.c)("i-userinput")],Ka);var Ja=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let ts=class extends a.a{constructor(){super(...arguments),this.store=s.userStore,this.saveLoading=!1,this.codeTime=0,this.codeTimer=null,this.imgcodeTime="",this.areaCode="86",this.areaCodeStatus=!1,this.imgToken="",this.imgData="",this._renderChangeNickname=()=>r.e`
      <div class="form">
        <div class="form-content">
          <i-userinput
            placeholder="${Object(Z.i18n)("please_enter_nickname")}"
            .value=${this.store.userInfo.name}
            class="modal-input"
            name="username"
            .validate="${async t=>t?"":Object(Z.i18n)("username_cannot_empty")}"
          ></i-userinput>
        </div>
        <div class="footer">
          <infinito-button @click="${this.closeModal}">${Object(Z.i18n)("cancel")}</infinito-button>
          <infinito-button .loading=${this.saveLoading} @click="${this.onChangeNickName}" primary
            >${Object(Z.i18n)("save")}</infinito-button
          >
        </div>
      </div>
    `,this._renderAreaCodeList=()=>r.e`<ul class="area-list show-up ${this.areaCodeStatus?"show":"hide"}">
      ${s.userStore.areaCodeList.map(t=>r.e`<li
          @click="${()=>{this.selectAreaCode(t.area_code)}}"
          class="area-item"
        >
          <span>${t.name}</span>
          <span>${t.area_code}</span>
        </li>`)}
    </ul>`,this._renderBindPhoneOrEmail=t=>r.e`
      <div class="form">
        <div class="form-content">
          <i-userinput
            placeholder="${this._getText("emailOrPhone",t)}"
            class="modal-input"
            name="emailOrPhone"
            .validate="${async e=>{if("bindEmail"===t||"modifyEmail-2"===t){if(!e)return Object(Z.i18n)("please_enter_email");const t=Ga.b.isEmail(e,Object(Z.i18n)("email_format_error"));if(t)return t}else if("bindPhone"===t||"modifyPhone-2"===t){if(!e)return Object(Z.i18n)("please_enter_phone");const t=Ga.b.isPhone(e,Object(Z.i18n)("enter_valid_phone_tips"));if(t)return t}return""}}"
          >
            <!-- ${"bindPhone"===t||"modifyPhone-2"===t?r.e` <div class="input-phone-prefix" slot="prefix">
                  <div class="area-code" @click="${this.showAreaCodeList}">+${this.areaCode}</div>
                </div>`:null} -->
          </i-userinput>
          <i-mask
            class="${this.areaCodeStatus?"show":"hide"}"
            @close="${()=>{this.areaCodeStatus=!1}}"
            ?show="${this.areaCodeStatus}"
          ></i-mask>
          ${this._renderAreaCodeList()}
          <div class="imgcode-input-box">
            <i-userinput
              placeholder="${Object(Z.i18n)("img_verify_code")}"
              class="modal-input"
              name="imgcode"
              .validate="${async t=>t?"":Object(Z.i18n)("please_enter_img_verify_code")}"
            ></i-userinput>
            ${l.D.supportCookie?r.e` <img
                  @click="${this.refreshVerifyImg}"
                  class="img-code"
                  src="${this.imgcodeTime?l.y+"/verify/get_img?t="+this.imgcodeTime:null}"
                  alt=""
                />`:r.e` <div @click="${this.getTokenImg}" class="img-code">${Object(ot.a)(this.imgData)}</div> `}
          </div>

          <i-userinput
            placeholder="${Object(Z.i18n)("enter_verification_code_tips")}"
            class="modal-input"
            name="code"
            .validate="${async t=>t?"":Object(Z.i18n)("enter_verification_code_tips")}"
          >
            <div class="input-code-suffix" slot="suffix">
              <infinito-button
                .disabled=${!!this.codeTime}
                class="send-code"
                @click="${()=>this.sendCode(t)}"
                white
              >
                <span class="sendcode-text"> ${this.codeTime?this.codeTime+"s":Object(Z.i18n)("verity_code")} </span>
              </infinito-button>
            </div>
          </i-userinput>

          ${this.isRegistered()?null:r.e`
                <i-userinput
                  placeholder="${Object(Z.i18n)("password")}"
                  class="modal-input"
                  type="password"
                  name="password"
                  .validate="${async t=>t?t.length<6?Object(Z.i18n)("password_length_low"):"":Object(Z.i18n)("password_dont_empty")}"
                ></i-userinput>
                <i-userinput
                  placeholder="${Object(Z.i18n)("confirm_password_2")}"
                  class="modal-input"
                  type="password"
                  name="repeatPassword"
                  .validate="${async t=>t!==this.getIUserInputValue("password")?Object(Z.i18n)("password_not_equals"):""}"
                ></i-userinput>
              `}
        </div>
        ${s.userStore.isLastId||"modifyPhone-2"!==t&&"modifyEmail-2"!==t?null:r.e`<div class="unbind-box">
              <div white class="unbind-btn" @click="${()=>this.onUnbind(t)}">
                ${Object(Z.i18n)("unbind_btn")}
                <img width="9" height="9" src="${i(767)}" alt="" />
              </div>
            </div>`}

        <div class="footer">
          <infinito-button @click="${this.closeModal}">${Object(Z.i18n)("cancel")}</infinito-button>
          <infinito-button .loading=${this.saveLoading} @click="${()=>this.onBind(t)}" primary
            >${Object(Z.i18n)("confirm")}</infinito-button
          >
        </div>
      </div>
    `,this._renderVerifyPassword=t=>r.e` <div class="form">
      <div class="header">${"modifyPhone-1"===t?Object(Z.i18n)("modify_phone_number"):Object(Z.i18n)("modify_email")}</div>
      <div class="desc">${Object(Z.i18n)("verify_password_desc")}</div>
      <div class="form-content">
        <i-userinput
          placeholder="${Object(Z.i18n)("enter_password_tips")}"
          class="modal-input"
          type="password"
          name="password"
          .validate="${async t=>t?"":Object(Z.i18n)("password_dont_empty")}"
        ></i-userinput>
      </div>
      <div class="footer">
        <infinito-button @click="${this.closeModal}">${Object(Z.i18n)("cancel")}</infinito-button>
        <infinito-button .loading=${this.saveLoading} @click="${()=>this.toModifyPhoneOrEmail(t)}" primary
          >${Object(Z.i18n)("confirm")}</infinito-button
        >
      </div>
    </div>`,this._renderForm=t=>"bindEmail"===t||"bindPhone"===t?(l.D.supportCookie?this.imgcodeTime||this.refreshVerifyImg():this.imgData||this.getTokenImg(),this._renderBindPhoneOrEmail(t)):"modifyPhone-2"===t||"modifyEmail-2"===t?this._renderBindPhoneOrEmail(t):"modifyPhone-1"===t||"modifyEmail-1"===t?this._renderVerifyPassword(t):"editNickName"===t?this._renderChangeNickname():void 0,this.closeModal=()=>{this.saveLoading=!1,this.codeTime=0,clearInterval(this.codeTimer),this.codeTimer=null,this.store.closeSecondProfileModal(),this.imgData="",this.imgToken="",this.imgcodeTime=""}}async onChangeNickName(){var t;if(this.saveLoading)return;if(!await this.validateAll(["username"]))return;const e={name:nn()(t=this.getIUserInputValue("username")).call(t),gender:this.store.userInfo.gender||"x"};this.saveLoading=!0,await this.store.modifyProfile(e),this.saveLoading=!1,this.closeModal()}async validateAll(t){return(await n.a.all(t.map(t=>this.shadowRoot.querySelector(`i-userinput[name="${t}"]`).checkValidity()))).every(t=>!t)}async onBind(t){const e=["emailOrPhone","code"];this.isRegistered()||e.push("password","repeatPassword");if(!await this.validateAll(e))return;const i={code:this.getIUserInputValue("code")};if(!this.isRegistered()){const t=this.getIUserInputValue("password");i.password=Qa()(t);const e=this.getIUserInputValue("repeatPassword");i.repeatPassword=Qa()(e)}const o=this.getIUserInputValue("emailOrPhone");let n={error:{message:"type error"}};"bindEmail"===t||"modifyEmail-2"===t?(i.email=o,this.saveLoading=!0,n=await mt.g.bindEmail(i)):"bindPhone"!==t&&"modifyPhone-2"!==t||(i.phone_number=o,i.country_code=this.areaCode,this.saveLoading=!0,n=await mt.g.bindPhoneNumber(i));const{error:r}=n;this.saveLoading=!1,r?rt.message.error(r.message):("bindEmail"===t||"modifyEmail-2"===t?s.userStore.bindSuccess("email",i.email):"bindPhone"!==t&&"modifyPhone-2"!==t||s.userStore.bindSuccess("phone",i.phone_number),"bindEmail"===t||"bindPhone"===t?rt.message.success(Object(Z.i18n)("bind_success")):rt.message.success(Object(Z.i18n)("modify_success")),this.closeModal())}isRegistered(){return this.store.userInfo.email||this.store.userInfo.phone_number}async sendCode(t){let e={error:{message:"type error"}};if(!await this.validateAll(["emailOrPhone","imgcode"]))return;const i=this.getIUserInputValue("emailOrPhone"),o=this.getIUserInputValue("imgcode");"bindEmail"===t||"modifyEmail-2"===t?(this.codeTime=60,e=await mt.g.sendEmailCode({email:i,code:o,token:l.D.supportCookie?void 0:this.imgToken})):"bindPhone"!==t&&"modifyPhone-2"!==t||(this.codeTime=60,e=await mt.g.sendPhoneCode({phone_number:i,type:"bind",code:o,country_code:this.areaCode,token:l.D.supportCookie?void 0:this.imgToken}));const{error:n}=e;n&&3021===n.code||(l.D.supportCookie?this.refreshVerifyImg():this.getTokenImg()),n?(this.codeTime=0,rt.message.error(n.message)):(rt.message.success(Object(Z.i18n)("send_success")),this.codeTimer=setInterval(()=>{this.codeTime<=0?clearInterval(this.codeTimer):this.codeTime-=1},1e3))}refreshVerifyImg(){this.imgcodeTime=""+Date.now()}async getTokenImg(){if(l.D.supportCookie)return;const{data:t,error:e}=await mt.g.geVerifyTokenImg();e||(this.imgData=t.img,this.imgToken=t.token)}getIUserInputValue(t){const e=this.shadowRoot.querySelector(`i-userinput[name="${t}"]`);return e?e.value:null}selectAreaCode(t){console.log(t)}showAreaCodeList(){}_getText(t,e,i){if("emailOrPhone"===t){return{bindEmail:Object(Z.i18n)("please_enter_email"),bindPhone:Object(Z.i18n)("please_enter_phone"),"modifyEmail-2":Object(Z.i18n)("new_email"),"modifyPhone-2":Object(Z.i18n)("new_phone_number")}[e]}if("unbindConfirmTitle"===t){return{"modifyEmail-2":Object(Z.i18n)("unbind_email"),"modifyPhone-2":Object(Z.i18n)("unbind_phone_number")}[e]}if("unbindConfirm"===t){return{"modifyEmail-2":Object(Z.i18n)("confirm_unbind_email",i.email),"modifyPhone-2":Object(Z.i18n)("confirm_unbind_phone_number",i.phone_number)}[e]}}async onUnbind(t){let e={error:{message:"type error"}};G.IConfirm.create().toShow({title:this._getText("unbindConfirmTitle",t),text:this._getText("unbindConfirm",t,{email:s.userStore.userInfo.email,phone_number:s.userStore.getPhoneNumber()}),onConfirm:async()=>{this.saveLoading=!0,"modifyEmail-2"===t?e=await mt.g.unbindEmail():"modifyPhone-2"===t&&(e=await mt.g.unbindPhoneNumber());const{error:i}=e;this.saveLoading=!1,i?rt.message.error(i.message):("modifyEmail-2"===t?s.userStore.unbindSuccess("email"):"modifyPhone-2"===t&&s.userStore.unbindSuccess("phone"),rt.message.success(Object(Z.i18n)("unbind_success")),this.closeModal())}})}async toModifyPhoneOrEmail(t){if(!await this.validateAll(["password"]))return;this.saveLoading=!0;const e=this.getIUserInputValue("password"),{error:i}=await mt.g.verifyPassword(e);this.saveLoading=!1,i?rt.message.error(i.message):("modifyEmail-1"===t?this.store.showSecondProfileModal("modifyEmail-2"):"modifyPhone-1"===t&&this.store.showSecondProfileModal("modifyPhone-2"),l.D.supportCookie?this.refreshVerifyImg():this.getTokenImg())}render(){return r.e`
      <infinito-modal
        style="--modal-padding:0;"
        .open=${this.store.isShowSecondProfileModal}
        .closeable="${!1}"
        .onCancel="${this.closeModal}"
      >
        <div slot="body">
          <div class="container">${this._renderForm(this.store.secondProfileModalType)}</div>
        </div>
      </infinito-modal>
    `}};ts.styles=qa,Ja([Object(r.g)({type:Boolean})],ts.prototype,"saveLoading",void 0),Ja([Object(r.f)()],ts.prototype,"codeTime",void 0),Ja([Object(r.f)()],ts.prototype,"codeTimer",void 0),Ja([Object(r.f)()],ts.prototype,"imgcodeTime",void 0),Ja([Object(r.f)()],ts.prototype,"areaCode",void 0),Ja([Object(r.f)()],ts.prototype,"areaCodeStatus",void 0),Ja([Object(r.f)()],ts.prototype,"imgToken",void 0),Ja([Object(r.f)()],ts.prototype,"imgData",void 0),ts=Ja([Object(r.c)("profile-modal")],ts);var es=i(643),is=i.n(es),os=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let ns=class extends a.a{constructor(){super(...arguments),this.cropper=null,this.preViewImgData=null,this.avatar="",this.avatarLoading=!1,this.avatarKey="",this._curTab="account"}firstUpdated(){this.initCropper()}updated(){s.userStore.isModify||(this.avatar="",this.avatarKey="",this.avatarLoading=!1)}bindThird(t){s.userStore.thirdPartyBind(t.type)}unbindThird(t){G.IConfirm.create().toShow({text:i18n("confirm_unbind"),title:i18n("hint"),onConfirm:async()=>{const{error:e}=await s.userStore.thirdPartyUnbind(t.type);e?rt.message.error(e.message):(s.userStore.unbindSuccess("third",t.type),rt.message.success(i18n("unbind_success")))}})}showSecondProfileModal(t){s.userStore.showSecondProfileModal(t)}removeAccount(){s.userStore.logout("remove")}editNickName(){s.userStore.showSecondProfileModal("editNickName")}editPassword(t){let e="/modify-password/index.html";l.l&&(e=window.chrome.runtime.getURL(e)),c.a.openUrl(e,!0,t)}_renderProfileThird(){return r.e`
      <div class="profile-content profile-third">
        <div class="third-bind">
          ${s.userStore.thirdAccountList.map(t=>t.abondon&&!t.bindStatus?null:r.e` <div class="info-item">
              <div class="item-title">${t.title}</div>
              <div class="item-contents">
                <div class="item-content text">
                  ${t.bindStatus?t.nick_name||i18n("is_binding"):i18n("not_binding")}
                </div>
                ${t.bindStatus?s.userStore.isLastId?null:r.e`<infinito-button white class="item-op" @click="${this.unbindThird.bind(this,t)}"
                      >${i18n("unbind")}</infinito-button
                    >`:r.e`
                      <infinito-button white class="item-op" @click="${this.bindThird.bind(this,t)}"
                        >${i18n("bind")}</infinito-button
                      >
                    `}
              </div>
            </div>`)}
        </div>
        <infinito-button class="remove-account" @click="${this.removeAccount}">
          <div class="btn-content">
            <img class="img" src="${i(768)}" alt="" />
            <span>${i18n("remove_account")}</span>
          </div>
        </infinito-button>
      </div>
    `}initCropper(){this.cropper=za.a.create({title:i18n("edit_avatar"),needBackground:!0}),this.cropper.addEventListener("on-change",async t=>{const{data:e}=t.detail;this.preViewImgData=e;const i=this.avatar;this.avatar=an.a.createObjectURL(this.preViewImgData),an.a.revokeObjectURL(i),setTimeout(async()=>{this.avatarLoading=!0;const t=await s.userStore.updateAvatar(this.preViewImgData);0===(null==t?void 0:t.code)?(this.avatarKey=t.data.key,await this.handleSave()):(this.avatar="",this.preViewImgData=null,rt.message.error(i18n("upload_avatar_failure")),this.avatarLoading=!1)},300)})}chooseImage(){const t=this.avatarInput.files[0];if(!("image/jpeg"===t.type||"image/png"===t.type))return rt.message.error(i18n("please_chose_picture")),void(this.avatarInput.value="");if(!(t.size/1024/1024<2))return rt.message.error(i18n("oversize")),void(this.avatarInput.value="");const e=new FileReader;e.readAsDataURL(t),this.avatarInput.value=null,e.onload=()=>{this.cropper.init(e.result),this.cropper.show()}}async handleSave(){const t={name:s.userStore.userInfo.name,gender:s.userStore.userInfo.gender||"x",avatar:this.avatarKey};await s.userStore.modifyProfile(t),this.avatarLoading=!1}_renderProfileAccount(){const{userInfo:t}=s.userStore;return r.e`
      <div class="profile-content profile-account">
        <div class="info-content">
          <div class="info-item avatar-item">
            <div class="item-title">${i18n("current_avatar")}</div>
            <div class="item-contents">
              <div class="item-content">
                <img class="user-avatar" .src=${this.avatar||t.avatar||Wr.g} />
                <input
                  type="file"
                  title=""
                  name="avatar"
                  accept="image/png, image/jpeg"
                  @change=${this.chooseImage}
                  @drop=${this.chooseImage}
                />
                ${this.avatarLoading?r.e`
                      <div class="loading">
                        <img src=${is.a} width="42px" />
                      </div>
                    `:r.e`<div class="edit-avatar">
                      <img src="${i(769)}" alt="" class="edit-avatar-img" />
                    </div>`}
              </div>
            </div>
          </div>
          <div class="info-item">
            <div class="item-title">${i18n("nickname")}</div>
            <div class="item-contents">
              <div class="item-content text">${t.name}</div>
              <infinito-button white class="item-op" @click="${this.editNickName}">${i18n("edit")}</infinito-button>
            </div>
          </div>
        </div>
        <div class="account-content">
          ${t.phone_number||t.email?r.e` <div class="info-item">
                <div class="item-title">${i18n("password")}</div>
                <div class="item-contents">
                  <div class="item-content text item-password">
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                  </div>
                  <infinito-button white class="item-op" @click="${this.editPassword}"
                    >${i18n("modify_this")}</infinito-button
                  >
                </div>
              </div>`:null}
          ${Z.IS_ZH||t.phone_number?r.e`
                <div class="info-item">
                  <div class="item-title">${i18n("phone_number")}</div>
                  <div class="item-contents">
                    <div class="item-content text">
                      ${t.phone_number?s.userStore.getPhoneNumber():i18n("not_binding")}
                    </div>
                    ${t.phone_number?r.e`<infinito-button
                          white
                          class="item-op"
                          @click="${()=>this.showSecondProfileModal("modifyPhone-1")}"
                          >${i18n("modify_this")}</infinito-button
                        >`:r.e`<infinito-button
                          white
                          class="item-op"
                          @click="${()=>this.showSecondProfileModal("bindPhone")}"
                          >${i18n("bind")}</infinito-button
                        >`}
                  </div>
                </div>
              `:null}

          <div class="info-item">
            <div class="item-title">${i18n("email")}</div>
            <div class="item-contents">
              <div class="item-content text">${t.email?t.email:i18n("not_binding")}</div>
              ${t.email?r.e`<infinito-button
                    white
                    class="item-op"
                    @click="${()=>this.showSecondProfileModal("modifyEmail-1")}"
                    >${i18n("modify_this")}</infinito-button
                  >`:r.e`<infinito-button white class="item-op" @click="${()=>this.showSecondProfileModal("bindEmail")}"
                    >${i18n("bind")}</infinito-button
                  >`}
            </div>
          </div>
        </div>
      </div>
    `}switchTab(t){this._curTab=t}logout(){s.userStore.logout("logout")}render(){const{userInfo:t}=s.userStore;return r.e`
      <section class="user-profile">
        <div class="profile-side">
          <div class="side-user">
            <img class="user-avatar" .src=${t.avatar||Wr.g} />
            <p class="user-name text">${t.name}</p>
          </div>
          <div class="side-content">
            <div class="settings-items">
              <button
                type="button"
                @click="${this.switchTab.bind(this,"account")}"
                class="${Object(Y.a)({"settings-item":!0,text:!0,active:"account"===this._curTab})}"
              >
                ${i18n("basic_info")}
              </button>
              <button
                type="button"
                @click="${this.switchTab.bind(this,"third")}"
                class="${Object(Y.a)({text:!0,"settings-item":!0,active:"third"===this._curTab})}"
              >
                ${i18n("account_setting")}
              </button>
            </div>
            <infinito-button white class="logout" @click="${this.logout}">${i18n("logout")}</infinito-button>
          </div>
        </div>
        ${"account"===this._curTab?this._renderProfileAccount():"third"===this._curTab?this._renderProfileThird():null}
      </section>
      <infinito-portal-entrance destination="logout-confirm">
        <logout-confirm></logout-confirm>
      </infinito-portal-entrance>
      <infinito-portal-entrance destination="profile-modal">
        <profile-modal></profile-modal>
      </infinito-portal-entrance>
    `}};ns.styles=Fa,os([Object(r.f)()],ns.prototype,"avatar",void 0),os([Object(r.f)()],ns.prototype,"avatarLoading",void 0),os([Object(r.f)()],ns.prototype,"avatarKey",void 0),os([Object(r.f)()],ns.prototype,"_curTab",void 0),os([Object(r.h)('input[name="avatar"]')],ns.prototype,"avatarInput",void 0),ns=os([Object(r.c)("user-profile")],ns);var rs=i(490),as=i.n(rs),ss=i(770),ls=i.n(ss),cs=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let ds=class extends a.a{constructor(){super(...arguments),this.platform="",this.manualBackup=()=>{G.IConfirm.create().toShow({title:Object(Z.i18n)("backup_now"),text:Object(Z.i18n)("confirm_cover_remote"),onConfirm:()=>{s.syncStore.manualBackup(),this.platform="pc"}})},this.recover=(t,e)=>{G.IConfirm.create().toShow({title:Object(Z.i18n)("revovery_data"),text:Object(Z.i18n)("confirm_recovery_data"),onConfirm:()=>{if("v1"===t){const t=s.userStore.userInfo.email?"basic":"pro";s.syncStore.getV1RemoteData(t,!0)}else s.syncStore.getDetail(t,e,"all",!0)}})},this.platformIcons={pc:i(771),pad:i(772),mobile:i(773)},this._renderManualList=()=>{let t=Object.keys(s.syncStore.manualSyncList);t=this.sortPlatforms(t,["pc","pad","mobile"]),this.platform=this.platform||t[0];let e=s.syncStore.manualSyncList[this.platform];return e||(this.platform=t[0],e=s.syncStore.manualSyncList[this.platform]),e.map(e=>r.e` <div class="item">
        <span class="title"
          >${e.time}
          ${1===t.length&&"mobile"===t[0]?r.e` <i-svg class="platform-icon" .src="${this.platformIcons.mobile}"></i-svg> `:null}
        </span>
        <span @click="${()=>this.recover(e.id,"manual")}" class="op"
          ><i-svg .src="${ls.a}"></i-svg> ${Object(Z.i18n)("recover_this")}</span
        >
      </div>`)},this.selectPlatform=t=>{this.platform=t},this._renderManualListPlatforms=()=>{let t=Object.keys(s.syncStore.manualSyncList);return t=this.sortPlatforms(t,["pc","pad","mobile"]),this.platform=this.platform||t[0],t.length>1?r.e` <div class="platforms">
        ${t.map(t=>r.e`
            <span class="platform ${t===this.platform?"active":""}">
              <i-svg
                @click="${this.selectPlatform.bind(null,t)}"
                class="platform-icon"
                .src="${this.platformIcons[t]}"
              ></i-svg>
            </span>
          `)}
      </div>`:null}}sortPlatforms(t,e){return as()(t).call(t,(t,i)=>e.indexOf(t)-e.indexOf(i))}render(){return r.e`
      <div class="container">
        <img
          class="left-img"
          src="${Object(it.b)("https://infinityicon.infinitynewtab.com/assets/images/sync-left.jpg")}"
          alt=""
        />
        <div class="right">
          <div class="right-header">
            <div class="title">${Object(Z.i18n)("history_backup_list")}</div>
            <div class="tips">${Object(Z.i18n)("backup_tips")}</div>
          </div>
          <div class="right-card">
            <div class="item header">
              <div class="header-left">
                <span class="title">${Object(Z.i18n)("manul_backup")}</span>
                ${this._renderManualListPlatforms()}
              </div>
              <span @click="${this.manualBackup}" class="op"
                ><i-svg .src="${ja.a}"></i-svg> ${Object(Z.i18n)("backup_now")}</span
              >
            </div>
            ${0===Object.keys(s.syncStore.manualSyncList).length?r.e`<div class="item-none item-none-first">${Object(Z.i18n)("none_manual_backup")}</div> `:this._renderManualList()}
          </div>
          <div class="right-card">
            <div class="item header">
              <span class="title">${Object(Z.i18n)("scheduled_backup")}</span>
            </div>
            ${s.syncStore.autosSyncList.map(t=>r.e` <div class="item ">
                <span class="title">${t.time}</span>
                ${t.id===s.syncStore.syncId?r.e`<span class="op op-none">${Object(Z.i18n)("current_node")}</span>`:r.e`<span @click="${()=>this.recover(t.id,"auto")}" class="op"
                      ><i-svg .src="${ls.a}"></i-svg> ${Object(Z.i18n)("recover_this")}</span
                    >`}
              </div>`)}
            ${0===s.syncStore.autosSyncList.length&&!s.userStore.userInfo["backup-version-v2"]&&s.userStore.userInfo["auto-backup"]?r.e`
                  <div class="item ">
                    <span class="title">${c.a.fmtTime(Number(s.userStore.userInfo["auto-backup"]))}</span>
                    <span @click="${()=>this.recover("v1","auto")}" class="op"
                      ><i-svg .src="${ls.a}"></i-svg> ${Object(Z.i18n)("recover_this")}</span
                    >
                  </div>
                `:""}
            ${0===s.syncStore.autosSyncList.length&&0===s.userStore.userInfo["auto-backup"]?r.e`<div class="item-none item-none-first">${Object(Z.i18n)("none_auto_backup")}</div>
                  <div class="item-none">${Object(Z.i18n)("none_auto_backup_desc")}</div>`:""}
          </div>
        </div>
      </div>
    `}};ds.styles=r.b`
    .container {
      width: 614px;
      box-sizing: border-box;
      display: flex;
      border-radius: 6px;
      overflow: hidden;
    }
    .left-img {
      width: 200px;
      /* height: 437px; */
      max-height: 500px;
    }
    .right {
      flex-grow: 1;
      padding: 30px;
      box-sizing: border-box;
    }
    .right-header {
      margin-top: 4px;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }
    .right-header .title {
      font-size: 20px;
      font-weight: 500;
      color: #333333;
      line-height: 28px;
    }
    .right-header .tips {
      margin-top: 4px;
      font-size: 12px;
      font-weight: 400;
      color: #999999;
      line-height: 17px;
    }
    .right-card {
      margin-top: 30px;
    }
    .item {
      margin-top: 14px;
      display: flex;
      justify-content: space-between;
    }
    .item .title {
      font-size: 12px;
      font-weight: 400;
      color: #999999;
      line-height: 17px;
      display: inline-flex;
      align-items: center;
    }
    .item.header .title {
      font-size: 14px;
      font-weight: 500;
      color: #333333;
      line-height: 20px;
    }
    .item .op {
      display: flex;
      align-items: center;
      font-size: 12px;
      font-weight: 400;
      color: #333333;
      line-height: 17px;
      cursor: pointer;
    }
    .op.op-none {
      opacity: 0.5;
      cursor: initial;
    }
    i-svg {
      width: 18px;
      height: 13px;
      margin-right: 2px;
    }
    .item-none {
      height: 17px;
      font-size: 12px;
      font-weight: 400;
      color: #999999;
      line-height: 17px;
    }
    .item-none-first {
      margin-top: 6px;
    }
    .platform-icon {
      display: inline-block;
      width: 16px;
      height: 16px;
      margin-right: 0;
    }
    .title .platform-icon {
      margin-left: 8px;
    }
    .platform {
      margin-left: 12px;
      display: flex;
      padding: 2px;
      border-radius: 4px;
      transition: background-color, 0.1s;
      cursor: pointer;
    }
    .platforms .platform:first-of-type {
      margin-left: 0;
    }
    .platform:hover,
    .platform.active {
      background-color: #fff;
    }
    .platform:hover .platform-icon,
    .platform.active .platform-icon {
      opacity: 1;
    }
    .platforms .platform-icon {
      opacity: 0.5;
      transition: opacity 0.1s;
    }

    .platforms {
      margin-left: 8px;
      display: flex;
      align-items: center;
      padding: 0 2px;
      height: 24px;
      background: #f3f3f3;
      border-radius: 6px;
    }
    .header-left {
      display: flex;
      align-items: center;
    }
  `,cs([Object(r.f)()],ds.prototype,"platform",void 0),ds=cs([Object(r.c)("modal-sync-list")],ds);var ps=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let hs=class extends a.a{constructor(){super(...arguments),this.store=s.userStore,this.showQrcode=!1,this.toggleQrcode=async()=>{this.showQrcode=!this.showQrcode,this.showQrcode&&s.userStore.mobileloginExpire<=0&&await s.userStore.getMobileloginUrl()},this.refreshQRcode=()=>{s.userStore.getMobileloginUrl(!0)},this.closeProfile=()=>{this.store.closeProfileModal(),this.store.closeModify()},this.handleCancel=()=>{this.store.closeModal(),this.store.cancelLogin()},this.openSyncList=()=>{this.store.openSyncListModal()},this.closeSyncList=()=>{this.store.closeSyncListModal()}}render(){const{isLogin:t,userInfo:e,modalOpen:i,logining:o,profileModal:n,syncListModal:a}=this.store;return r.e`
      ${t?r.e`
            <div class="user-info login">
              <div @click=${this.openProfile}>
                <div
                  class="avatar-img"
                  style="background: url(${e.avatar||Wr.g}); background-size: cover;"
                ></div>
                <div class="user-name-wrapper">
                  <div class="user-name">
                    <div class="name">${e.name}</div>
                    <!-- ${"male"===e.gender?r.e`<img class="gender" .src=${Sa.a} />`:null}
                    ${"female"===e.gender?r.e`<img class="gender" .src=${Oa.a} />`:null} -->
                  </div>
                </div>
                <div class="svg">
                  <i-svg .src="${bi.a}"></i-svg>
                </div>
              </div>
              ${Wr.f?r.e`
                    <div class="qr-code" @click=${this.toggleQrcode}>
                      <img .src=${Ca.a} />
                    </div>
                  `:null}
            </div>
            <div class="synchronous">
              <div>
                <div class="title">${Object(Z.i18n)("backup_with_device")}</div>
                <div class="time ${s.syncStore.isOpenSync?"":"hide"}">
                  ${s.syncStore.lastSyncTime?Object(Z.i18n)("last_sync_time",c.a.fmtTime(Number(s.syncStore.lastSyncTime))):Object(Z.i18n)("no_backup_time")}
                </div>
              </div>
              <infinito-switch
                .checked=${s.syncStore.isOpenSync}
                @change=${t=>s.syncStore.changeSyncSwitch(t.detail.checked)}
              ></infinito-switch>
            </div>
            <div class="backup-wrapper">
              <div @click="${this.openSyncList}" class="mange-backup">
                <span>${Object(Z.i18n)("manage_backup_node")}</span>
                <i-svg .src=${bi.a}></i-svg>
              </div>
              <div @click="${this.manualBackup}" class="backup-btn">
                <i-svg .src="${ja.a}"></i-svg>
                <span>${Object(Z.i18n)("backup_now")}</span>
              </div>
            </div>
          `:r.e`
            <div class="user-info">
              <div @click=${this.handleModal}>
                <div class="avatar-img" style="background: url(${Wr.g}); background-size: cover;"></div>
                <div>
                  <div class="user-name">
                    <div class="name">${Object(Z.i18n)("login_register")}</div>
                  </div>
                  <div class="email">${Object(Z.i18n)("want_more")}</div>
                </div>
              </div>
            </div>
          `}

      <infinito-portal-entrance destination="modal">
        <infinito-modal style="--modal-padding: 0;" .open=${i} .onCancel=${this.handleCancel}>
          <div slot="body">
            ${o?r.e`<logining-loading></logining-loading>`:r.e`<user-login ?modalOpen=${this.store.modalOpen}></user-login>`}
          </div>
        </infinito-modal>
        <infinito-modal
          style="--modal-padding: 0;"
          class="user-profile"
          .open=${n}
          .onCancel=${this.closeProfile}
        >
          <div slot="body">
            <user-profile></user-profile>
          </div>
        </infinito-modal>
      </infinito-portal-entrance>
      <infinito-portal-entrance destination="modal-sync-list">
        <infinito-modal
          style="--modal-padding: 0;overflow:hidden"
          .open=${a}
          .onCancel=${this.closeSyncList}
        >
          <div slot="body">
            <modal-sync-list></modal-sync-list>
          </div>
        </infinito-modal>
      </infinito-portal-entrance>
      <infinito-portal-entrance destination="mobile-qrcode">
        <infinito-modal .open=${this.showQrcode} .onCancel=${this.toggleQrcode}>
          <div slot="body">
            <mobile-qrcode
              @on-refresh="${this.refreshQRcode}"
              .url=${s.userStore.mobileloginUrl}
              .expire=${s.userStore.mobileloginExpire}
            ></mobile-qrcode>
          </div>
        </infinito-modal>
      </infinito-portal-entrance>
    `}openProfile(){this.store.openProfileModal(),this.store.getUserProfile()}handleModal(){this.store.openModal()}manualBackup(){G.IConfirm.create().toShow({title:Object(Z.i18n)("backup_now"),text:Object(Z.i18n)("confirm_cover_remote"),onConfirm:()=>{s.syncStore.manualBackup()}})}createRenderRoot(){return this}};ps([Object(r.g)({type:Boolean})],hs.prototype,"showQrcode",void 0),hs=ps([Object(r.c)("user-card")],hs);var us=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let gs=class extends a.a{constructor(){super(...arguments),this.showCard=!1,this.list=[{key:""}]}_permissionAll(){s.settingStore.requestAllPermission()}_permission(t){s.settingStore.requestPermission(t,!0)}render(){return r.e`
      <div class="wrapper">
        <div class="header">${Object(Z.i18n)("need_you_permission")}</div>
        <div class="items global-scrollbar">
          ${s.settingStore.needPermissionList.map(t=>r.e` <div class="item">
              <div class="item-header">
                <div class="item-title">${t.title}</div>
                <infinito-button
                  class="item-btn"
                  primary
                  @click="${()=>{this._permission(t.key)}}"
                >
                  ${Object(Z.i18n)("permission")}
                </infinito-button>
              </div>
              <div class="item-content">
                <span>${t.content}</span>
              </div>
            </div>`)}
        </div>
        <div class="footer">
          <infinito-button @click="${this._permissionAll}" class="footer-btn" primary
            >${Object(Z.i18n)("permission_all")}</infinito-button
          >
        </div>
      </div>
    `}};gs.styles=[A.a,r.b`
      .wrapper {
        width: 370px;
        box-sizing: border-box;
      }
      .header {
        margin-top: 16px;
        margin-bottom: 20px;
        margin-left: 20px;
        margin-right: 20px;
        font-size: 20px;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
        line-height: 28px;
        text-align: center;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .items {
        max-height: 420px;
      }
      .item {
        margin-left: 20px;
        margin-right: 20px;
        display: flex;
        flex-direction: column;
        padding: 14px 0;
        border-bottom: 1px solid #eeeeee;
      }
      .item:last-of-type {
        border-bottom: none;
      }
      .item-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .item-title {
        max-width: 200px;
        font-size: 16px;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
        line-height: 26px;
      }
      .item-btn {
        min-width: 56px;
        height: 28px;
        background: rgba(239, 239, 239, 1);
        border-radius: 6px;
        cursor: pointer;
        outline: none;
        border: none;
        font-size: 14px;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
        line-height: 20px;
        transition: background 0.3s, color 0.3s;
      }
      .item-btn:hover {
        background: rgba(51, 51, 51, 1);
        color: rgba(255, 255, 255, 1);
      }
      .item-content {
        margin-top: 4px;
        font-size: 14px;
        font-weight: 400;
        color: rgba(101, 101, 101, 1);
        line-height: 20px;
        word-break: break-all;
      }
      .footer {
        margin-left: 20px;
        margin-right: 20px;
        margin-top: 20px;
        text-align: center;
      }
      .footer-btn {
        width: 100%;
        height: 52px;
        border-radius: 6px;
        font-weight: 500;
        color: rgba(255, 255, 255, 1);
        line-height: 22px;
        --hover-color: #000;
        --font-size: 16px;
      }
    `],us([Object(r.g)({type:Boolean})],gs.prototype,"showCard",void 0),gs=us([Object(r.c)("user-permission-modal")],gs);var fs=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let ms=class extends a.a{constructor(){super(...arguments),this.showCard=!1,this._openCard=()=>{this.showCard=!0},this._closeCard=()=>{this.showCard=!1}}render(){const t=s.settingStore.needPermissionList.length;return 0===t&&(this.showCard=!1),r.e`
      ${t>0?r.e` <infinito-card>
            <div class="entry" @click=${this._openCard}>
              <div class="tips">
                <span class="circle"></span>
                <span>${Object(Z.i18n)("fully_authorized_to_use")}(${t})</span>
              </div>
              <i-svg class="svg" .src="${bi.a}"></i-svg>
            </div>
          </infinito-card>`:r.e``}
      <infinito-portal-entrance destination="user-permission">
        <infinito-modal
          .open=${this.showCard&&t>0}
          .onCancel=${this._closeCard}
        >
          <div slot="body">
            <user-permission-modal></user-permission-modal>
          </div>
        </infinito-modal>
      </infinito-portal-entrance>
    `}};ms.styles=r.b`
    .entry {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 14px;
      font-weight: 400;
      color: rgba(51, 51, 51, 1);
      line-height: 26px;
      cursor: pointer;
      margin-bottom: -10px;
    }
    .entry .circle {
      margin-right: 8px;
      display: inline-block;
      border-radius: 50%;
      width: 12px;
      height: 12px;
      background: rgba(255, 127, 59, 1);
    }
    .entry .svg {
      width: 18px;
      height: 18px;
    }
    .card {
      width: 410px;
      min-height: 200px;
      border-radius: 6px;
    }
  `,fs([Object(r.g)({type:Boolean})],ms.prototype,"showCard",void 0),ms=fs([Object(r.c)("user-permission")],ms);var bs=i(168),ys=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let vs=class extends r.a{constructor(){super(...arguments),this.show=!1,this.firstShowQQ=!0,this.qq="172263837",this.loading=!1}async generateRepairFile(){this.loading=!0;try{const t=await s.syncStore.getAllBackupData(),e=await bs.a.exportDebugData()||{},i={version:"v2-repair",browserEnv:l.c,editionEnv:l.e,backupType:"local",time:(new Date).getTime(),extVersion:l.D.extVersion,backupData:t,data:e};c.a.exportJsonFile(i,"infinityRepair-"),S.a.sendEvent({action:"exportRepair"})}catch(t){}this.loading=!1}async getQQ(){const{data:t,error:e}=await mt.c.getRepairConcat();e||(null==t?void 0:t.qq)&&(this.qq=t.qq,this.firstShowQQ=!1)}updated(t){t.has("show")&&!0===this.show&&this.firstShowQQ&&this.getQQ()}render(){return r.e`
      <div class="layout-body">
        <div class="layout-title">${i18n("repair_data_title")}</div>
        <div class="layout-content">
          <div class="main">
            <div class="desc">${i18n("repair_data_desc_contnet")}</div>
            <div class="concat">
              <div class="concat-title">${i18n("repair_concat")}</div>
              <div class="concat-qq">
                <span>${i18n("repair_concat_qq")}</span><span class="concat-text">${this.qq}</span>
              </div>
              <div class="concat-email">
                <span>${i18n("repair_concat_email")}</span><span class="concat-text">infinitynewtab@gmail.com</span>
              </div>
            </div>
          </div>
          <div class="footer">
            <infinito-button .disabled="${this.loading}" primary @click="${this.generateRepairFile}">
              ${i18n("repair_export_btn")}</infinito-button
            >
          </div>
        </div>
      </div>
    `}};vs.styles=[r.b`
      .layout-body {
        box-sizing: border-box;
        width: 360px;
        padding: 20px 40px;
      }
      .layout-title {
        margin-top: 30px;
        margin-bottom: 14px;
        text-align: center;
        font-size: 18px;
        font-weight: 500;
        color: #333333;
        line-height: 26px;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }

      .desc {
        margin-top: 14px;
        margin-bottom: 16px;
        font-size: 12px;
        font-weight: 400;
        color: #b3b3b3;
        line-height: 19px;
      }
      .concat-title {
        margin-bottom: 8px;
        font-size: 12px;
        font-weight: 500;
        color: #333333;
        line-height: 16px;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      .concat-qq,
      .concat-email {
        margin-bottom: 4px;
        font-size: 12px;
        font-weight: 400;
        color: #4d4d4d;
        line-height: 16px;
        white-space: nowrap;
      }
      .footer infinito-button {
        margin-top: 24px;
        margin-bottom: 10px;
        height: 42px;
      }
      .concat-text {
        user-select: text;
      }
    `],ys([Object(r.g)({type:Boolean})],vs.prototype,"show",void 0),ys([Object(r.f)()],vs.prototype,"qq",void 0),ys([Object(r.f)()],vs.prototype,"loading",void 0),vs=ys([Object(r.c)("modal-repair-contact")],vs);var ws=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let xs=class extends r.a{constructor(){super(...arguments),this.show=!1,this.loading=!1,this.contactModal=!1,this.updateText=i18n("update_data"),this.generateBackupFile=async()=>{localStorage.setItem("backup-file",""+Date.now());const t=await s.syncStore.getAllBackupData(),e={version:"v2",browserEnv:l.c,editionEnv:l.e,backupType:"local",time:(new Date).getTime(),extVersion:l.D.extVersion,data:t};c.a.exportJsonFile(e,"infinityBackup-")},this.showContactModal=()=>{const t=new CustomEvent("on-contact",{bubbles:!0,composed:!0});this.dispatchEvent(t)}}firstUpdated(){this.updateText=i18n("update_data")}async reUpdate(){this.loading=!0;const t=localStorage.getItem("backup-file");let e=0;t&&Date.now()-Number(t)<6e4?e=0:(this.updateText=i18n("repair_auto_backup"),await this.generateBackupFile(),e=2e3),setTimeout(()=>{localStorage.removeItem("user-checkout-old-data"),localStorage.setItem("bg-updating",""+Date.now()),localStorage.setItem("updating-manual","true"),Gi.slave.sendMessage("tabs-reload"),c.a.send({key:"bg-update",data:"9.9.9"}),setTimeout(()=>{location.reload()},20)},e)}close(){const t=new CustomEvent("on-closerepair",{bubbles:!0,composed:!0});this.dispatchEvent(t),this.show=!1}render(){return r.e`
      <infinito-modal style="--modal-padding:0;" .onCancel="${this.close}" .open=${this.show}>
        <div class="layout-body" slot="body">
          <div class="layout-title">${i18n("update_or_repair_data")}</div>
          <div class="layout-content">
            <div class="main">
              <div class="desc">${i18n("update_desc_1")}</div>
              <div class="desc">${i18n("update_desc_2")}</div>
              <div class="desc desc-tip">
                <img src="${i(774)}" alt="" />
                <span>${i18n("update_desc_3")}</span>
              </div>
            </div>
            <div class="footer">
              <infinito-button primary @click="${this.generateBackupFile}"
                >${i18n("export_local_data")}</infinito-button
              >
              <infinito-button .disabled="${this.loading}" @click="${this.reUpdate}"
                >${this.updateText}</infinito-button
              >
              <div class="btn contact">
                <span @click="${this.showContactModal}">${i18n("contact_engineer")}</span>
              </div>
            </div>
          </div>
        </div>
      </infinito-modal>
    `}};xs.styles=[r.b`
      .layout-body {
        box-sizing: border-box;
        width: 360px;
        padding: 20px 40px;
      }
      .layout-title {
        margin-top: 30px;
        margin-bottom: 14px;
        text-align: center;
        font-size: 18px;
        font-weight: 500;
        color: #333333;
        line-height: 26px;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }

      .desc {
        margin-bottom: 12px;
        font-size: 12px;
        font-weight: 400;
        color: #b3b3b3;
        line-height: 20px;
      }
      .desc-tip {
        margin-top: 8px;
        margin-bottom: 24px;
        font-size: 12px;
        font-weight: 400;
        color: #ff3838;
        line-height: 16px;
      }
      .desc-tip img,
      .desc-tip span {
        vertical-align: middle;
      }
      .concat-title {
        margin-bottom: 8px;
        font-size: 12px;
        font-weight: 500;
        color: #333333;
        line-height: 16px;
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      .concat-qq,
      .concat-email {
        margin-bottom: 4px;
        font-size: 12px;
        font-weight: 400;
        color: #4d4d4d;
        line-height: 16px;
        white-space: nowrap;
        text-overflow: ellipsis;
      }
      .footer infinito-button {
        margin-bottom: 10px;
        height: 42px;
      }
      .btn.contact {
        margin-top: 16px;
        margin-bottom: 20px;
        text-align: center;
        font-size: 14px;
        font-weight: 500;
        color: #b3b3b3;
        line-height: 20px;
      }
      .btn.contact span {
        cursor: pointer;
      }
    `],ws([Object(r.g)({type:Boolean})],xs.prototype,"show",void 0),ws([Object(r.g)({type:Boolean})],xs.prototype,"loading",void 0),ws([Object(r.f)()],xs.prototype,"contactModal",void 0),ws([Object(r.f)()],xs.prototype,"updateText",void 0),xs=ws([Object(r.c)("side-repair-modal")],xs);var _s=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const ks=[{src:"twitter_icon",title:"twitter"},{src:"linked_icon",title:"linkedin"},{src:"facebook_icon",title:"facebook"},{src:"google_icon",title:"google"},{src:"zone_icon",title:"qzone"},{src:"qq_icon",title:"qq"},{src:"douban_icon",title:"douban"},{src:"xinlang_icon",title:"weibo"}].map(t=>Object.assign(Object.assign({},t),{src:i(665)(`./${t.src}.png`)})),Os=[{href:"https://twitter.com/infinitynewtab",src:"twitter_icon",title:Object(Z.i18n)("twitter")},{href:"https://www.facebook.com/people/Infinity-Newtab/100017954043897",src:"facebook_icon",title:Object(Z.i18n)("facebook")},{href:"http://weibo.com/u/5868302170",src:"xinlang_icon",title:Object(Z.i18n)("xin_lang_weibo")}].map(t=>Object.assign(Object.assign({},t),{src:i(665)(`./${t.src}.png`)}));let As=class extends a.a{constructor(){super(...arguments),this.payType="alipay",this.donateMoney="10",this.showDonateMoney=!1,this.qqgroupModalStatus=!1,this.repairModal=!1,this.focusRepair=!1,this.repairContactModal=!1,this.closeModal=()=>{this.showDonateMoney=!1},this.openWallPaperSource=()=>{},this.recoveryFromFile=async()=>{let t=".infinity,text/plain,application/json";l.r&&(t="*");const e=await c.a.chooseFile(t,"readAsText");try{const t=JSON.parse(e);let i={};if("v2"===t.version)i=t.data;else{if(10!==t.version)return void Di.default.error(Object(Z.i18n)("recover_error_version"));i=await da(t)}s.syncStore.useLocalDataWithCheck(i),S.a.sendEvent({action:"localRecovery"})}catch(t){Di.default.error(Object(Z.i18n)("recover_error")),console.error("recovery error:",t)}},this.generateBackupFile=async()=>{localStorage.setItem("backup-file",""+Date.now());const t=await s.syncStore.getAllBackupData(),e={version:"v2",browserEnv:l.c,editionEnv:l.e,backupType:"local",time:(new Date).getTime(),extVersion:l.D.extVersion,data:t};c.a.exportJsonFile(e,"infinityBackup-"),S.a.sendEvent({action:"localBackup"})},this.openRepairModal=async()=>{localStorage.setItem("user-checkout-old-data","true");let t=!1;if(l.l){const{checkOldLocalData:e}=await i.e(9).then(i.bind(null,836));t=await e()}t?this.repairModal=!0:this.openRepairContactModal()},this.closeRepairModal=()=>{this.repairModal=!1},this.closeContactModal=()=>{this.repairContactModal=!1},this.openRepairContactModal=()=>{this.repairContactModal=!0}}changeWallPaper(t){t.stopPropagation();this.shadowRoot.querySelector(".wallpaper-source").classList.toggle("open")}giveFiveStar(t){const e=window.chrome.runtime.id;if(l.i){const i=Object(Wr.c)(e);c.a.openUrl(i,!0,t)}if(l.n&&c.a.openUrl(Wr.a,!0,t),l.k){const i=Object(Wr.d)(e);c.a.openUrl(i,!0,t)}if(l.r){const t="itms-apps://apps.apple.com/cn/app/"+"id1600202109";window.open(t,"_blank")}}feedback(t){c.a.openUrl("https://infinity.mikecrm.com/x5tPd5V",!0,t)}radioChange(t){this.donateMoney=t.detail.selected}giveMoney(t){t.stopPropagation(),t.preventDefault(),this.showDonateMoney=!0}follow(t,e){c.a.openUrl(e,!0,t)}share(t){const{href:e}=t.currentTarget;c.a.openUrl(e,!0,t)}showRepairAnimation(){try{this.shadowRoot.querySelector(".repair-card").scrollIntoView({block:"nearest"})}catch(t){}setTimeout(()=>{this.focusRepair=!0},0)}firstUpdated(){if(l.d){const t=new Date(Number(l.d));console.log("versionTime:"+t.toLocaleString())}document.body.addEventListener("click",this.openWallPaperSource);const t=l.i?"Chorme":l.n?"Firefox":"Edge";window.socialShare(this.container,{url:"https://infinitynewtab.com",source:"infinitynewtab",image:"https://infinity-permanent.infinitynewtab.com/infinity/share/home.jpg",title:Object(Z.i18n)("share_title",t),description:Object(Z.i18n)("share_desc"),sites:["twitter","facebook","google","linkedin","qzone","qq","douban","weibo"]}),this.$repair.addEventListener("animationcancel",t=>{"focusblink"===t.animationName&&(this.focusRepair=!1,s.pluginStore.blurRepair())}),this.$repair.addEventListener("animationend",t=>{"focusblink"===t.animationName&&(this.focusRepair=!1,s.pluginStore.blurRepair())})}disconnectedCallback(){document.body.removeEventListener("click",this.openWallPaperSource)}render(){return r.e`
      <div style="height:100%;box-sizing: border-box; padding: 30px;padding-right:0;" class="global-scrollbar">
        <div style="width:360px;" class="container">
          <user-permission></user-permission>
          <infinito-card style="--padding-width:20px 20px 12px 20px">
            <user-card></user-card>
          </infinito-card>
          <infinito-card class="backup-recovery" cTitle="${Object(Z.i18n)("backup_and_recovery")}">
            <div class="backup-btn-box">
              <div class="backup-btn-card">
                <div class="backup-btn-content">
                  <div class="backup-btn" @click="${this.generateBackupFile}">
                    <div class="backup-btn-title">
                      <span class="backup-btn-title-text">${Object(Z.i18n)("export_local_data")}</span>
                      <i-svg .src=${bi.a}></i-svg>
                    </div>
                    <span class="backup-btn-desc">${Object(Z.i18n)("export_local_data_desc")}</span>
                  </div>
                </div>
              </div>
              <div class="backup-btn-card">
                <div class="backup-btn-content">
                  <div class="backup-btn" @click="${this.recoveryFromFile}">
                    <div class="backup-btn-title">
                      <span class="backup-btn-title-text">${Object(Z.i18n)("import_data")}</span>
                      <i-svg .src=${bi.a}></i-svg>
                    </div>
                    <span class="backup-btn-desc">${Object(Z.i18n)("import_data_desc")}</span>
                  </div>
                </div>
              </div>
              <div class="backup-btn-card repair-card ${this.focusRepair?"focus":""}">
                <div class="backup-btn-content">
                  <div class="backup-btn" @click="${this.openRepairModal}">
                    <div class="backup-btn-title">
                      <span class="backup-btn-title-text">${Object(Z.i18n)("repair_data")}</span>
                      <i-svg .src=${bi.a}></i-svg>
                    </div>
                    <span class="backup-btn-desc">${Object(Z.i18n)("repair_data_title")}</span>
                  </div>
                </div>
              </div>
            </div>
          </infinito-card>
          <side-repair-modal
            .show="${this.repairModal}"
            @on-contact="${this.openRepairContactModal}"
            @on-closerepair="${this.closeRepairModal}"
          ></side-repair-modal>
          <infinito-portal-entrance destination="modal-repair-contact">
            <infinito-modal .open=${this.repairContactModal} .onCancel=${this.closeContactModal}>
              <div slot="body">
                <modal-repair-contact .show=${this.repairContactModal}></modal-repair-contact>
              </div>
            </infinito-modal>
          </infinito-portal-entrance>

          <infinito-card cTitle="${Object(Z.i18n)("user_evaluation")}">
            <p>${l.s?Object(Z.i18n)("give_some_feedback_to_improve_web"):Object(Z.i18n)("give_some_feedback_to_improve")}</p>
            <div class="btns rating">
              ${l.s?null:r.e` <infinito-button @click="${this.giveFiveStar}">${Object(Z.i18n)("five_star")}</infinito-button> `}

              <infinito-button @click="${this.feedback}">${Object(Z.i18n)("feedback")}</infinito-button>
            </div>
          </infinito-card>
          ${Z.IS_ZH?r.e`
                <infinito-card cTitle="${Object(Z.i18n)("give_money")}">
                  <div class="payment">
                    <p>${Object(Z.i18n)("give_money_thanks")}</p>
                    <img class="payment-cover" .src=${Mr.a} />
                  </div>
                  <div class="choose-plan">
                    <infinito-radio-group selected="${this.donateMoney}" @on-change=${this.radioChange}>
                      <infinito-radio value="10">${Object(Z.i18n)("currency_symbol")}10</infinito-radio>
                      <infinito-radio value="15">${Object(Z.i18n)("currency_symbol")}15</infinito-radio>
                      <infinito-radio value="20">${Object(Z.i18n)("currency_symbol")}20</infinito-radio>
                      <infinito-radio value="25">${Object(Z.i18n)("currency_symbol")}25</infinito-radio>
                      <infinito-radio value="0">${Object(Z.i18n)("currency_symbol")}${Object(Z.i18n)("any_money")}</infinito-radio>
                    </infinito-radio-group>
                  </div>
                  <div class="btns" style="justify-content: center;">
                    <infinito-button @click="${this.giveMoney}}">${Object(Z.i18n)("i_want_to_reward")}</infinito-button>
                  </div>
                </infinito-card>
                <infinito-card cTitle="${Object(Z.i18n)("follow_wechat")}">
                  <p class="wechat_desc">${Object(Z.i18n)("follow_wechat_desc")}</p>
                  <div class="wechat">
                    <img .src="${Hr.a}" />
                  </div>
                </infinito-card>
              `:null}
          <infinito-card cTitle="${Object(Z.i18n)("share")}">
            <div class="icons social-share" data-initialized="true">
              ${ks.map(t=>r.e`
                    <p class="icon-${t.title}" @click=${this.share}>
                      <img .src="${t.src}" />
                    </p>
                  `)}
            </div>
          </infinito-card>
          <infinito-card cTitle="${Object(Z.i18n)("follow_us")}">
            <div class="icons">
              ${Os.map(t=>r.e`
                    <p @click="${e=>this.follow(e,t.href)}">
                      <img .src="${t.src}" />
                    </p>
                  `)}
            </div>
          </infinito-card>
          <infinito-card cTitle="${Object(Z.i18n)("support")}">
            <div class="btns suport">
              <infinito-button
                class="facebook-group"
                @click=${t=>this.handleOpenUrl(t,"https://www.facebook.com/groups/464169353959006/")}
              >
                <img src="${Nr.a}" />
                <span>${Object(Z.i18n)("facebook_group")}</span>
              </infinito-button>
              <infinito-button
                class="qq-group"
                @click=${t=>this.handleOpenQQUrl(t)}
              >
                <img src="${Fr.a}" />
                <span>${Object(Z.i18n)("qq_group")}</span>
              </infinito-button>
            </div>
          </infinito-card>
          <infinito-card cTitle="${Object(Z.i18n)("about")}">
            <p class="version">v${l.z}</p>
            <ul class="about-us">
              <li @click=${t=>this.handleOpenUrl(t,"https://policies.extfans.com/policies/about.html")}>
                <span>${Object(Z.i18n)("about_us")}</span>
              </li>
              <li @click=${t=>this.handleOpenUrl(t,"https://policies.extfans.com/policies/contact.html")}>
                <span>${Object(Z.i18n)("contact_us")}</span>
              </li>
              <li title=${Object(Z.i18n)("privacy_policy")} @click=${t=>this.handleOpenUrl(t,c.a.getPrivacyUrl())}>
                <span>${Object(Z.i18n)("privacy_policy")}</span>
              </li>
              <li @click=${t=>this.handleOpenUrl(t,"https://policies.extfans.com/policies/terms.html")}>
                <span>${Object(Z.i18n)("term_of_use")}</span>
              </li>
            </ul>
          </infinito-card>

          <div class="icp ${Z.IS_ZH&&l.s?"":"hide"}">
            <a class="icp-link" target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index"
              >渝ICP备15002199号-11</a
            >
          </div>
        </div>
        <infinito-portal-entrance destination="donate">
          <donate-section
            .open=${this.showDonateMoney}
            .payType=${this.payType}
            .donateMoney=${this.donateMoney}
            @on-cancel=${this.closeModal}
          ></donate-section>
        </infinito-portal-entrance>
        <infinito-portal-entrance destination="qqgroup">
          <qqgroup-section
            .open=${this.qqgroupModalStatus}
            @on-cancel=${this.closeQQgroupModal}
          ></qqgroup-section>
        </infinito-portal-entrance>
      </div>
    `}handleOpenUrl(t,e){c.a.openUrl(e,!0,t)}handleOpenQQUrl(t){l.k?this.qqgroupModalStatus=!0:c.a.openUrl("http://qm.qq.com/cgi-bin/qm/qr?k=WYvnxT5rIeATl2wm4T2Dkc0sajWbbCjE&group_code=194737859",!0,t)}closeQQgroupModal(){this.qqgroupModalStatus=!1}};As.styles=[A.a,Lr],_s([Object(r.g)({type:String})],As.prototype,"payType",void 0),_s([Object(r.g)({type:String})],As.prototype,"donateMoney",void 0),_s([Object(r.g)({type:Boolean})],As.prototype,"showDonateMoney",void 0),_s([Object(r.g)({type:Boolean})],As.prototype,"qqgroupModalStatus",void 0),_s([Object(r.g)({type:Boolean})],As.prototype,"show",void 0),_s([Object(r.g)({type:Boolean})],As.prototype,"repairModal",void 0),_s([Object(r.g)({type:Boolean})],As.prototype,"focusRepair",void 0),_s([Object(r.g)({type:Boolean})],As.prototype,"repairContactModal",void 0),_s([Object(r.h)(".social-share")],As.prototype,"container",void 0),_s([Object(r.h)(".repair-card")],As.prototype,"$repair",void 0),As=_s([Object(r.c)("side-user")],As);var Ss=i(106),Is=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const js=[{key:"history",label:Object(Z.i18n)("open_newtab_history"),type:"switch"}],$s=[{key:"bookmark",label:Object(Z.i18n)("open_newtab_bookmarks"),type:"switch"}],Cs=[{key:"icon",label:Object(Z.i18n)("open_new_tab"),type:"switch"},{key:"search",label:Object(Z.i18n)("open_newtab_show_search"),type:"switch"},...l.s||l.r?[]:$s,...l.h||l.s||l.r?[]:js],Es=[...l.h||l.s?[]:[{key:"gmail",label:Object(Z.i18n)("gamil_notice"),type:"switch"},...l.r?[]:[{key:"gmailVoice",label:Object(Z.i18n)("gmail_notice_voice"),type:"switch"}],{key:"gmailNumber",label:Object(Z.i18n)("show_gamil_unread_number"),type:"switch",miniHide:!0}],{key:"todoNumber",label:Object(Z.i18n)("show_reminders_number"),type:"switch",miniHide:!0}],Ts=[{key:"scaleMain",label:Object(Z.i18n)("scale_main"),type:"slider",min:.5,max:1.5,step:.01,percentage:!0},{key:"scaleSide",label:Object(Z.i18n)("scale_side"),type:"slider",min:.5,max:1.5,step:.01,percentage:!0},{key:"windmill",label:Object(Z.i18n)("wind_mill"),type:"switch"},...l.s||l.r?[]:[{key:"topUseful",label:Object(Z.i18n)("top_use_ful"),type:"switch"},{key:"topBookmark",label:Object(Z.i18n)("top_bookmark"),type:"switch"}],{key:"pagin",label:Object(Z.i18n)("pagin"),type:"switch",miniHide:!0},...l.s?[{key:"isShowHomepageBtn",label:Object(Z.i18n)("hide_homepage_btn"),type:"switch"}]:[],...l.s&&Z.IS_ZH?[{key:"isHideIcp",label:"隐藏备案号",type:"switch"}]:[]],Ps=[{key:"colGap",label:Object(Z.i18n)("col_gap"),type:"slider",min:0,max:1,step:.01,percentage:!0},{key:"rowGap",label:Object(Z.i18n)("row_gap"),type:"slider",min:0,max:1,step:.01,percentage:!0},{cardKey:"icon",key:"scale",label:Object(Z.i18n)("scale"),type:"slider",min:.1,max:1,step:.01,percentage:!0}],Rs=[{key:"isHideIconName",label:Object(Z.i18n)("hide_icon_name"),type:"switch"},{key:"shadow",label:Object(Z.i18n)("shadow"),type:"switch"},{key:"startAnimation",label:Object(Z.i18n)("start_animation"),type:"switch"},{key:"radius",label:Object(Z.i18n)("redius"),type:"slider",min:0,max:.5,step:.01,percentage:!0},{key:"opacity",label:Object(Z.i18n)("opacity"),type:"slider",min:.1,max:1,step:.01,percentage:!0},{key:"scale",label:Object(Z.i18n)("scale"),type:"slider",min:.1,max:1,step:.01,percentage:!0}],Ls=[{key:"hide",label:Object(Z.i18n)("hide_search_input"),type:"switch"},{key:"searchSuggest",label:Object(Z.i18n)("search_suggest"),type:"switch"},{key:"keepSearchInput",label:Object(Z.i18n)("keep_search_input"),type:"switch"},{key:"hideCategory",label:Object(Z.i18n)("hide_search_category"),type:"switch"},{key:"hideButton",label:Object(Z.i18n)("hide_search_button"),type:"switch"},{key:"scale",label:Object(Z.i18n)("search_size"),type:"slider",min:.5,max:1.5,step:.01,percentage:!0},{key:"radius",label:Object(Z.i18n)("search_redius"),type:"slider",min:0,max:.5,step:.01,percentage:!0},{key:"opacity",label:Object(Z.i18n)("search_opacity"),type:"slider",min:.1,max:1,step:.01,percentage:!0}],Ds=[{key:"shadow",label:Object(Z.i18n)("text_shadow"),type:"switch",miniHide:!0},{key:"size",label:Object(Z.i18n)("font_size"),type:"slider",min:12,max:30,miniHide:!0}];class Ms{constructor(){if(this.layoutView={key:"layout",title:Object(Z.i18n)("layout"),children:Ps,custom:!0,miniHide:!0},this.viewData=[{key:"wallpaper",title:Object(Z.i18n)("wallpaper"),custom:!0},{key:"link",title:Object(Z.i18n)("target_open_way"),tip:Object(Z.i18n)("only_used_infinity"),children:Cs},{key:"notice",title:Object(Z.i18n)("notice"),children:Es},{key:"view",title:Object(Z.i18n)("view"),children:Ts},Object.assign({},this.layoutView),{key:"icon",title:Object(Z.i18n)("icon"),children:Rs,miniHide:!0},{key:"search",title:Object(Z.i18n)("search_input"),children:Ls},{key:"font",title:Object(Z.i18n)("font"),children:Ds,custom:!0},{key:"animation",title:Object(Z.i18n)("animation"),tip:Object(Z.i18n)("animation_tips"),custom:!0,miniHide:!0}],this.layout={list:[[2,4],[2,5],[2,6],[2,7],[3,3]],activeIndex:null,modal:!1},this.animationList=[{label:Object(Z.i18n)("default"),easing:"linear",icon:Object(it.a)("setting/animate-default.png"),iconActive:Object(it.a)("setting/animate-default-active.png")},{label:Object(Z.i18n)("cubic_bezier"),easing:"elastic",icon:Object(it.a)("setting/animate-bounce.png"),iconActive:Object(it.a)("setting/animate-bounce-active.png")},{label:Object(Z.i18n)("ease_in"),easing:"opacity",icon:Object(it.a)("setting/animate-easin.png"),iconActive:Object(it.a)("setting/animate-easin-active.png")}],this.animationIndex=null,this.fontColors=["rgba(255,255,255,0.8)","#df5f47","#efa738","#faec63","#73b364","#60c0d6","#57a0ee","#6c4cb9"],this.closed=new Set,l.s){const t=this.viewData.findIndex(({key:t})=>"view"===t);this.viewData.splice(t,0,{key:"language",title:Object(Z.i18n)("language"),custom:!0})}}chooseLayout(t){if(t===this.layout.list.length-1)s.settingStore.changeSetting("layout","custom",!0),s.settingStore.setting.layout.row===s.settingStore.setting.layout.customItem[0]&&s.settingStore.setting.layout.col===s.settingStore.setting.layout.customItem[1]||s.settingStore.changeSetting("layout","customItem",[s.settingStore.setting.layout.row,s.settingStore.setting.layout.col]);else{const e=this.layout.list[t];s.settingStore.changeSetting("layout","custom",!1),s.settingStore.changeSetting("layout","row",e[0]),s.settingStore.changeSetting("layout","col",e[1]);const i=Object(Ss.a)(e[0],e[1]);i&&s.settingStore.setIconSpace(i)}}changeLayoutModal(t){t&&this.chooseLayout(5),this.layout.modal=t}chooseAnimation(t){const e=this.animationList[t];s.settingStore.changeSetting("animation","easing",e.easing)}chooseFontClolor(t){s.settingStore.changeSetting("font","color",t)}close(t){this.closed.add(t)}open(t){this.closed.delete(t)}}Is([x.g],Ms.prototype,"layout",void 0),Is([x.g],Ms.prototype,"animationIndex",void 0),Is([x.g],Ms.prototype,"closed",void 0),Is([x.b],Ms.prototype,"chooseLayout",null),Is([x.b],Ms.prototype,"changeLayoutModal",null),Is([x.b],Ms.prototype,"chooseAnimation",null),Is([x.b],Ms.prototype,"chooseFontClolor",null),Is([x.b],Ms.prototype,"close",null),Is([x.b],Ms.prototype,"open",null);const Us=new Ms;Object(x.c)(()=>{if(s.settingStore.firstSync){const{col:t,row:e,custom:i,customItem:o}=s.settingStore.setting.layout,n=5;Object(x.i)(()=>{if(Us.layout.list[n]=o,i)Us.layout.activeIndex=n;else{const i=[e,t],o=Us.layout.list.findIndex(t=>i.join(",")===t.join(","));Us.layout.activeIndex=o}})}}),Object(x.c)(()=>{if(s.settingStore.firstSync){const{easing:t}=s.settingStore.setting.animation;Object(x.i)(()=>{const e=Us.animationList.findIndex(e=>e.easing===t);Us.animationIndex=e})}});var Ns=r.b`.side-setting {
  height: calc(100% - 56px);
}
.side-setting .header-box {
  width: 420px;
  display: flex;
  justify-content: center;
}
.side-setting .header {
  max-width: 360px;
  margin: 12px 0;
  height: 32px;
  box-sizing: border-box;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  background: rgba(0, 0, 0, 0.05);
  font-size: 14px;
  font-weight: 400;
  color: #454545;
}
.side-setting .header .tab {
  margin: 2px;
  padding: 4px 18px;
  box-sizing: content-box;
  height: 20px;
  line-height: 20px;
  cursor: pointer;
  border-radius: 6px;
  transition: background 0.2s, color 0.2s;
  word-break: keep-all;
  text-overflow: ellipsis;
  overflow: hidden;
}
.side-setting .header .tab:hover {
  background: #ffffff;
  color: #333333;
}
.side-setting .header .tab:last-of-type {
  margin-left: 0;
}
.side-setting .header .active {
  border-radius: 6px;
  background: #ffffff;
  color: #333333;
}
infinito-card {
  width: 360px;
  transition: margin-top 0.3s ease-in-out;
}
infinito-card[close] + infinito-card:not([close]) {
  margin-top: 30px;
}
infinito-card:not([close]) + infinito-card[close] {
  margin-top: 30px;
}
.tips {
  margin-top: 6px;
  display: block;
  font-size: 13px;
  font-weight: 400;
  color: #999999;
  line-height: 18px;
}
.rule-box {
  display: flex;
  justify-content: space-between;
  margin-top: 24px;
}
.rule-box .rule {
  color: #454545;
  font-weight: 400;
  word-break: keep-all;
  text-overflow: ellipsis;
  overflow: hidden;
  margin-right: 10px;
  height: 20px;
  line-height: 20px;
}
.rule-box.slider-type {
  flex-direction: column;
}
.rule-box.slider-type .rule-option {
  margin: 10px 0 0;
  padding-left: 4px;
  box-sizing: border-box;
  width: calc(100% + 10px);
}
.rule-box.scale-side {
  margin: 0 0 -16px;
  padding: 20px 0;
  box-sizing: border-box;
}
.layout-custom {
  margin: 24px 0 -20px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-row-gap: 20px;
  grid-column-gap: 20px;
}
.layout-custom .item {
  max-width: 94px;
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
}
.layout-custom .active i-svg,
.layout-custom .active .item-text {
  color: #333333;
}
.layout-custom .active .item-card {
  border: 2px solid #333333;
}
.layout-custom .active .item-card-holder {
  background-color: #fff;
}
.layout-custom .active .item-card-holder.hard {
  background: #333;
}
.layout-custom .item-card {
  width: 100%;
  height: 53px;
  box-sizing: border-box;
  display: grid;
  justify-items: stretch;
  align-items: stretch;
  border-radius: 6px;
  overflow: hidden;
}
.layout-custom .item-card-holder {
  background-color: #f5f5f5;
}
.layout-custom .item-card-holder.hard {
  background: #ebebeb;
}
.layout-custom .item:last-of-type .item-card {
  display: flex;
  justify-content: center;
  align-items: center;
  background: #f5f5f5;
}
.layout-custom i-svg {
  width: 24px;
  height: 24px;
  color: #999999;
}
.layout-custom .item-text {
  margin-top: 6px;
  color: #999999;
}
.animation-card {
  margin-top: 24px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-column-gap: 20px;
}
.animation-card .animation-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
}
.animation-card .item-card {
  background: #f5f5f5;
  border-radius: 6px;
}
.animation-card .item-card img {
  width: 100%;
}
.animation-card .item-card .animateimg {
  display: block;
}
.animation-card .item-text {
  margin-top: 10px;
  color: #999999;
}
.animation-card .active .item-text {
  color: #333333;
}
.rule-box.colors {
  flex-direction: column;
  position: relative;
}
.rule-box.colors .rule-option {
  margin: 20px 0 2px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.btn {
  position: relative;
  display: block;
  outline: 0;
  border: 0;
  width: 122px;
  height: 42px;
  background: #efefef;
  border-radius: 6px;
  font-weight: 500;
  color: #333333;
  cursor: pointer;
}
.btn:hover {
  background: #dedede;
}
.reset-btn {
  margin: 24px auto 0;
}
.language-card .language-item {
  margin-top: 24px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-flow: row nowrap;
}
.language-card .language-select-wrap .label {
  max-width: 110px;
}
.language-card .language-select-wrap .language-select {
  flex: 1;
  width: 0;
  max-width: 120px;
  height: 24px;
  background: #ffffff;
  border-radius: 4px;
  border: 1px solid #dcdcdc;
  line-height: 24px;
  color: #656565;
  font-size: 12px;
}
.wallpaper-container {
  width: 100%;
  margin: 20px 0 0;
}
.wallpaper-container .wp-inner-container {
  position: relative;
  box-sizing: border-box;
  width: 100%;
  height: 180px;
  border-radius: 4px;
  transition: background-color 200ms ease 0s;
}
.wallpaper-container .wp-download-button {
  width: 36px;
  height: 36px;
  position: absolute;
  top: 12px;
  right: 12px;
  border-radius: 50%;
  background-color: rgba(0, 0, 0, 0.2);
  z-index: 2;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 200ms;
  cursor: pointer;
}
.wallpaper-container .wp-download-button:hover {
  background-color: rgba(0, 0, 0, 0.6);
}
.wallpaper-container .wp-inner-container .wp-hover-mask:hover {
  background-color: rgba(0, 0, 0, 0.24);
}
.wallpaper-container .wp-inner-container .wp-hover-mask:hover .wph-mask-button {
  display: block;
}
@media only screen and (hover: none) {
  .wallpaper-container .wp-inner-container .wp-hover-mask {
    background-color: rgba(0, 0, 0, 0.24);
  }
  .wallpaper-container .wp-inner-container .wp-hover-mask .wph-mask-button {
    display: block;
  }
}
.wallpaper-container .wp-hover-mask {
  position: absolute;
  z-index: 1;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  background-color: transparent;
  transition: background-color 150ms;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
}
.wallpaper-container .wp-hover-mask .wph-mask-button {
  display: none;
  max-width: 145px;
  height: 40px;
  background: rgba(51, 51, 51, 0.6);
  border-radius: 4px;
  border: none;
  font-size: 14px;
  font-family: PingFangSC-Regular, PingFang SC;
  color: #ffffff;
  line-height: 20px;
  box-sizing: border-box;
  padding: 0 4px;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  cursor: pointer;
  padding: 0 15px;
}
.wallpaper-container .slider-wrapper {
  margin-top: 30px;
}
.wallpaper-container .mask:first-child {
  margin-bottom: 25px;
}
.wallpaper-container .mask > p {
  font-size: 14px;
  color: #454545;
  font-weight: 400;
  margin-bottom: 17px;
}
`,Bs=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Fs=class extends r.a{constructor(){super(...arguments),this.checked=!1}_changeHandler(t){t.stopPropagation(),this.checked=t.target.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0,composed:!0}))}render(){return r.e`
      <div id="container">
        <input
          hidden
          type="checkbox"
          id="switch"
          .checked=${this.checked}
          @change="${this._changeHandler}"
        >
        <label class="switch" for="switch"></label>
      </div>
    `}};Fs.styles=r.b`
    .switch {
      box-sizing: border-box;
      display: inline-block;
      position: relative;
      width: 24px;
      height: 16px;
      border-radius: 20px;
      border: 2px solid rgba(51, 51, 51, .2);
      transition: background 0.28s cubic-bezier(0.4, 0, 0.2, 1);
      vertical-align: middle;
      cursor: pointer;
    }
    .switch::before {
      content: '';
      position: absolute;
      top: 1px;
      left: 1px;
      width: 10px;
      height: 10px;
      background: rgba(51, 51, 51, .2);
      border-radius: 50%;
      transition: left 0.28s cubic-bezier(0.4, 0, 0.2, 1), background 0.28s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.28s cubic-bezier(0.4, 0, 0.2, 1);
    }
    /* .switch:active::before {
      box-shadow: 0 2px 8px rgba(0,0,0,0.28), 0 0 0 20px rgba(128,128,128,0.1);
    } */
    input:checked + .switch {
      border: 2px solid rgba(51, 51, 51, 1);
    }
    input:checked + .switch::before {
      left: 9px;
      background: rgba(51, 51, 51, 1);
    }
    /* input:checked + .switch:active::before {
      box-shadow: 0 2px 8px rgba(0,0,0,0.28), 0 0 0 20px rgba(0,150,136,0.2);
    } */
  `,Bs([Object(r.g)({type:Boolean})],Fs.prototype,"checked",void 0),Fs=Bs([Object(r.c)("i-switch")],Fs);i(523);var zs=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Hs=class extends r.a{constructor(){super(...arguments),this.value="",this.label="",this.min="",this.max="",this.step="",this.floatScaleRatio=1,this.rect={top:null,left:null,width:null,height:null,right:null},this.floatScale=!1,this.start=null}shouldUpdate(t){if(t.has("floatScale")&&!1===this.floatScale&&this.$container&&this.start){const t={left:this.rect.left-20*this.floatScaleRatio+"px",top:this.rect.top+"px",width:this.rect.width/this.floatScaleRatio+"px",transform:`scale(${this.floatScaleRatio})`};return this.$itemBox.animate([this.start,t],{duration:400,easing:"ease-in-out"}).onfinish=()=>{this.$container.style.opacity="0",this.requestUpdate()},!1}return!0}updated(t){t.has("floatScale")&&!0===this.floatScale&&(this.$container.offsetHeight,this.$container.style.opacity="1",this.start={left:this.rect.left-20*this.floatScaleRatio+"px",top:this.rect.top+"px",width:this.rect.width/this.floatScaleRatio+"px",transform:`scale(${this.floatScaleRatio})`})}render(){const{top:t,left:e,width:i}=this.rect,o=this.floatScaleRatio;return r.e`
      <div class="float-scale" .hidden="${!this.floatScale}">
        <div
          class="item-box"
          style="transform:scale(${o});width:${i/o}px; left:${e-20*o}px;top:${t}px;"
        >
          <span class="rule">${this.label}</span>
          <div class="item">
            <infinito-slider
              .value=${this.value}
              .min=${this.min}
              .max=${this.max}
              .step=${this.step}
              .translator=${t=>Math.round(100*t)+"%"}
            ></infinito-slider>
          </div>
        </div>
      </div>
    `}};Hs.styles=r.b`
    .float-scale {
      opacity: 0;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(0, 0, 0, 0.3);
      z-index: 99999;
      transition: 0.3s opacity;
    }
    .item-box {
      padding: 20px;
      position: absolute;
      background-color: #fff;
      box-shadow: 0px 24px 30px -18px rgba(0, 0, 0, 0.23);
      border-radius: 6px;
      transform-origin: left top;
    }
    .item {
      margin: 10px 0;
      background-color: #fff;
      padding-left: 4px;
      box-sizing: border-box;
      width: calc(100% + 10px);
    }
  `,zs([Object(r.g)()],Hs.prototype,"value",void 0),zs([Object(r.g)()],Hs.prototype,"label",void 0),zs([Object(r.g)()],Hs.prototype,"min",void 0),zs([Object(r.g)()],Hs.prototype,"max",void 0),zs([Object(r.g)()],Hs.prototype,"step",void 0),zs([Object(r.g)({type:Number})],Hs.prototype,"floatScaleRatio",void 0),zs([Object(r.g)({type:Object})],Hs.prototype,"rect",void 0),zs([Object(r.g)({type:Boolean})],Hs.prototype,"floatScale",void 0),zs([Object(r.h)(".float-scale")],Hs.prototype,"$container",void 0),zs([Object(r.h)(".item-box")],Hs.prototype,"$itemBox",void 0),Hs=zs([Object(r.c)("side-float-scale")],Hs);var Ws=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let qs=class extends r.a{constructor(){super(...arguments),this.show=!1}_changeLayoutCustom(t,e){const{customItem:i}=s.settingStore.setting.layout,o=[...i];"row"===t?o[0]=e.detail.value:"col"===t&&(o[1]=e.detail.value),s.settingStore.changeSetting("layout","customItem",o)}_submitLayoutModal(){Us.changeLayoutModal(!1)}_renderDefaultCard(t){var e;if(t)return null===(e=t.children)||void 0===e?void 0:e.map(e=>{var i;const{key:o,type:n,label:a}=e,l=null!==(i=e.cardKey)&&void 0!==i?i:t.key;if(!o)return null;if("switch"===n)return r.e`
          <div class="rule-box">
            <span class="rule">${a}</span>
            <span class="rule-option">
              <i-switch
                @change="${t=>s.settingStore.changeSetting(l,o,t.detail.checked)}"
                ?checked=${s.settingStore.setting[l][o]}
              ></i-switch>
            </span>
          </div>
        `;if("slider"===n){const{min:t=1,max:i=10,step:n=1,percentage:c=!1}=e;return r.e`
          <div class="rule-box slider-type">
            <span class="rule">${a}</span>
            <span class="rule-option">
              <infinito-slider
                @on-change="${t=>s.settingStore.changeSetting(l,o,t.detail.value)}"
                .value=${s.settingStore.setting[l][o]}
                .min=${t}
                .max=${i}
                .step=${n}
                .translator=${c?t=>Math.round(100*t)+"%":null}
              ></infinito-slider>
            </span>
          </div>
        `}return null})}render(){if(!this.show)return null;const{customItem:t}=s.settingStore.setting.layout;return r.e`
      <infinito-modal style="--modal-padding:0;" .onCancel="${this._submitLayoutModal}" .open=${this.show}>
        <div class="layout-body" slot="body">
          <div class="layout-title">${Object(Z.i18n)("custom_layout")}</div>
          <div class="scroll-body global-scrollbar">
            <div class="rule-box slider-type">
              <span class="rule">${Object(Z.i18n)("col_num")}</span>
              <span class="rule-option">
                <infinito-slider
                  @on-change="${t=>this._changeLayoutCustom("row",t)}"
                  .value=${t[0]}
                  .min=${1}
                  .max=${8}
                ></infinito-slider>
              </span>
            </div>
            <div class="rule-box slider-type">
              <span class="rule">${Object(Z.i18n)("row_num")}</span>
              <span class="rule-option">
                <infinito-slider
                  @on-change="${t=>this._changeLayoutCustom("col",t)}"
                  .value=${t[1]}
                  .min=${1}
                  .max=${8}
                ></infinito-slider>
              </span>
            </div>
            ${this._renderDefaultCard(this.card)}
          </div>
        </div>
      </infinito-modal>
    `}};qs.styles=[A.a,r.b`
      .layout-title {
        margin-top: 20px;
        margin-bottom: 20px;
        text-align: center;
        font-size: 20px;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
      }
      .layout-body {
        box-sizing: border-box;
        width: 360px;
        padding-top: 20px;
        padding-bottom: 20px;
      }
      .layout-btns {
        margin-bottom: 20px;
        padding-left: 20px;
        padding-right: 20px;
      }
      .rule-box {
        width: 290px;
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        margin-left: 40px;
        margin-top: 0;
      }

      .rule-box.slider-type {
        flex-direction: column;
        .rule-option {
          margin: 10px 0 0;
          padding-left: 4px;
        }
      }
      .btn {
        position: relative;
        display: block;
        outline: 0;
        border: 0;
        width: 122px;
        height: 42px;
        background: rgba(239, 239, 239, 1);
        border-radius: 6px;
        font-weight: 500;
        color: rgba(51, 51, 51, 1);
        cursor: pointer;
      }
      .btn:hover {
        background: rgba(222, 222, 222, 1);
      }
      .submit-btn {
        margin: 50px auto 0;
        width: 280px;
        max-width: 100%;
        height: 52px;
        background: rgba(51, 51, 51, 1);
        color: #fff;
        font-size: 16px;
      }
      .submit-btn:hover {
        background: rgba(51, 51, 51, 0.9);
      }
      .scroll-body {
        max-height: calc(100vh - 200px);
        min-height: 100px;
      }
    `],Ws([Object(r.g)({type:Boolean})],qs.prototype,"show",void 0),Ws([Object(r.g)({type:Object})],qs.prototype,"card",void 0),qs=Ws([Object(r.c)("side-layout-modal")],qs);var Gs=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Vs=class extends a.a{constructor(){super(...arguments),this.floatScaleShow=!1,this.hidden=!1,this.floatScaleRatio=1,this.floatScaleRect={left:null,top:null,width:null,height:null},this._languageList={"zh-CN":"中文简体",cs:"čeština",da:"dansk",de:"Deutsche",el:"Ελληνικά",en:"English","en-US":"English (United States)","en-GB":"English (United Kingdom)",es:"Español","es-419":"Español (América Latina y el Caribe)",fi:"Suomalainen",fr:"français",hu:"Magyar",it:"italiano",ja:"日本語",ko:"한국어",ms:"Orang Malaysia",no:"norsk",nl:"Nederlands",pl:"Polskie","pt-BR":"Portugues (brasil)","pt-PT":"Portugues (portugal)",ro:"Română",ru:"русский язык",sk:"Slovák",sv:"svenska",th:"ไทย",tr:"Türk",uk:"Український",vi:"Tiếng Việt","zh-TW":"中文繁體",hi:"हिंदी",id:"bahasa Indonesia"}}updated(t){this.hidden&&s.settingStore.sendSettingValue(),super.updated(t)}closeModal(){Us.changeLayoutModal(!1)}_renderDefaultCard(t){var e;const{miniMode:i}=s.settingStore.setting.icon,{key:o}=t;return null===(e=t.children)||void 0===e?void 0:e.map((e,n)=>{const{key:a,type:l,label:c}=e;if(!a)return null;if(i&&e.miniHide)return null;if("search"===o&&s.settingStore.setting.search.hide&&0!==n)return null;if("switch"===l)return r.e`
          <div class="rule-box">
            <span class="rule">${c}</span>
            <span class="rule-option">
              <i-switch
                @change="${e=>{"isShowHomepageBtn"===a?s.settingStore.changeSetting(t.key,a,!e.detail.checked):s.settingStore.changeSetting(t.key,a,e.detail.checked)}}"
                ?checked=${"isShowHomepageBtn"===a?!s.settingStore.setting[t.key][a]:s.settingStore.setting[t.key][a]}
              ></i-switch>
            </span>
          </div>
        `;if("slider"===l){const{min:i=1,max:o=10,step:n=1,percentage:l=!1}=e;return"scaleSide"===a?r.e`
            <div class="rule-box slider-type scale-side">
              <span class="rule">${c}</span>
              <span class="rule-option">
                <infinito-slider
                  @on-start="${t=>{this.floatScaleShow=!0,this.floatScaleRatio=s.settingStore.setting.view.scaleSide,this.floatScaleRect=t.target.parentElement.parentElement.getBoundingClientRect()}}"
                  @on-end="${t=>{this.floatScaleShow=!1,this.floatScaleRatio=s.settingStore.setting.view.scaleSide,this.floatScaleRect=t.target.parentElement.parentElement.getBoundingClientRect()}}"
                  @on-change="${e=>s.settingStore.changeSetting(t.key,a,e.detail.value)}"
                  .value=${s.settingStore.setting[t.key][a]}
                  .min=${i}
                  .max=${o}
                  .step=${n}
                  .translator=${l?t=>Math.round(100*t)+"%":null}
                ></infinito-slider>
              </span>
              <infinito-portal-entrance destination="side-float-scale">
                <side-float-scale
                  .label="${c}"
                  .floatScale=${this.floatScaleShow}
                  .floatScaleRatio=${this.floatScaleRatio}
                  .value=${s.settingStore.setting[t.key][a]}
                  .min=${i}
                  .max=${o}
                  .step=${n}
                  .rect=${this.floatScaleRect}
                ></side-float-scale>
              </infinito-portal-entrance>
            </div>
          `:r.e`
          <div class="rule-box slider-type">
            <span class="rule">${c}</span>
            <span class="rule-option">
              <infinito-slider
                @on-change="${e=>s.settingStore.changeSetting(t.key,a,e.detail.value)}"
                .value=${s.settingStore.setting[t.key][a]}
                .min=${i}
                .max=${o}
                .step=${n}
                .translator=${l?t=>Math.round(100*t)+"%":null}
              ></infinito-slider>
            </span>
          </div>
        `}return null})}_choosLayout(t){document.querySelector("newtab-main").toPage(0),Us.chooseLayout(t)}_openLayoutModal(){Us.changeLayoutModal(!0)}_renderCustomLayoutCard(t,e){const i=[];for(;t;){let o=!(--t%2);[...Array(e)].forEach(()=>{o=!o,i.push(o)})}return i.map(t=>r.e`<div
          class="${Object(Y.a)({"item-card-holder":!0,hard:t})}"
        ></div> `)}_renderCustomLayout(){const{list:t,activeIndex:e}=Us.layout;return r.e` <div class="layout-custom">
      ${t.map((i,o)=>{const n=i[0],a=i[1];return o===t.length-1?r.e`
            <div @click="${this._openLayoutModal}" class="item ${o===e?"active":""}">
              <div class="item-card item-card-custom">
                <i-svg src="${Object(it.a)("setting/edit.svg",!1)}"></i-svg>
              </div>
              ${s.settingStore.setting.layout.custom?r.e`<div class="item-text">${Object(Z.i18n)("custom")}(${n}x${a})</div>`:r.e`<div class="item-text">${Object(Z.i18n)("custom")}</div>`}
            </div>
          `:r.e`
          <div @click="${()=>this._choosLayout(o)}" class="item ${o===e?"active":""}">
            <div
              style="grid-template-columns: repeat(${a}, 1fr);grid-template-rows: repeat(${n}, 1fr);"
              class="item-card"
            >
              ${this._renderCustomLayoutCard(n,a)}
            </div>
            <div class="item-text">${n}x${a}</div>
          </div>
        `})}
    </div>`}_choosAnimation(t){Us.chooseAnimation(t)}_renderAnimation(){const{animationIndex:t,animationList:e}=Us;return r.e` <div class="animation-card">
      ${e.map((e,i)=>r.e`
          <div @click="${()=>this._choosAnimation(i)}" class="animation-item">
            <div class="item-card">
              <img class="animateimg" src="${i===t?e.iconActive:e.icon}" alt="" />
            </div>
            <div class="item-text">${e.label}</div>
          </div>
        `)}
    </div>`}_pickColor(t){const{value:e}=t.detail;Us.chooseFontClolor(e)}_renderFontColor(){const{fontColors:t}=Us,{color:e}=s.settingStore.setting.font,i=s.settingStore.sideRatio>.7?0:300*(s.settingStore.sideRatio-.7);return r.e`
      <div class="rule-box colors">
        <span class="rule">${Object(Z.i18n)("font_color")}</span>
        <i-colorpicker
          side
          class="rule-option"
          .colors=${t}
          .value="${e}"
          .offsetRight="${i}"
          @on-change="${this._pickColor}"
        ></i-colorpicker>
      </div>
    `}async _switchLanguage(t){try{const e=t.target.value,i=await fetch(`${l.B}/_locales/${e.replace("-","_")}/messages.json?v=1648693770916`).then(t=>t.json());Object.keys(i).length>50&&(await Object(Z.setLangToLocal)(i),localStorage.setItem("langCode",e),localStorage.setItem("setLangCode","1"),Gi.slave.sendMessage("tabs-reload"),location.reload())}catch(t){Di.default.error(Object(Z.i18n)("network_error"))}}downloadWallpaper(){c.a.downloadImg(s.wallpaperStore.rawUrl,void 0,s.wallpaperStore.wpExt)}_openWallpaperModal(){s.pluginStore.show("infinity://wallpaper")}changeMask(t,e){const{value:i}=t.detail;e?s.wallpaperStore.setOpacity(i):s.wallpaperStore.setBlur(i)}_renderWallpaperCard(){return r.e`
      <div class="wallpaper-container">
        <div class="wp-inner-container">
          <wp-item-raw
            .type=${s.wallpaperStore.type}
            .content=${"color"===s.wallpaperStore.type?s.wallpaperStore.color:s.wallpaperStore.urlInUI}
          ></wp-item-raw>
          <div
            class="wp-download-button"
            @click=${this.downloadWallpaper}
            style="${"color"===s.wallpaperStore.type?"display: none;":""}"
          >
            <img
              class="wp-download-icon"
              src=${i(797)}
              decoding="async"
              importance="auto"
              width="20"
            />
          </div>

          <div class="wp-hover-mask" @click=${this._openWallpaperModal}>
            <input class="wph-mask-button" type="button" value=${Object(Z.i18n)("change_wallpaper")} />
          </div>
        </div>
        <div class="slider-wrapper">
          <div class="mask">
            <p>${Object(Z.i18n)("mask_density")}</p>
            <div
              style="
                padding-left: 4px;
                box-sizing: border-box;
                width: calc(100% + 10px);
                  "
            >
              <infinito-slider
                @on-change="${t=>this.changeMask(t,!0)}"
                .value="${s.wallpaperStore.opacity}"
                .min=${0}
                .max=${100}
                suffix="%"
              >
              </infinito-slider>
            </div>
          </div>
          ${l.n?null:r.e`
                <div class="mask">
                  <p>${Object(Z.i18n)("ambiguity")}</p>
                  <div
                    style="
                padding-left: 4px;
                box-sizing: border-box;
                width: calc(100% + 10px);
                  "
                  >
                    <infinito-slider
                      @on-change="${t=>this.changeMask(t)}"
                      .value="${s.wallpaperStore.blur}"
                      .min=${0}
                      .max=${100}
                      suffix="%"
                    >
                    </infinito-slider>
                  </div>
                </div>
              `}
        </div>
      </div>
    `}_renderLanguageCard(){const{_languageList:t}=this,e=l.D.lang;return r.e`
      <div class="language-card">
        <div class="language-items">
          <div class="language-item language-select-wrap">
            <span class="label">${Object(Z.i18n)("language_select")}</span>
            <select class="language-select" @change=${this._switchLanguage}>
              ${Object.keys(t).map(i=>r.e` <option value=${i} ?selected=${e===i}>${t[i]}</option> `)}
            </select>
          </div>
        </div>
      </div>
    `}_renderCard(t){if(!t.custom)return this._renderDefaultCard(t);switch(t.key){case"layout":return r.e`${this._renderCustomLayout()}`;case"animation":return this._renderAnimation();case"font":return r.e` ${this._renderDefaultCard(t)} ${this._renderFontColor()} `;case"language":return this._renderLanguageCard();case"wallpaper":return this._renderWallpaperCard();default:return this._renderDefaultCard(t)}}resetModal(){G.IConfirm.create().toShow({text:Object(Z.i18n)("request_reset_all_settings"),title:Object(Z.i18n)("hint"),onConfirm:()=>{S.a.sendEvent({settingAction:"reset"}),s.settingStore.reset()}})}setMiniModel(t){s.settingStore.changeSetting("icon","miniMode",t)}render(){const{miniMode:t}=s.settingStore.setting.icon;return r.e`
      <div class="side-setting">
        <div class="header-box">
          <div class="header">
            <div @click="${()=>this.setMiniModel(!1)}" class="tab ${t?"":"active"}">
              ${Object(Z.i18n)("normal_model")}
            </div>
            <div @click="${()=>this.setMiniModel(!0)}" class="tab ${t?"active":""}">
              ${Object(Z.i18n)("mini_mode")}
            </div>
          </div>
        </div>
        <div
          class="global-scrollbar"
          style="
        height:100%;
      box-sizing: border-box;
      padding: 0 30px 30px;
      padding-right:0;
      "
        >
          ${Us.viewData.map(e=>t&&e.miniHide?null:r.e`
              <infinito-card cTitle="${e.title}">
                ${e.tip&&r.e` <span class="tips">${Object(Z.i18n)("only_used_infinity")}</span>`} ${this._renderCard(e)}
              </infinito-card>
            `)}
          <infinito-card cTitle="${Object(Z.i18n)("reset_setting")}">
            <span style="margin-top:12px;" class="tips">${Object(Z.i18n)("set_setting_default")}</span>
            <infinito-button
              class="btn reset-btn"
              @click="${this.resetModal}"
              .scaleRatio=${s.settingStore.sideScaleRatio}
              style="--border-color: #efefef;"
              >${Object(Z.i18n)("restore_setting")}</infinito-button
            >
          </infinito-card>
        </div>
      </div>
    `}};Vs.styles=[A.a,Ns],Gs([Object(r.f)()],Vs.prototype,"floatScaleShow",void 0),Gs([Object(r.g)({type:Boolean,reflect:!0})],Vs.prototype,"hidden",void 0),Gs([Object(r.f)()],Vs.prototype,"floatScaleRatio",void 0),Gs([Object(r.f)()],Vs.prototype,"floatScaleRect",void 0),Vs=Gs([Object(r.c)("side-setting")],Vs);var Qs=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Ys=class extends a.a{constructor(){super(...arguments),this.tabsActive=0,this.tabs=[{text:Object(Z.i18n)("add"),icon:"icon-tianjia",borderBottom:!1},{text:Object(Z.i18n)("me"),icon:"icon-wode2x",borderBottom:!0},{text:Object(Z.i18n)("settings"),icon:"icon-shezhi2x",borderBottom:!0}]}firstUpdated(){this.addEventListener("open-setting",()=>{this.activeThis(2)})}updated(t){var e;t.has("tabsActive")&&(0===this.tabsActive?(this._setIconsActiveStyle(),null===(e=this.$sideIcons)||void 0===e||e.clearSearch(),this.$sideIcons.focusSearch(),this.$sideIcons.setActiveType(0)):2===this.tabsActive&&this.$sideSetting.closeModal(),M.setAddIconActiveStatus(0===this.tabsActive))}_setIconsActiveStyle(){setTimeout(()=>{this.$sideIcons.setActiveStyle()},0)}beforeShow(){var t;if(s.pluginStore.pluginViews.includes("infinity://settings")&&(this.tabsActive=2),s.pluginStore.pluginViews.includes("profile")&&s.pluginStore.focusRepair&&(this.tabsActive=1),0===this.tabsActive&&(this._setIconsActiveStyle(),null===(t=this.$sideIcons)||void 0===t||t.clearSearch(),l.r))return new n.a(t=>{requestAnimationFrame(t)})}afterShow(){0===this.tabsActive?this.$sideIcons.focusSearch():1===this.tabsActive&&s.pluginStore.focusRepair&&this.$sideUser.showRepairAnimation()}afterHide(){switch(this.tabsActive){case 0:this.$sideIcons.setActiveType(0);break;case 1:this.$sideUser.closeRepairModal();break;case 2:this.$sideSetting.closeModal(),s.settingStore.sendSettingValue()}}activeThis(t){this.tabsActive=t,1===this.tabsActive&&this.$sideUser.closeRepairModal()}render(){return r.e`
      <i-side2-header .borderBottom="${this.tabs[this.tabsActive].borderBottom}">
        <nav slot="content" class="side-header">
          ${this.tabs.map((t,e)=>r.e`
              <div @click="${()=>this.activeThis(e)}" class="item ${this.tabsActive===e?"active":""}">
                <i-usesvg style="width:24px;height:24px" iconfont type="${t.icon}"></i-usesvg>
                <span>${t.text}</span>
              </div>
            `)}
        </nav>
      </i-side2-header>
      <icons-custom
        @on-close="${()=>{Tr.hideCustomIconCard()}}"
        .show="${Tr.customIconCardShow}"
      ></icons-custom>
      <side-layout-modal
        .card="${Us.layoutView}"
        ?show="${Us.layout.modal}"
      ></side-layout-modal>
      <div class="side-content">
        <side-icons .hidden="${0!==this.tabsActive}"></side-icons>
        <side-user .hidden="${1!==this.tabsActive}"></side-user>
        <side-setting .hidden="${2!==this.tabsActive}"></side-setting>
      </div>
    `}};Ys.styles=r.b`
    :host {
      display: block;
      height: 100%;
    }
    [hidden] {
      display: none !important;
    }
    .side-header {
      display: flex;
      justify-content: space-between;
      padding: 21px 58px;
      box-sizing: border-box;
      height: 100%;
      width: 100%;
    }
    .item {
      padding: 0 10px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      font-weight: 500;
      color: rgba(51, 51, 51, 1);
      line-height: 17px;
      opacity: 0.4;
      cursor: pointer;
      transition-property: opacity;
      transition-duration: 0.3s;
      transition-timing-function: ease;
      backface-visibility: hidden;
    }
    .item.active {
      opacity: 1;
    }
    .side-content {
      height: calc(100% - var(--side-header-height));
      overflow: hidden;
      background-color: rgb(245, 245, 245);
      backface-visibility: hidden;
      transform: translateZ(0);
    }
    icons-custom {
      z-index: 1111;
    }
    icons-custom[show] {
      display: block;
    }
  `,Qs([Object(r.g)({type:Number})],Ys.prototype,"tabsActive",void 0),Qs([Object(r.h)("side-setting")],Ys.prototype,"$sideSetting",void 0),Qs([Object(r.h)("side-icons")],Ys.prototype,"$sideIcons",void 0),Qs([Object(r.h)("side-user")],Ys.prototype,"$sideUser",void 0),Ys=Qs([Object(r.c)("side-profile")],Ys);var Xs=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Zs=class extends a.a{constructor(){super(...arguments),this.initIEditicon=()=>{}}afterHide(){s.siteStore.clearEditSite()}beforeShow(){this.initIEditicon()}afterShow(){this.initIEditicon()}_close(){const t=new CustomEvent("on-close",{bubbles:!0,composed:!0});this.dispatchEvent(t)}_onSubmit(t){s.siteStore.submitSite(t.detail.value),requestAnimationFrame(()=>{setTimeout(()=>{this._close()},0)})}render(){let t=null;if(s.siteStore.editingId){const e=document.querySelector("newtab-main").iconSearchShow,i=s.siteStore.findIcon(e?0:s.siteStore.currentPageIndex,s.siteStore.editingId);t=Object.assign(Object.assign({},or.a.defaultValue),i)}return r.e`
      <i-side2-header .title="${i18n("edit_icon")}"></i-side2-header>
      <div class="side-editicon global-scrollbar">
        <div class="scroll-container-body">
          ${s.siteStore.editingId?r.e`
                <i-editicon
                  .sideRatio="${s.settingStore.sideRatio}"
                  .value="${t}"
                  .readonlyTarget="${"app"===t.type}"
                  @on-cancel="${this._close}"
                  @on-submit="${this._onSubmit}"
                  iconType="custom-icon"
                ></i-editicon>
              `:null}
        </div>
      </div>
    `}};Zs.styles=[A.a,r.b`
      :host {
        display: block;
        height: 100%;
      }
      .side-editicon {
        height: calc(100% - var(--side-header-height));
        padding: 24px 0;
        box-sizing: border-box;
        background-color: #f6f6f6;
        overflow-y: auto;
      }
      .scroll-container-body {
        width: 360px;
        box-sizing: content-box;
        padding-left: 30px;
      }
    `],Xs([Object(r.h)("i-editicon")],Zs.prototype,"$editicon",void 0),Xs([Object(r.h)(".global-scrollbar")],Zs.prototype,"$scrollBar",void 0),Zs=Xs([Object(r.c)("side-editicon")],Zs);var Ks=r.b`.ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.inline-block {
  display: inline-block;
}
.wrapper {
  background-color: #fff;
  width: 100%;
  height: 100%;
}
.main {
  padding: 30px 0 30px 30px;
  box-sizing: border-box;
  width: 390px;
}
.header {
  width: 100%;
  margin-bottom: 30px;
  height: 34px;
  font-size: 32px;
  font-weight: 500;
  color: #e82222;
  line-height: 34px;
}
.title {
  width: 100%;
  margin: 10px 0;
  height: 26px;
  font-size: 18px;
  font-weight: 500;
  color: #444444;
  line-height: 26px;
}
.card {
  margin: 10px 0;
}
.des {
  margin-bottom: 10px;
  font-size: 13px;
  font-weight: 400;
  color: #656565;
  line-height: 22px;
  -moz-user-select: text;
       user-select: text;
}
.des-img {
  width: 100%;
  min-height: 202px;
}
.gap-line {
  margin-top: 30px;
  margin-bottom: 20px;
  width: 100%;
  height: 1px;
  background-color: #eeeeee;
}
.wx-qr-img {
  display: block;
  width: 120px;
  height: 120px;
  margin: auto;
}
.wx-des {
  margin-top: 12px;
  margin-bottom: 4px;
  font-size: 12px;
  font-weight: 400;
  color: #656565;
  line-height: 22px;
}
.ad {
  font-size: 12px;
  font-weight: 400;
  color: #e82222;
  line-height: 22px;
}
.setting-btn {
  margin: auto;
  margin-top: 16px;
  margin-bottom: 70px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 160px;
  height: 48px;
  padding: 0 20px;
  background: #151515;
  border-radius: 24px;
  font-size: 16px;
  font-family: PingFangSC-Medium, PingFang SC;
  font-weight: 500;
  color: #ffffff;
  line-height: 22px;
  border: none;
  outline: none;
  cursor: pointer;
  transition: all 0.3s ease-out;
}
.setting-btn:hover {
  transform: translateY(-4px);
  box-shadow: 0px 8px 16px 0px rgba(110, 70, 255, 0.3);
}
.setting-btn > img {
  margin-right: 12px;
}
`,Js=r.b`:host {
  display: inline-block;
  width: inherit;
  height: inherit;
}
.img {
  max-width: 100%;
  cursor: zoom-in;
}
`,tl=r.b`.viewer {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  display: flex;
  align-items: center;
  justify-content: center;
}
.mask {
  position: absolute;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.7);
}
.img {
  position: relative;
  max-width: 80vw;
  max-height: 80vh;
  background-color: #fff;
}
.viewer-close {
  background-color: #000;
  border-radius: 50%;
  cursor: pointer;
  height: 80px;
  overflow: hidden;
  position: absolute;
  right: -40px;
  top: -40px;
  transition: opacity 0.15s;
  opacity: 0.7;
  width: 80px;
}
.viewer-close:hover {
  opacity: 0.9;
}
.close-img {
  margin-top: 49px;
  margin-left: 18px;
  width: 14px;
  height: 14px;
}
`,el=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let il=class extends r.a{constructor(){super(...arguments),this.src="",this.showStatus=!1,this.originRect=null}show(t,e){this.originRect=e.getBoundingClientRect(),this.src=t,this.showStatus=!0}startAnimate(){const t=this.$img.getBoundingClientRect(),e={},i={},o=this.originRect.width/t.width,n=this.originRect.height/t.height,r=Math.round(this.originRect.left-t.left),a=Math.round(this.originRect.top-t.top);e.transform=`matrix(${o},0,0,${n},${r},${a})`,i.transform="matrix(1,0,0,1,0,0)",this.$img.style.transformOrigin="top left",this.$img.animate([e,i],{duration:200,easing:"ease"})}updated(t){t.has("showStatus")&&this.showStatus}close(){this.showStatus=!1}render(){return r.e`
      ${this.showStatus?r.e`<div class="viewer">
            <div @click="${this.close}" class="mask"></div>
            <img class="img" src="${this.src}" alt="" />
            <div @click="${this.close}" class="viewer-close">
              <img class="close-img" src="${i(645)}" alt="" />
            </div>
          </div>`:null}
    `}};il.styles=[tl],el([Object(r.f)()],il.prototype,"src",void 0),el([Object(r.f)()],il.prototype,"showStatus",void 0),el([Object(r.h)(".img")],il.prototype,"$img",void 0),il=el([Object(r.c)("i-viewer-root")],il);var ol,nl=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let rl=ol=class extends r.a{constructor(){super(...arguments),this.src=""}viewImage(t){ol.$wrapper.show(this.src,t.target)}render(){return r.e` <img class="img" @click="${this.viewImage}" src="${this.src}" alt="" /> `}};rl.styles=[Js],rl.$wrapper=document.querySelector("i-viewer-root"),nl([Object(r.g)({type:String})],rl.prototype,"src",void 0),rl=ol=nl([Object(r.c)("i-viewer")],rl);var al=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const sl="edge"===l.D.runtimePlatform;let ll=class extends a.a{constructor(){super(...arguments),this.tabsActive=0,this.firstShow=!1}afterHide(){sessionStorage.setItem("tutorial_reffer",""+Date.now())}firstUpdated(){}handleSetting(){Object(P.c)(location.origin+"/sethome",{isNewTab:!0})}getImgUrl(t){return`https://infinityicon.infinitynewtab.com/assets/crx_install/${l.D.isZh?"zh":"en"}/${sl?"edge":"chrome"}/${t}?imageView2/2/format/webp`}render(){return r.e`
      <div class="wrapper global-scrollbar">
        <main class="main ">
          <div class="header ellipsis inline-block">${i18n("instann_crx_title")}</div>
          <div class="title ellipsis inline-block">${i18n("how_to_install_crx")}</div>
          <section class="card">
            <div class="des">${i18n(sl?"edge_install_crx_item_1":"install_crx_item_1")}</div>
            <i-viewer class="des-img" src="${this.getImgUrl("item1.png")}"> </i-viewer>
          </section>
          <section class="card">
            <div class="des">${i18n(sl?"edge_install_crx_item_2":"install_crx_item_2")}</div>
            <i-viewer class="des-img" src="${this.getImgUrl("item2.png")}"> </i-viewer>
          </section>
          <section class="card">
            <div class="des">${i18n(sl?"edge_install_crx_item_3":"install_crx_item_3")}</div>
            <i-viewer class="des-img" src="${this.getImgUrl("item3.png")}"> </i-viewer>
          </section>
          <div class="gap-line inline-block"></div>
          ${l.D.isZh?r.e`
                <div class="weixin">
                  <img
                    class="wx-qr-img"
                    src="https://infinityicon.infinitynewtab.com/assets/crx_install/qrcode.png"
                    alt=""
                  />
                  <div class="wx-des">${i18n("install_crx_wx_des")}</div>
                </div>
              `:null}
          <div class="ad">${i18n("install_crx_home_des")}</div>
          <button class="setting-btn" @click=${this.handleSetting}>
            <img
              src="https://infinityicon.infinitynewtab.com/assets/btn-setting-home.png@2x.png"
              width="16"
              height="16"
            />
            ${i18n("set_to_homepage")}
          </button>
        </main>
      </div>
    `}};ll.styles=[A.a,Ks],al([Object(r.g)({type:Number})],ll.prototype,"tabsActive",void 0),ll=al([Object(r.c)("side-tutorial")],ll);var cl=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const dl=[{name:"google",src:"icon_google"},{name:"qq",src:"icon_qq"},{name:"wechat",src:"icon_wechat"},{name:"sina",src:"icon_sina",abandon:!0},{name:"facebook",src:"icon_facebook",abandon:!0}].map(t=>Object.assign(Object.assign({},t),{src:i(655)(`./${t.src}.png`)}));let pl=class extends a.a{constructor(){super(...arguments),this.store=s.userStore,this.emailError="",this.passwordError="",this.loading=!1,this.handleCancel=()=>{this.store.toggleReLogin()}}setBubbleLeft(t){const e=10+62*t+10;this.abandonTips.style.setProperty("--bubble-left",e+"px")}render(){return r.e`
      <infinito-modal style="--modal-padding: 0;" .open=${this.store.isExpired} .onCancel=${this.handleCancel}>
        <div class="login-wrapper" slot="body">
          <div
            class="bg"
            style=${Object(Ji.a)({background:`url(${Object(it.b)("https://infinityicon.infinitynewtab.com/assets/background_image/login-bg2.png")})`,backgroundSize:"cover"})}
          ></div>
          <div class="form">
            <div>
              <h2 class="large-title">${Object(Z.i18n)("please_re_login")}</h2>
              <p>${Object(Z.i18n)("account_expired")}</p>
            </div>
            <div class="form-control">
              <infinito-input
                name="email"
                placeholder="${Z.IS_ZH?Object(Z.i18n)("email_or_phone_number_tips"):Object(Z.i18n)("email")}"
                .error=${this.emailError}
                @onfocus=${()=>{this.emailError=""}}
              >
              </infinito-input>
              <infinito-input
                name="password"
                type="password"
                placeholder=${Object(Z.i18n)("password")}
                .error=${this.passwordError}
                @onfocus=${()=>{this.passwordError=""}}
                @keyup=${this.handleKeyUp}
              >
              </infinito-input>
              <infinito-button primary .loading=${this.loading} @click="${this.handleLogin}">
                ${Object(Z.i18n)("login")}
              </infinito-button>
            </div>
            <div class="no-account" style="justify-content: center;">
              <p @click="${this.toFindPassword}">${Object(Z.i18n)("forget_password")}</p>
            </div>
            <div class="third-party">
              <span>${Object(Z.i18n)("thirt_party")}</span>
              <div class="icons">
                ${dl.map((t,e)=>t.abandon?r.e`
                      <p
                        class="abandon"
                        style="--logo:url(${t.src})"
                        @mouseover="${()=>this.setBubbleLeft(e)}"
                        @click="${e=>this.onClick(e,t.name)}"
                      ></p>
                    `:r.e`
                    <p @click="${e=>this.onClick(e,t.name)}">
                      <img .src="${t.src}" />
                    </p>
                  `)}
                <div class="abandon-tips">${Object(Z.i18n)("login_abandon_tips")}</div>
              </div>
            </div>
          </div>
        </div>
      </infinito-modal>
    `}toFindPassword(t){t.preventDefault();let e="/find-password/index.html";l.l&&(e=window.chrome.runtime.getURL(e)),c.a.openUrl(e,!0,t)}toRegister(t){t.preventDefault();let e="/user-register/index.html";l.l&&(e=window.chrome.runtime.getURL(e)),c.a.openUrl(e,!0,t)}handleKeyUp(t){13===t.keyCode&&(t.preventDefault(),this.handleLogin(t))}onClick(t,e){t.preventDefault(),this.store.thirdPartyLogin(e)}async handleLogin(t){if(t.stopPropagation(),this.loading)return;const e=this.emailInput.value,i=this.passwordInput.value,o=this.checkEmailOrPhone(nn()(e).call(e));if(this.emailError=o.error,!this.emailError)if(i){try{this.loading=!0,await this.store.login({account:e,password:i,type:o.type}),setTimeout(()=>{this.emailInput.value="",this.passwordInput.value=""},1e3)}catch(t){"3006"===t.message&&setTimeout(()=>{this.passwordInput.value="",this.passwordInput.shadowRoot.querySelector("input").focus()},500)}this.loading=!1}else this.passwordError=Object(Z.i18n)("password_dont_empty")}checkEmailOrPhone(t){return t?/^\w+([+-.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)?{type:"email"}:/^1[3456789]\d{9}$/.test(t)?{type:"phone"}:{error:Z.IS_ZH?Object(Z.i18n)("please_enter_right_account"):Object(Z.i18n)("email_format_error")}:{error:Object(Z.i18n)("cannot_empty")}}};pl.styles=Ea,cl([Object(r.h)('infinito-input[name="email"]')],pl.prototype,"emailInput",void 0),cl([Object(r.h)(".abandon-tips")],pl.prototype,"abandonTips",void 0),cl([Object(r.h)('infinito-input[name="password"]')],pl.prototype,"passwordInput",void 0),cl([Object(r.g)({type:String})],pl.prototype,"emailError",void 0),cl([Object(r.g)({type:String})],pl.prototype,"passwordError",void 0),cl([Object(r.g)({type:Boolean})],pl.prototype,"loading",void 0),pl=cl([Object(r.c)("user-relogin")],pl);var hl=r.b`ul {
  margin: 0;
  padding: 0;
}
.container {
  width: 564px;
  box-sizing: border-box;
  padding: 30px;
  background: #ffffff;
  border-radius: 6px;
  font-size: 16px;
  color: #333;
  font-weight: 500;
  line-height: 22px;
}
.header {
  text-align: center;
  height: 30px;
  font-size: 22px;
  line-height: 30px;
}
.main {
  margin: 26px auto;
  max-height: 400px;
}
.main.collect {
  min-height: 180px;
  max-height: 380px;
  height: calc(100vh - 343px);
}
.main.userdata {
  min-height: 180px;
  max-height: 480px;
  height: calc(100vh - 246px);
}
.tips {
  margin: 28px 0;
  font-weight: 500;
  font-size: 16px;
}
.item {
  margin-top: 10px;
  margin-left: 1em;
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
}
.item:before {
  content: '•';
  color: #333;
  display: inline-block;
  margin-right: 0.3em;
}
.link {
  color: #5ddb64;
  text-decoration: underline;
}
.footer {
  margin-bottom: 20px;
  display: flex;
  justify-content: center;
}
.btn {
  margin-right: 20px;
  width: 130px;
  height: 44px;
  background: #ffffff;
  border-radius: 4px;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  line-height: 20px;
}
.switch {
  margin-right: 14px;
  flex-grow: 0;
  flex-shrink: 0;
  display: flex;
  align-items: center;
}
.btn:last-of-type {
  margin-right: 0;
}
.checkcard {
  display: flex;
  align-items: center;
  margin-bottom: 26px;
  width: 484px;
  min-height: 64px;
  box-sizing: border-box;
  padding: 8px 16px;
  border-radius: 4px;
  border: 1px solid #cccccc;
  font-size: 14px;
  font-weight: 400;
  color: #333333;
  line-height: 20px;
}
.checkcard.active {
  border: 1px solid #000000;
  color: #000000;
}
.uninstalltext {
  margin-bottom: 50px;
  text-align: center;
  font-size: 16px;
  font-weight: 400;
  color: #333333;
  line-height: 22px;
}
.items {
  margin-left: 2em;
  list-style: initial;
}
.items li {
  margin-top: 20px;
  margin-bottom: 20px;
  font-weight: 400;
  font-size: 15px;
}
p {
  margin-top: 20px;
  font-weight: 400;
  font-size: 15px;
}
.category-title {
  font-weight: 500;
}
`,ul=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let gl=class extends a.a{agree(){s.privacyStore.agreeUserData()}refuse(){s.privacyStore.refuseUserData()}render(){return r.e`<infinito-modal .closeable="${!1}" .open=${!0}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n("privacy_and_data_20_8_18")}</div>
          <div class="global-scrollbar main userdata">
            <p class="category-title">${i18n("privacy_data_title_1")}</p>
            <ul class="items">
              <li>${i18n("privacy_data_item_1_1")}</li>
              <li>${i18n("privacy_data_item_1_2")}</li>
            </ul>
            <p class="category-title">${i18n("privacy_data_title_2")}</p>
            <ul class="items">
              <li>${i18n("privacy_data_item_2_1")}</li>
              <li>${i18n("privacy_data_item_2_2")}</li>
              <li>${i18n("privacy_data_item_2_3")}</li>
              <li>${i18n("privacy_data_item_2_4")}</li>
              <li>${i18n("privacy_data_item_2_5")}</li>
              <li>${i18n("privacy_data_item_2_6")}</li>
              <li>${i18n("privacy_data_item_2_7")}</li>
              <li>${i18n("privacy_data_item_2_8")}</li>
            </ul>
            <p class="category-title">${i18n("privacy_data_title_3")}</p>
            <ul class="items">
              <li>${i18n("privacy_data_item_3_1")}</li>
            </ul>
            <p class="category-title">${i18n("privacy_data_title_5")}</p>
            <ul class="items">
              <li>${i18n("privacy_data_item_5_1")}</li>
            </ul>
            <p class="tips">
              ${Object(ot.a)(i18n("privacy_data_item_9",`<a style="color: #5ddb64;text-decoration: underline;" target="_blank" href="${c.a.getPrivacyUrl()}"> ${i18n("privacy_title")} </a>`))}
            </p>
          </div>
          <div class="footer">
            <infinito-button class="btn" @click="${this.agree}">${i18n("uninstall_agree")}</infinito-button>
            <infinito-button class="btn" @click="${this.refuse}">${i18n("privacy_disagree")}</infinito-button>
          </div>
        </div>
      </div>
    </infinito-modal> `}};gl.styles=[A.a,hl],gl=ul([Object(r.c)("modal-userdata")],gl);var fl=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let ml=class extends a.a{constructor(){super(...arguments),this.checked=!1}submit(){this.checked?s.privacyStore.agreeCollectData():s.privacyStore.refuseCollectData()}check(){this.checked=!this.checked}render(){return r.e`<infinito-modal .closeable="${!1}" .open=${!0}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n("privacy_and_data_20_8_18")}</div>
          <div class="main collect global-scrollbar">
            <p class="category-title">${i18n("privacy_data_title_4")}</p>
            <ul class="items">
              <li>${i18n("privacy_data_item_4_1")}</li>
              <li>${i18n("privacy_data_item_4_2")}</li>
              <li>${i18n("privacy_data_item_4_3")}</li>
              <li>${i18n("privacy_data_item_2_8")}</li>
              <li>${i18n("privacy_data_item_4_8")}</li>
              <li>${i18n("privacy_data_item_4_9")}</li>
              <li>${i18n("privacy_data_item_4_10")}</li>
              <li>${i18n("privacy_data_item_4_11")}</li>
              <li>${i18n("privacy_data_item_4_13")}</li>
              <li>${i18n("privacy_data_item_4_5")}</li>
              <li>${i18n("privacy_data_item_4_6")}</li>
              <li>${i18n("privacy_data_item_4_7")}</li>
            </ul>
          </div>
          <div
            class="${Object(Y.a)({checkcard:!0,active:this.checked})}"
          >
            <div class="switch">
              <infinito-switch .checked=${this.checked} @change=${this.check}></infinito-switch>
            </div>
            <p class="checktext">${this.checked?i18n("privacy_data_yes"):i18n("privacy_data_no")}</p>
          </div>
          <div class="footer">
            <infinito-button class="btn" @click="${this.submit}">${i18n("done")}</infinito-button>
          </div>
        </div>
      </div>
    </infinito-modal>`}};ml.styles=[A.a,hl],fl([Object(r.f)()],ml.prototype,"checked",void 0),ml=fl([Object(r.c)("modal-collectdata")],ml);var bl=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let yl=class extends a.a{agree(){chrome.management.uninstallSelf()}refuse(){s.privacyStore.resetUserData()}render(){return r.e`<infinito-modal .closeable="${!1}" .open=${!0}>
      <div slot="body">
        <div class="container">
          <div class="header">${i18n(Wr.i)}</div>
          <div class="main">
            <p class="uninstalltext">${i18n(Wr.h)}</p>
          </div>
          <div class="footer">
            <infinito-button class="btn" @click="${this.agree}">${i18n("confirm")}</infinito-button>
            <infinito-button class="btn" @click="${this.refuse}">${i18n("cancel")}</infinito-button>
          </div>
        </div>
      </div>
    </infinito-modal> `}};yl.styles=hl,yl=bl([Object(r.c)("modal-uninstall")],yl);var vl=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let wl=class extends a.a{firstUpdated(){}render(){if(!l.n)return;const{userDate:t,collectData:e}=s.privacyStore;return 0===t?r.e`<modal-userdata></modal-userdata>`:1===t&&0===e?r.e`<modal-collectdata></modal-collectdata>`:-1===t?r.e`<modal-uninstall></modal-uninstall>`:void 0}};wl.styles=hl,wl=vl([Object(r.c)("modal-privacy")],wl);var xl=r.b`.modal-wallpaper {
  width: 700px;
  height: 520px;
  box-shadow: 0px 2px 20px 0px rgba(0, 0, 0, 0.1);
  border-radius: 6px;
  box-sizing: border-box;
  padding-top: 24px;
  display: flex;
  flex-direction: column;
}
.modal-wallpaper .modal-wallpaper-header {
  display: flex;
  border-bottom: 1px solid #eee;
  overflow-y: hidden;
  overflow-x: auto;
  position: relative;
  box-sizing: border-box;
  margin-left: 30px;
  margin-right: 60px;
}
.modal-wallpaper .modal-wallpaper-header > .title {
  font-size: 18px;
  color: #999;
  padding-bottom: 24px;
  cursor: pointer;
}
.modal-wallpaper .modal-wallpaper-header > .title:nth-child(n + 2)::before {
  content: '';
  display: inline-block;
  width: 16px;
}
.modal-wallpaper .modal-wallpaper-header > .title.active {
  color: #333;
}
.modal-wallpaper .modal-wallpaper-header .mw-header-bar {
  position: absolute;
  bottom: 0;
  width: 24px;
  height: 3px;
  background-color: #333;
  left: 0;
  transition: left 150ms ease 0s;
  display: none;
}
.modal-wallpaper .modal-wallpaper-header .mw-header-bar.active {
  display: block;
}
.modal-wallpaper .modal-wallpaper-content {
  flex: 1;
  height: 0;
  flex-shrink: 0;
  position: relative;
  overflow: hidden;
}
.modal-wallpaper .modal-wallpaper-content .content-cloud-wallpaper,
.modal-wallpaper .modal-wallpaper-content .content-auto-wallpaper {
  display: block;
  width: 100%;
  height: 100%;
}
`,_l=i(622),kl=i(666),Ol=i(22),Al=i.n(Ol),Sl=i(162),Il=i(635),jl=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const $l=i(798)({features:["js","wasm"]});class Cl{constructor(){this.cloudItems=[],this.setCloudItems=t=>this.cloudItems=t,this.appendCloudItems=t=>this.cloudItems.push(...t),this.recentItems=[],this.localItems=[],this.setLocalItems=t=>this.localItems=t,this.appendLocalItem=t=>{if(-1===this.localItems.findIndex(({id:e})=>e===t.id)){const e=Object(x.j)(this.localItems);this.setLocalItems([t].concat(e))}},this.collectItems=[],this.inLoading=!1,this.setInLoading=t=>this.inLoading=t,this.empty=!1,this.setEmpty=t=>this.empty=t,this.inLoadingNext=!1,this.setInLoadingNext=t=>this.inLoadingNext=t,this.error=!1,this.setError=t=>this.error=t,this.commonColorItems=[],this.filterCondition={},this._pageCount=0,this.mapToIcon={},this.removeFilterTag=()=>this.filterCondition.tag&&(this.filterCondition.tag=null),this.removeFilterColor=()=>this.filterCondition.color&&(this.filterCondition.color=null),this.localPObjectStore=Al.a.createInstance({name:"idb-wallpaper",storeName:"store-local-wallpaper"}),this._loadLocalWallpapers()}setRecentItems(t){this.recentItems=t}async removeLocalItem(t){const e=this.localItems.findIndex(({id:e})=>e===t);-1!==e&&this.localItems.splice(e,1),await this.localPObjectStore.removeItem(t)}setCollectItems(t){this.collectItems=t}removeCollectItem(t){const e=this.collectItems.findIndex(({id:e})=>e===t);-1!==e&&this.collectItems.splice(e,1)}showItemExtraOpts(t){this.itemExtraOptsState===t?this.itemExtraOptsState=void 0:this.itemExtraOptsState=t}hideItemExtraOpts(){this.itemExtraOptsState=void 0}likeWp(t,e){const i=this.cloudItems.find(({id:e})=>e===t);i&&(1===e?i.like++:i.like>0&&i.like--)}initDataIfNeeded(){this.commonColorItems=[{id:window.__INFINITY__.wpColorId+"_1",type:"color",content:"#E1E1E1"},{id:window.__INFINITY__.wpColorId+"_2",type:"color",content:"#EE6D52"},{id:window.__INFINITY__.wpColorId+"_3",type:"color",content:"#FBAF42"},{id:window.__INFINITY__.wpColorId+"_4",type:"color",content:"#FFE000"},{id:window.__INFINITY__.wpColorId+"_5",type:"color",content:"#84D071"},{id:window.__INFINITY__.wpColorId+"_6",type:"color",content:"#6BC7DB"},{id:window.__INFINITY__.wpColorId+"_7",type:"color",content:"#4F9FED"},{id:window.__INFINITY__.wpColorId+"_8",type:"color",content:"#8D68E0"}],window.__INFINITY__.wallpaper_sources.forEach(t=>{this.mapToIcon[t.value]=t.icon})}async _loadLocalWallpapers(){const t=[];await this.localPObjectStore.iterate(e=>{const i=an.a.createObjectURL(e.file);if(e.rawUrl=e.url=i,e.smallFile){const t=an.a.createObjectURL(e.smallFile);e.content=t}else e.content=i;t.push(e)}),this.setLocalItems(t)}isFilterTag(t){return this.filterCondition.tag===t}setFilterTag(t){this.filterCondition.tag=t}isFilterColor(t){return this.filterCondition.color===t}setFilterColor(t){this.filterCondition.color=t}isFilterOrder(t){return this.filterCondition.order===t}setFilterOrder(t){this.filterCondition.order=t}clearState(){this.error&&this.setError(!1),this.empty&&this.setEmpty(!1),this.inLoading&&this.setInLoading(!1),this.inLoadingNext&&this.setInLoadingNext(!1)}async loadNextPage(){if(!(this.filterCondition.page>this._pageCount)){this.clearState(),this.setInLoadingNext(!0);try{const t=await this.loadWallpapersRaw(this.filterCondition);this.filterCondition.page=t.nextPage,this._pageCount=t.totalPages,this.appendCloudItems(t.data)}finally{this.setInLoadingNext(!1)}}}async loadCloudWallpapers(){const t=await this.loadWallpapersRaw(Object.assign(this.filterCondition,{page:0}));return this.filterCondition.page=t.nextPage,this._pageCount=t.totalPages,t.data}async loadWallpapersRaw(t){const{result:e,error:i}=await mt.h.getWallpaperListByType(t);if(i)throw i.__CANCEL__||(this.setError(!0),Di.default.error(i.message),this.setInLoading(!1)),i;if(e.success)return e.data=Object(Sl.b)(e.data),e;throw Di.default.error(i18n("unknown_mistake")),this.setError(!0),new Error(e)}async loadLocalImage(t){if(t.size>window.__INFINITY__.xMaxLocalFileSize)return void Di.default.error(i18n("wallpaper_upload_file_size_exceed"));let e,i=t;try{Object(Sl.e)(t)&&(e=Di.default.loading(i18n("wallpaper_loading")),await c.a.sleep(150),i=await Object(kl.a)(t,{maxSizeMB:window.__INFINITY__.maxLocalFileSize/1024/1024,maxWidthOrHeight:window.__INFINITY__.minFileMaxWidthOrHeight,useWebWorker:!1}));const o=await this.addFileToLocal(i);return this.appendLocalItem(o),o}catch(t){Di.default.error(i18n("wallpaper_apply_from_local_error"))}finally{e&&e()}}_getItemTime(t){return"local"===t.type?s.wallpaperStore.localRecentUsedOrder[t.id]:["cloud","color"].includes(t.type)?s.wallpaperStore.cloudRecentUsedOrder[t.id]:void 0}async loadRecentUsedP(){const{localRecentUsed:t,cloudRecentUsed:e,customColorItems:i}=s.wallpaperStore,{localItems:o,commonColorItems:n}=this,r=[];if(0!==e.length){const t=[],o=[],a=[];if(e.forEach(e=>{s.wallpaperStore.isLibraryItem(e)?o.push(e):s.wallpaperStore.isColorItem(e)?a.push(e):t.push(e)}),t.length>0){const e=await Object(Li.getWallpapersById)(t.join(","));if(e.error)throw e.error;r.push(...Object(Sl.b)(e.data))}if(o.length>0){const t=await Object(Li.getUserWallpaperLibraryItemsById)(o.join(","));if(t.error)throw t.error;r.push(...Object(Sl.d)(t.items))}a.length>0&&a.forEach(t=>{let e=n.find(({id:e})=>e===t);e||(e=i.find(({id:e})=>e===t)),e&&r.push(e)})}return as()(r).call(r,(t,e)=>{const i=this._getItemTime(t),o=this._getItemTime(e);return i>o?-1:i<o?1:0}),r}async loadCollectP(){const{cloudCollection:t,customColorItems:e}=s.wallpaperStore,{commonColorItems:i}=this,o=[];if(0!==t.length){const n=[],r=[],a=[];if(t.forEach(t=>{s.wallpaperStore.isLibraryItem(t)?r.push(t):s.wallpaperStore.isColorItem(t)?a.push(t):n.push(t)}),n.length>0){const t=await Object(Li.getWallpapersById)(n.join(","));if(t.error)throw t.error;o.push(...Object(Sl.b)(t.data))}if(r.length>0){const t=await Object(Li.getUserWallpaperLibraryItemsById)(r.join(","));if(t.error)throw t.error;o.push(...Object(Sl.d)(t.items))}a.length>0&&a.forEach(t=>{let n=i.find(({id:e})=>e===t);n||(n=e.find(({id:e})=>e===t)),n&&o.push(n)})}return o}async resizeImage(t){const e=await Object(at.b)(t),i=document.createElement("canvas");i.width=Li.imgConfig.smallWidth*window.devicePixelRatio,i.height=Li.imgConfig.smallWidth/e.naturalWidth*e.naturalHeight*window.devicePixelRatio;return await $l.resize(e,i).then(t=>$l.toBlob(t))}async addFileToLocal(t){const e={type:"local",id:`${window.__INFINITY__.wpId}${Object(Il.a)()}`,file:t};e.similarColor=await c.a.getSimilarColor(t);const i=an.a.createObjectURL(t),o=await this.resizeImage(i);e.smallFile=o,await this.localPObjectStore.setItem(e.id,e);const n=an.a.createObjectURL(o);return e.rawUrl=e.url=i,e.content=n,e}}jl([x.g],Cl.prototype,"cloudItems",void 0),jl([x.b],Cl.prototype,"setCloudItems",void 0),jl([x.b],Cl.prototype,"appendCloudItems",void 0),jl([x.g],Cl.prototype,"recentItems",void 0),jl([x.b],Cl.prototype,"setRecentItems",null),jl([x.g],Cl.prototype,"localItems",void 0),jl([x.b],Cl.prototype,"setLocalItems",void 0),jl([x.b],Cl.prototype,"removeLocalItem",null),jl([x.g],Cl.prototype,"collectItems",void 0),jl([x.b],Cl.prototype,"setCollectItems",null),jl([x.b],Cl.prototype,"removeCollectItem",null),jl([x.g],Cl.prototype,"itemExtraOptsState",void 0),jl([x.b],Cl.prototype,"showItemExtraOpts",null),jl([x.b],Cl.prototype,"hideItemExtraOpts",null),jl([x.g],Cl.prototype,"inLoading",void 0),jl([x.b],Cl.prototype,"setInLoading",void 0),jl([x.g],Cl.prototype,"empty",void 0),jl([x.b],Cl.prototype,"setEmpty",void 0),jl([x.g],Cl.prototype,"inLoadingNext",void 0),jl([x.b],Cl.prototype,"setInLoadingNext",void 0),jl([x.g],Cl.prototype,"error",void 0),jl([x.b],Cl.prototype,"setError",void 0),jl([x.b],Cl.prototype,"likeWp",null),jl([x.g],Cl.prototype,"commonColorItems",void 0),jl([x.b],Cl.prototype,"initDataIfNeeded",null),jl([x.g],Cl.prototype,"filterCondition",void 0),jl([x.b],Cl.prototype,"setFilterTag",null),jl([x.b],Cl.prototype,"setFilterColor",null),jl([x.b],Cl.prototype,"setFilterOrder",null),jl([x.b],Cl.prototype,"removeFilterTag",void 0),jl([x.b],Cl.prototype,"removeFilterColor",void 0),jl([x.b],Cl.prototype,"clearState",null);var El=new Cl,Tl=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Pl=class extends a.a{constructor(){super(...arguments),this._collectWallpaper=async({detail:t})=>{if(!t)return;if(!s.userStore.isLogin)return void Di.default.popupLogin();const e=_l.a.cloudCollection.includes(t);e?_l.a.removeCollectionP(t):_l.a.addCollectionP(t);if(!_l.a.isLocal(t)){const i=await Object(Li.collectionWallpaper)(t,Number(!e));i.error&&console.warn(i.error)}}}_openCustomColorPopup(){this.openCustomColorPopup()}async _removeCustomColor(t,e){t.stopPropagation();try{if(s.userStore.isLogin){const{error:t}=await Object(Li.removeCustomColor)(e);if(t)throw t}_l.a.removeCustomColor(e),Di.default.success(i18n("wallpaper_delete_color_success"))}catch(t){console.warn(t)}finally{El.hideItemExtraOpts()}}_showItemExtraOpts(t,e){t.stopPropagation(),El.showItemExtraOpts(e)}_applyColorP({target:t}){const{wp:e}=t.dataset;if(!e)return;const i=JSON.parse(e);_l.a.setColor(i)}render(){return r.e`
      <section class="${"solid-color-items"}" style=${this.show?"":"display: none;"}>
        <!-- custom color items -->
        <div class="custom-color-items">
          <strong class="color-items-title">${i18n("wallpaper_custom_color")}</strong>

          <div class="color-items-wrap" @click=${this._applyColorP}>
            <div class="custom-color-item-wrap custom-color-button" @click=${this._openCustomColorPopup}>
              <i-usesvg class="color-button-icon" iconfont type="icon-zidingyiyanse"></i-usesvg>
              <span class="color-button-text">${i18n("wallpaper_custom_color")}</span>
            </div>

            ${_l.a.customColorItems.map(t=>r.e`
                <div class="custom-color-item-wrap" @mouseleave=${()=>El.hideItemExtraOpts()}>
                  <wp-item-raw
                    class="custom-color-item"
                    .type=${t.type}
                    .content=${t.content}
                    data-wp=${JSON.stringify(t)}
                  >
                  </wp-item-raw>
                  <div
                    class="popup-options-bar${El.itemExtraOptsState===t.id?" active":""}"
                    @click=${e=>this._showItemExtraOpts(e,t.id)}
                    style=${_l.a.id===t.id?"display: none;":""}
                  >
                    <div class="popup-options-icon-wrap">
                      <i-usesvg class="popup-options-icon" color="#fff" iconfont type="icon-xingzhuangjiehe"></i-usesvg>
                    </div>
                    <ul class="popup-options">
                      <li class="popup-option-item" @click=${e=>this._removeCustomColor(e,t.id)}>
                        ${i18n("wallpaper_delete_color")}
                      </li>
                    </ul>
                  </div>
                </div>
              `)}
          </div>
        </div>

        <!-- common color list -->
        <div class="common-color-items">
          <strong class="color-items-title">${i18n("wallpaper_common_color")}</strong>
          <div class="color-items-wrap" @click=${this._applyColorP}>
            ${El.commonColorItems.map(t=>r.e`
                  <wp-item-raw
                    class="common-color-item"
                    .type=${t.type}
                    .content=${t.content}
                    data-wp=${JSON.stringify(t)}
                  ></wp-item-raw>
                `)}
          </div>
        </div>
      </section>
    `}};Pl.styles=r.b`
    .solid-color-items {
      width: 100%;
    }

    .solid-color-items .color-items-title {
      font-size: 12px;
      color: #333;
      margin: 0;
    }

    .solid-color-items .color-items-wrap {
      display: flex;
      flex-flow: row wrap;
      align-content: flex-start;
      margin-top: 16px;
    }
    .solid-color-items .custom-color-items .custom-color-item-wrap {
      width: 203px;
      height: 114px;
      cursor: pointer;
      margin-bottom: 20px;
      position: relative;
      margin-right: 16px;
    }
    .solid-color-items .custom-color-items .custom-color-item-wrap:nth-child(3n) {
      margin-right: 0;
    }

    .solid-color-items .custom-color-items .custom-color-item {
      width: 100%;
      height: 100%;
    }

    .solid-color-items .custom-color-items .popup-options-bar {
      --side-length: 32px;

      position: absolute;
      top: 8px;
      right: 8px;
      width: var(--side-length);
      height: var(--side-length);

      opacity: 0;
      pointer-events: none;
      transition: opacity 200ms ease 0s;
    }

    .solid-color-items .custom-color-item-wrap:hover .popup-options-bar {
      opacity: 1;
      pointer-events: initial;
    }

    @media only screen and (hover: none) {
      .solid-color-items .custom-color-item-wrap .popup-options-bar {
        opacity: 1;
        pointer-events: initial;
      }
    }

    .solid-color-items .custom-color-items .popup-options-bar:not(.active) .popup-options {
      display: none;
    }

    .solid-color-items .custom-color-items .popup-options-bar .popup-options-icon-wrap {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background-color 150ms ease-in 0s;
      cursor: pointer;
      border-radius: 4px;
    }
    .solid-color-items .custom-color-items .popup-options-bar .popup-options-icon-wrap:hover {
      background-color: rgba(0, 0, 0, 0.15);
    }

    .solid-color-items .custom-color-items .popup-options-bar .popup-options {
      position: absolute;
      top: var(--side-length);
      right: 0;
      list-style: none;

      box-sizing: border-box;
      padding: 5px 0;
      margin: 0;
      background-color: #fff;
      border-radius: 2px;
      font-size: 12px;
      color: #333;
      box-shadow: 0px 2px 16px 0px rgba(0, 0, 0, 0.1);
      max-width: 212px;
    }

    .solid-color-items .custom-color-items .popup-options-bar .popup-options .popup-option-item {
      width: 100%;
      box-sizing: border-box;
      padding: 0 24px;
      line-height: 27px;
      cursor: pointer;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }
    .solid-color-items .custom-color-items .popup-options-bar .popup-options .popup-option-item:hover {
      background-color: #f5f5f5;
    }

    .solid-color-items .custom-color-items .custom-color-button {
      box-sizing: border-box;
      border: 1px dashed #dadada;
      text-align: center;
      cursor: pointer;
    }

    .solid-color-items .custom-color-items .color-button-icon {
      margin-top: 28px;
      width: 100%;
      height: 28px;
    }
    .solid-color-items .custom-color-items .color-button-text {
      display: inline-block;
      margin-top: 14px;
    }

    .solid-color-items .common-color-items .color-items-title {
      display: inline-block;
    }

    .solid-color-items .common-color-items .common-color-item {
      width: 203px;
      height: 114px;
      cursor: pointer;
      margin-bottom: 20px;
      margin-right: 15px;
    }
    .solid-color-items .common-color-items .common-color-item:nth-child(3n) {
      margin-right: 0;
    }
  `,Tl([Object(r.g)({type:Boolean})],Pl.prototype,"show",void 0),Tl([Object(r.g)({type:Object})],Pl.prototype,"openCustomColorPopup",void 0),Pl=Tl([Object(r.c)("solid-color-items")],Pl);var Rl=r.b`.cloud-wallpaper {
  width: 100%;
  height: 100%;
  box-sizing: border-box;
  padding-bottom: 24px;
  display: flex;
  flex-flow: column nowrap;
}
.cloud-wallpaper ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
.cloud-wallpaper .cloud-wallpaper-header {
  width: 100%;
  display: flex;
  align-items: center;
  flex-flow: row nowrap;
  justify-content: space-between;
  box-sizing: border-box;
  padding: 17px 30px 20px;
}
.cloud-wallpaper .cloud-wallpaper-header .header-filter-list {
  flex: 1;
  width: 0;
  max-width: 75%;
  overflow-x: auto;
}
.cloud-wallpaper .cloud-wallpaper-header .filter-list-wrap {
  display: flex;
}
.cloud-wallpaper .cloud-wallpaper-header .filter-list-wrap .filter-item {
  height: 26px;
  margin-right: 8px;
  background: #f5f5f5;
  border-radius: 4px;
  color: #454545;
  line-height: 26px;
  padding: 0 8px;
  white-space: nowrap;
  font-size: 12px;
  cursor: pointer;
  transition: color 200ms ease-in 0s, background-color 200ms ease-in 0s;
}
.cloud-wallpaper .cloud-wallpaper-header .filter-list-wrap .filter-item.active {
  color: #fff;
  background-color: #656565;
}
.cloud-wallpaper .cloud-wallpaper-header .filter-list-wrap .filter-item:last-child {
  margin-right: 0;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort {
  position: relative;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .wallpaper-sort-wrap {
  cursor: pointer;
  display: flex;
  align-items: center;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .wallpaper-sort-icon {
  width: 14px;
  height: 14px;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .wallpaper-sort-text {
  color: #333;
  font-size: 14px;
  margin-left: 3px;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .sort-options-popup {
  position: absolute;
  top: 26px;
  right: 0;
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.16);
  padding: 0;
  margin: 0;
  list-style: none;
  z-index: 1;
  color: #656565;
  font-size: 12px;
  display: none;
  box-sizing: border-box;
  padding: 6px 0;
  text-align: left;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .sort-options-popup .sort-option-item {
  width: 100%;
  box-sizing: border-box;
  padding: 0 16px;
  line-height: 30px;
  transition: all 200ms ease-in 0s;
  transition-property: color, background-color;
  white-space: nowrap;
  cursor: pointer;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .sort-options-popup .sort-option-item:hover {
  background-color: #f5f5f5;
  color: #333;
}
.cloud-wallpaper .cloud-wallpaper-header .header-wallpaper-sort .sort-options-popup.active {
  display: initial;
}
.cloud-wallpaper .cloud-wallpaper-body {
  flex: 1;
  height: 0;
  width: 100%;
  box-sizing: border-box;
  padding-left: 30px;
  display: flex;
  overflow: hidden;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter {
  height: 100%;
  display: flex;
  flex-flow: column nowrap;
  margin-right: 15px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-header .color-filter-title {
  color: #333;
  font-size: 12px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-header .clear-filter-text {
  font-size: 9px;
  color: #b3b3b3;
  cursor: pointer;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-items {
  margin-top: 10px;
  display: flex;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-items .color-filter-item:last-child {
  margin-right: 0;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-items .color-filter-item {
  margin-right: 8px;
  width: 18px;
  height: 18px;
  border-radius: 4px;
  cursor: pointer;
  position: relative;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .color-filter .color-filter-items .color-filter-item.active::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  padding-top: 6px;
  padding-left: 10px;
  border-bottom: 2px solid #fff;
  border-left: 2px solid #fff;
  transform: translate(-50%, -70%) rotate(-45deg);
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter {
  margin-top: 20px;
  flex: 1;
  height: 0;
  display: flex;
  flex-flow: column nowrap;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-header .tag-filter-title {
  color: #333;
  font-size: 12px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-header .clear-filter-text {
  font-size: 9px;
  color: #b3b3b3;
  cursor: pointer;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-items {
  flex: 1;
  height: 0;
  margin-top: 10px;
  width: 203px;
  display: flex;
  flex-flow: row wrap;
  align-content: flex-start;
  overflow-y: auto;
  overflow-x: hidden;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-items .tag-filter-item {
  padding: 5px 10px;
  background-color: #f5f5f5;
  color: #454545;
  flex-grow: 0;
  display: flex;
  align-items: center;
  border-radius: 4px;
  cursor: pointer;
  margin-bottom: 12px;
  margin-right: 12px;
  transition: color 200ms ease-in 0s, background-color 200ms ease-in 0s;
  font-size: 12px;
  line-height: 1.5em;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-filter .tag-filter .tag-filter-items .tag-filter-item.active {
  color: #fff;
  background-color: #656565;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content {
  flex: 1;
  width: 0;
  height: 100%;
  position: relative;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items {
  width: 100%;
  height: 100%;
  overflow-y: auto;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-item {
  display: inline-block;
  width: 203px;
  height: 114px;
  margin-right: 15px;
  margin-bottom: 20px;
  cursor: pointer;
  vertical-align: middle;
  position: relative;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-item .item-apply-loading {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
  background-color: rgba(0, 0, 0, 0.2);
  justify-content: center;
  align-items: center;
  display: none;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-item .item-apply-loading.loading {
  display: flex;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-item .item-apply-loading .apply-loading-icon {
  width: 80px;
  height: 40px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item:hover .item-extra-opts {
  opacity: 1;
  pointer-events: initial;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts {
  --side-length: 32px;
  position: absolute;
  top: 8px;
  right: 8px;
  width: var(--side-length);
  height: var(--side-length);
  opacity: 0;
  pointer-events: none;
  transition: opacity 200ms ease 0s;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts .opts-icon-wrap {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 150ms ease-in 0s;
  cursor: pointer;
  border-radius: 4px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts .opts-icon-wrap:hover {
  background-color: rgba(0, 0, 0, 0.15);
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts:not(.active) .extra-options {
  display: none;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts .extra-options {
  position: absolute;
  top: var(--side-length);
  right: 0;
  list-style: none;
  box-sizing: border-box;
  padding: 5px 0;
  margin: 0;
  background-color: #fff;
  border-radius: 2px;
  font-size: 12px;
  color: #333;
  box-shadow: 0px 2px 16px 0px rgba(0, 0, 0, 0.1);
  max-width: 212px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts .extra-options .extra-option {
  width: 100%;
  box-sizing: border-box;
  padding: 0 24px;
  line-height: 27px;
  cursor: pointer;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts .extra-options .extra-option:hover {
  background-color: #f5f5f5;
}
@media only screen and (hover: none) {
  .cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-items .wp-local-item .item-extra-opts {
    opacity: 1;
    pointer-events: initial;
  }
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content div:not(.wp-cloud-items) .wp-item:nth-child(3n) {
  margin-right: 0;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content div.wp-cloud-items .loading-next {
  width: 100%;
  text-align: center;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content div.wp-cloud-items .loading-next .loading-next-icon {
  display: inline-block;
  width: 80px;
  height: 40px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content div.wp-cloud-items .wp-item:nth-child(2n) {
  margin-right: 0;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-local-items .pick-local-button {
  display: inline-block;
  width: 203px;
  height: 114px;
  margin-right: 15px;
  margin-bottom: 20px;
  cursor: pointer;
  vertical-align: middle;
  box-sizing: border-box;
  border: 1px dashed #dadada;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-local-items .pick-local-button .pick-local-icon {
  margin-top: 28px;
  width: 100%;
  height: 28px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .wp-local-items .pick-local-button .pick-local-text {
  display: block;
  width: 100%;
  margin-top: 14px;
  text-align: center;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .cloud-wallpaper-loading,
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .cloud-wallpaper-empty {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #fff;
  z-index: 1;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .cloud-wallpaper-empty {
  flex-flow: column nowrap;
  font-size: 14px;
  color: #999;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .cloud-wallpaper-empty > .empty-text {
  margin-top: 12px;
}
.cloud-wallpaper .cloud-wallpaper-body .cloud-wallpaper-content .cloud-wallpaper-loading > .spin {
  width: 80px;
  height: 40px;
}
.cloud-wallpaper .cloud-wallpaper-filter .color-filter-items {
  margin-top: 10px;
  display: flex;
}
.cloud-wallpaper .cloud-wallpaper-filter .color-filter-items .color-filter-item:last-child {
  margin-right: 0;
}
.cloud-wallpaper .cloud-wallpaper-filter .color-filter-items .color-filter-item {
  margin-right: 8px;
  width: 20px;
  height: 20px;
  border-radius: 4px;
  cursor: pointer;
  position: relative;
}
.cloud-wallpaper .cloud-wallpaper-filter .color-filter-items .color-filter-item.active::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  padding-top: 6px;
  padding-left: 10px;
  border-bottom: 2px solid #fff;
  border-left: 2px solid #fff;
  transform: translate(-50%, -70%) rotate(-45deg);
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter {
  flex: 1;
  height: 0;
  flex-shrink: 0;
  display: flex;
  flex-flow: column nowrap;
  overflow: hidden;
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter-items {
  margin-top: 10px;
  width: 235px;
  flex: 1;
  flex-shrink: 0;
  height: 0;
  display: flex;
  flex-flow: row wrap;
  align-content: flex-start;
  overflow-y: auto;
  overflow-x: hidden;
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter-items .menu-filter-item {
  padding: 5px 10px;
  background-color: #f5f5f5;
  color: #454545;
  flex-grow: 0;
  display: inline-flex;
  align-items: center;
  border-radius: 4px;
  cursor: pointer;
  vertical-align: top;
  margin-bottom: 12px;
  margin-right: 12px;
  transition: color 200ms ease-in 0s, background-color 200ms ease-in 0s;
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter-items .menu-filter-item .mf-item-icon {
  margin-right: 2px;
  width: 14px;
  height: 14px;
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter-items .menu-filter-item .mf-item-text {
  font-size: 12px;
  line-height: 1.5em;
  vertical-align: middle;
  pointer-events: none;
}
.cloud-wallpaper .cloud-wallpaper-filter .menu-filter-items .menu-filter-item.active {
  color: #fff;
  background-color: #656565;
}
.cloud-wallpaper .cloud-wallpaper-filter .pick-local-wp {
  width: 220px;
  height: 38px;
  margin-top: 15px;
  display: flex;
  align-items: center;
}
.cloud-wallpaper .cloud-wallpaper-filter .pick-local-wp .pick-local-wp-icon {
  margin-right: 6px;
  width: 14px;
  height: 12px;
}
.cloud-wallpaper .cloud-wallpaper-filter .pick-local-wp .pick-local-wp-text {
  font-size: 14px;
  color: #fff;
  font-weight: 600;
}
.cloud-wallpaper .cloud-wallpaper-filter .pick-local-wp .pick-local-wp-el {
  display: none;
}
`,Ll=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Dl=class extends r.a{constructor(){super(...arguments),this.open=!1,this._color="rgba(255, 204, 0, 1)"}_setColor({detail:t}){if(!t)return;const[e]=t,{rgba:i}=e;this._color=`rgba(${i.r}, ${i.g}, ${i.b}, ${i.a})`}_addCustomColor(){s.wallpaperStore.addCustomColorItem(this._color),this.close()}render(){return r.e`
      <infinito-modal style="--modal-padding:0;" .open=${this.open} .onCancel=${this.close}>
        <section class="custom-color-editor" slot="body">
          <h3 class="color-editor-title">${i18n("wallpaper_add_custom_color")}</h3>

          <div class="color-editor-wrap">
            <color-picker value="${this._color}" @input="${this._setColor}"></color-picker>
          </div>

          <div class="editor-button-group">
            <infinito-button class="confirm-button" primary @click=${this._addCustomColor}>
              ${i18n("confirm")}</infinito-button
            >
            <infinito-button class="cancel-button" @click=${this.close}> ${i18n("cancel")} </infinito-button>
          </div>
        </section>
      </infinito-modal>
    `}};var Ml;Dl.styles=r.b`
    .custom-color-editor {
      width: 386px;
    }

    .custom-color-editor .color-editor-title {
      padding-top: 24px;
      font-size: 18px;
      color: #333;
      line-height: 25px;
      margin: 0;
      text-align: center;
    }

    .custom-color-editor .color-editor-wrap {
      width: 100%;
      margin-top: 30px;
      display: flex;
      justify-content: center;
      flex-flow: row nowrap;
    }

    .custom-color-editor .editor-button-group {
      margin-top: 30px;
      width: 100%;
      display: flex;
      flex-flow: row nowrap;
      justify-content: center;
      padding-bottom: 40px;
    }

    .custom-color-editor .editor-button-group > infinito-button {
      width: 120px;
      height: 42px;
    }

    .custom-color-editor .editor-button-group .confirm-button {
      margin-right: 16px;
    }
  `,Ll([Object(r.g)({type:Boolean})],Dl.prototype,"open",void 0),Ll([Object(r.g)({type:Object})],Dl.prototype,"close",void 0),Dl=Ll([Object(r.c)("color-editor-popup")],Dl),function(t){t.collect="collect",t.discover="discover",t.nature="nature",t.ocean="ocean",t.architecture="architecture",t.animals="animals",t.travel="travel",t["food-drink"]="food-drink",t.anime="anime",t.athletics="athletics",t.technology="technology",t["street-photography"]="street-photography"}(Ml||(Ml={}));var Ul=i(3),Nl=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Bl=class extends a.a{constructor(){super(...arguments),this._colorList=window.__INFINITY__.color_list,this._tagList=[{name:i18n("nature"),type:Ml.nature},{name:i18n("ocean"),type:Ml.ocean},{name:i18n("architecture"),type:Ml.architecture},{name:i18n("animals"),type:Ml.animals},{name:i18n("travel"),type:Ml.travel},{name:i18n("food_drink"),type:Ml["food-drink"]},{name:i18n("anime"),type:Ml.anime},{name:i18n("athletics"),type:Ml.athletics},{name:i18n("technology"),type:Ml.technology},{name:i18n("street_photography"),type:Ml["street-photography"]}],this._filterList=[{text:i18n("wallpaper_cloud"),type:"cloud"},{text:i18n("local_wallpaper2"),type:"local"},{text:i18n("solid_color_wallpaper"),type:"color"},{text:i18n("recently_use"),type:"recent"},{text:i18n("my_collection"),type:"collect"}],this._contentType="cloud",this.cancelRequest=()=>Object(Ul.b)("getWallpapers"),this._applyWallpaper=async({target:t})=>{const{index:e,wp:i}=t.dataset;if(void 0===i)return;const o=JSON.parse(i);if(!s.wallpaperStore.isCurrentWp(o.id))if("color"!==o.type)if("local"!==o.type){this._wpLoadingIndex=Number(e);try{if(!await Ul.a.get(o.url,void 0,{_single:"prefetch-image"}))throw new Error("Network Error");s.wallpaperStore.setCloudWallpaper(o),null!==this._wpLoadingIndex&&(this._wpLoadingIndex=null)}catch(t){t.__CANCEL__||Di.default.error(i18n("network_error"))}}else s.wallpaperStore.setLocalWallpaper(El.localItems[e]);else s.wallpaperStore.setColor(o)},this._once=!1,this.whenOpen=async()=>{try{switch(this._once||(await this._filterCloudP(),this._once=!0),this._contentType){case"recent":this._filterRecentUsed();break;case"collect":this._filterCollectP()}}catch(t){if(!t.__CANCEL__)throw t}},this._filterColor=({target:t})=>{const{color:e}=t.dataset;e&&(El.isFilterColor(e)||(El.setFilterColor(e),this._onCloudFilter()))},this._removeFilterColor=()=>{El.removeFilterColor(),this._onCloudFilter()},this._removeFilterTag=()=>{El.removeFilterTag(),this._onCloudFilter()},this._filterTag=({target:t})=>{const{tag:e}=t.dataset;e&&(El.isFilterTag(e)||(El.setFilterTag(e),this._onCloudFilter()))},this._scrollThreshold=100,this._lockLoadNext=!1,this._lockLoadNextOnce=!1,this._customColorPopup=!1,this._openCustomColorPopup=()=>{!this._customColorPopup&&(this._customColorPopup=!0)},this._closeCustomColorPopup=()=>{this._customColorPopup&&(this._customColorPopup=!1)},this._currentSortOption=i18n("wallpaper_sort_default"),this._sortOptionsPopup=!1,this._sortOptions=[{value:1,text:i18n("wallpaper_sort_option_1")},{value:2,text:i18n("wallpaper_sort_option_2")},{value:0,text:i18n("wallpaper_sort_default")}],this._openSortOptionsPopup=()=>{!this._sortOptionsPopup&&(this._sortOptionsPopup=!0)},this._closeSortOptionsPopup=()=>{this._sortOptionsPopup&&(this._sortOptionsPopup=!1)},this._applySort=({target:t})=>{const{value:e,text:i}=t.dataset;"string"==typeof e&&(El.isFilterOrder(e)||(this._currentSortOption=i,El.setFilterOrder(e),this._onCloudFilter()))},this._collectWallpaper=async({detail:t})=>{if(!t)return;if(!s.userStore.isLogin)return void Di.default.popupLogin();const e=s.wallpaperStore.cloudCollection.includes(t);e?(s.wallpaperStore.removeCollectionP(t),"collect"===this._contentType&&(El.removeCollectItem(t),this._renderEmptyOrNot(El.collectItems))):s.wallpaperStore.addCollectionP(t);if(!s.wallpaperStore.isLocal(t)){const i=await Object(Li.collectionWallpaper)(t,Number(!e));i.error&&console.warn(i.error)}},this._likeWallpaper=async({detail:t})=>{if(!t)return;if(!s.userStore.isLogin)return void Di.default.popupLogin();const e=s.wallpaperStore.liked.includes(t);e?s.wallpaperStore.removeLiked(t):s.wallpaperStore.addLiked(t),El.likeWp(t,Number(!e));if(!s.wallpaperStore.isLocal(t)){(await Object(Li.likeWallpaper)(t,Number(!e))).error}},this.hidePopupNeeded=()=>{this._closeSortOptionsPopup(),El.hideItemExtraOpts()}}async _setContentType(t){if(this._contentType!==t){El.clearState(),this.cancelRequest(),this._contentType=t;try{switch(t){case"cloud":await this._filterCloudP();break;case"recent":await this._filterRecentUsed();break;case"color":case"local":break;case"collect":await this._filterCollectP()}}catch(t){t.__CANCEL__||(console.error(t),Di.default.error(i18n("network_error")))}}}async _filterCloudP(){El.setInLoading(!0);try{const t=await El.loadCloudWallpapers();El.setCloudItems(t),this._renderEmptyOrNot(t)}finally{El.setInLoading(!1)}this._cloudItemsWrap||(this._cloudItemsWrap=this.shadowRoot.querySelector(".cloud-wallpaper .cloud-wallpaper-content .wp-cloud-items"))}async _filterRecentUsed(){El.setInLoading(!0);try{const t=await El.loadRecentUsedP();El.setRecentItems(t),this._renderEmptyOrNot(t)}finally{El.setInLoading(!1)}}_filterColorP(){}_filterLocalP(){}async _filterCollectP(){El.setInLoading(!0);try{const t=await El.loadCollectP();El.setCollectItems(t),this._renderEmptyOrNot(t)}finally{El.setInLoading(!1)}}_renderEmptyOrNot(t){Array.isArray(t)&&0===t.length?El.setEmpty(!0):El.setEmpty(!1)}async _removeLocalP(t){G.IConfirm.create().toShow({text:i18n("wallpaper_confirm_delete_file"),onConfirm:()=>El.removeLocalItem(t)})}_showItemExtraOpts(t,e){t.stopPropagation(),El.showItemExtraOpts(e)}async _onCloudFilter(){El.clearState(),this.cancelRequest(),El.setInLoading(!0);try{const t=await El.loadCloudWallpapers();El.setCloudItems(t),this._renderEmptyOrNot(t),this._cloudItemsWrap&&this._cloudItemsWrap.scrollTo&&(this._lockLoadNextOnce=!0,this._cloudItemsWrap.scrollTo(0,0))}catch(t){t.__CANCEL__||(console.error(t),Di.default.error(i18n("network_error")))}El.setInLoading(!1)}_clearFilter(){this._removeFilterTagAndColor(),El.loadCloudWallpapers()}_removeFilterTagAndColor(){El.removeFilterTag(),El.removeFilterColor()}_scrollToLoadIfNeeded(t){if(this._lockLoadNextOnce)return void(this._lockLoadNextOnce=!1);if(this._lockLoadNext)return;const e=t.currentTarget,{scrollTop:i,scrollHeight:o,clientHeight:n}=e;o<=n||o-i-n<this._scrollThreshold&&(this._lockLoadNext=!0,El.loadNextPage().finally(()=>this._lockLoadNext=!1))}async _pickLocalImage({currentTarget:t}){try{const[e]=t.files,i=await El.loadLocalImage(e);i&&s.wallpaperStore.setLocalWallpaper(i)}finally{t.value=""}}_toggleSortOptionsPopup(t){t.stopPropagation(),this._sortOptionsPopup=!this._sortOptionsPopup}connectedCallback(){super.connectedCallback(),document.body.addEventListener("click",this.hidePopupNeeded)}disconnectedCallback(){super.disconnectedCallback(),document.body.removeEventListener("click",this.hidePopupNeeded)}render(){return r.e`
      <section class="cloud-wallpaper">
        <!-- left -->

        <div class="cloud-wallpaper-header">
          <div class="header-filter-list global-scrollbar">
            <ul class="filter-list-wrap">
              ${this._filterList.map(({text:t,type:e})=>r.e`
                    <li
                      @click=${()=>this._setContentType(e)}
                      class="filter-item${e===this._contentType?" active":""}"
                    >
                      ${t}
                    </li>
                  `)}
            </ul>
          </div>
          <div class="header-wallpaper-sort" style=${"cloud"!==this._contentType?"display: none;":""}>
            <span class="wallpaper-sort-wrap" @click=${this._toggleSortOptionsPopup}>
              <i-usesvg class="wallpaper-sort-icon" type="icon-zhu_shengxu" iconfont></i-usesvg>
              <span class="wallpaper-sort-text">${this._currentSortOption}</span>
            </span>
            <ul class="sort-options-popup${this._sortOptionsPopup?" active":""}" @click=${this._applySort}>
              ${this._sortOptions.map(({value:t,text:e})=>r.e` <li class="sort-option-item" data-value=${t} data-text=${e}>${e}</li> `)}
            </ul>
          </div>
        </div>

        <div class="cloud-wallpaper-body">
          <!--  -->
          ${this.renderAdvFilterNeeded()}
          <!--  -->

          ${this.renderContent(this._contentType)}
        </div>

        <color-editor-popup ?open=${this._customColorPopup} .close=${this._closeCustomColorPopup}></color-editor-popup>
      </section>
    `}renderAdvFilterNeeded(){return"cloud"!==this._contentType?null:r.e`
      <div class="cloud-wallpaper-filter">
        <div class="color-filter">
          <div class="color-filter-header">
            <span class="color-filter-title">${i18n("color")}</span>
            <span
              class="clear-filter-text"
              style=${El.filterCondition.color?"":"display: none;"}
              @click=${this._removeFilterColor}
            >
              ${i18n("wallpaper_clear_filter")}
            </span>
          </div>

          <ul class="color-filter-items" @click=${this._filterColor}>
            ${this._colorList.map(t=>r.e`
                  <li
                    class="color-filter-item${El.filterCondition.color===t?" active":""}"
                    style="background-color: #${t}"
                    data-color=${t}
                  ></li>
                `)}
          </ul>
        </div>

        <div class="tag-filter">
          <div class="tag-filter-header">
            <span class="tag-filter-title">${i18n("label")}</span>
            <span
              class="clear-filter-text"
              style=${El.filterCondition.tag?"":"display: none;"}
              @click=${this._removeFilterTag}
            >
              ${i18n("wallpaper_clear_filter")}
            </span>
          </div>
          <ul class="tag-filter-items global-scrollbar" @click=${this._filterTag}>
            ${this._tagList.map(({name:t,type:e})=>r.e`
                <li
                  class="tag-filter-item${El.filterCondition.tag===e?" active":""}"
                  data-tag=${e}
                >
                  ${t}
                </li>
              `)}
          </ul>
        </div>
      </div>
    `}renderContent(t){let e;switch(t){case"cloud":e=this.renderCloudContent();break;case"recent":e=this.renderRecentContent();break;case"color":e=this.renderColorContent();break;case"local":e=this.renderLocalContent();break;case"collect":e=this.renderCollectContent();break;default:e=this.renderCloudContent()}return r.e`
      <div class="cloud-wallpaper-content">
        <!-- wp item list -->
        ${e}
        <!-- empty -->
        <div class="cloud-wallpaper-empty" style="${El.empty?"":"display: none;"}">
          <img class="empty-image" src=${i(799)} width="86" />
          <span class="empty-text">${i18n("wallpaper_empty_text")}</span>
        </div>
        <!-- error -->
        <div class="cloud-wallpaper-error" style="display: none;"></div>
        <!-- loading -->
        <div class="cloud-wallpaper-loading" style="${El.inLoading?"":"display: none;"}">
          <infinito-spin class="spin" spinning .isSvg=${l.p}></infinito-spin>
        </div>
      </div>
    `}renderCloudContent(){return r.e`
      <div
        class="wp-cloud-items wp-items global-scrollbar"
        @scroll=${this._scrollToLoadIfNeeded}
        @click=${this._applyWallpaper}
      >
        ${El.cloudItems.map((t,e)=>r.e`
            <div class="wp-cloud-item wp-item">
              <wp-item
                .wp=${t}
                data-index=${e}
                data-wp=${JSON.stringify(t)}
                @collect=${this._collectWallpaper}
                @like=${this._likeWallpaper}
                @mouseleave=${this.hidePopupNeeded}
              ></wp-item>

              <div class="item-apply-loading${this._wpLoadingIndex===e?" loading":""}">
                <infinito-spin .isSvg=${l.p} class="apply-loading-icon" spinning></infinito-spin>
              </div>
            </div>
          `)}

        <!-- loading next icon -->
        <div class="loading-next" style=${El.inLoadingNext?"":"display: none;"}>
          <infinito-spin .isSvg=${l.p} class="loading-next-icon" spinning></infinito-spin>
        </div>
      </div>
    `}renderRecentContent(){return r.e`
      <div class="wp-recent-items wp-items global-scrollbar" @click=${this._applyWallpaper}>
        ${El.recentItems.map((t,e)=>r.e`
            <div class="wp-item">
              <wp-item-raw
                .type=${t.type}
                .content=${t.content}
                data-index=${e}
                data-wp=${JSON.stringify(t)}
                @mouseleave=${this.hidePopupNeeded}
              ></wp-item-raw>

              <div class="item-apply-loading${this._wpLoadingIndex===e?" loading":""}">
                <infinito-spin .isSvg=${l.p} class="apply-loading-icon" spinning></infinito-spin>
              </div>
            </div>
          `)}
      </div>
    `}renderColorContent(){return r.e`
      <div class="wp-color-items wp-items global-scrollbar">
        <solid-color-items ?show=${!0} .openCustomColorPopup=${this._openCustomColorPopup}></solid-color-items>
      </div>
    `}renderLocalContent(){return r.e`
      <div class="wp-local-items wp-items global-scrollbar" @click=${this._applyWallpaper}>
        <label class="wp-item pick-local-button" for="pick-local-wp">
          <i-usesvg type="icon-bendibizhi" color="#333" iconfont class="pick-local-icon"></i-usesvg>
          <span class="pick-local-text">${i18n("pick_local_wallpaper")}</span>
          <input
            id="pick-local-wp"
            type="file"
            accept="image/*"
            @change=${this._pickLocalImage}
            style="display: none;"
          />
        </label>

        ${El.localItems.map((t,e)=>r.e`
            <div class="wp-item wp-local-item">
              <wp-item-raw
                .type=${t.type}
                .content=${t.content}
                data-index=${e}
                data-wp=${JSON.stringify(t)}
                @mouseleave=${this.hidePopupNeeded}
              ></wp-item-raw>

              <div
                style=${s.wallpaperStore.id!==t.id?"":"display: none;"}
                class="item-extra-opts${El.itemExtraOptsState===t.id?" active":""}"
                @click=${e=>this._showItemExtraOpts(e,t.id)}
              >
                <div class="opts-icon-wrap">
                  <i-usesvg class="opts-icon" color="#fff" iconfont type="icon-xingzhuangjiehe"></i-usesvg>
                </div>
                <ul class="extra-options">
                  <li class="extra-option" @click=${()=>this._removeLocalP(t.id)}>
                    ${i18n("wallpaper_delete_file")}
                  </li>
                </ul>
              </div>
            </div>
          `)}
      </div>
    `}renderCollectContent(){return r.e`
      <div class="wp-collect-items wp-items global-scrollbar" @click=${this._applyWallpaper}>
        ${El.collectItems.map((t,e)=>r.e`
            <div class="wp-item wp-collect-item">
              <wp-item
                .wp=${t}
                data-index=${e}
                data-wp=${JSON.stringify(t)}
                @collect=${this._collectWallpaper}
                @like=${this._likeWallpaper}
                @mouseleave=${this.hidePopupNeeded}
                ?disableLike=${!0}
              ></wp-item>

              <div class="item-apply-loading${this._wpLoadingIndex===e?" loading":""}">
                <infinito-spin .isSvg=${l.p} class="apply-loading-icon" spinning></infinito-spin>
              </div>
            </div>
          `)}
      </div>
    `}};Bl.styles=[A.a,Rl],Nl([Object(r.f)()],Bl.prototype,"_contentType",void 0),Nl([Object(r.f)()],Bl.prototype,"_wpLoadingIndex",void 0),Nl([Object(r.f)()],Bl.prototype,"_customColorPopup",void 0),Nl([Object(r.f)()],Bl.prototype,"_currentSortOption",void 0),Nl([Object(r.f)()],Bl.prototype,"_sortOptionsPopup",void 0),Bl=Nl([Object(r.c)("cloud-wallpaper")],Bl);var Fl=r.b`.auto-wallpaper {
  width: 100%;
  height: 100%;
  display: flex;
  flex-flow: column nowrap;
}
.auto-wallpaper .ws-items {
  width: 100%;
  flex: 1;
  height: 0;
  background-color: #f5f5f5;
  box-sizing: border-box;
  padding-left: 30px;
  overflow-x: hidden;
  overflow-y: auto;
  display: flex;
  align-content: flex-start;
  flex-flow: row wrap;
}
.auto-wallpaper .ws-items:before,
.auto-wallpaper .ws-items:after {
  content: '';
  display: block;
  height: 20px;
  width: 100%;
}
.auto-wallpaper .ws-item {
  width: 200px;
  border-radius: 2px;
  position: relative;
  cursor: pointer;
  background-color: #fff;
  margin-top: 20px;
}
.auto-wallpaper .ws-item:nth-child(3n - 1) {
  margin-left: 20px;
  margin-right: 20px;
}
.auto-wallpaper .ws-item:hover .wsi-options-bar {
  pointer-events: initial;
  opacity: 1;
}
.auto-wallpaper .ws-item .wsi-options-bar {
  --side-length: 32px;
  position: absolute;
  top: 8px;
  right: 8px;
  width: var(--side-length);
  height: var(--side-length);
  opacity: 0;
  transition: opacity 200ms ease 0s;
  pointer-events: none;
}
.auto-wallpaper .ws-item .wsi-options-bar .wsi-option-icon-wrap {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: background-color 150ms ease-in 0s;
  cursor: pointer;
  border-radius: 4px;
}
.auto-wallpaper .ws-item .wsi-options-bar .wsi-option-icon-wrap:hover {
  background-color: rgba(0, 0, 0, 0.15);
}
.auto-wallpaper .ws-item .wsi-options-bar:not(.active) .wsi-popup-options {
  display: none;
}
.auto-wallpaper .ws-item .wsi-options-bar .wsi-popup-options {
  position: absolute;
  top: var(--side-length);
  right: 0;
  list-style: none;
  box-sizing: border-box;
  padding: 5px 0;
  margin: 0;
  background-color: #fff;
  border-radius: 2px;
  font-size: 12px;
  color: #333;
  box-shadow: 0px 2px 16px 0px rgba(0, 0, 0, 0.1);
  max-width: 212px;
}
.auto-wallpaper .ws-item .wsi-options-bar .wsi-popup-options .popup-option-item {
  width: 100%;
  box-sizing: border-box;
  padding: 0 24px;
  line-height: 27px;
  cursor: pointer;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.auto-wallpaper .ws-item .wsi-options-bar .wsi-popup-options .popup-option-item:hover {
  background-color: #f5f5f5;
}
@media only screen and (hover: none) {
  .auto-wallpaper .ws-item .wsi-options-bar {
    pointer-events: initial;
    opacity: 1;
  }
}
.auto-wallpaper .ws-item .ws-item-img {
  width: 100%;
  height: 73px;
  vertical-align: top;
  pointer-events: none;
  object-fit: cover;
  object-position: center;
}
.auto-wallpaper .ws-item .ws-item-info {
  width: 100%;
  box-sizing: border-box;
  padding: 12px 16px;
  display: flex;
  flex-flow: column nowrap;
  background-color: #fff;
  pointer-events: none;
}
.auto-wallpaper .ws-item .ws-item-name {
  margin-top: 2px;
  font-size: 14px;
  line-height: 20px;
  color: #333;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.auto-wallpaper .ws-item .ws-item-desc {
  margin-top: 4px;
  font-size: 12px;
  color: #333;
  line-height: 17px;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.auto-wallpaper .ws-item .ws-item-checked-icon {
  position: absolute;
  bottom: 33px;
  right: 10px;
  width: 20px;
  height: 20px;
  opacity: 0;
  transition: opacity 250ms ease 0s;
  pointer-events: none;
}
.auto-wallpaper .ws-item.ws-new-item {
  text-align: center;
  border: 1px dashed #dadada;
  cursor: default;
}
.auto-wallpaper .ws-item.ws-new-item .wsn-item-label {
  display: inline-block;
  width: 100%;
  height: 100%;
  cursor: pointer;
}
.auto-wallpaper .ws-item.ws-new-item .wsn-item-icon {
  display: block;
  margin: 0 auto;
  margin-top: 30px;
  width: 50px;
  height: 50px;
}
.auto-wallpaper .ws-item.ws-new-item .wsn-item-text {
  display: inline-block;
  margin-top: 21px;
  color: #999;
  display: -webkit-box;
  overflow: hidden;
  text-overflow: ellipsis;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}
.auto-wallpaper .ws-item:before {
  --spacing: 0;
  --border-width: 3px;
  content: '';
  pointer-events: none;
  position: absolute;
  top: var(--spacing);
  left: var(--spacing);
  right: var(--spacing);
  bottom: var(--spacing);
  border-radius: inherit;
  border: var(--border-width) solid #ff8181;
  opacity: 0;
}
.auto-wallpaper .ws-item.active:before {
  opacity: 1;
}
.auto-wallpaper .ws-item.active .ws-item-checked-icon {
  opacity: 1;
}
`,zl=i(275),Hl=i(638),Wl=i.n(Hl),ql=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};class Gl{constructor(){this.setSwitchType=t=>this.switchTypeInUI=t,this.setPSource=t=>this.pSource=t,this.customLibraryMap={},this.customLibrary=[],this.setCustomLibrary=t=>this.customLibrary=t,this.maxCountPerLibrary=20,this.maxFileLenPerUpload=20,this._maxPerQueue=4,this._uploadKey="custom-wallpaper-library",this.switch_interval_options={"when-newtab":l.s?i18n("wallpaper_switch_when_open_web"):i18n("wallpaper_switch_when_open"),"per-hour":i18n("wallpaper_switch_per_hour"),"twelve-hour":i18n("wallpaper_switch_per_twelve_hour"),"one-day":i18n("wallpaper_switch_everyday")},this.iOptionsModalShow=!1,this.toggleIOptionsModal=t=>{t.stopPropagation(),this.iOptionsModalShow?this.iOptionsModalShow=!1:this.iOptionsModalShow=!0}}setCustomLibraryMap(t,e){this.customLibraryMap[t]=e}delCustomLibraryMap(t){delete this.customLibraryMap[t]}clearCustomLibraryMap(){this.customLibraryMap={}}popCustomLibraryItem(t,e){const i=this.customLibraryMap[t],o=i.findIndex(({id:t})=>t===e);-1!==o&&i.splice(o,1)}appendCustomLibraryItem(t,e){const i=this.customLibraryMap[t];this.customLibraryMap[t]=i.concat(e)}getLibraryItems(t){return this.customLibraryMap[t]}getLibraryCoverImg(t){const e=this.customLibraryMap[t];return e&&e.length>0?e[0].content:null}popCustomLibrary(t){const e=this.customLibrary.findIndex(({libraryId:e})=>e===t);-1!==e&&this.customLibrary.splice(e,1)}appendCustomLibrary(t){this.customLibrary.push(t)}setCustomLibraryName(t,e){const i=this.customLibrary.findIndex(({libraryId:e})=>e===t);-1!==i&&(this.customLibrary[i].libraryName=e)}closeIOptionsModal(){this.iOptionsModalShow&&(this.iOptionsModalShow=!1)}async renameLibraryName(t,e){this.setCustomLibraryName(t,e),await Object(Li.renameWallpaperLibrary)(t,e)}async removeWallpaperLibrary(t){const e=Di.default.loading(i18n("wallpaper_loading"));try{await Object(Li.removeWallpaperLibrary)(t),this.delCustomLibraryMap(t),this.popCustomLibrary(t)}finally{e()}}async loadUserWallpaperLibrary(){const t=(await Object(Li.getUserWallpaperLibrary)()).data;this.setCustomLibrary(t),t.length>0&&await n.a.all(t.map(({libraryId:t})=>(async()=>{const e=await Object(Li.getWallpaperLibraryItems)(t);this.setCustomLibraryMap(t,e.items)})()))}_filesPreCheck(t){return t.filter(t=>!(t.size>window.__INFINITY__.xMaxLocalFileSize))}async addImagesToLibrary(t,e){const i=this._filesPreCheck(e);if(0===i.length)return void Di.default.error(i18n("wallpaper_upload_file_size_exceed"));i.length!==e.length&&Di.default.error(i18n("wallpaper_upload_file_size_exceed"));const o=await this._uploadFileToCloudRaw(t,i);return await Object(Li.addImagesToLibrary)(t,o),Object(Sl.d)(o)}async createWallpaperLibrary(t){const e=this._filesPreCheck(t);if(0===e.length)return;const i=Di.default.loading(i18n("wallpaper_loading"));try{const t=c.a.randomId(`${window.__INFINITY__.wpLibraryId}${Object(Il.a)()}`),o=i18n("add_new_wallpaper_libary"),n=await this._uploadFileToCloudRaw(t,e),r=await Object(Li.createWallpaperLibrary)({libraryName:o,libraryId:t,wallpapers:n});if(6001===r.code)return void Di.default.error(r.message);const a=Object(Sl.d)(n);this.appendCustomLibrary({libraryId:t,libraryName:o}),this.setCustomLibraryMap(t,a)}catch(t){throw Di.default.error(i18n("wallpaper_create_library_error")),t}finally{i()}}async createWallpaperLibraryOnly(t,e){try{const i=await Object(Li.createWallpaperLibrary)({libraryName:e,libraryId:t});if(6001===i.code)return void Di.default.error(i.message);this.appendCustomLibrary({libraryId:t,libraryName:e}),this.setCustomLibraryMap(t,[])}catch(t){throw Di.default.error(i18n("wallpaper_create_library_error")),t}}async _uploadFileToCloudRaw(t,e){const i=await this._handleLocalFiles(e),o=await this._uploadFileToCloud(i,t);return Array.apply(null,{length:o.length}).map((e,n)=>{const{id:r,similarColor:a}=i[n],{key:s,url:l}=o[n].data;return{id:r,key:s,url:l,libraryId:t,similarColor:a}})}_uploadFileToCloud(t,e){return n.a.all(t.map(({file:t,id:i})=>new n.a((o,n)=>{Object(zl.uploadFile)(t,`${e}/${i}.${Wl.a.getExtension(t.type)}`,this._uploadKey).then(t=>{t.error?n(t):o(t)})})))}async _handleLocalFiles(t){const e=async t=>{let e=t;return Object(Sl.e)(t)&&(e=await Object(kl.a)(t,{maxSizeMB:window.__INFINITY__.maxLocalFileSize/1024/1024,maxWidthOrHeight:window.__INFINITY__.minFileMaxWidthOrHeight,useWebWorker:!1})),{file:e,similarColor:await c.a.getSimilarColor(e)}},i=[];for(let o=0,r=t.length;o<r;o++)i.push(await e(t[o])),await new n.a(t=>setTimeout(t,100));return(t=>t.map(({file:t,similarColor:e})=>({id:c.a.randomId(`${window.__INFINITY__.wpLibraryItemId}${Object(Il.a)()}`),file:t,similarColor:e})))(i)}}ql([x.g],Gl.prototype,"switchTypeInUI",void 0),ql([x.b],Gl.prototype,"setSwitchType",void 0),ql([x.g],Gl.prototype,"pSource",void 0),ql([x.b],Gl.prototype,"setPSource",void 0),ql([x.g],Gl.prototype,"customLibraryMap",void 0),ql([x.b],Gl.prototype,"setCustomLibraryMap",null),ql([x.b],Gl.prototype,"delCustomLibraryMap",null),ql([x.b],Gl.prototype,"clearCustomLibraryMap",null),ql([x.b],Gl.prototype,"popCustomLibraryItem",null),ql([x.b],Gl.prototype,"appendCustomLibraryItem",null),ql([x.g],Gl.prototype,"customLibrary",void 0),ql([x.b],Gl.prototype,"setCustomLibrary",void 0),ql([x.b],Gl.prototype,"popCustomLibrary",null),ql([x.b],Gl.prototype,"appendCustomLibrary",null),ql([x.b],Gl.prototype,"setCustomLibraryName",null),ql([x.g],Gl.prototype,"iOptionsModalShow",void 0),ql([x.b],Gl.prototype,"closeIOptionsModal",null),ql([x.b],Gl.prototype,"toggleIOptionsModal",void 0),ql([x.b],Gl.prototype,"removeWallpaperLibrary",null);var Vl=new Gl,Ql=i(636),Yl=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Xl=class extends a.a{constructor(){super(...arguments),this.library={},this._dirty=!1,this._once=!1,this._lockRemoveImage=!1,this._closeModal=()=>this._closePopup()}async _closePopup(){if(!this._once){this._once=!0;try{this._dirty&&(await this._modifyUserLibrary(this.library.libraryId),this._dirty=!1)}catch(t){}finally{this.closeLibraryEditPopup()}}}async _modifyUserLibrary(t){if(t!==_l.a.wpSource)return;const e=Vl.customLibraryMap[t];-1===e.findIndex(({_id:t})=>t===_l.a.id)&&(Ql.a.clearNextData(),Ql.a.setReady(!1),Ql.a.setOnlyOneItem(!1),await _l.a.timeToSwitchWallpaper());-1===e.findIndex(({_id:t})=>t===Ql.a.nextId)&&(Ql.a.clearNextData(),Ql.a.setReady(!1)),e.length>1?Ql.a.onlyOneItem&&(Ql.a.clearNextData(),Ql.a.setReady(!1),Ql.a.setOnlyOneItem(!1)):Ql.a.setOnlyOneItem(!0)}get _libraryCount(){return this._libraryItems.length}get _libraryItems(){const{libraryId:t}=this.library;return Vl.getLibraryItems(t)||[]}_checkSwitchType({target:t}){const{switchType:e}=t.dataset;e&&(Vl.switchTypeInUI!==e&&Vl.setSwitchType(e),Vl.closeIOptionsModal())}async _applyLibrary(){var t;try{const{libraryId:e}=this.library;if(!(null===(t=Vl.getLibraryItems(e))||void 0===t?void 0:t.length))return;if(_l.a.wpSource===e)return void(_l.a.switchType!==Vl.switchTypeInUI&&_l.a.setSwitchType(Vl.switchTypeInUI));if(!navigator.onLine)return void Di.default.error(i18n("wallpaper_no_network_connect"));this._applyUserLibraryAuto()}finally{this._closePopup()}}async _applyUserLibraryAuto(){const{libraryId:t,libraryName:e}=this.library,[i,o]=c.a.checkImage(),n=Di.default.popupLoading(()=>{Object(Ul.b)("getNextWallpaper"),o()});try{const o=await _l.a.getNextWp(t,void 0,"userLibrary");await i(o.url),_l.a.enableUserLibraryAuto({libraryId:t,libraryName:e},Vl.switchTypeInUI,o)}catch(t){!t.__CANCEL__&&t.message&&Di.default.error(t.message)}finally{n()}}_onChangeLibraryName({currentTarget:t}){this._renameLibraryName(t.value)}_renameLibraryName(t){t?(this.library.libraryName=t,this.new||(Vl.renameLibraryName(this.library.libraryId,t),_l.a.setWpSourceName(t))):Di.default.error(i18n("wallpaper_library_name_illegal"))}_onEnterKeyModifyLibraryName(t){const e=t.currentTarget;"Enter"===t.key&&(this._renameLibraryName(e.value),e.blur())}async _addImagesToLibrary({currentTarget:t}){let e=Array.from(t.files).filter(t=>/^image\//.test(t.type));if(0===e.length)return;this._dirty=!0;const i=Vl.maxCountPerLibrary-this._libraryCount;e.length>i&&(e=e.slice(0,i)),e.length>Vl.maxFileLenPerUpload&&(e=e.slice(0,Vl.maxFileLenPerUpload));const o=Di.default.loading(i18n("wallpaper_loading"));await c.a.sleep(150);try{this.new&&(await Vl.createWallpaperLibraryOnly(this.library.libraryId,this.library.libraryName),this.new=!1);const i=await Vl.addImagesToLibrary(this.library.libraryId,e);i&&Vl.appendCustomLibraryItem(this.library.libraryId,i)}catch(t){Di.default.error(i18n("wallpaper_add_images_to_library_error"))}finally{t.value="",o()}}async _removeImageFromLibrary(t){const{libraryId:e,id:i,key:o,_id:n}=t;if(this._dirty=!0,_l.a.wpSource!==e||1!==this._libraryItems.length){if(!this._lockRemoveImage){this._lockRemoveImage=!0;try{const t=o.split(".").reverse()[0],r=await Object(Li.removeWallpaperLibraryItem)(e,i,t);if(r.error)throw r.error;if(0!==r.code)throw r;_l.a.dropCloudRecentUsed(n),Vl.popCustomLibraryItem(e,i)}catch(t){console.warn(t),Di.default.error(i18n("wallpaper_delete_library_item_failure"))}finally{this._lockRemoveImage=!1,this.requestUpdateInternal()}}}else Di.default.error(i18n("wallpaper_user_library_limit_text"))}_popupToShow(){this._once=!1,this.library.libraryId===_l.a.wpSource?Vl.setSwitchType(_l.a.switchType):Vl.setSwitchType("one-day")}_popupToHide(){}updated(t){t.has("open")&&(this.open?this._popupToShow():this._popupToHide())}_clearSideEffect(t){c.a.stopBubble(t),Vl.closeIOptionsModal()}_createWallpaperLibrary({currentTarget:t}){let e=Array.from(t.files).filter(t=>/^image\//.test(t.type));0!==e.length&&(e.length>Vl.maxFileLenPerUpload&&(e=e.slice(0,Vl.maxFileLenPerUpload)),Vl.createWallpaperLibrary(e))}render(){var t,e;return r.e`
      <infinito-modal style="--modal-padding:0;" .open=${this.open} .onCancel=${this._closeModal}>
        <section class="library-edit-panel" slot="body" @click=${this._clearSideEffect}>
          <div class="panel-wrap">
            <div class="panel-header">
              <input
                type="text"
                class="plibrary-name-input"
                .value=${this.library.libraryName}
                @change=${this._onChangeLibraryName}
                @keypress=${this._onEnterKeyModifyLibraryName}
                maxlength="80"
              />

              <span class="pheader-tips"> ${i18n("wallpaper_library_upload_tips")} </span>
            </div>

            <div class="panel-content">
              <div class="library-items global-scrollbar">
                <div
                  class="upload-button library-item"
                  style="${this._libraryCount>=Vl.maxCountPerLibrary?"display: none;":""}"
                >
                  <label class="upload-button-label" for="aitem-upload-input">
                    <i-usesvg class="upload-icon" color="#dbdbdb" iconfont type="icon-xingzhuangjiehe2x"></i-usesvg>
                    <span class="upload-text">${i18n("wallpaper_upload_form_local")}</span>
                  </label>
                  <input
                    id="aitem-upload-input"
                    type="file"
                    multiple
                    accept="image/*"
                    @change=${this._addImagesToLibrary}
                    style="display: none;"
                  />
                </div>
                ${null===(t=Vl.getLibraryItems(this.library.libraryId))||void 0===t?void 0:t.map(t=>r.e`
                    <div class="library-item">
                      <wp-item-raw class="library-item-content" .type=${t.type} .content=${t.content}></wp-item-raw>

                      <div class="library-item-remove" @click=${()=>this._removeImageFromLibrary(t)}>
                        <i-usesvg class="library-item-remove-icon" color="#fff" iconfont type="icon-guanbi1"></i-usesvg>
                      </div>
                    </div>
                  `)}
              </div>
            </div>

            <div class="modal-footer">
              <div class="footer-switch-info">
                <div class="footer-switch-wrap">
                  <strong class="switch-text">${i18n("wallpaper_auto_options_text")}:</strong>

                  <div class="switch-options-wrap">
                    <span class="current-option" @click=${Vl.toggleIOptionsModal}>
                      ${Vl.switch_interval_options[Vl.switchTypeInUI]}
                    </span>
                    <i-usesvg class="option-dropdown" iconfont type="icon-you1"></i-usesvg>

                    <ul
                      class="switch-popup-options${Vl.iOptionsModalShow?" active":""}"
                      @click=${this._checkSwitchType}
                    >
                      ${Object.entries(Vl.switch_interval_options).map(([t,e])=>r.e` <li class="popup-option" data-switch-type=${t}>${e}</li> `)}
                    </ul>
                  </div>
                </div>
              </div>

              <div class="footer-button">
                <!--               
                      <infinito-button class="save-button" @click=${this._createWallpaperLibrary}>
                        ${i18n("save")}
                      </infinito-button>
                 -->

                <infinito-button
                  class="sure-button"
                  primary
                  ?disabled=${!(null===(e=Vl.getLibraryItems(this.library.libraryId))||void 0===e?void 0:e.length)}
                  @click=${this._applyLibrary}
                  >${i18n("apply")}</infinito-button
                >
              </div>
            </div>
          </div>
        </section>
      </infinito-modal>
    `}};Xl.styles=[A.a,r.b`
      .library-edit-panel {
        width: 652px;
        height: 480px;
      }

      .library-edit-panel .panel-wrap {
        width: 100%;
        height: 100%;

        display: flex;
        flex-flow: column nowrap;
      }
      .library-edit-panel .panel-header {
        width: 100%;
        border-bottom: 1px solid #eee;

        display: flex;
        align-items: center;
        flex-flow: row nowrap;

        box-sizing: border-box;
        padding: 24px 30px 16px;
      }

      .library-edit-panel .panel-header .plibrary-name-input {
        min-width: 180px;
        font-size: 16px;
        color: #333;
        line-height: 35px;

        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;

        font-weight: bold;
        border: 1px solid transparent;
        padding: 0;
        outline: none;
        box-sizing: border-box;

        transition-property: border-color padding color font-weight border-radius;
        transition-duration: 200ms;
        transition-delay: 0s;
        transition-timing-function: ease-out;
      }

      .library-edit-panel .panel-header .plibrary-name-input:focus {
        border: 2px solid #4378d2;
        padding: 0 12px;
        color: #666;
        font-weight: normal;
        border-radius: 3px;
      }

      .library-edit-panel .panel-header .pheader-tips {
        flex: 1;
        width: 0;

        color: #999;
        font-size: 12px;
        margin-left: 12px;

        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        text-align: right;
      }

      .library-edit-panel .panel-content {
        width: 100%;
        flex: 1;
        height: 0;
        overflow: hidden;
      }

      .library-edit-panel .panel-content .library-items {
        width: 100%;
        height: 100%;
        box-sizing: border-box;

        overflow-y: auto;

        display: flex;
        flex-flow: row wrap;
        align-content: flex-start;

        box-sizing: border-box;
        padding-left: 30px;
        padding-top: 24px;
      }

      .library-edit-panel .panel-content .library-item {
        width: 187px;
        height: 105px;
        position: relative;
        margin-bottom: 20px;
        margin-right: 16px;
      }

      .library-edit-panel .panel-content .library-item .library-item-remove {
        position: absolute;
        top: 0;
        right: 0;
        width: 18px;
        height: 18px;
        transform: translate(40%, -40%);
        background-color: rgba(0, 0, 0, 0.7);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 1;
      }

      .library-edit-panel .panel-content .library-item .library-item-remove-icon {
        width: 10px;
        height: 10px;
      }

      .library-edit-panel .panel-content .upload-button {
        box-sizing: border-box;
        border: 2px dashed #dbdbdb;
        text-align: center;
      }

      .library-edit-panel .panel-content .upload-button .upload-button-label {
        display: flex;
        flex-flow: column nowrap;
        width: 100%;
        height: 100%;
        cursor: pointer;
        justify-content: space-around;
      }

      .library-edit-panel .panel-content .upload-button .upload-icon {
        width: 100%;
        height: 35px;
        margin-top: 6px;
      }
      .library-edit-panel .panel-content .upload-button .upload-text {
        font-size: 12px;
        color: #999;

        display: -webkit-box;
        overflow: hidden;
        text-overflow: ellipsis;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
      }

      .modal-footer {
        width: 100%;
        height: 80px;
        background-color: #fff;
        box-sizing: border-box;
        padding: 0 30px;

        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .modal-footer .footer-switch-info {
        flex: 1;
        width: 0;
      }

      .modal-footer .footer-switch-wrap {
        display: flex;
        align-items: center;
        flex-flow: row nowrap;

        font-size: 14px;
        color: #333;
      }

      .modal-footer .footer-switch-wrap .switch-text {
        white-space: nowrap;
      }

      .modal-footer .footer-switch-wrap .switch-options-wrap {
        margin-left: 6px;
        flex: 1;
        width: 0;
        position: relative;
        display: flex;
        align-items: center;
      }

      .modal-footer .switch-options-wrap .current-option {
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        cursor: pointer;
        display: inline-block;
      }
      .modal-footer .current-option + .option-dropdown {
        width: 14px;
        height: 14px;
        margin-left: 4px;
      }

      .modal-footer .footer-switch-wrap .switch-popup-options {
        position: absolute;
        list-style: none;
        margin: 0;
        bottom: 28px;
        left: 0;
        border-radius: 6px;
        box-sizing: border-box;
        padding: 10px 0;
        background-color: #fff;
        box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.2);

        font-size: 14px;
        color: #333;
        line-height: 40px;

        opacity: 0;
        transform: scale(0.8);
        transition: opacity 100ms ease-in 0s, transform 150ms ease 0s;
        pointer-events: none;
        z-index: 1;
      }

      .modal-footer .footer-switch-wrap .switch-popup-options.active {
        opacity: 1;
        transform: scale(1);
        pointer-events: all;
      }

      .modal-footer .footer-switch-wrap .switch-popup-options .popup-option {
        width: 100%;
        box-sizing: border-box;
        padding: 0 14px;
        white-space: nowrap;
      }
      .modal-footer .footer-switch-wrap .switch-popup-options .popup-option:hover {
        background-color: #f6f6f6;
        cursor: pointer;
      }

      .modal-footer .footer-button {
        margin-left: 6px;
        height: 40px;
        display: flex;
        max-width: 178px;
        min-width: 80px;
      }

      .modal-footer .footer-button .save-button {
        margin-right: 14px;
      }

      .modal-footer .footer-button .sure-button {
        width: 100%;
        height: 100%;
      }
    `],Yl([Object(r.g)({type:Boolean})],Xl.prototype,"open",void 0),Yl([Object(r.g)({type:Boolean})],Xl.prototype,"new",void 0),Yl([Object(r.g)({type:Object})],Xl.prototype,"library",void 0),Yl([Object(r.g)({type:Object})],Xl.prototype,"closeLibraryEditPopup",void 0),Xl=Yl([Object(r.c)("modal-library-edit")],Xl);var Zl=i(387),Kl=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Jl=class extends a.a{constructor(){super(...arguments),this._inLoading=!1,this._inLoadingNext=!1,this._libraryItems=[],this._bing={},this._scrollThreshold=100,this._lockLoadNext=!1}async _loadLibraryInfo(){const t=window.__INFINITY__.wallpaper_sources.find(({value:t})=>t===this.librarySource);this._libraryName=t.name,this._libraryDesc=t.desc}async _loadLibraryItems(){this._inLoading=!0;try{const t=await El.loadWallpapersRaw({source:"all"===this.librarySource?"":this.librarySource,page:this._page});this._page=t.nextPage,this._pageCount=t.totalPages,this._libraryCount=t.count,this._libraryItems=t.data}catch(t){console.warn(t)}finally{this._inLoading=!1}}async _loadNextPage(){if(!(this._page>this._pageCount)){this._inLoading&&(this._inLoading=!1),this._inLoadingNext=!0;try{const t=await El.loadWallpapersRaw({source:"all"===this.librarySource?"":this.librarySource,page:this._page});this._page=t.nextPage,this._pageCount=t.totalPages,this._libraryCount=t.count,this._libraryItems=this._libraryItems.concat(t.data)}finally{this._inLoadingNext=!1}}}_scrollToLoadIfNeeded(t){if(this._lockLoadNext)return;const e=t.currentTarget,{scrollTop:i,scrollHeight:o,clientHeight:n}=e;o<=n||o-i-n<this._scrollThreshold&&(this._lockLoadNext=!0,this._loadNextPage().then(()=>this._lockLoadNext=!1))}updated(t){t.has("open")&&(this.open?this.popupToShow():this.popupToHide())}async popupToShow(){if(this._inLoading&&(this._inLoading=!1),this._inLoadingNext&&(this._inLoadingNext=!1),this._libraryItems.length>0&&(this._libraryItems=[]),this._libraryCount=null,this._libraryName=null,this._libraryDesc=null,this._page=null,this._pageCount=null,this._bing={rawUrl:""},this.librarySource){if(this._loadLibraryInfo(),"bing"===this.librarySource)try{this._inLoading=!0;const t=await Object(Zl.b)();this._bing=t}catch(t){t.__CANCEL__||Di.default.error(t.message)}finally{this._inLoading=!1}else this._loadLibraryItems();this.librarySource===_l.a.wpSource?Vl.setSwitchType(_l.a.switchType):Vl.setSwitchType("one-day")}else Di.default.error(i18n("unknown_mistake"))}popupToHide(){}_checkSwitchType({target:t}){const{switchType:e}=t.dataset;e&&(Vl.switchTypeInUI!==e&&Vl.setSwitchType(e),Vl.closeIOptionsModal())}async _applyLibrary(){try{if("bing"===this.librarySource&&"bing"===_l.a.wpSource)return;if(_l.a.wpSource===this.librarySource)return void(_l.a.switchType!==Vl.switchTypeInUI&&_l.a.setSwitchType(Vl.switchTypeInUI));if(!navigator.onLine)return void Di.default.error(i18n("wallpaper_no_network_connect"));"bing"!==this.librarySource?await this._applyCloudAuto():await this._applyBingWallpaper()}finally{this.close()}}async _applyCloudAuto(){const[t,e]=c.a.checkImage(),i=Di.default.popupLoading(()=>{Object(Ul.b)("getNextWallpaper"),e()});try{const e=await _l.a.getNextWp(this.librarySource);await t(e.url),_l.a.enableCloudAuto(this.librarySource,Vl.switchTypeInUI,e)}catch(t){!t.__CANCEL__&&t.message&&Di.default.error(t.message)}finally{i()}}async _applyBingWallpaper(){const t=Di.default.popupLoading();try{await Object(Sl.f)(this._bing.url),_l.a.enableBingWallpaper(this._bing)}catch(t){t.__CANCEL__||Di.default.error(i18n("network_error"))}finally{t()}}_clearSideEffect(t){c.a.stopBubble(t),Vl.closeIOptionsModal()}render(){return r.e`
      <infinito-modal style="--modal-padding:0;" .open=${this.open} .onCancel=${this.close}>
        <section class="library-preview-panel" slot="body" @click=${this._clearSideEffect}>
          <div class="library-preview-header">
            <div class="pheader-head">
              <h3 class="pheader-head-title">${this._libraryName}</h3>
              <span class="pheader-library-count">${this._libraryCount}</span>
            </div>

            <span class="pheader-desc">${this._libraryDesc}</span>
          </div>

          <div class="library-preview-content">
            ${"bing"===this.librarySource?r.e`
                  <div class="library-preview-bing">
                    <wp-item-raw type="image" .content=${this._bing.rawUrl}></wp-item-raw>
                  </div>
                `:r.e`
                  <div class="library-preview-items global-scrollbar" @scroll=${this._scrollToLoadIfNeeded}>
                    ${this._libraryItems.map(t=>r.e`
                          <wp-item-raw
                            class="library-preview-item"
                            .type=${t.type}
                            .content=${t.content}
                          ></wp-item-raw>
                        `)}
                    <!-- loading next icon -->
                    <div class="loading-next" style=${this._inLoadingNext?"":"display: none;"}>
                      <infinito-spin .isSvg=${l.p} class="loading-next-icon" spinning></infinito-spin>
                    </div>
                  </div>
                `}
            <!-- loading -->
            <div class="apreview-items-loading" style="${this._inLoading?"":"display: none;"}">
              <infinito-spin class="loading-element" spinning .isSvg=${l.p}></infinito-spin>
            </div>
          </div>

          <div class="library-preview-footer">
            <div class="footer-switch-info">
              <div class="footer-switch-wrap" style="${"bing"===this.librarySource?"display: none;":""}">
                <strong class="switch-text">${i18n("wallpaper_auto_options_text")}:</strong>

                <div class="switch-options-wrap">
                  <span class="current-option" @click=${Vl.toggleIOptionsModal}>
                    ${Vl.switch_interval_options[Vl.switchTypeInUI]}
                  </span>
                  <i-usesvg class="option-dropdown" iconfont type="icon-you1"></i-usesvg>

                  <ul
                    class="switch-popup-options${Vl.iOptionsModalShow?" active":""}"
                    @click=${this._checkSwitchType}
                  >
                    ${Object.entries(Vl.switch_interval_options).map(([t,e])=>r.e` <li class="popup-option" data-switch-type=${t}>${e}</li> `)}
                  </ul>
                </div>
              </div>
              <div class="limit-text" style="${"bing"!==this.librarySource?"display: none;":""}">
                ${i18n("wallpaper_switch_limit_with_bing")}
              </div>
            </div>

            <div class="ws-sure-button">
              <infinito-button class="sure-button" primary @click=${this._applyLibrary}>
                ${i18n("apply")}
              </infinito-button>
            </div>
          </div>
        </section>
      </infinito-modal>
    `}};Jl.styles=[A.a,r.b`
      .library-preview-panel {
        width: 652px;
        height: 480px;

        display: flex;
        flex-flow: column nowrap;
      }

      .library-preview-header {
        box-sizing: border-box;
        padding: 18px 30px;
        border-bottom: 1px solid #eee;
      }

      .library-preview-header .pheader-head {
        display: flex;
        align-items: center;
      }

      .library-preview-header .pheader-head .pheader-head-title {
        font-size: 18px;
        color: #333;
        margin: 0;
        line-height: 25px;
      }

      .library-preview-header .pheader-head .pheader-library-count {
        background-color: #f5f5f5;
        color: #999;
        font-size: 12px;
        margin-left: 6px;
        display: block;
        line-height: 19px;
        padding: 0 6px;
      }

      .library-preview-header .pheader-desc {
        color: #333;
        line-height: 17px;
        font-size: 12px;
        margin-top: 2px;
      }

      .library-preview-content {
        width: inherit;
        flex: 1;
        height: 0;
        box-sizing: border-box;
        padding: 14px 0;
        position: relative;
        overflow: hidden;
      }

      .library-preview-content .library-preview-bing {
        height: 100%;
        padding: 0 14px;
      }

      .library-preview-content .library-preview-items {
        width: 100%;
        height: 100%;
        box-sizing: border-box;
        padding-left: 30px;
        padding-right: 20px;

        display: flex;
        flex-flow: row wrap;
        align-content: flex-start;
        overflow-y: auto;
      }

      .library-preview-content .library-preview-items .library-preview-item {
        width: 187px;
        height: 105px;
        margin-bottom: 20px;
      }

      .library-preview-content .library-preview-items .loading-next {
        width: 100%;
        text-align: center;
      }
      .library-preview-content .library-preview-items .loading-next-icon {
        display: inline-block;
        width: 80px;
        height: 40px;
      }
      .library-preview-content .library-preview-items .library-preview-item:nth-child(3n-1) {
        margin-left: 16px;
        margin-right: 16px;
      }

      .library-preview-content .apreview-items-loading {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .library-preview-content .apreview-items-loading > .loading-element {
        width: 80px;
        height: 40px;
      }

      .library-preview-footer {
        width: 100%;
        height: 80px;
        background-color: #fff;
        box-sizing: border-box;
        padding: 0 30px;

        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .library-preview-footer .footer-switch-info {
        flex: 1;
        width: 0;
      }

      .library-preview-footer .footer-switch-wrap {
        display: flex;
        align-items: center;
        flex-flow: row nowrap;

        font-size: 14px;
        color: #333;
      }

      .library-preview-footer .footer-switch-wrap .switch-text {
        white-space: nowrap;
      }

      .library-preview-footer .footer-switch-wrap .switch-options-wrap {
        margin-left: 6px;
        flex: 1;
        width: 0;
        position: relative;
        display: flex;
        align-items: center;
      }

      .library-preview-footer .switch-options-wrap .current-option {
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
        cursor: pointer;
        display: inline-block;
      }
      .library-preview-footer .current-option + .option-dropdown {
        width: 14px;
        height: 14px;
        margin-left: 4px;
      }

      .library-preview-footer .footer-switch-wrap .switch-popup-options {
        position: absolute;
        list-style: none;
        margin: 0;
        bottom: 28px;
        left: 0;
        border-radius: 6px;
        box-sizing: border-box;
        padding: 10px 0;
        background-color: #fff;
        box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, 0.2);

        font-size: 14px;
        color: #333;
        line-height: 40px;

        opacity: 0;
        transform: scale(0.8);
        transition: opacity 100ms ease-in 0s, transform 150ms ease 0s;
        pointer-events: none;
        z-index: 1;
      }

      .library-preview-footer .footer-switch-wrap .switch-popup-options.active {
        opacity: 1;
        transform: scale(1);
        pointer-events: all;
      }

      .library-preview-footer .footer-switch-wrap .switch-popup-options .popup-option {
        width: 100%;
        box-sizing: border-box;
        padding: 0 14px;
        white-space: nowrap;
      }
      .library-preview-footer .footer-switch-wrap .switch-popup-options .popup-option:hover {
        background-color: #f6f6f6;
        cursor: pointer;
      }

      .library-preview-footer .limit-text {
        font-size: 14px;
        color: #999;
      }

      .library-preview-footer .ws-sure-button {
        margin-left: 6px;
        max-width: 178px;
        height: 40px;
        min-width: 80px;
      }

      .library-preview-footer .ws-sure-button .sure-button {
        width: 100%;
        height: 100%;
      }
    `],Kl([Object(r.g)({type:Boolean})],Jl.prototype,"open",void 0),Kl([Object(r.g)({type:String})],Jl.prototype,"librarySource",void 0),Kl([Object(r.g)({type:Object})],Jl.prototype,"close",void 0),Kl([Object(r.f)()],Jl.prototype,"_inLoading",void 0),Kl([Object(r.f)()],Jl.prototype,"_inLoadingNext",void 0),Kl([Object(r.f)()],Jl.prototype,"_libraryItems",void 0),Kl([Object(r.f)()],Jl.prototype,"_libraryCount",void 0),Kl([Object(r.f)()],Jl.prototype,"_libraryName",void 0),Kl([Object(r.f)()],Jl.prototype,"_libraryDesc",void 0),Kl([Object(r.f)()],Jl.prototype,"_bing",void 0),Jl=Kl([Object(r.c)("modal-library-preview")],Jl);var tc=i(800),ec=i.n(tc),ic=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let oc=class extends a.a{constructor(){super(...arguments),this._wallpaper_source_items=window.__INFINITY__.wallpaper_sources,this._itemOptionsPopup="",this._openOrCloseItemOptionsPopup=t=>{t.stopPropagation();const e=t.currentTarget,{itemPopup:i}=e.dataset;i===this._itemOptionsPopup?this._itemOptionsPopup="":this._itemOptionsPopup=i},this._editLibraryPopupShow=!1,this._isNewLibraryPopup=!1,this._library={},this._closeLibraryEditPopup=()=>{this._editLibraryPopupShow&&(this._editLibraryPopupShow=!1),this._isNewLibraryPopup&&(this._isNewLibraryPopup=!1),this._library={}},this._libraryPreviewPopupShow=!1,this._closeLibraryPreviewPopup=()=>{this._libraryPreviewPopupShow&&(this._libraryPreviewPopupShow=!1),this._libraryPreviewSource&&(this._libraryPreviewSource=null)},this._clearSideEffect=()=>{this._closeLibraryEditPopup(),this._closeLibraryPreviewPopup(),Vl.closeIOptionsModal(),this._itemOptionsPopup=""},this._hideItemOptionsPopup=()=>this._itemOptionsPopup&&(this._itemOptionsPopup="")}_checkPSourceAndOpen(t){t.stopPropagation(),this._itemOptionsPopup="";const{dataset:e}=t.target,{psource:i,pname:o}=e;i&&("userLibrary"in e?this._openAndSetLibraryPopup(i,o):this._openAndSetLibraryPreviewPopup(i))}_createWallpaperLibrary({currentTarget:t}){let e=Array.from(t.files).filter(t=>/^image\//.test(t.type));0!==e.length&&(e.length>Vl.maxFileLenPerUpload&&(e=e.slice(0,Vl.maxFileLenPerUpload)),Vl.createWallpaperLibrary(e))}_clickToCreateLibrary(t){return s.userStore.isLogin?1===Vl.customLibrary.length?(t.preventDefault(),void Di.default.error(i18n("wallpaper_create_library_limit"))):(this._isNewLibraryPopup=!0,void this._openAndSetLibraryPopup(`${window.__INFINITY__.wpLibraryId}${Object(Il.a)()}`,i18n("add_new_wallpaper_libary"))):(t.preventDefault(),void Di.default.popupLogin())}_openAndSetLibraryPopup(t,e){this._library={libraryId:t,libraryName:e},this._editLibraryPopupShow=!0}_removeLibrary(t){G.IConfirm.create().toShow({title:i18n("confirm_remove_wallpaper_library"),text:i18n("remove_wallpaper_library_warn"),onConfirm:()=>{const e=Vl.customLibraryMap[t];Array.isArray(e)&&s.wallpaperStore.removeCloudRecentUsedP(e.map(t=>t.id)),Vl.removeWallpaperLibrary(t)}})}_openAndSetLibraryPreviewPopup(t){this._libraryPreviewPopupShow=!0,this._libraryPreviewSource=t}connectedCallback(){super.connectedCallback(),document.body.addEventListener("click",this._clearSideEffect)}disconnectedCallback(){super.disconnectedCallback(),document.body.removeEventListener("click",this._clearSideEffect)}render(){return r.e`
      <section class="auto-wallpaper">
        <div class="ws-items global-scrollbar" @click=${this._checkPSourceAndOpen}>
          <div class="ws-item ws-new-item">
            <label class="wsn-item-label" for="_new-upload-el" @click=${this._clickToCreateLibrary}>
              <i-usesvg class="wsn-item-icon" color="#d4d4d4" iconfont type="icon-xinjianbizhiku"></i-usesvg>
              <span class="wsn-item-text">${i18n("chose_from_mypc")}</span>
            </label>
            <input
              id="new-upload-el"
              type="file"
              accept="image/*"
              multiple
              style="display: none;"
              @change=${this._createWallpaperLibrary}
            />
          </div>

          <!-- user wallpaper library -->
          ${Vl.customLibrary.map(({libraryId:t,libraryName:e})=>r.e`
              <div
                class="ws-item${Vl.pSource===t?" active":""}"
                data-psource=${t}
                data-pname=${e}
                data-user-library
                @mouseleave=${this._hideItemOptionsPopup}
              >
                <i-usesvg class="ws-item-checked-icon" color="#ff8181" iconfont type="icon-xuanzhong"></i-usesvg>
                <img
                  class="ws-item-img"
                  src=${Vl.getLibraryCoverImg(t)||ec.a}
                  decoding="async"
                  importance="auto"
                  width="200"
                />
                <div class="ws-item-info">
                  <strong class="ws-item-name">${e}</strong>
                  <span class="ws-item-desc" style="${s.userStore.isLogin?"":"display: none;"}"
                    >${i18n("wallpaper_library_desc",s.userStore.userInfo.name)}</span
                  >
                </div>

                <div
                  class="wsi-options-bar${this._itemOptionsPopup===t?" active":""}"
                  @click=${this._openOrCloseItemOptionsPopup}
                  data-item-popup=${t}
                  style=${s.wallpaperStore.wpSource===t?"display: none;":""}
                >
                  <div class="wsi-option-icon-wrap">
                    <i-usesvg class="wsi-option-icon" iconfont type="icon-xingzhuangjiehe" color="#fff"></i-usesvg>
                  </div>
                  <ul class="wsi-popup-options">
                    <li class="popup-option-item" @click=${()=>this._removeLibrary(t)}>
                      ${i18n("wallpaper_remove_library")}
                    </li>
                  </ul>
                </div>
              </div>
            `)}

          <!-- cloud -->
          ${this._wallpaper_source_items.map(({img:t,name:e,desc:i,value:o})=>r.e`
              <div class="ws-item${Vl.pSource===o?" active":""}" data-psource=${o}>
                <i-usesvg class="ws-item-checked-icon" color="#ff8181" iconfont type="icon-xuanzhong"></i-usesvg>
                <img class="ws-item-img" src=${t} decoding="async" importance="auto" width="200" />
                <div class="ws-item-info">
                  <strong class="ws-item-name">${e}</strong>
                  <span class="ws-item-desc">${i}</span>
                </div>

                <!-- <div
                  class="wsi-options-bar${this._itemOptionsPopup===e?" active":""}"
                  @click=${this._openOrCloseItemOptionsPopup}
                  data-item-popup=${e}
                >
                  <div class="wsi-option-icon-wrap">
                    <i-usesvg class="wsi-option-icon" iconfont type="icon-xingzhuangjiehe"></i-usesvg>
                  </div>
                  <ul class="wsi-popup-options">
                    <li class="popup-option-item" @click=${()=>this._openAndSetLibraryPreviewPopup(o)}>
                      ${i18n("wallpaper_library_preview")}
                    </li>
                  </ul>
                </div> -->
              </div>
            `)}
        </div>

        <modal-library-edit
          ?open=${this._editLibraryPopupShow}
          .library=${this._library}
          .closeLibraryEditPopup=${this._closeLibraryEditPopup}
          .new=${this._isNewLibraryPopup}
        ></modal-library-edit>

        <modal-library-preview
          ?open=${this._libraryPreviewPopupShow}
          .librarySource=${this._libraryPreviewSource}
          .close=${this._closeLibraryPreviewPopup}
        ></modal-library-preview>
      </section>
    `}};oc.styles=[A.a,Fl],ic([Object(r.f)()],oc.prototype,"_itemOptionsPopup",void 0),ic([Object(r.f)()],oc.prototype,"_editLibraryPopupShow",void 0),ic([Object(r.f)()],oc.prototype,"_isNewLibraryPopup",void 0),ic([Object(r.f)()],oc.prototype,"_library",void 0),ic([Object(r.f)()],oc.prototype,"_libraryPreviewPopupShow",void 0),ic([Object(r.f)()],oc.prototype,"_libraryPreviewSource",void 0),oc=ic([Object(r.c)("auto-wallpaper")],oc);var nc=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let rc=class extends a.a{constructor(){super(...arguments),this.type="image",this._inLoading=!1,this._showImage=({currentTarget:t})=>{this._url=this.content,this._inLoading=!1,t.style.display=""},this._loadError=({currentTarget:t})=>{t.style.display="none"}}updated(t){t.has("content")&&"color"!==this.type&&this._url!==this.content&&!this._inLoading&&(this._inLoading=!0)}render(){return r.e`
      <div
        class="wp-item-raw ${this.type}"
        style="${"color"===this.type?`background-color: ${this.content};`:""}"
      >
        ${"color"!==this.type?r.e`
              <img
                class="wp-item-image"
                src=${this.content}
                width=${Li.imgConfig.smallWidth}
                @load=${this._showImage}
                @error=${this._loadError}
                decoding="async"
                importance="auto"
              />

              <div class="wp-item-loading pre-loading" style=${this._inLoading?"":"display: none;"}>
                <infinito-spin .isSvg=${l.p} class="pre-loading-icon" spinning></infinito-spin>
              </div>
            `:null}
      </div>
    `}};rc.styles=r.b`
    .wp-item-raw {
      width: 100%;
      height: 100%;
      position: relative;
      box-sizing: border-box;
    }

    .wp-item-raw.color {
      border: 1px solid #e9e9e9;
      border-radius: 4px;
    }

    .wp-item-raw .wp-item-image {
      width: 100%;
      height: 100%;
      border-radius: 4px;
      object-fit: cover;
      object-position: center;
    }

    .wp-item-raw .wp-item-loading {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1;
    }

    .wp-item-raw .pre-loading {
      background-color: #f5f5f5;
    }

    .wp-item-raw .pre-loading .pre-loading-icon {
      width: 80px;
      height: 40px;
    }
  `,nc([Object(r.g)({type:String})],rc.prototype,"type",void 0),nc([Object(r.g)({type:String})],rc.prototype,"content",void 0),nc([Object(r.f)()],rc.prototype,"_inLoading",void 0),rc=nc([Object(r.c)("wp-item-raw")],rc);var ac=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let sc=class extends a.a{constructor(){super(...arguments),this._emitCollectEvent=t=>{t.stopPropagation();const e=new CustomEvent("collect",{detail:this.wp.id});this.dispatchEvent(e)},this._emitLikeEvent=t=>{if(t.stopPropagation(),"cloud"!==this.wp.type)return;const e=new CustomEvent("like",{detail:this.wp.id});this.dispatchEvent(e)}}render(){return r.e`
      <div class="wp-item">
        <wp-item-raw .type=${this.wp.type} .content=${this.wp.content}></wp-item-raw>

        <div class="wp-item-mask">
          <!-- collect and like -->
          <div class="mask-wp-other">
            <i-usesvg
              iconfont
              type="icon-caozuo-shoucang-line"
              class="mask-wp-collect"
              .color=${_l.a.includeCollection(this.wp.id)?"#ff5353":"#fff"}
              @click=${this._emitCollectEvent}
              style=${this.disableCollect?"display: none;":""}
            >
            </i-usesvg>
            <span class="mask-wp-like" @click=${this._emitLikeEvent} style=${this.disableLike?"display: none;":""}>
              <i-usesvg
                class="wp-like-icon"
                iconfont
                .color=${_l.a.includeLiked(this.wp.id)?"#ffd45d":"#fff"}
                type="icon-zan-dianji2x"
              >
              </i-usesvg>
              <span class="wp-like-count">${this.wp.like}</span>
            </span>
          </div>
        </div>
      </div>
    `}};sc.styles=r.b`
    .wp-item {
      width: 100%;
      height: 100%;
      position: relative;
      box-sizing: border-box;
    }

    .wp-item .wp-item-mask {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.2);
      opacity: 0;
      transition: opacity 200ms ease-in 0s;
    }

    @media only screen and (hover: none) {
      .wp-item .wp-item-mask {
        opacity: 1;
      }
    }

    .wp-item:hover .wp-item-mask {
      opacity: 1;
    }

    .wp-item .wp-item-mask .mask-wp-other {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 4px 10px;

      box-sizing: border-box;
      display: flex;
      justify-content: space-between;
      align-items: center;

      background: linear-gradient(to top, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0) 100%);
      // border-radius: 6px 6px 4px 4px;
    }

    .wp-item .wp-item-mask .mask-wp-collect {
      width: 16px;
      height: 16px;
      cursor: pointer;
    }

    .wp-item .wp-item-mask .mask-wp-like {
      cursor: pointer;
    }

    .wp-item .wp-item-mask .wp-like-icon {
      width: 16px;
      height: 16px;
      margin-right: 2px;
      vertical-align: middle;
    }

    .wp-item .wp-item-mask .wp-like-count {
      font-size: 12px;
      color: #fff;
      vertical-align: middle;
    }
  `,ac([Object(r.g)({type:Object})],sc.prototype,"wp",void 0),ac([Object(r.g)({type:Boolean})],sc.prototype,"disableLike",void 0),ac([Object(r.g)({type:Boolean})],sc.prototype,"disableCollect",void 0),sc=ac([Object(r.c)("wp-item")],sc);var lc=i(482),cc=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let dc=class extends a.a{constructor(){super(...arguments),this._tabList=["cloud-wallpaper","wallpaper-auto"],this._activeTab=this._tabList[0],this._activeDefaultTab=({currentTarget:t})=>{this._$headerBar.style.left=t.dataset.barLeft,this._activeTab=this._tabList[0]},this._activeWpSource=({currentTarget:t})=>{this._$headerBar.style.left=t.dataset.barLeft,this._activeTab=this._tabList[1]},this._life_once=!1,this._lockLoadUserWp=!1}initHeaderBar(){if(this._$headerBar){if(this._$headerBar.classList.contains("active"))return;const t=this._$headerItems.item(0);this._$headerBar.style.left=t.dataset.barLeft,this._$headerBar.classList.add("active")}}_initHeaderBarPos(){if(this._$headerItems&&0!==this._$headerItems.length){let t=1;for(const e of this._$headerItems){let i=e.offsetLeft+e.clientWidth/2;1===t&&(i-=15,t++),e.dataset.barLeft=i+"px"}}}loadUserWpNeededRaw(){const t=[];return t.push(Vl.loadUserWallpaperLibrary(),_l.a.loadCollectionP(),_l.a.loadLikedP()),n.a.all(t)}_loadUserWpNeeded(){Object(x.c)(()=>{const{isLogin:t}=lc.userStore;t&&this.loadUserWpNeededRaw().then(()=>{this._lockLoadUserWp=!0}).catch(()=>{Di.default.error(i18n("network_error"))})})}_registerReaction(){Object(x.h)(()=>_l.a.wpSource,t=>Vl.setPSource(t),{fireImmediately:!0}),Object(x.h)(()=>lc.userStore.isLogin,t=>{t||(_l.a.setCloudCollection([]),_l.a.setLiked([]),Vl.setCustomLibrary([]),Vl.clearCustomLibraryMap())})}async _afterShow(){await this.updateComplete,this._initHeaderBarPos(),this.initHeaderBar(),this._registerReaction(),El.initDataIfNeeded()}updated(t){t.has("open")&&this.open&&(this._life_once||(this._afterShow(),this._life_once=!0),this._lockLoadUserWp||this._loadUserWpNeeded(),this._$cloudWallpaper&&this._$cloudWallpaper.whenOpen())}render(){return r.e`
      <div class="modal-wallpaper">
        <div class="modal-wallpaper-header">
          <div class="title${this._activeTab===this._tabList[0]?" active":""}" @click=${this._activeDefaultTab}>
            ${i18n("wallpaper_choose_single")}
          </div>
          <div class="title${this._activeTab===this._tabList[1]?" active":""}" @click=${this._activeWpSource}>
            ${i18n("wallpaper_choose_library")}
          </div>
          <i class="mw-header-bar"></i>
        </div>

        <div class="modal-wallpaper-content">
          <cloud-wallpaper
            class="content-cloud-wallpaper"
            style="${this._activeTab===this._tabList[0]?"":"display: none;"}"
          >
          </cloud-wallpaper>

          <auto-wallpaper
            class="content-auto-wallpaper"
            style="${this._activeTab===this._tabList[1]?"":"display: none;"}"
          >
          </auto-wallpaper>
        </div>
      </div>
    `}};dc.styles=xl,cc([Object(r.g)({type:Boolean})],dc.prototype,"open",void 0),cc([Object(r.h)(".modal-wallpaper-header .mw-header-bar")],dc.prototype,"_$headerBar",void 0),cc([Object(r.i)(".modal-wallpaper-header .title")],dc.prototype,"_$headerItems",void 0),cc([Object(r.f)()],dc.prototype,"_activeTab",void 0),cc([Object(r.h)(".modal-wallpaper-content >.content-cloud-wallpaper")],dc.prototype,"_$cloudWallpaper",void 0),dc=cc([Object(r.c)("wallpaper-default")],dc);var pc=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let hc=class extends a.a{constructor(){super(...arguments),this.show=!1,this.onCloseModal=()=>s.pluginStore.hideLast()}render(){return r.e`
      <infinito-portal-entrance destination="modal-wallpaper-default">
        <infinito-modal style="--modal-padding:0px" ?open=${this.show} .onCancel=${this.onCloseModal}>
          <wallpaper-default slot="body" ?open=${this.show}></wallpaper-default>
        </infinito-modal>
      </infinito-portal-entrance>
    `}};pc([Object(r.g)({type:Boolean})],hc.prototype,"show",void 0),hc=pc([Object(r.c)("modal-wallpaper-default")],hc);var uc=r.b`:host {
  --dot-color: #333;
  --dot-hover: #fff;
  border-radius: 4px;
  --padding: 6px 0;
  --dot-width: 3px;
}
:host([disabled]) {
  cursor: not-allowed !important;
}
:host(.active) {
  opacity: 1 !important;
}
:host(.active) #dot {
  background: var(--dot-hover);
}
:host(.note-item-menu:focus) #dot {
  background: var(--dot-hover);
}
:host(.small) {
  --padding: 4px 0;
  --dot-width: 4px;
}
::slotted(li) {
  box-sizing: border-box;
  padding: 7px 14px;
  margin: 0;
  list-style: none;
  text-align: center;
  transition: all 300ms;
  font-size: 14px;
}
::slotted(li:hover) {
  background: #f5f5f5;
}
ul {
  box-sizing: border-box;
  padding: 7px 0;
  margin: 0;
}
.dot-expanded-container {
  position: relative;
}
.dot {
  box-sizing: border-box;
  display: flex;
  flex-flow: column;
  align-items: center;
  justify-content: space-around;
  padding: var(--padding);
  width: 32px;
  height: 32px;
  border-radius: 4px;
}
.dot:hover {
  background: var(--dot-hover);
}
.dot span {
  width: var(--dot-width);
  height: var(--dot-width);
  border-radius: 50%;
  background: var(--dot-color);
}
.modal {
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 99;
  display: block;
  cursor: default;
  position: fixed;
}
.drop-wrapper {
  display: none;
  position: fixed;
  background: #fff;
  box-shadow: 0px 2px 16px 0px rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  font-size: 12px;
  color: #333;
  z-index: 999;
  overflow: hidden;
}
.drop-wrapper.drop-open {
  display: inline-block;
}
`,gc=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let fc=class extends r.a{constructor(){super(...arguments),this.isDropdown=!1,this.disabled=!1,this.liNodes=[],this.renderDot=t=>{if(t.preventDefault(),t.stopPropagation(),this.disabled)return;this.classList.add("active");const e=document.createElement("div");e.className="dot-wrapper",this.$ele=e;const i=document.createElement("div");i.className="infinity-modal";const o=document.createElement("ul");if(o.className="dot-ul",this.liNodes.forEach(t=>{t.style.cssText="",o.appendChild(t)}),e.appendChild(i),e.appendChild(o),document.body.appendChild(e),"DIV"===t.currentTarget.tagName){const e=t.currentTarget.getBoundingClientRect(),{bottom:i,right:n,top:r}=e,a=window.innerWidth,l=document.body.clientHeight;o.style.right=a-n+"px";const c=o.clientHeight,d=this.clientHeight*s.settingStore.sideScaleRatio;o.style.top=r+c+d>=l?r-c+"px":i+"px"}o.addEventListener("click",t=>{"LI"===t.target.tagName&&(document.body.removeChild(e),this.classList.remove("active"))}),i.addEventListener("click",()=>{document.body.removeChild(e),this.classList.remove("active")})}}firstUpdated(){this.dot.addEventListener("mousedown",t=>t.stopPropagation()),this.dot.addEventListener("touchstart",t=>t.stopPropagation()),this.dot.addEventListener("touchend",this.renderDot),this.dot.addEventListener("click",this.renderDot)}render(){const t={"drop-wrapper":!0,"drop-open":this.isDropdown};return r.e`
      <div class="dot-expanded-container">
        <div id="dot" class="dot">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class=${Object(Y.a)(t)}>
          <ul>
            <slot id="slot" @slotchange="${this.slotChange}"></slot>
          </ul>
        </div>
      </div>
    `}slotChange(){this.requestUpdate()}updated(){const t=this.liSlot.assignedNodes();if(t&&t.length)for(let e=0;e<t.length;e++){const i=t[e];"LI"===i.tagName&&this.liNodes.push(i)}}};fc.styles=uc,gc([Object(r.h)("#dot")],fc.prototype,"dot",void 0),gc([Object(r.h)(".drop-wrapper")],fc.prototype,"dropWrapper",void 0),gc([Object(r.h)("#slot")],fc.prototype,"liSlot",void 0),gc([Object(r.g)({type:Boolean,reflect:!0})],fc.prototype,"isDropdown",void 0),gc([Object(r.g)({type:Boolean,reflect:!0})],fc.prototype,"disabled",void 0),fc=gc([Object(r.c)("i-dot-expanded")],fc);var mc=r.b`.wrapper {
  position: relative;
  width: 800px;
  border-radius: 40px;
  overflow: hidden;
}
.wrapper .close-btn {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 30px;
  height: 30px;
  top: 26px;
  right: 28px;
  cursor: pointer;
  transition: opacity 300ms;
}
.wrapper .close-btn:hover {
  opacity: 0.8;
}
.wrapper .close-btn img {
  width: 14px;
  height: 14px;
}
.bg {
  width: 100%;
  padding: 20px;
  box-sizing: border-box;
}
.bg img {
  display: block;
  width: 100%;
  height: 100%;
  border-radius: 20px;
}
.content {
  display: flex;
  width: 100%;
  box-sizing: border-box;
  min-height: 240px;
  padding: 20px;
}
.items {
  box-sizing: border-box;
  flex: 1;
  display: flex;
  flex-flow: column;
  align-items: center;
  overflow: hidden;
}
.tips {
  width: 100%;
  font-size: 22px;
  font-family: PingFangSC-Semibold, PingFang SC;
  font-weight: 600;
  color: #333333;
  line-height: 30px;
  margin: 0;
  text-align: center;
  word-break: break-word;
}
.setting-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 160px;
  height: 48px;
  margin-top: 27px;
  padding: 0 20px;
  background: #151515;
  border-radius: 24px;
  font-size: 16px;
  font-family: PingFangSC-Medium, PingFang SC;
  font-weight: 500;
  color: #FFFFFF;
  line-height: 22px;
  border: none;
  outline: none;
  cursor: pointer;
  transition: all 0.3s ease-out;
}
.setting-btn:hover {
  transform: translateY(-4px);
  box-shadow: 0px 8px 16px 0px rgba(110, 70, 255, 0.3);
}
.setting-btn > img {
  margin-right: 12px;
}
.hidden-option {
  margin-top: 24px;
  display: flex;
  align-items: center;
  cursor: pointer;
}
.hidden-option .text {
  padding-left: 8px;
  font-size: 12px;
  font-family: PingFangSC-Regular, PingFang SC;
  font-weight: 400;
  color: #9BA3AE;
  line-height: 17px;
}
.spacer {
  width: 1px;
  height: 160px;
  margin-top: -10px;
  background: #DEDEDE;
}
.browsers {
  display: flex;
  margin-top: 23px;
  justify-content: space-evenly;
  width: 100%;
}
.browsers.m-40 {
  justify-content: center;
}
.browsers.m-40 > div {
  width: 100px;
}
.browsers.m-40 > div:not(:last-child) {
  margin-right: 15px;
}
.browsers > div {
  display: flex;
  flex-flow: column;
  align-items: center;
  width: 80px;
  cursor: pointer;
  transition: opacity 300ms;
  text-align: center;
}
.browsers > div:hover {
  opacity: 0.8;
}
.browsers > div > div {
  position: relative;
}
.browsers img {
  width: 32px;
  height: 32px;
  margin-bottom: 8px;
}
.browsers img.recommand {
  position: absolute;
  top: 0;
  right: -12px;
  width: 24px;
  height: 12px;
}
.browsers p {
  margin: 0;
  font-size: 12px;
  font-family: PingFangSC-Regular, PingFang SC;
  font-weight: 400;
  color: #9BA3AE;
  line-height: 17px;
}
.checkbox-div {
  position: relative;
  width: 13px;
  height: 13px;
}
label {
  box-sizing: border-box;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 1px solid #9BA3AE;
  border-radius: 50%;
  cursor: pointer;
}
label::after {
  content: '';
  position: absolute;
  width: 4px;
  height: 2px;
  top: 3px;
  left: 2.5px;
  border: 2px solid #fff;
  border-top: none;
  border-right: none;
  background: transparent;
  opacity: 0;
  transform: rotate(-45deg);
}
input[type='checkbox'] {
  visibility: hidden;
}
input[type='checkbox']:checked + label {
  background: #000;
}
input[type='checkbox']:checked + label::after {
  opacity: 1;
}
`,bc=i(667),yc=i.n(bc),vc=i(668),wc=i.n(vc),xc=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const{isZh:_c}=l.D,kc=[{name:i18n("extfans"),desc:"extfans",url:_c?"https://www.extfans.com/productivity/nnnkddnnlpamobajfibfdgfnbcnkgngh/":"https://www.extfans.com/productivity/dbfmnekepjoapopniengjbcpnbljalfg/"}],Oc=[..._c?kc:[],{name:i18n("chrome"),desc:"chrome",url:_c?"https://chrome.google.com/webstore/detail/infinity-new-tab-pro/nnnkddnnlpamobajfibfdgfnbcnkgngh":"https://chrome.google.com/webstore/detail/infinity-new-tab/dbfmnekepjoapopniengjbcpnbljalfg?hl=en-US"},{name:i18n("edge"),desc:"edge",url:_c?"https://microsoftedge.microsoft.com/addons/detail/infinity-new-tab-pro/hajlmbnnniemimmaehcefkamdadpjlfa":"https://microsoftedge.microsoft.com/addons/detail/infinity-new-tab/aadnmeanpbokjjahcnikajejglihibpd?hl=en-US"},{name:i18n("firefox"),desc:"firefox",url:_c?"https://addons.mozilla.org/zh-CN/firefox/addon/infinity-new-tab-pro-firefox":"https://addons.mozilla.org/en-GB/firefox/addon/infinity-new-tab"},..._c?[]:kc].map(t=>Object.assign(Object.assign({},t),{src:i(801)(`./${t.desc}.png`)}));let Ac=class extends a.a{render(){const{webClickName:t}=s.settingStore;return r.e`
      <div class="wrapper" @click=${t=>t.stopPropagation()}>
        <div class="close-btn" @click=${()=>s.settingStore.toggleSettingHomeModal()}>
          <img src=${yc.a} />
        </div>
        <div class="bg">
          <img
            class="btn-setting-home"
            src=${Object(it.b)("https://infinityicon.infinitynewtab.com/assets/settinghome-guide-bg.png")}
          />
        </div>
        <div class="content">
          ${t?null:r.e`
                <div class="items">
                  ${i18n("set_infinity_to_homepage").split("_#_").filter(Boolean).map(t=>r.e` <p class="tips">${t}</p> `)}
                  <button class="setting-btn" @click=${this.handleSetting}>
                    <img
                      src="https://infinityicon.infinitynewtab.com/assets/btn-setting-home.png@2x.png"
                      width="16"
                      height="16"
                    />
                    ${i18n("set_to_homepage")}
                  </button>
                  <div class="hidden-option">
                    <div class="checkbox-div">
                      <input
                        type="checkbox"
                        id="checkbox"
                        @change=${this.handleChange}
                        .checked=${!s.settingStore.setting.view.isShowHomepageBtn}
                      />
                      <label for="checkbox"></label>
                    </div>
                    <div class="text" @click=${this.handleInpuClick}>${i18n("hide_set_homepage_btn")}</div>
                  </div>
                </div>
                <div class="spacer"></div>
              `}
          <div class="items">
            ${t?r.e`
                  <div>
                    ${i18n("set_homepage_title2").split("_#_").filter(Boolean).map(t=>r.e` <p class="tips">${t}</p> `)}
                  </div>
                `:r.e`
                  <div>
                    ${i18n("set_homepage_desc").split("_#_").filter(Boolean).map(t=>r.e` <p class="tips">${t}</p> `)}
                  </div>
                `}
            <div
              class=${Object(Y.a)({browsers:!0,"m-40":t})}
            >
              ${Oc.map(t=>r.e`
                  <div class="b-items" @click=${()=>this.handleClick(t.url)}>
                    <div>
                      <img .src=${t.src} />
                      ${"extfans"===t.desc&&_c?r.e`<img class="recommand" .src=${wc.a} />`:null}
                    </div>
                    <p>${t.name}</p>
                  </div>
                `)}
            </div>
          </div>
        </div>
      </div>
    `}handleSetting(){Object(P.c)(location.origin+"/sethome",{isNewTab:!0})}handleClick(t){Object(P.c)(t,{isNewTab:!0})}handleChange(t){s.settingStore.toggleShowSettingHome(t.target.checked)}handleInpuClick(){const t=this.inputEle.checked;this.inputEle.checked=!t,s.settingStore.toggleShowSettingHome(this.inputEle.checked)}};Ac.styles=mc,xc([Object(r.h)("input")],Ac.prototype,"inputEle",void 0),Ac=xc([Object(r.c)("setting-guide")],Ac);var Sc=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Ic=class extends a.a{constructor(){super(...arguments),this.open=!0}firstUpdated(){document.body.addEventListener("click",()=>{s.settingStore.showSettingHomeModal&&s.settingStore.closeSettingHomeModal()})}render(){return r.e`
      <infinito-portal-entrance destination="setting-home-modal">
        <infinito-modal
          style="--modal-padding: 0; --border-radius: 40px;"
          .closeable=${!1}
          ?open=${s.settingStore.showSettingHomeModal}
          .onCancel=${()=>s.settingStore.toggleSettingHomeModal()}
        >
          <setting-guide slot="body"></setting-guide>
        </infinito-modal>
      </infinito-portal-entrance>
    `}};Sc([Object(r.g)({type:Boolean})],Ic.prototype,"open",void 0),Ic=Sc([Object(r.c)("setting-home")],Ic);var jc=r.b`.wrapper {
  position: relative;
  width: 560px;
  border-radius: 40px;
  overflow: hidden;
}
.wrapper .close-btn {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 30px;
  height: 30px;
  top: 26px;
  right: 28px;
  cursor: pointer;
  transition: opacity 300ms;
}
.wrapper .close-btn:hover {
  opacity: 0.8;
}
.wrapper .close-btn img {
  width: 14px;
  height: 14px;
}
.bg {
  width: 100%;
  padding: 20px;
  box-sizing: border-box;
}
.bg img {
  display: block;
  width: 100%;
  height: 100%;
  border-radius: 20px;
}
.content {
  display: flex;
  width: 100%;
  box-sizing: border-box;
  min-height: 170px;
  padding: 0 20px 20px;
}
.items {
  box-sizing: border-box;
  flex: 1;
  display: flex;
  flex-flow: column;
  align-items: center;
  overflow: hidden;
}
.tips {
  width: 100%;
  margin: 0;
  font-size: 24px;
  font-family: PingFangSC-Semibold, PingFang SC;
  font-weight: 600;
  color: #333333;
  line-height: 33px;
  text-align: center;
  word-break: break-word;
}
.setting-btn {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 160px;
  height: 48px;
  margin-top: 22px;
  padding: 0 20px;
  background: #151515;
  border-radius: 24px;
  font-size: 16px;
  font-family: PingFangSC-Medium, PingFang SC;
  font-weight: 500;
  color: #FFFFFF;
  line-height: 22px;
  border: none;
  outline: none;
  cursor: pointer;
  transition: background 300ms;
  z-index: 1;
}
.setting-btn:hover {
  background: #2B2932;
}
.setting-btn:hover > img {
  transform: translateX(4px);
}
.setting-btn > img {
  display: block;
  width: 12px;
  height: 12px;
  margin-left: 16px;
  transition: transform 0.3s ease-out;
}
.img-box img {
  position: absolute;
}
.img-box .img-1 {
  width: 21px;
  height: 21px;
  top: 199px;
  left: 85px;
  animation: animationFramesTwo 15s linear infinite;
}
.img-box .img-2 {
  width: 31px;
  height: 32px;
  top: 198px;
  right: 159px;
  animation: animationFramesOne 20s linear infinite alternate;
}
.img-box .img-3 {
  width: 21px;
  height: 21px;
  bottom: 94px;
  right: 26px;
  animation: animationFramesOne 14s linear infinite alternate;
}
.img-box .img-4 {
  width: 35px;
  height: 35px;
  bottom: 10px;
  right: 203px;
  animation: animationFramesTwo 10s linear infinite;
}
.img-box .img-5 {
  width: 19px;
  height: 20px;
  bottom: 62px;
  left: 138px;
  animation: animationFramesOne 17s linear infinite;
}
.img-box .img-6 {
  width: 31px;
  height: 35px;
  bottom: 11px;
  left: 53px;
  animation: animationFramesTwo 17s linear infinite;
}
@keyframes animationFramesOne {
  0% {
    transform: translate(0) rotate(0deg);
  }
  20% {
    transform: translate(73px, -1px) rotate(36deg);
  }
  40% {
    transform: translate(141px, 72px) rotate(72deg);
  }
  60% {
    transform: translate(83px, 122px) rotate(108deg);
  }
  80% {
    transform: translate(-40px, 72px) rotate(144deg);
  }
  to {
    transform: translate(0) rotate(0deg);
  }
}
@keyframes animationFramesTwo {
  0% {
    transform: translate(0) rotate(0deg) scale(1);
  }
  20% {
    transform: translate(73px, -1px) rotate(36deg) scale(0.9);
  }
  40% {
    transform: translate(141px, 72px) rotate(72deg) scale(1);
  }
  60% {
    transform: translate(83px, 122px) rotate(108deg) scale(1.2);
  }
  80% {
    transform: translate(-40px, 72px) rotate(144deg) scale(1.1);
  }
  to {
    transform: translate(0) rotate(0deg) scale(1);
  }
}
`,$c=i(669),Cc=i.n($c),Ec=i(670),Tc=i.n(Ec),Pc=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};const Rc=[];for(let t=1;t<7;t++)Rc.push(i(807)(`./${t}.png`));let Lc=class extends a.a{render(){return r.e`
      <div class="wrapper" @click=${t=>t.stopPropagation()}>
        <div class="close-btn" @click=${()=>s.userStore.toggleLoginTipModal()}>
          <img src=${Cc.a} />
        </div>
        <div class="bg">
          <img
            class="btn-setting-home"
            src=${Object(it.b)("https://infinityicon.infinitynewtab.com/assets/login-tips-bg.png")}
          />
        </div>
        <div class="content">
          <div class="items">
            <p class="tips">Hello!</p>
            <p class="tips">${i18n("you_need_login")}</p>
            <button class="setting-btn" @click=${this.handleSetting}>
              ${i18n("login_now_btn")}
              <img src=${Tc.a} width="16" height="16" />
            </button>
          </div>
        </div>
        <div class="img-box">${Rc.map((t,e)=>r.e` <img class="img-${e+1}" src=${t} /> `)}</div>
      </div>
    `}handleSetting(){s.userStore.toggleLoginTipModal(),s.userStore.openModal()}};Lc.styles=jc,Lc=Pc([Object(r.c)("login-tips-content")],Lc);var Dc=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};let Mc=class extends a.a{firstUpdated(){document.querySelector('infinito-portal-destination[name="login-tips"]').addEventListener("click",()=>{s.userStore.closeLoginTipModal()})}render(){return r.e`
      <infinito-portal-entrance destination="login-tips">
        <infinito-modal
          style="--modal-padding: 0; --border-radius: 40px;"
          .closeable=${!1}
          ?open=${s.userStore.showLoginTipModal}
          .onCancel=${()=>s.userStore.toggleLoginTipModal()}
        >
          <login-tips-content slot="body"></login-tips-content>
        </infinito-modal>
      </infinito-portal-entrance>
    `}};Mc=Dc([Object(r.c)("login-tips")],Mc);var Uc=function(t,e,i,o){var n,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,i,a):n(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a};i.e(32).then(i.bind(null,840)),i.e(28).then(i.bind(null,838)),i.e(31).then(i.bind(null,841)),i.e(36).then(i.bind(null,842)),async function(){if(l.l&&chrome.runtime.onMessage.addListener(({key:t,data:e})=>{switch(t){case"gmail-number-updated":s.gmailStore.update(e);break;case"tabs-update-bookmarks":O.updateBookmarks();break;case"login":s.userStore.login3rdSuccess(e);break;case"cancelLogin":s.userStore.cancelLogin();break;case"open-todo":s.pluginStore.show("infinity://todos")}}),Gi.slave.listenMessage("tabs-time-to-switch-wallpaper",()=>s.wallpaperStore.timeToSwitchWallpaper()),Gi.slave.listenMessage("tabs-sync",s.syncTabsStore),Gi.slave.listenMessage("tabs-sync-status",s.syncStore.changeSyncStatus),Gi.slave.listenMessage("tabs-reload",()=>location.reload()),Gi.slave.listenMessage("websocket-sync",s.syncStore.getAutoLatest),l.s){await Gi.slave.postTask("slave:prefetch")&&await i.e(10).then(i.bind(null,839))}}();let Nc=class extends a.a{firstUpdated(){this.addEventListener("on-close",t=>{t.stopPropagation(),this.hide()}),this.initNeededDom(["side-profile","wallpaper"]),l.s&&document.referrer.includes(l.w)&&!sessionStorage.getItem("tutorial_reffer")&&s.pluginStore.show("side-tutorial")}initNeededDom(t){requestIdleCallback(e=>{for(;e.timeRemaining()&&t.length>0;)s.pluginStore.initDom(t.pop());t.length>0&&this.initNeededDom(t)})}hide(){s.pluginStore.hideLast()}render(){const{pluginsTags:t,pluginViews:e}=s.pluginStore;return r.e`
      ${t["side-profile"]?r.e`
            <i-side2 ?show=${e.includes("infinity://settings")||e.includes("profile")}>
              <side-profile></side-profile>
            </i-side2>
          `:null}
      ${t["side-weather"]?r.e`
            <i-side2 ?show="${e.includes("infinity://weather")}">
              <side-weather></side-weather>
            </i-side2>
          `:null}
      ${t["side-todos"]?r.e`
            <i-side2 ?show="${e.includes("infinity://todos")}">
              <side-todos></side-todos>
            </i-side2>
          `:null}
      ${t["side-notes"]?r.e`
            <i-side2 .duration="${250}" style="--side-width:780px" ?show="${e.includes("infinity://notes")}">
              <side-notes></side-notes>
            </i-side2>
          `:null}
      ${t["side-search"]?r.e`
            <i-side2 ?show=${e.includes("search")}>
              <side-search></side-search>
            </i-side2>
          `:null}
      ${t["side-editicon"]||B.iconEditing?r.e`
            <i-side2 ?show="${e.includes("editIcon")}">
              <side-editicon></side-editicon>
            </i-side2>
          `:null}
      ${l.l&&t["side-history"]?r.e`
            <i-side2 ?show="${e.includes("infinity://history")}">
              <side-history></side-history>
            </i-side2>
          `:null}
      ${l.l&&t["side-bookmarks"]?r.e`
            <i-side2 ?show="${e.includes("infinity://bookmarks")}">
              <side-bookmarks></side-bookmarks>
            </i-side2>
          `:null}
      ${l.l&&t["side-extension"]?r.e`
            <i-side2 ?show="${e.includes("infinity://extension")}">
              <side-extension></side-extension>
            </i-side2>
          `:null}
      <!-- 切换壁纸弹窗 -> 非自动切换类型 -->
      ${t.wallpaper?r.e`<modal-wallpaper-default
            ?show=${e.includes("infinity://wallpaper")}
          ></modal-wallpaper-default>`:null}
      ${l.l&&t["chrome-apps"]?r.e`<chrome-apps></chrome-apps>`:null}
      ${l.s?r.e`<setting-home></setting-home>`:null} ${l.s?r.e`<login-tips></login-tips>`:null}
      ${l.s&&t["side-tutorial"]?r.e`
            <i-side2 .maskClosable=${!1} ?show="${e.includes("side-tutorial")}">
              <side-tutorial></side-tutorial>
            </i-side2>
          `:null}
    `}createRenderRoot(){return this}};Nc=Uc([Object(r.c)("plugin-box")],Nc);const Bc=()=>{const t=document.querySelector(".main-middle");t.classList.add("hide"),requestIdleCallback(()=>{document.querySelector(".wallpaper").classList.add("ready"),t.parentNode.removeChild(t)}),document.querySelector("newtab-main").classList.remove("hide-opacity")};let Fc=0;const zc=()=>{Fc+=1,setTimeout(()=>{window.__INFINITY__.startAnimationEnd?Bc():Fc>20?(window.__INFINITY__.startAnimationEnd=!0,Bc()):zc()},30)},Hc=async()=>{console.time("level1-main"),await new n.a(t=>{Object(x.c)(()=>{s.settingStore.firstSync&&s.siteStore.firstSync&&s.searchStore.firstSync&&setTimeout(t,0)}),document.oncontextmenu=function(t){const e=t.composedPath()[0];return!!c.a.isInputType(e)},document.body.addEventListener("dragstart",t=>{t.preventDefault()}),c.a.send({key:"bg-open-newtab"})}),Array.prototype.filter.call(document.body.children,t=>"SCRIPT"!==t.nodeName).forEach(t=>{t.addEventListener("wheel",t=>{t.ctrlKey&&t.preventDefault()})}),window.__INFINITY__.startAnimationEnd?Bc():zc(),console.timeEnd("level1-main")},Wc=async()=>{window.__INFINITY__.maxLocalFileSize=5242880,window.__INFINITY__.xMaxLocalFileSize=10485760,window.__INFINITY__.minFileMaxWidthOrHeight=8192,console.time("level2-plugin"),await new n.a(t=>{setTimeout(()=>{t(null)},0)});const{createWorkBox:t}=await i.e(11).then(i.bind(null,615));await t(),console.timeEnd("level2-plugin")}}])]);